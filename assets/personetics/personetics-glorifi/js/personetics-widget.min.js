function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(u){u.processor=u.processor||{};var a=/Date\s+([A-Za-z\.\[\]\(\)\'\,\_\-0-9]*)(?:\s+format='(.*)')?/,l=/Emoji\s+([A-Za-z\.\[\]\(\)\'\,\_\-0-9]*)?/,c=/Amount\s+([A-Za-z\d\.\[\]\(\)\'\,\_\/\*\+\-]*)(?:\s+format='([#0,\.\+ \-@]*)')?(?:\s+currency='(.*)')?/,p=/String\s+([A-Za-z\d\.\[\]\(\)\'\,\/\*\+\-]*)?(?:\s+maxLength='(.*)')?/,s=["BinaryExpression","UnaryExpression","Identifier","Literal","ArrayExpression","MemberExpression","CallExpression"],h=(u.processor.PExp=function(t){this.str=this.compile(t);try{this.exp=jsep(this.str)}catch(e){u.error("PExp('"+this.str+"') Error -Invalid expression: '"+t+" '"+e.stack,!1,e)}},u.processor.PExp.prototype.binops={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return 0==t?0:e/t},"%":function(e,t){return e%t},"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return t<e},">=":function(e,t){return t<=e}},u.processor.PExp.prototype.logicOps={"||":function(e,t){return e||t},"&&":function(e,t){return e&&t}},u.processor.PExp.prototype.unops={"-":function(e){return-e},"+":function(e){return e}},u.processor.PExp.prototype.compile=function(e){var t,s,o=e,n=e.match(a),n=(n&&(t=n[1],s=null,2<n.length&&n[2]&&(s="'"+n[2]+"'"),e="utils.formatDate("+t+","+s+")"),e.match(c));n&&(t=n[1],(r=s=null)!=(i=n[2])&&0<i.length&&(s="'"+n[2]+"'"),"string"==typeof(r=void 0!==n[3]&&null!==n[3]?n[3]:r)&&""===(r=r.replace(/^\s+|\s+$/g,""))&&(r='""'),e="utils.formatAmount("+t+", "+r+", "+s+")",e=o.replace(c,function(){return e}));var r,i=(e=e.match(l)?"'{{"+e+"}}'":e).match(p),n=null;return i&&(t=i[1],null!=(r=i[2])&&0<r.length&&(n=i[2]),e="utils.limitString("+t+","+n+")",e=o.replace(p,e)),e},u.processor.PExp.prototype.eval=function(e,t,s){var o=!1,n=null;try{u.log("PExp: attempting to evaluate expression: '"+this.str+"'"),u.log(this.str);var r=new Date,i=this.evalNode(this.exp,e,t,s),a=new Date;u.log("Exp in ms"+(a-r)),null==i&&(o=!0,n=new Error("PExp.eval('"+this.str+"') Error - Invalid result after evaluating expression: '"+i+"'"))}catch(e){o=!0,n={message:"PExp.eval('"+this.str+"') Error - Could not evaluate expression Error Message: "+e.message,stack:e.stack}}if(!o)return i;u.error(n.message,!1,n)},u.processor.PExp.prototype.evalNode=function(e,t,s,o){if("BinaryExpression"===e.type)a=this.evalNode(e.left,t,s,o),c=this.evalNode(e.right,t,s,o),i=this.binops[e.operator](a,c);else if("LogicalExpression"===e.type)a=this.evalNode(e.left,t,s,o),c=this.evalNode(e.right,t,s,o),i=this.logicOps[e.operator](a,c);else if("UnaryExpression"===e.type)i=this.unops[e.operator](this.evalNode(e.argument,t,s,o));else if("Identifier"===e.type)null==(i=u.processor.PUtils.getUtilsInstance(e.name,t,s))&&(i=this.getChild(t,e.name,t,s,o)),null!=s&&null==i&&(i=this.getChild(s,e.name,t,s,o));else if("Literal"===e.type)i=e.value;else if("ArrayExpression"===e.type){var n=[];for(l in e.elements){var r=e.elements[l],r=this.evalNode(r,t,s,o);n.push(r)}i=n}else if("MemberExpression"===e.type){var i,a=this.evalNode(e.object,t,s,o);"function"==typeof(i="Identifier"==e.property.type?this.getChild(a,e.property.name,t,s,o):(c=this.evalNode(e.property,a,s,o),this.getChild(a,c,o,t,s,o)))&&(i=new h(a,i))}else if("CallExpression"===e.type){var l,c=this.evalNode(e.callee,t,s,o),p=[];for(l in e.arguments){var d=e.arguments[l],d=this.evalNode(d,t,s,o);p.push(d)}c&&Object.prototype.isPrototypeOf.call(h.prototype,c)||(a=new Error("TypeError: evalNode function - Cannot find function '"+e.callee.property.name+"' of '"+e.callee.object.name+"'"),u.error(a.message,!1,a)),i=c.call(p)}return i},u.processor.PExp.prototype.getChild=function(e,t,s,o,n){return e&&(void 0!==(r=Object.prototype.isPrototypeOf.call(u.processor.PDataSource.prototype,e)?e.get(t,n):r)&&null!=r?r:e[t]);var r},u.processor.PExp.prototype.isNode=function(e){var t=!1;return e&&Object.prototype.hasOwnProperty.call(e,"type")&&(e=e.type,t=0<=s.indexOf(e)),t},function(e,t){var s;e||(s=new Error("No obj provided to bound function"),u.error(s.message,!1,s)),this.obj=e,this.func=t});h.prototype.call=function(e){return this.func.apply(this.obj,e)}}((window,window.Personetics=window.Personetics||{})),function(c,p){p.processor=p.processor||{},p.processor.PAction=function(){function i(e,t,s){var o,n,r=p.utils.persoHelper.deepObjectExtend({},e,!0);for(o in r)"object"==_typeof(r[o])&&null!==r[o]?Array.isArray(r[o])?(r[o]=i(r[o],t,s),r[o]=a(r[o])):r[o]=i(r[o],t,s):(n=l(r[o],s),r[o]=null!==n&&isNaN(n)?n.eval(t,s):n);return r}function o(e){var t=/{{([^\n\t\v{}]*)}}/g;return t=isNaN(e)&&e.match(t)&&e.match(t).length?e.replace("{{","").replace("}}",""):!isNaN(e)||r(e)?e:s(e)}function t(e){var t,s=c.PBlockProcessorManager.getInstance().getModel(),o=!(!Object.prototype.hasOwnProperty.call(s.cache,e)||!s.cache[e]);if(s&&(t=p.utils.persoHelper.deepObjectExtend({},{data:s.data,expressions:s.expressions,expressionsConfigs:s.expressionsConfigs,exps:s.exps,facts:s.facts,factsConfigs:s.factsConfigs},!0)),!o)for(var n in t)if(t[n]&&"object"===_typeof(t[n])&&Object.prototype.hasOwnProperty.call(t[n],e)&&t[n][e]){o=!0;break}return o}function n(e,t){var s=e;return s=t&&e&&t.expressions?t.expressions[e]||e:s}var a=function(e){var t,s=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&s.push(e[t]);return s},s=function(e){return e=e&&"'"!==e.charAt(0)&&"'"!==e.charAt(e.length-1)?"'"+(e=e.replace(/'/g,'"'))+"'":e},l=function(e,t){var s;return e&&isNaN(e)?(s=o(e),s=n(s,t),new p.processor.PExp(s)):e},r=function(e){if(e)return e=e.split(".")[0],t(e)};return{processAction:function(e,t,s){return i(e,t,s)}}}}(window,window.Personetics=window.Personetics||{}),window,(window.Personetics=window.Personetics||{}).pstoryDictionary=new function(){this.monthNames={"en-short":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],en:["January","February","March","April","May","June","July","August","September","October","November","December"],he:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],"he-short":["ינו'","פבר'","מרץ","אפר'","מאי","יונ'","יול'","אוג'","ספט'","אוק'","נוב'","דצמ'"],"es-short":["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],es:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],fr:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],"fr-short":["Jan","Fév","Mar","Avr","Mai","Jun","Jul","Aoû","Sep","Oct","Nov","Déc"],th:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],"th-short":["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],de:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],"de-short":["Jan.","Feb.","März","Apr.","Mai","Jun.","Jul.","Aug.","Sept.","Okt.","Nov.","Dez."],zh:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],"zh-short":["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],ko:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],"ko-short":["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],ja:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"ja-short":["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],it:["gennaio","febbraio","marzo","aprile"," maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],"it-short":["GEN","FEB","MAR","APR","MAG","GIU","LUG","AGO","SET","OTT","NOV","DIC"],pt:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],"pt-short":["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},this.weekDays={en:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"en-short":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"en-short-default":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],he:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],es:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],de:["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],fr:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],zh:["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],"zh-short":["周一","周二","周三","周四","周五","周六","周日"],ko:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],"ko-short":["일","월","화","수","목","금","토"],ja:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],"ja-short":["日","月","火","水","木","金","土"],it:["lunedì","martedì","mercoledì","giovedì","venerdì","sabato","domenica"],"it-short":["lun","mar","mer","gio","ven","sab","do"],pt:["Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado","Domingo"],"pt-short":["Seg","Ter","Qua","Qui","Sex","Sab","Dom"]}},function(w){function e(){this._instance={},this.utilsFactory={utils:o,dateUtils:s,amountUtils:t}}e.prototype.getUtilsInstance=function(e,t,s){var o;return Object.prototype.hasOwnProperty.call(this.utilsFactory,e)&&(Object.prototype.hasOwnProperty.call(this._instance,e)?void 0!==(o=this._instance[e]).context&&null!=o.context||o.setContext(t,s):(o=this.utilsFactory[e],this._instance[e]=new o(t,s))),this._instance[e]};var t=function(e,t){this.context=e,this.parentContext=t},s=(t.prototype.setContext=function(e,t){this.context=e||this.context,this.parentContext=t||this.parentContext},function(e,t){this.context=e,this.parentContext=t,this.monthNumbers=[1,2,3,4,5,6,7,8,9,10,11,12],this.monthNames=w.pstoryDictionary.monthNames}),o=(s.prototype.getMonthName=function(e){return this.monthNames[e]||this.monthNames.en},s.prototype.getMonthNumber=function(e,t){return this.monthNames[e]||(e=w.UI.PWidgetsTextsFactory.defaultLang),this.monthNames[e]&&this.monthNames[e].indexOf(t.replace(/'/gi,""))},s.prototype.setContext=function(e,t){this.context=e||this.context,this.parentContext=t||this.parentContext},s.prototype.getday=function(e,t){return this.getDay(e,t)},s.prototype.getDay=function(e,t){w.log("Calling dateUtils.getDay("+e+", "+t+")");var s=(s=e.split(".")[0].replace(/T/g," ")).split("-").join("/"),s=(e=isNaN(Date.parse(s))?e:s,new Date(e)),e=s.getDate(),t=parseInt(t),e=isNaN(t)?e:(s.setDate(e+t),s.getDate());return w.log("Result: "+e),e},s.prototype.getmonth=function(e,t){return this.getMonth(e,t)},s.prototype.getMonth=function(t,e){w.log("Calling dateUtils.getMonth("+t+", "+e+")");var s=(s=t.split(".")[0].replace(/T/g," ")).split("-").join("/"),s=(t=isNaN(Date.parse(s))?t:s,new Date(t)),o=s.getMonth();if(void 0===o||null==o||isNaN(o))try{"string"==typeof t?isNaN(t)||(o=parseInt(t)):o=t}catch(e){return w.log("dateUtils.getMonth(): invalid input + '"+t+"'"),t}else o=s.getMonth()+1;return e=e?((t=this.monthNumbers.length)<=(s=o+e)?s-=t:s<=0&&(s=t+s),s):o,w.log("Result: "+e),e},s.prototype.getdatemonth=function(e,t){return this.getDateMonth(e,t)},s.prototype.getDateMonth=function(e,t){w.log("Calling dateUtils.getDateMonth("+e+", "+t+")");var s,o=(o=e.split(".")[0].replace(/T/g," ")).split("-").join("/"),o=(e=isNaN(Date.parse(o))?e:o,new Date(e)),n=o.getMonth()+1,r=o.getFullYear(),o=o.getDate();return void 0===n&&null==n&&isNaN(n)?(w.log("dateUtils.getDateMonth(): invalid input + '"+e+"'"),e):(t=t?((s=this.monthNumbers.length)<=(n=n+t)?(n-=s,r+=1):n<=0&&(n=s+n,r-=1),r+"-"+(n=n<10?"0"+n:n)+"-"+(o=o<10?"0"+o:o)):e,w.log("Result: "+t),t)},s.prototype.offsetDate=function(e,t){e=new Date(e);return new Date(e.setDate(e.getDate()+t))},s.prototype.dateDiff=function(e,t,s){var e=new Date(e),t=new Date(t),e=Math.floor(e.getTime()-t.getTime()),o=Math.floor(e/864e5),n=Math.floor(o/7),r=Math.floor(o/31),i=Math.floor(o/365);switch(s){case"w":return n;case"m":return r;case"y":return i;default:return o}},function(e,t){this.context=e,this.parentContext=t,this.monthNames=w.pstoryDictionary.monthNames,this.weekDays=w.pstoryDictionary.weekDays,this.defaultCurrency="",this.tableJoinTypes={INNER:"INNER",LEFT:"LEFT"}});o.prototype.setContext=function(e,t){this.context=e||this.context,this.parentContext=t||this.parentContext},o.prototype.monthname=function(e,t,s){return this.monthName(e,t,s)},o.prototype.monthName=function(t,e,s){if(w.log("Calling utils.monthName("+t+", "+e+","+s+")"),parseInt(t)!=t){var o=new Date(t),n=o.getMonth();void 0===n||null==n||isNaN(n)||(n=o.getMonth())}else try{var r=parseInt(t);if(!(1<=r&&r<=12))return w.log("utils.monthName(): invalid month number + '"+t+"'"),t;n=r-1}catch(e){return w.log("utils.monthName(): invalid input + '"+t+"'"),t}o=w.processor.PStoryConfig.getConfig("lang"),1!=e&&"MMM"!=e||(o+="-short"),r=this.monthNames[o];return r?(e=r[n],1==s&&(e=e.toLowerCase()),w.log("Result: "+e),e):(w.log("utils.monthName(): month names not available + '"+r+"'"),t)},o.prototype.dayname=function(e,t){return this.dayName(e,t)},o.prototype.dayName=function(e){var t="";if(parseInt(e)!=e){var s=new Date(e).getDay();if(void 0===s||null==s||isNaN(s))return w.log("utils.dayName(): invalid weekday"),t}else w.log("utils.dayName(): invalid date + '"+e+"'");var e=w.processor.PStoryConfig.getConfig("lang"),o=this.weekDays[e];return o?o[s]:(w.log("utils.dayName(): weekdays names are not available for "+e),t)},o.prototype.formatdate=function(e,t,s){return this.formatDate(e,t,s)},o.prototype.formatDate=function(s,e,t){w.log("Calling utils.formatDate("+s+", "+e+")"),(null==(s=s.toString())||s.length<=0)&&(o=" Error message: "+(i=new Error("utils.formatDate("+s+", "+e+") Error: invalid dateStr parameter")).message+" Error stack: "+i.stack,w.error(o,!1,i)),void 0!==e&&null!=e||(e=w.processor.PStoryConfig.getConfig("dateFormat"));var o=(o=s.split(".")[0].replace(/T/g," ")).split("-").join("/"),n=(s=isNaN(Date.parse(o))?s:o,isNaN(s)?new Date(s):new Date(null,s-1)),r=e,i=e.split(/[\s\/\\\-\:]/),i=e.match(/(Cdd|CMMM|CM|Cm|dd|DD|d|mmmm|mmm|Lm|LMMM|LM|MMMMM|MMMM|MMM|mm|MM|m|M|YYYY|yy|YY|y|weekday)/g),a=this;return i.forEach(function(e){var t=a.dateFormatToDate(e,n,s);t&&(r=r.replace(e,t))}),t&&(r=this.createAccessibleDateText(r,s,e)),w.log("Result: "+r),r},o.prototype.calcPmt=function(e,t,s){return e*t/12/(1-Math.pow(1+t/12,-s))},o.prototype.dateFormatToDate=function(e,t,s){var o,n,r,i=null;switch(e){case"d":i=o=t.getDate()+"";break;case"dd":i="1"==(r=(o=t.getDate()+"").substring(o.length-1))?o+"st":"2"==r?o+"nd":"3"==r?o+"rd":o+"th","11"!=o&&"12"!=o&&"13"!=o||(i=o+"th");break;case"DD":i=o=(o=t.getDate())<10?"0"+o:o;break;case"mmmm":i=this.monthName(s,!0,!0);break;case"Lm":i=this.monthName(s).toLowerCase();break;case"m":case"MMMM":case"MMMMM":i=this.monthName(s);break;case"M":case"MMM":i=this.monthName(s,!0);break;case"LM":case"LMMM":i=this.monthName(s,!0).toLowerCase();break;case"mm":i=n=t.getMonth()+1;break;case"MM":(i=n=t.getMonth()+1)<10&&(i="0"+i);break;case"mmm":n=t.getMonth()+1,i=this.monthName(n+="");break;case"y":case"YY":case"YYYY":i=t.getFullYear();break;case"yy":i=t.getFullYear().toString().substring(2);break;case"weekday":i=this.dayName(s);break;case"CM":case"CMMM":i=this.monthName(s,!0).toUpperCase();break;case"Cm":i=this.monthName(s).toUpperCase();break;case"Cdd":i="1"==(r=(o=t.getDate()+"").substring(o.length-1))?o+"st":"2"==r?o+"nd":"3"==r?o+"rd":o+"th",i=(i="11"!=o&&"12"!=o&&"13"!=o?i:o+"th").toUpperCase()}return i},o.prototype.createAccessibleDateText=function(e,t,s){var o=s.replace(/(mmm|MMM|mm|MM|m|M)/g,"m");return s===(o=(o=o.replace(/DD/g,"dd")).split(/[\/\\]/).join(" "))?e:"<span class='perso-accessibility-wrapper' role='text'><span class='perso-accessibility-no-read' aria-hidden='true'>"+e+"</span><span class='perso-accessibility-read'>"+this.formatdate(t,o)+"</span></span>"},o.prototype.numberWithCommas=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},o.prototype.toFixed=function(e,t){return"undefined"==e||null==e?0:+e.toFixed(t)},o.prototype.getMax=function(){var e=Array.prototype.slice.call(arguments);return Math.max.apply(null,e)},o.prototype.getMin=function(){var e=Array.prototype.slice.call(arguments);return Math.min.apply(null,e)};o.prototype.formatamount=function(e,t,s){return this.formatAmount(e,t,s)},o.prototype.formatAmount=function(e,t,s){if(w.log("Calling utils.formatAmount("+e+", "+t+", "+s+")"),void 0===e||null==e)return null;e+="",null==s&&(s=w.processor.PStoryConfig.getConfig("amountFormat"));var r,i,a,o,n,l,c,p,d,t={minus:"",accessibilityMinus:"",number:"",dot:"",decimals:"",currency:t=null!=t&&1!=w.processor.PStoryConfig.getConfig("useProjectDefaultCurrency")?t:w.processor.PStoryConfig.getConfig("currencySymbol")},e=(void 0===s||null==s||0==s.length?(n={minus:"",accessibilityMinus:"",number:"",dot:"",decimals:"",currency:""},o=(o=e).replace(/\,/g,""),(o=parseFloat(o).toFixed(2))<0&&(o=(o=Math.abs(o)).toString(),n.minus="-",n.accessibilityMinus="minus "),n.number=parseInt(o),n.number!=o&&(n.decimals=o.slice(-2),n.dot="."),t=n):(o=s.match(/(#((.)*(#|0))?)/g)[0],-1==s.indexOf("-")&&-1<s.indexOf("@")&&(s=w.processor.PStoryConfig.isRtl()?s.replace("@","@-"):s.replace("@","-@")),n=o.match(/0/g),r=o,l=n?n.length:0,i=parseFloat(e).toFixed(l),0<l&&(t.dot=o[o.length-1-l],t.decimals=i.slice(l*=-1),i=i.slice(0,l-1),r=o.slice(0,l-1)),-1<s.indexOf("+")&&(i=Math.abs(i),i+=""),-1<i.indexOf("-")&&("0"!==(i=i.substring(1))||"0"===i&&0!=l&&"00"!==t.decimals)&&(t.minus="-",t.accessibilityMinus="minus "),n=r.match(/[,/. ]/g),a=r,Array.isArray(n)&&(n.reverse(),n.forEach(function(e){var t=i.length,s=r.length,o=r.lastIndexOf(e),n=s-o-1;if(t<=(n+=a.length-s))return!1;i=[i.slice(0,n*=-1),e,i.slice(n)].join(""),r=r.slice(0,o)})),t.number=i),w.processor.PStoryConfig.getConfig("supportHtmlTagInProcessor")),e=("true"!==e&&!0!==e||(e={minus:"<span class='perso-minus-sign'>"+(l=t).minus+"</span>",number:"<span class='perso-int-num'>"+l.number+"</span>",dot:"<span class='perso-decimals-dot'>"+l.dot+"</span>",decimals:"<span class='perso-decimals'>"+l.decimals+"</span>",currency:"<span class='perso-currency'>"+l.currency+"</span>"},c=l.number+l.dot+l.decimals,p=w.processor.PStoryConfig.currencySymbolLabel[l.currency],"1"<c&&(p+="s"),d=l.accessibilityMinus+c+" "+p,c&&0===c.indexOf("0")&&(d=l.accessibilityMinus+c+" "+p),e.amountAccessibilityString="<span class='perso-amount' role='text' aria-label='"+d+"'>",e.endSpan="</span>",t=e),c=s,d=(p=t).number+p.dot+p.decimals,d=void 0===c||null==c||-1==c.indexOf("@")?w.processor.PStoryConfig.isRtl()?p.currency+p.minus+d:p.minus+p.currency+d:c=(c=(c=(c=c.replace(/\-/g,p.minus)).replace("@",p.currency)).replace(/(#((.)*(#|0))?)/g,d)).replace("+",""),d=void 0!==p.amountAccessibilityString&&null!=p.amountAccessibilityString?p.amountAccessibilityString+d+p.endSpan:d);return w.log("Result: "+e),e},o.prototype.formatAmountInteger=function(e,t,s){w.log("Calling utils.formatAmountInteger("+e+", "+t+", "+s+")"),e+="",void 0!==(t=null==t?w.processor.PStoryConfig.getConfig("currencySymbol"):t)&&null!=t||(t="");s=e.replace(/\,/g,""),s=parseInt(s),e=this.numberWithCommas(s),s=s<0?"-"+t+e.substring(1):t+e;return w.log("Result: "+s),s},o.prototype.formatpercent=function(e){return this.formatPercent(e)},o.prototype.formatPercent=function(e){w.log("Calling utils.formatPercent("+e+")");e=parseFloat(e);return e*=100,e=Math.round(e),e+="%",w.log("Result: "+t),e},o.prototype.limitstring=function(e,t){return this.limitString(e,t)},o.prototype.limitString=function(e,t){w.log("Calling utils.limitString("+e+","+t+")");var t=t||parseInt(w.processor.PStoryConfig.getConfig("stringMaxLength")),s=e;return s=e.length>t?e.substring(0,t-"...".length)+"...":s},o.prototype.round=function(e){w.log("Calling utils.round("+e+")");e=parseFloat(e),e=Math.round(e);return w.log("Result: "+e),e},o.prototype.abs=function(e){w.log("Calling utils.abs("+e+")");var t=null;return null!=e&&(t="string"==typeof e?e.replace("-",""):e,t=Math.abs(t)),w.log("Result: "+t),t},o.prototype.highlighttext=function(e){return this.highlightText(e)},o.prototype.highlightText=function(e){return'<span class="perso-highlight">'+e+"</span>"},o.prototype.join=function(e,t,s,o){var n=o||this.tableJoinTypes.INNER,o=s.match(/(\w*)\.(\w*)([\=\!]+)(\w*)\.(\w*)/);if(o){var r,i,a="_JoinLeftTable.getValue(leftIndex,'"+o[2]+"')"+o[3]+"_JoinRightTable.getValue(rightIndex,'"+o[5]+"')",l=e.size(),c=t.size(),p=e.data.cols,d=e.colMap,u=p.length,h=(Array.isArray(t.data.cols)&&t.data.cols.forEach(function(e){p.indexOf(e)<0&&(p.push(e),d[e]=u,u++)}),{type:"PTable",cols:p,rows:[]}),s={_JoinLeftTable:e,_JoinRightTable:t};void 0!==this.parentContext&&null!=this.parentContext?(i=this.parentContext,(r=this.context)._JoinLeftTable=e,r._JoinRightTable=t):(i=this.context,r=s);for(var f=0;f<l;f++){for(var g,m,y,b,v=!1,x=0;x<c;x++){var C=a.replace("leftIndex",f).replace("rightIndex",x),C=new w.processor.PExp(C);try{var k=C.eval(r,i)}catch(e){var C="utils.join() - Error: failed to evaluate join expression. Error message: "+e.message,T={message:C,stack:e.stack};w.error(C,!1,T)}if(k){for(m in v=!0,g=new Array(p.length),d)Object.prototype.hasOwnProperty.call(d,m)&&(y=d[m],(b=e.getValue(f,m))||"number"==typeof b||(b=t.getValue(x,m)),g[y]=b);h.rows.push(g)}}if(!v&&n==this.tableJoinTypes.LEFT){for(m in g=new Array(p.length),d)Object.prototype.hasOwnProperty.call(d,m)&&(y=d[m],(b=e.getValue(f,m))||"number"==typeof b||(b=null),g[y]=b);h.rows.push(g)}}return new w.processor.PTable(h)}return e},e.prototype.createSchemaFacts=function(e){var t=e.factsConfiguration.schemaFacts,l=new w.processor.PModel(this,e),c={newFacts:{}};return t.forEach(function(e){var e=e.fact,s=[],r=[],o=[],t=(e.cols.forEach(function(e){s.push(e.name);var t=new w.processor.PExp(e.expression);r.push(t),o.push(e.type)}),{type:e.type,cols:s,rows:[],attributesTypes:o}),n=e.source,n=new w.processor.PExp(n);try{var i=n.eval(l)}catch(e){var n="utils.createSchemaFacts() - Error: failed to evaluate schemaFact source expression. Error message: "+e.message+" Error stack: "+e.stack,a={message:n,stack:e.stack};w.error(n,!1,a)}i&&i.getObjArray().forEach(function(o){var n=[];r.forEach(function(t){var s=new w.processor.POptionModel(o,l);try{var e=t.eval(s,l)}catch(e){t="utils.createSchemaFacts() - Error: failed to evaluate schemaFact column expression. Error message: "+e.message+" Error stack: "+e.stack,s={message:t,stack:e.stack};w.error(t,!1,s)}void 0!==e&&null!=e&&n.push(e)}),t.rows.push(n)}),c.newFacts[e.name]=t}),c},w.processor=w.processor||{},w.processor.PUtils=new e}((window,window.Personetics=window.Personetics||{})),function(e){e.processor=e.processor||{},e.processor.PStoryCache={},e.processor.PStoryConfig=new function(){this.configMap={dateFormat:"MM/DD/YY",amountFormat:"###,###,###",currencySymbol:"$",useProjectDefaultCurrency:!1,lang:"en",supportHtmlTagInProcessor:"false",stringMaxLength:"15",context:"",serverCallBack:"",calendarSunFirst:!0},this.getConfig=function(e){return Object.prototype.hasOwnProperty.call(this.configMap,e)?this.configMap[e]:null},this.setConfig=function(e,t){Object.prototype.hasOwnProperty.call(this.configMap,e)&&"undefined"!=t&&null!=t&&(this.configMap[e]=t)},this.rtlMap={en:!1,he:!0},this.currencySymbolLabel={$:"dollar","€":"euro"},this.isRtl=function(){var e=this.configMap.lang;return!!Object.prototype.hasOwnProperty.call(this.rtlMap,e)&&this.rtlMap[e]}}}((window,window.Personetics=window.Personetics||{})),function(s){s.processor=s.processor||{},s.processor.PDataSource=function(e){this.data=e},s.processor.PDataSource.prototype.getType=function(){return this.type},s.processor.PDataSource.prototype.getData=function(){return this.data},s.processor.PDataSource.prototype.get=function(e){e=this.data[e];return e&&e.type,e},s.processor.PDataSource.prototype.getChild=function(e,t){return Object.prototype.isPrototypeOf.call(s.processor.PDataSource.prototype,e)?e.get(t):e[t]}}((window,window.Personetics=window.Personetics||{})),function(e){e.processor=e.processor||{},e.processor.PFuture=function(){e.processor.PDataSource.call(this,{type:"future",future:!0}),this.type="future",this.future=!0},e.processor.PFuture.prototype=Object.create(e.processor.PDataSource.prototype),e.processor.Future=new e.processor.PFuture}((window,window.Personetics=window.Personetics||{})),function(s){s.processor=s.processor||{},s.processor.POptionModel=function(e,t){s.processor.PDataSource.call(this,e),this.filteredFields=e.whiteListFields,this.parentDataSource=t},s.processor.POptionModel.prototype=Object.create(s.processor.PDataSource.prototype),s.processor.POptionModel.prototype.get=function(e){var t;return!this.filteredFields||Object.prototype.hasOwnProperty.call(this.filteredFields,e)?(t=this.filteredFields?this.filteredFields[e]:e,void 0!==(t=void 0!==(t=s.processor.PDataSource.prototype.get.call(this,t))&&null!=t?t:this[e])&&null!=t?t:this.parentDataSource.get(e)):"NOPE"}}((window,window.Personetics=window.Personetics||{})),function(b,v){v.processor=v.processor||{};function c(e,t){return e=new Date(e),t=t||0,e=new Date(e.setDate(e.getDate()+t)),new Date(e.setHours(0,0,0,0))}var x={sum:{startValue:0,method:function(e,t){return e.value+t}},avg:{startValue:0,method:function(e,t){return((e.size-1)*e.value+t)/e.size}},count:{startValue:0,method:function(e){return e.size}},standardDeviation:{startValue:0,method:function(e,t,s,o){var n,r,i;return 1==e.size&&(e.mem={items:[]}),e.mem.items.push(t),s==o-1?(i=0,e.mem.items.forEach(e.mem.items,function(e){i+=e}),r=i/e.mem.items.length,e.mem.items.forEach(e.mem.items,function(e){n+=Math.pow(e-r,2)}),t=n/e.mem.items.length,Math.sqrt(t)):null}},min:{},max:{}},o="PText",n="PNumber",r="PAmount",i=(v.processor.PTable=function(e){v.processor.PDataSource.call(this,e),this.name=e.name,this.colMap={},this.data={cols:[],rows:[]},this.attributesTypes=e.attributesTypes,this.filter.bind(this),this.loadTable(e)},v.processor.PTable.prototype=Object.create(v.processor.PDataSource.prototype),v.processor.PTable.prototype.toString=function(){var e={name:this.name,cols:this.data.cols,rows:this.data.rows,attributesTypes:this.data.attributesTypes,type:this.data.type};return JSON.stringify(e)},v.processor.PTable.prototype.loadTable=function(e){var s;e&&!e.future&&(this.data=e,s={},e.cols.forEach(function(e,t){s[e]=t}),this.colMap=s)},v.processor.PTable.prototype.loadObjArray=function(e){if(e){var t,n={},r=[],o=0,i=(e.forEach(function(e){for(var t in e){var s;Object.prototype.hasOwnProperty.call(e,t)&&!n[t]&&(s=o++,n[t]=s)}}),(this.colMap=n).length),s=new Array(i);for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(s[n[t]]=t);e.forEach(function(e){var t,s,o=new Array(i);for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s=e[t],o[n[t]]=s);r.push(o)}),this.data={cols:s,rows:r}}},v.processor.PTable.prototype.getObjArray=function(){for(var e=[],t=0;t<this.getRowCount();t++){for(var s={},o=0;o<this.data.cols.length;o++)s[this.data.cols[o]]=i(this.data,o,t);e.push(s)}return e},v.processor.PTable.prototype.getColIndex=function(e){return this.colMap[e]},v.processor.PTable.prototype.size=function(){var e=Object.prototype.hasOwnProperty.call(this.data,"rows")?this.data.rows.length:0;return e},v.processor.PTable.prototype.getrowcount=function(){return this.getRowCount()},v.processor.PTable.prototype.getRowCount=function(){return this.data&&this.data.rows?this.data.rows.length:0},v.processor.PTable.prototype.getrow=function(e){return this.getRow(e)},v.processor.PTable.prototype.getRow=function(e){for(var t=[],s=0;s<this.data.rows[e].length;s++)t[s]=i(this.data,s,e);return t},v.processor.PTable.prototype.getfirstrows=function(e){return this.getFirstRows(e)},v.processor.PTable.prototype.getFirstRows=function(e){var t,s=this;return s.getRowCount()>e?(t=s.data.rows.slice(0,e),new v.processor.PTable({cols:s.data.cols,rows:t,name:this.name+".getFirstRows("+e+")",attributesTypes:s.data.attributesTypes,type:s.data.type})):s},v.processor.PTable.prototype.getlastrows=function(e){return this.getLastRows(e)},v.processor.PTable.prototype.getLastRows=function(e){v.log("Calling '"+this.name+"'.getLastRows("+e+")");var t;return this.getRowCount()>e?(t=this.data.rows.slice(0-e),new v.processor.PTable({cols:this.data.cols,rows:t,name:this.name+".getLastRows("+e+")",attributesTypes:this.data.attributesTypes,type:this.data.type})):this},v.processor.PTable.prototype.getrowasobject=function(e){return this.getRowAsObject(e)},v.processor.PTable.prototype.getRowAsObject=function(e){if(e<this.data.rows.length){var t,s,o=this.data.rows[e],n={};for(t in this.colMap)Object.prototype.hasOwnProperty.call(this.colMap,t)&&(s=this.colMap[t],n[t]=o[s]);return n}return""},v.processor.PTable.prototype.getcolumn=function(e){return this.getColumn(e)},v.processor.PTable.prototype.getColumn=function(e){v.log("Calling '"+this.name+"'.getColumn("+e+")");var t=this.data.rows,s=[],o=this.colMap[e];return void 0!==o?(t.forEach(function(e){s.push(e[o])}),s):(v.log("Result: null"),null)},v.processor.PTable.prototype.getvalue=function(e,t){return this.getValue(e,t)},v.processor.PTable.prototype.getValue=function(e,t){var s;return v.log("Calling '"+this.name+"'.getValue("+e+", "+t+")"),v.processor.PStoryCache["getValue."+this.name+"."+e+"."+t]&&b.Personetics.processor.PStoryConfig.configMap.isPermutations?v.processor.PStoryCache["getValue."+this.name+"."+e+"."+t]:(s=this.size(),Object.prototype.hasOwnProperty.call(this.colMap,t)&&e<s?(s=i(this.data,this.colMap[t],e),v.log("Result: "+s),v.processor.PStoryCache["getValue."+this.name+"."+e+"."+t]=s):(v.log("Result: null"),null))},function(e,t,s){switch(Object.prototype.hasOwnProperty.call(e,"attributesTypes")&&void 0!==e.attributesTypes&&null!==e.attributesTypes?e.attributesTypes[t]:""){case o:return a(e.rows[s][t]);case r:case n:return l(e.rows[s][t]);default:return e.rows[s][t]}}),a=function(e){if(null===e)return e;if(Object.prototype.hasOwnProperty.call(e,v.processor.PStoryConfig.getConfig("lang")))return e[v.processor.PStoryConfig.getConfig("lang")];if("object"!==_typeof(e))return e;var t=function(e){for(var t in e)return t}(e);return t?e[t]:void 0},l=function(e){var t=parseFloat(e);return t=!isNaN(t)&&isFinite(t)?t:e},p=(v.processor.PTable.prototype.filter=function(e,t){if(v.log("Calling '"+this.name+"'.filter("+e+", "+t+")"),!t||"all"==t)return this;if(v.processor.PStoryCache["filter."+this.name+"."+e+"."+t]&&b.Personetics.processor.PStoryConfig.configMap.isPermutations)return v.processor.PStoryCache["filter."+this.name+"."+e+"."+t];for(var s=[],o=0;o<this.getRowCount();o++)this.getValue(o,e)==t&&s.push(this.getRow(o));var n=new v.processor.PTable({cols:this.data.cols,rows:s,name:this.name+".filter("+e+", "+t+")",attributesTypes:this.data.attributesTypes,type:this.data.type});return v.processor.PStoryCache["filter."+this.name+"."+e+"."+t]=n},v.processor.PTable.prototype.specialFilter=function(e,t,s){if(v.log("Calling '"+this.name+"'.filter"+s+"("+e+", "+t+")"),!t)return this;for(var o=[],n=this.getRowCount(),r=0;r<n;r++){var i=this.getValue(r,e),a=Array.isArray(t)?t.find(function(e){return e==i}):i==t;(a="Out"==s?!a:a)&&o.push(this.getRow(r))}return new v.processor.PTable({cols:this.data.cols,rows:o,name:this.name+".filter"+s+"("+e+", "+t+")",attributesTypes:this.data.attributesTypes,type:this.data.type})},v.processor.PTable.prototype.filterIn=function(e,t){return this.specialFilter(e,t,"In")},v.processor.PTable.prototype.filterOut=function(e,t){return this.specialFilter(e,t,"Out")},v.processor.PTable.prototype.filterByDays=function(e,t,s,o){t=p(t),v.log("Calling '"+this.name+"'.filterByDays("+e+", "+t+", "+s+", "+o+")");for(var n=c(t,null!=o?o:0),r=c(t,s),i=[],a=0;a<this.getRowCount();a++){var l=this.getValue(a,e),l=new Date(p(l));l.setHours(0,0,0,0),"object"===_typeof(l)&&l<=n&&r<=l&&i.push(this.getRow(a))}return new v.processor.PTable({cols:this.data.cols,rows:i,name:this.name+".filterByDays("+e+", "+t+", "+s+", "+o+")",attributesTypes:this.data.attributesTypes,type:this.data.type})},v.processor.PTable.prototype.groupby=function(e,t,s){return this.groupBy(e,t,s)},v.processor.PTable.prototype.groupBy=function(e,t,s){if(v.log("Calling '"+this.name+"'.groupBy("+e+", "+t+", "+s+")"),v.processor.PStoryCache["groupBy."+this.name+"."+e+"."+t]&&b.Personetics.processor.PStoryConfig.configMap.isPermutations)return v.processor.PStoryCache["groupBy."+this.name+"."+e+"."+t];var o=s&&Object.prototype.hasOwnProperty.call(x,s)?x[s]:x.sum,n=(Array.isArray(e)||(e=[e]),[]);(n=n.concat(e)).push(t);for(var r={},i=this.getRowCount(),a=0;a<i;a++){var l,c,p="",d=[];for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&(l=e[l],c=this.getValue(a,l),d.push(c),p+=JSON.stringify(c)+",");var u=r[p],h=(u||(u={key:p,keyValues:d,value:o.startValue,size:0},r[p]=u),u.size++,this.getValue(a,t)),h=Number(h);u.value=o.method(u,h,a,i)}var f=[];for(u in r)if(Object.prototype.hasOwnProperty.call(r,u)){for(var g=[],m=r[u],y=0;y<e.length;y++)g.push(m.keyValues[y]);g.push(m.value),f.push(g)}n=new v.processor.PTable({cols:n,rows:f,name:this.name+".groupBy("+e+", "+t+", "+s+")",attributesTypes:this.data.attributesTypes,type:this.data.type});return v.processor.PStoryCache["groupBy."+this.name+"."+e+"."+t]=n},v.processor.PTable.prototype.groupByExpression=function(n){v.log("Calling '"+this.name+"'.groupByExpression("+n+")");var e,t,r=new v.processor.PExp(n),i=this.getObjArray(),s=this.data.rows,o=this.data.cols,a={},l=this,c=(Array.isArray(s)&&s.forEach(function(e,t){var s=i[t];try{var o=r.eval(s);Object.prototype.hasOwnProperty.call(a,o)||(a[o]=[]),a[o].push(e)}catch(e){e.message=l.name+"'.groupByExpression("+n+") Error: Failed to evaluate row "+t+", ignoring row  Error message: "+e.message,v.error(e.message,!1,e)}}),[]);for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t=a[e],t=new v.processor.PTable({cols:o,rows:t,name:this.name+".groupByExpression("+n+")",attributesTypes:this.data.attributesTypes,type:this.data.type}),c.push({table:t,groupedKey:e}));return c},v.processor.PTable.prototype.sortbydate=function(e,t){return this.sortByDate(e,t)},v.processor.PTable.prototype.sortByDate=function(e,t){v.log("Calling '"+this.name+"'.sortByDate("+e+", "+t+")");var n=1,s=(t&&("asc"==t.toLowerCase()?n=1:"desc"==t.toLowerCase()&&(n=-1)),this),r=(Array.isArray(e)||(e=[e]),[]),t=(e.forEach(function(e){e=s.colMap[e];r.push(e)}),this.data.rows.slice(0));return t.sort(function(e,t){for(var s=0;s<r.length;s++){var o=r[s],o=new Date(p(e[o])).getTime()-new Date(p(t[o])).getTime();if(0!=o)return n*o}return 0}),new v.processor.PTable({cols:s.data.cols,rows:t,attributesTypes:s.data.attributesTypes,type:s.data.type})},v.processor.PTable.prototype.sortbymonth=function(e,t){return this.sortByMonth(e,t)},v.processor.PTable.prototype.sortByMonth=function(e,t){if(v.log("Calling '"+this.name+"'.sortByMonth("+e+", "+t+")"),v.processor.PStoryCache["sortByMonth."+this.name+"."+e+"."+t]&&b.Personetics.processor.PStoryConfig.configMap.isPermutations)return v.processor.PStoryCache["sortByMonth."+this.name+"."+e+"."+t];for(var s=this,n=(Array.isArray(e)||(e=[e]),[]),o=(e.forEach(function(e){e=s.colMap[e];n.push(e)}),this.data.rows.slice(0)),r=(o.sort(function(e,t){for(var s=0;s<n.length;s++){var o=n[s];return parseInt(e[o])-parseInt(t[o])}return 0}),0),i=1;i<o.length;i++)if(1<Math.abs(o[i][0]-o[i-1][0])){r=i;break}a=0<r?(a=o.slice(r)).concat(o.slice(0,r)):o,t&&"desc"==t.toLowerCase()&&a.reverse();var a=new v.processor.PTable({cols:s.data.cols,rows:a,name:this.name+".sortByMonth("+e+", "+t+")",attributesTypes:s.data.attributesTypes,type:s.data.type});return v.processor.PStoryCache["sortByMonth."+this.name+"."+e+"."+t]=a},v.processor.PTable.prototype.sortby=function(e,t,s){return this.sortBy(e,t,s)},v.processor.PTable.prototype.sortBy=function(e,t,s){var r,o,i;return v.log("Calling '"+this.name+"'.sortBy("+e+", "+t+", "+s+")"),void 0!==this.attributesTypes&&v.processor.PStoryCache["sortBy."+this.name+"."+e+"."+t]&&b.Personetics.processor.PStoryConfig.configMap.isPermutations?v.processor.PStoryCache["sortBy."+this.name+"."+e+"."+t]:(r=1,t&&("asc"==t.toLowerCase()?r=1:"desc"==t.toLowerCase()&&(r=-1)),o=this,Array.isArray(e)||(e=[e]),i=[],e.forEach(function(e){e=o.colMap[e];i.push(e)}),(s=this.data.rows.slice(0)).sort(function(e,t){for(var s=0;s<i.length;s++){var o=i[s],n=isNaN(e[o])?e[o]:parseFloat(e[o]),o=isNaN(t[o])?t[o]:parseFloat(t[o]);if(o<n)return r;if(n<o)return-r}return 0}),s=new v.processor.PTable({cols:o.data.cols,rows:s,attributesTypes:o.data.attributesTypes,type:o.data.type}),v.processor.PStoryCache["sortBy."+this.name+"."+e+"."+t]=s)},v.processor.PTable.prototype.getasgroupedTable=function(e){return this.getAsGroupedTable(e)},v.processor.PTable.prototype.getAsGroupedTable=function(n){v.log("Calling '"+this.name+"'.getAsGroupedTable("+n+")");var r,i=[],a={};return Array.isArray(this.data.rows)&&this.data.rows.forEach(function(e){var t,s=n(e).trim(),o=a[s],s=(null==o?(r={encValue:v.utils.string.stripSpecialChars(s),value:s,rows:[]},i.push(r),t=i.length-1,a[s]=t):r=i[o],jQuery.extend({},e));r.rows.push(s)}),v.log("Result: "+i),i},v.processor.PTable.prototype.max=function(e){v.log("Calling '"+this.name+"'.max("+e+")");e=this.extremum(e,function(e,t){return e<t},"max");return v.log("Result: "+e),e},v.processor.PTable.prototype.min=function(e){v.log("Calling '"+this.name+"'.min("+e+")");e=this.extremum(e,function(e,t){return t<e},"min");return v.log("Result: "+e),e},v.processor.PTable.prototype.extremum=function(e,t,s){if(0==this.getRowCount())return this;for(var o=this.getColIndex(e),n=this.data.rows[0],r=n[o],i=0;i<this.getRowCount();i++){var a=this.data.rows[i],l=a[o];t("string"==typeof r?parseFloat(r):r,"string"==typeof l?parseFloat(l):l)&&(r=l,n=a)}return new v.processor.PTable({cols:this.data.cols,rows:[n],name:this.name+"."+s+"("+e+", "+t+")",attributesTypes:this.data.attributesTypes,type:this.data.type})},v.processor.PTable.prototype.addComputedCol=function(t,s){for(var e=new v.processor.PExp(s),o=this.data.cols.slice(0),n=(o.push(t),[]),r=0;r<this.getRowCount();r++){var i=this.data.rows[r];try{var a=e.eval(i),l=i.slice(0);l.push(a),n.push(l)}catch(e){v.error(this.name+"'.addComputedCol("+t+", "+s+") Error: Failed to valuate row "+r+", ignoring row  Error message: "+e.message,!1,e)}}return new v.processor.PTable({cols:o,rows:n,name:this.name+".addComputedCol("+t+", "+s+")",attributesTypes:this.data.attributesTypes,type:this.data.type})},v.processor.PTable.prototype.map=function(e,t,s){if(0==this.getRowCount())return void 0!==s?s:{};for(var o=s||0,n=0;n<this.getRowCount();n++)o=t(o,this.getValue(n,e));return o},v.processor.PTable.prototype.sum=function(e){v.log("Calling '"+this.name+"'.sum("+e+")");e=this.map(e,function(e,t){var s=e,o=t;return(s="string"==typeof e?parseFloat(e):s)+(o="string"==typeof t?parseFloat(t):o)},0);return v.log("Result: "+e),e},v.processor.PTable.prototype.avg=function(e){v.log("Calling '"+this.name+"'.avg("+e+")");var t=0;return 0<this.getRowCount()&&(t=this.sum(e)/this.getRowCount()),v.log("Result: "+t),t},v.processor.PTable.prototype.first=function(e){var t;return v.log("Calling '"+this.name+"'.first("+e+")"),t=0<this.getRowCount()?e?this.getValue(0,e):((t=[]).push(this.getRow(0)),new v.processor.PTable({cols:this.data.cols,rows:t,name:this.name+".first("+e+")",attributesTypes:this.data.attributesTypes,type:this.data.type}).getObjArray()[0]):this,v.log("Result: "+t),t},v.processor.PTable.prototype.last=function(e){v.log("Calling '"+this.name+"'.last("+e+")");var t,s=this.getRowCount();if(0<s)t=e?this.getValue(s-1,e):((t=[]).push(this.getRow(s-1)),new v.processor.PTable({cols:this.data.cols,rows:t,name:this.name+".last("+e+")",attributesTypes:this.data.attributesTypes,type:this.data.type}).getObjArray()[0]);else if(e){if("month"==e||"amount"==e)return 0;t=null}else t=null;return v.log("Result: "+t),t},v.processor.PTable.prototype.abs=function(e){v.log("Calling '"+this.name+"'.last("+e+")");for(var t=[],s=this.colMap[e],o=0;o<this.getRowCount();o++){for(var n=this.getRow(o),r=[],i=0;i<n.length;i++){var a=n[i];i==s&&(a=Math.abs(a)),r.push(a)}t.push(r)}return new v.processor.PTable({cols:this.data.cols,rows:t,name:this.name+".abs("+e+")",attributesTypes:this.data.attributesTypes,type:this.data.type})},v.processor.PTable.prototype.mod=function(e,t){v.log("Calling '"+this.name+"'.last("+e+")");for(var s=[],o=this.colMap[e],n=0;n<this.getRowCount();n++){for(var r=this.getRow(n),i=[],a=0;a<r.length;a++){var l=r[a];a==o&&(l%=t),i.push(l)}s.push(i)}return new v.processor.PTable({cols:this.data.cols,rows:s,name:this.name+".mod("+e+","+t+")",attributesTypes:this.data.attributesTypes,type:this.data.type})},v.processor.PTable.prototype.floor=function(e,t){v.log("Calling '"+this.name+"'.last("+e+")");for(var s=[],o=this.colMap[e],n=0;n<this.getRowCount();n++){for(var r=this.getRow(n),i=[],a=0;a<r.length;a++){var l=r[a];a==o&&(l-=l%t),i.push(l)}s.push(i)}return new v.processor.PTable({cols:this.data.cols,rows:s,name:this.name+".floor("+e+","+t+")",attributesTypes:this.data.attributesTypes,type:this.data.type})},v.processor.PTable.prototype.selectcolumns=function(){return this.selectColumns.apply(this,arguments)},v.processor.PTable.prototype.selectColumns=function(){var e=Array.prototype.slice.call(arguments);if(e&&e.length){for(var t=[],s=[],o=[],n=0;n<e.length;n++)e[n]&&(t.push(e[n]),o.push(this.getColAttrType(e[n])));for(var r=0;r<this.getRowCount();r++){for(var i=[],a=0;a<e.length;a++)e[a]&&i.push(this.getValue(r,e[a]));s.push(i)}return new v.processor.PTable({cols:t,rows:s,name:this.name+".selectColumns("+e.toString()+")",attributesTypes:o,type:this.data.type})}},v.processor.PTable.prototype.getColAttrType=function(e){if(e)return e=this.data.cols.indexOf(e),this.data.attributesTypes[e]},function(e){var t=(t=e.split(".")[0].replace(/T/g," ")).split("-").join("/");return isNaN(Date.parse(t))?e:t})}(window,window.Personetics=window.Personetics||{}),function(o){o.processor=o.processor||{};var n=["PNumber","PAmount","PDate","PString"];o.processor.PFact=function(e,t,s){o.processor.PTable.call(this,e),this.dataType=t,this.formats=s,this.name=e.name,this.isPrimitive=0<=n.indexOf(t)},o.processor.PFact.prototype=Object.create(o.processor.PTable.prototype),o.processor.PFact.prototype.get=function(e){return this.isPrimitive&&(e="value"),this.getValue(0,e)}}((window,window.Personetics=window.Personetics||{})),function(o){o.processor=o.processor||{},o.processor.PQuery=function(e,t){this.queryName=e.queryName,this.model=t,this.preQueryParams=e.queryParams,this.queryParams={},this.data=null,this.evalParams()},o.processor.PQuery.prototype.evalParams=function(){var s=this;this.preQueryParams.forEach(function(e){var t=e.paramName,e=e.varName,e=new o.processor.PExp(e).eval(s.model);e&&(s.queryParams[t]=e)})},o.processor.PQuery.prototype.getCacheKey=function(){var e,t=this.queryName+"?";for(e in this.queryParams)Object.prototype.hasOwnProperty.call(this.queryParams,e)&&(t+=e+"="+this.queryParams[e]+"&");return t},o.processor.PQuery.prototype.getData=function(e){return this.data||(personetics.pserverProxy?(personetics.getQueryData({id:e.story.insight.id,queryName:this.queryName,queryParams:this.queryParams},o.bind(this,this.handleQuery)),o.processor.Future):null)},o.processor.PQuery.prototype.handleQuery=function(e){this.model.handleQuery(this,e)}}((window,window.Personetics=window.Personetics||{})),function(a){a.processor=a.processor||{},a.processor.PModel=function(e,t){a.processor.PDataSource.call(this,t.facts),this.initPModel(t.facts,t.expressions,t.externalParams),this.parent=e},a.processor.PModel.prototype=Object.create(a.processor.PDataSource.prototype),a.processor.PModel.prototype.initPModel=function(e,t,s){this.factsConfigs={},this.facts=e,this.expressionsConfigs={},this.expressions=t,this.varCfgs={},this.varValues={},this.externalParams=s||{},this.varValuesForSave={},this.varDlgMapping={},this.queryCfgs={},this.queryCache={},this.exps={},this.cache={},this.staticCache={},this.setupObjFactory(),o(this.facts,this.factsConfigs),o(this.expressions,this.expressionsConfigs),this.listeners=[]},a.processor.PModel.prototype.setFormats=function(e){this.formats=e},a.processor.PModel.prototype.setupObjFactory=function(){var s=this;this.objFactory={},this.objFactory.PTable=function(e){return new a.processor.PTable(e)},this.objFactory.PObjList=function(e){var t=new a.processor.PTable;return t.loadObjArray(e),t},this.objFactory.PFact=function(e,t){return new a.processor.PFact(e,t,s.formats)}},a.processor.PModel.prototype.createObj=function(e,t){var s=t,o=e,o=this.objFactory[o="PTable"!=e&&"PObjList"!=e?"PFact":o];return s=(s=o?o(t,e):s).isPrimitive?s.get():s},a.processor.PModel.prototype.test=function(e){e=this.get(e,{test:!0});return{success:!!e,value:e}},a.processor.PModel.prototype.get=function(t,e){var s=null,o=this.cache[t];if(null!=o)return o;if(null!=(o=this.staticCache[t]))return o;var n,r=this.varCfgs[t],r=(!o&&r&&(o=this.getVarValue(t)),this.externalParams[t]),i=this.factsConfigs[t],r=(null==(o=null==o&&r?r:o)&&i&&(null==(o=i)?a.log("PStoryModel.get('"+t+"') - Error: fact exists but is invalid: '"+o+"'. Trying to evaluate as expression"):i.type&&(o.name=t,o=this.createObj(i.type,o))),this.expressionsConfigs[t]);if(null==o&&r){n=new a.processor.PExp(r);try{o=n.eval(this)}catch(e){a.log("PStoryModel.get('"+t+"') Error - Invalid expression string: '"+r+"'"),o=null}null==o&&a.log("PStoryModel.get('"+t+"') - Error: expression exists but is invalid: '"+o+"'. Trying to evaluate as expression")}if(null==o){if(this.lastGetValue&&this.lastGetValue==t)return this.lastGetValue=null;this.lastGetValue=t,n=new a.processor.PExp(t);try{null==(o=n.eval(this,null,e))&&(s=new Error("PStoryModel.get('"+t+"') - Error: Evaluating as expression returned an invalid result: '"+o+"'"))}catch(e){o=null,s={message:"PStoryModel.get('"+t+"') Error: Failed to evaluate as expression: \n\t Error: "+e.message,stack:e.stack}}}return null!=o?this.cache[t]=o:a.error(s.message,!1,s,e),o},a.processor.PModel.prototype.fetchFromSrc=function(e,t){var s=null,o=!1,n=null;if("query"==t)return r=new a.processor.PQuery({queryName:e.config.queryName,queryParams:e.config.queryParams},this),this.currentQueryBlock=e,r.getData(e);var r=new a.processor.PExp(t);try{null==(n=r.eval(this))&&(s=new Error("PStoryModel.fetchFromSrc('"+t+"') - Error: Evaluating as expression returned an invalid result: '"+n+"'"),o=!0)}catch(e){s={message:"PStoryModel.fetchFromSrc('"+t+"') - Error: Failed to evaluate source as expression \n\t Error: "+e.message,stack:e.stack},o=!0}return o&&a.error(s.message,!1,s),n},a.processor.PModel.prototype.getData=function(){return this.facts},a.processor.PModel.prototype.setVarValue=function(e,t){var s=this,t=(Object.prototype.hasOwnProperty.call(this.varCfgs,e)||(this.varCfgs[e]=e),this.cache={},t||null);this.varValues[e]=t,this.listeners.forEach(function(e){var t=e.listener;e.callback.call(t,s.varValues)})},a.processor.PModel.prototype.setDlgVarMapping=function(e,t,s){Object.prototype.hasOwnProperty.call(this.varDlgMapping,e)||(this.varDlgMapping[e]={dialogId:e,variables:{}}),t&&s&&(this.varDlgMapping[e].variables[t]=s)},a.processor.PModel.prototype.getDlgVarMapping=function(){var t=this;return this.varDlgMapping?Object.keys(this.varDlgMapping).map(function(e){return t.varDlgMapping[e]}):[]},a.processor.PModel.prototype.getVarValue=function(e){return this.varValues[e]},a.processor.PModel.prototype.handleQuery=function(e,t){null!=t&&Object.prototype.hasOwnProperty.call(t,"story")&&((s=(Object.prototype.hasOwnProperty.call(t.story,"insightFacts")?t.story.insightFacts:t.story.facts).query).name="query",s=this.createObj(t.type,s),e.data=s,o=e.getCacheKey(),this.queryCfgs[o]=e,this.factsConfigs.query=s,this.currentQueryBlock&&this.parent.handleQueryData(this.currentQueryBlock,s));var s,o=new Error("Personetics.processor.PModel.prototype.handleQuery - Invalid query params: "+JSON.stringify(t));a.error(o.message,!0)},a.processor.PModel.prototype.addListener=function(e,t){this.listeners.push({listener:e,callback:t})};var o=function(e,t){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}}((window,window.Personetics=window.Personetics||{})),function(l){l.processor=l.processor||{};var t=/{{([^\n\t\v{}]*)}}/g;l.processor.PTextTemplate=function(e,t){this.textTemplate=e,this.globalContext=t,this.tokens={},this.compile()},l.processor.PTextTemplate.prototype.compile=function(){var o,e;this.textTemplate&&0<this.textTemplate.length&&((e=(o=this).textTemplate.match(t))&&e.forEach(function(e){var t,s;Object.prototype.hasOwnProperty.call(o.tokens,e)||(t=e.replace("{{","").replace("}}",""),o.globalContext.expressions&&Object.prototype.hasOwnProperty.call(o.globalContext.expressions,t)&&o.globalContext.expressions[t]&&(t=o.globalContext.expressions[t]),(s={}).str=t,s.exp=new l.processor.PExp(t),o.tokens[e]=s)}))},l.processor.PTextTemplate.prototype.process=function(e,t){var s,o=this.textTemplate,n=this.tokens;for(s in n)if(Object.prototype.hasOwnProperty.call(n,s)){var r,i=n[s],a=e||this.globalContext;try{r=i.exp.eval(a,t)}catch(e){l.error("PTextTemplate.process('"+this.textTemplate+"') - Error: Failed to evaluate token '"+i.str+". Error message: "+e.message,!1,e),r="{{"+i.str+"}}"}o=o.split(s).join(r)}return o},l.processor.PTextTemplate.prototype.getTextTemplate=function(){return this.textTemplate}}((window,window.Personetics=window.Personetics||{})),function(s){s.processor=s.processor||{},s.processor.BlockProcessor=function(e,t,s,o,n,r){this.parent=e,this.config=t,this.model=o,this.texts=s,this.dlgId=n,this.index=r},s.processor.BlockProcessor.prototype.initProcessor=function(){},s.processor.BlockProcessor.prototype.processData=function(){return this.layoutInstructions=this.copyConfig(this.config),delete this.layoutInstructions.showIf,this.setDefaultSelectedValue(),this.layoutInstructions},s.processor.BlockProcessor.prototype.processText=function(e,t,s){e=this.getText(e);return e?e.process(t,s,this):"-"},s.processor.BlockProcessor.prototype.getText=function(e){var t;return t=this.texts&&Object.prototype.hasOwnProperty.call(this.texts,e)&&this.texts[e]?new s.processor.PTextTemplate(this.texts[e],this.model):t},s.processor.BlockProcessor.prototype.getRealValue=function(e){return e},s.processor.BlockProcessor.prototype.setSelectedValue=function(e){this.config.selected=e},s.processor.BlockProcessor.prototype.handleQueryData=function(e){this.doProcessData(e)},s.processor.BlockProcessor.doProcessData=function(){throw"Personetics.processor.BlockProcessor.doProcessData - Not implemented for block class '"+this.config.type+"'"},s.processor.BlockProcessor.prototype.setDefaultSelectedValue=function(){var e=this.getRealValue(this.config.selected);this.parent.setBlockVarValue(this.config,e),this.parent.setDlgVarMapping(this.dlgId,this.config)},s.processor.BlockProcessor.prototype.copyConfig=function(e){var t,s,o,n,r={};for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(null!=(s=e[t])?s.constructor===[].constructor?(o=[],s.forEach(function(e){o.push(e)}),r[t]=o):s.constructor=={}.constructor?(n=this.copyConfig(s),r[t]=n):r[t]=s:r[t]=s);return r}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.TextBlockProcessor=function(e,t,s,o,n,r){i.processor.BlockProcessor.call(this,e,t,s,o,n,r)},i.processor.TextBlockProcessor.prototype=Object.create(i.processor.BlockProcessor.prototype),i.processor.TextBlockProcessor.prototype.processData=function(){this.layoutInstructions=i.processor.BlockProcessor.prototype.processData.call(this);var e=this.config.txt||this.config.text,e=(Object.prototype.hasOwnProperty.call(this.config,"txt")&&delete this.layoutInstructions.txt,Object.prototype.hasOwnProperty.call(this.config,"text")&&delete this.layoutInstructions.text,this.processText(e,this.model));return this.layoutInstructions.text=e,this.layoutInstructions}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.ImageBlock=function(e,t,s,o,n,r){i.processor.BlockProcessor.call(this,e,t,s,o,n,r)},i.processor.ImageBlock.prototype=Object.create(i.processor.BlockProcessor.prototype),i.processor.ImageBlock.prototype.processData=function(){this.layoutInstructions=i.processor.BlockProcessor.prototype.processData.call(this);var e=this.processText(this.config.url,this.model),t=this.processText(this.config.alt,this.model);return this.layoutInstructions.url=e,this.layoutInstructions.alt=t,this.layoutInstructions.fileType=this.config.fileType,this.layoutInstructions}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{};var o="static",n="data",r="dynamic";i.processor.OptionsProcessorBlock=function(e,t,s,o,n,r){i.processor.BlockProcessor.call(this,e,t,s,o,n,r)},i.processor.OptionsProcessorBlock.prototype=Object.create(i.processor.BlockProcessor.prototype),i.processor.OptionsProcessorBlock.prototype.processData=function(){this.layoutInstructions=i.processor.BlockProcessor.prototype.processData.call(this);var t=this,e=(this.layoutInstructions.options=[],this.processShowIf(),this.config.options);if(e&&0!=e.length)return this.selectedOptId=null,this.config.selected&&(Object.prototype.hasOwnProperty.call(this.config.selected,"id")?this.selectedOptId=this.config.selected.id:this.selectedOptId=this.config.selected),this.hasSelected=!1,e.forEach(function(e){Object.prototype.hasOwnProperty.call(e,"type")||(e.type="static"),Object.prototype.hasOwnProperty.call(e,"type")&&"dynamic"===e.type&&(e.src=t.layoutInstructions.src),t.handleOption(e)}),this.setDefaultSelectedValue(),this.layoutInstructions},i.processor.OptionsProcessorBlock.prototype.processShowIf=function(){var o=[],n=this;void 0!==this.config.options&&this.config.options.forEach(function(e){var t=!0;if(Object.prototype.hasOwnProperty.call(e,"showIf")&&null!==e.showIf&&0<e.showIf.length){var s=new i.processor.PExp(e.showIf);try{t=s.eval(n.model)}catch(e){i.error("OptionsProcessorBlock.processData() Error: Failed to evaluate showIf property, not showing block. Error Message: "+e.message,t=!1,e)}}t&&o.push(e)}),this.config.options=o},i.processor.OptionsProcessorBlock.prototype.addStaticOption=function(e,t){var s={};s.id=this.getOptId(e.id),s=this.addProperties(e,s,t),this.layoutInstructions.options.push(s)},i.processor.OptionsProcessorBlock.prototype.addProperties=function(e,t,s){t.id=(void 0===t.id||"-"===t.id?e:t).id,t.selected=!1,t.id==s&&(t.selected=!0,this.hasSelected=!0),Object.prototype.hasOwnProperty.call(e,"class")&&(t.class=e.class);var s=new i.processor.POptionModel(e,this.model),o=e.txt||e.text;if(t.text=this.processText(o,s,this.model),null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&!Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=e[n]);return t},i.processor.OptionsProcessorBlock.prototype.getOptId=function(e){return this.processText(e,this.model)},i.processor.OptionsProcessorBlock.prototype.addDynamicOption=function(t,s){var e,o=this;t.type==n&&t.src&&0<t.src.length&&(null!=(e=this.model.fetchFromSrc(this,t.src))&&(e=e.getObjArray()).forEach(function(e){e.text=t.text||t.txt,e.text2=t.text2||t.txt2,t.action&&(e.action=t.action);e=o.addProperties(e,{},s,t);o.layoutInstructions.options.push(e)}))},i.processor.OptionsProcessorBlock.prototype.addDynamicOptionById=function(e,t){var s,o;e.type==r&&e.src&&0<e.src.length&&(null!=(o=this.model.fetchFromSrc(this,e.src))&&(s={},(o=(o=o.getObjArray()).filter(function(e){return e.id===t})[0])&&(this.replaceValueNull(o),s=this.addProperties(o,s,t,e),this.layoutInstructions.options.push(s))))},i.processor.OptionsProcessorBlock.prototype.replaceValueNull=function(e){for(var t in e)null==e[t]&&(e[t]="-")},i.processor.OptionsProcessorBlock.prototype.getRealValue=function(t){var s=t;return this.layoutInstructions.options.forEach(function(e){if(e.id==t)return s=e,!1}),s},i.processor.OptionsProcessorBlock.prototype.setSelectedValue=function(t){var s=this;this.layoutInstructions.options.forEach(function(e){e.id==t.id?(e.selected=!0,s.config.selected=e):e.selected=!1})},i.processor.OptionsProcessorBlock.prototype.handleOption=function(e){var t=this,s=!1;switch(e.type){case o:t.addStaticOption(e,t.selectedOptId),s=!0;break;case n:t.addDynamicOption(e,t.selectedOptId),s=!0;break;case r:t.addDynamicOptionById(e,t.selectedOptId),s=!0;break;default:s=!1}return s}}((window,window.Personetics=window.Personetics||{})),function(a){a.processor=a.processor||{};var n="navigateToPage",s="toggle",o="payload";function r(e,t){if(Object.prototype.hasOwnProperty.call(e,"payload")&&e.payload){var s,o=a.processor.PStoryConfig.getConfig("supportHtmlTagInProcessor");for(s in a.processor.PStoryConfig.setConfig("supportHtmlTagInProcessor",!1),t.payload={},e.payload)"string"==typeof e.payload[s]?t.payload[s]=this.processText(e.payload[s],this.model):(t.payload[s]={},i.call(this,e.payload[s],t.payload[s]));a.processor.PStoryConfig.setConfig("supportHtmlTagInProcessor",o)}}function i(e,t){for(var s in e)"string"==typeof e[s]?t[s]=this.processText(e[s],this.model):(t[s]={},i.call(this,e[s],t[s]))}a.processor.ButtonsProcessorBlock=function(e,t,s,o,n,r){a.processor.OptionsProcessorBlock.call(this,e,t,s,o,n,r),this.isAllNavigateTo=!1},a.processor.ButtonsProcessorBlock.prototype=Object.create(a.processor.OptionsProcessorBlock.prototype),a.processor.ButtonsProcessorBlock.prototype.processData=function(){var e;return!Object.prototype.hasOwnProperty.call(this.config,"buttonType")||"navigateTo"!=(e=this.config.buttonType)&&"perso-trivia"!=e||(this.isAllNavigateTo=!0),this.layoutInstructions=a.processor.OptionsProcessorBlock.prototype.processData.call(this),this.layoutInstructions.id=this.config.id,Object.prototype.hasOwnProperty.call(this.layoutInstructions,"default")&&delete this.layoutInstructions.default,Object.prototype.hasOwnProperty.call(this.layoutInstructions,"selected")&&delete this.layoutInstructions.selected,this.layoutInstructions},a.processor.ButtonsProcessorBlock.prototype.addProperties=function(e,t,s){var o;return t=a.processor.OptionsProcessorBlock.prototype.addProperties.call(this,e,t,s),e.type==n&&null!=e.navigateTarget&&0<e.navigateTarget.length&&null!=t&&(t.navigateTarget=this.evalNavigateTarget(e.navigateTarget),r.call(this,e,t)),void 0!==t.txt1&&(o=t.txt1,t.txt1=this.processText(o,t,this.model)),void 0!==t.txt2&&(o=t.txt2,t.txt2=this.processText(o,t,this.model)),this.isAllNavigateTo&&null!=t&&(t.navigateTarget=this.evalNavigateTarget(e.id),r.call(this,e,t)),t},a.processor.ButtonsProcessorBlock.prototype.addToggleOption=function(e,t){null!=t&&0!=t.length||(t="off"),this.hasSelected=!0,this.prepareToggleButton(e,t)},a.processor.ButtonsProcessorBlock.prototype.addNavigateToOption=function(e,t){var s={};s.id=this.processText(e.id,this.model),s=this.addProperties(e,s,t),this.layoutInstructions.options.push(s)},a.processor.ButtonsProcessorBlock.prototype.evalNavigateTarget=function(t){var s,e=new a.processor.PExp(t);try{s=e.eval(this.model,null,{shouldDisplayError:!1})}catch(e){s=t}return s},a.processor.ButtonsProcessorBlock.prototype.prepareToggleButton=function(e,t){var s="perso-toggle",o={type:e.type},n={type:e.type},r=(o.id="on",o.class=s,o.on=!0,o.off=!1,o.selected="on"==t,new a.processor.POptionModel(o,this.model)),i=e.onTxt||e.onText,i=this.processText(i,r),r=(o.text=i,this.layoutInstructions.options.push(o),n.id="off",n.class=s,n.on=!1,n.off=!0,n.selected="off"==t,new a.processor.POptionModel(n,this.model)),o=e.offTxt||e.offText;i=this.processText(o,r),n.text=i,this.layoutInstructions.options.push(n),this.model.varValuesForSave[this.config.var]=!0},a.processor.ButtonsProcessorBlock.prototype.handleOption=function(e){var t=!1;if(!(t=a.processor.OptionsProcessorBlock.prototype.handleOption.call(this,e)))switch(e.type){case s:this.addToggleOption(e,this.selectedOptId),t=!0;break;case n:case o:this.addNavigateToOption(e,this.selectedOptId),t=!0;break;default:t=!1}return t}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.AccountSelectorProcessorBlock=function(e,t,s,o,n,r){i.processor.OptionsProcessorBlock.call(this,e,t,s,o,n,r)},i.processor.AccountSelectorProcessorBlock.prototype=Object.create(i.processor.OptionsProcessorBlock.prototype),i.processor.AccountSelectorProcessorBlock.prototype.addProperties=function(e,t,s){return t=i.processor.OptionsProcessorBlock.prototype.addProperties.call(this,e,t,s),void 0!==e.text2&&(s=new i.processor.POptionModel(e,this.model),e=e.text2,t.text2=this.processText(e,s,this.model)),t},i.processor.AccountSelectorProcessorBlock.prototype.processData=function(){var e;return this.config.options=[{type:"data",src:this.config.src,text:this.config.accountText,text2:this.config.accountText2}],this.config.showAll&&(e={text:this.config.allAccountsText,text2:this.config.allAccountsText2,id:"all",type:"static"},this.config.options.push(e)),this.layoutInstructions=i.processor.OptionsProcessorBlock.prototype.processData.call(this),delete this.layoutInstructions.src,delete this.layoutInstructions.allAccountsText,delete this.layoutInstructions.allAccountsText2,delete this.layoutInstructions.accountText,delete this.layoutInstructions.showAll,Object.prototype.hasOwnProperty.call(this.layoutInstructions,"default")&&delete this.layoutInstructions.default,Object.prototype.hasOwnProperty.call(this.layoutInstructions,"selected")&&delete this.layoutInstructions.selected,this.layoutInstructions.id=this.config.id,this.layoutInstructions},i.processor.AccountSelectorProcessorBlock.prototype.getOptId=function(e){return e}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.TextBoxesProcessorBlock=function(e,t,s,o,n,r){i.processor.OptionsProcessorBlock.call(this,e,t,s,o,n,r)},i.processor.TextBoxesProcessorBlock.prototype=Object.create(i.processor.OptionsProcessorBlock.prototype),i.processor.TextBoxesProcessorBlock.prototype.processData=function(){return this.config.options=this.config.boxes,this.layoutInstructions=i.processor.OptionsProcessorBlock.prototype.processData.call(this),this.layoutInstructions.options.forEach(function(e){e.selected&&delete e.selected}),delete this.layoutInstructions.boxes,this.layoutInstructions},i.processor.TextBoxesProcessorBlock.prototype.handleOption=function(e){this.addStaticOption(e,this.selectedOptId)},i.processor.TextBoxesProcessorBlock.prototype.addStaticOption=function(t){var e={},s=new i.processor.POptionModel(e,this.model);if(e.label=this.processText(t.label,s,this.model),t.image&&(e.image=this.processText(t.image,s,this.model),Object.prototype.hasOwnProperty.call(this.layoutInstructions,"hasImage")||(this.layoutInstructions.hasImage=!0)),Object.prototype.hasOwnProperty.call(t,"label2")&&void 0!==t.label2&&null!==t.label2)e.value=this.processText(t.label2,s,this.model);else{var o,n=new i.processor.POptionModel(t,this.model),r=new i.processor.PExp(t.value);try{o=r.eval(n)}catch(e){i.error("TextBoxesProcessorBlock.addStaticOption() Error: Failed to evaluate textBox value.  Error message: "+e.message,!1,e),o=t.value}e.value=o}t.action&&(e.action=t.action),t.buttonLabel&&(e.buttonLabel=this.processText(t.buttonLabel,s,this.model)),this.layoutInstructions.options.push(e)}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.TabsProcessorBlock=function(e,t,s,o,n,r){i.processor.OptionsProcessorBlock.call(this,e,t,s,o,n,r)},i.processor.TabsProcessorBlock.prototype=Object.create(i.processor.OptionsProcessorBlock.prototype),i.processor.TabsProcessorBlock.prototype.processData=function(){return this.config.options=this.config.tabs,this.layoutInstructions=i.processor.OptionsProcessorBlock.prototype.processData.call(this),this.layoutInstructions.id=this.config.id,this.layoutInstructions.class=this.config.class||"perso-tabs",this.layoutInstructions}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.DateBoxBlockProcessor=function(e,t,s,o,n,r){i.processor.BlockProcessor.call(this,e,t,s,o,n,r)},i.processor.DateBoxBlockProcessor.prototype=Object.create(i.processor.BlockProcessor.prototype),i.processor.DateBoxBlockProcessor.prototype.processData=function(){this.layoutInstructions=i.processor.BlockProcessor.prototype.processData.call(this);var e=this.processText(this.config.date,this.model);return this.layoutInstructions.date=e,this.layoutInstructions}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.TableBlockProcessor=function(e,t,s,o,n,r){i.processor.BlockProcessor.call(this,e,t,s,o,n,r)},i.processor.TableBlockProcessor.prototype=Object.create(i.processor.BlockProcessor.prototype),i.processor.TableBlockProcessor.prototype.processData=function(){var e=this.config,t=e.src,s=this.model.fetchFromSrc(this,t),o=e.autoRefresh||!1,e=s==i.processor.Future?{type:e.type,future:!0}:this.doProcessData(s);return e.autoRefresh=o,e.srcExp=t,e},i.processor.TableBlockProcessor.prototype.doProcessData=function(e){var t;return this.layoutInstructions=i.processor.BlockProcessor.prototype.processData.call(this),delete this.layoutInstructions.src,Object.prototype.hasOwnProperty.call(this.layoutInstructions,"amountComment")&&this.layoutInstructions.amountComment&&(t=this.getText(this.layoutInstructions.amountComment),this.layoutInstructions.amountComment=t&&t.textTemplate),Object.prototype.hasOwnProperty.call(this.layoutInstructions,"dateComment")&&this.layoutInstructions.dateComment&&(t=this.getText(this.layoutInstructions.dateComment),this.layoutInstructions.dateComment=t&&t.textTemplate),null!=e&&Object.prototype.hasOwnProperty.call(e,"data")&&(this.layoutInstructions.rows=e.data.rows,this.layoutInstructions.cols=e.data.cols,this.layoutInstructions.attributesTypes=e.data.attributesTypes),this.layoutInstructions}}((window,window.Personetics=window.Personetics||{})),function(d){d.processor=d.processor||{},d.processor.BarBlockProcessor=function(e,t,s,o,n,r){d.processor.BlockProcessor.call(this,e,t,s,o,n,r)},d.processor.BarBlockProcessor.prototype=Object.create(d.processor.BlockProcessor.prototype),d.processor.BarBlockProcessor.prototype.processData=function(){this.layoutInstructions=d.processor.BlockProcessor.prototype.processData.call(this);var s,n,r,i,a,e,l=this,t=this.config,o=t.src,o=this.model.fetchFromSrc(this,o),c=(this.persoUtils=d.processor.PUtils.getUtilsInstance("utils"),t.indicator&&(t.indicator.indicatorSrc&&(this.indicatorData=this.model.fetchFromSrc(this,t.indicator.indicatorSrc),this.indicatorDataRows=this.indicatorData.getObjArray()),t.indicator.indicatorLegend&&(this.layoutInstructions.indicatorLegend=this.processText(t.indicator.indicatorLegend,this.model))),this.layoutInstructions.direction=t.direction||"vertical",null!=o&&(e=this.getCategories(),s=this.getCategories(),t.series?(n=o.groupByExpression(Object.prototype.hasOwnProperty.call(e,"key")?e.key:t.varSource),r=t.indicator&&t.indicator.indicatorSrc?this.indicatorData.groupByExpression(Object.prototype.hasOwnProperty.call(e,"key")?e.key:t.varSource):[],c=e.categoriesArray,i=this.getSeries(),this.seriesLabels=i,void 0!==this.config.seriesNamesForDisplay&&null!==this.config.seriesNamesForDisplay&&(this.layoutInstructions.seriesNamesForDisplay=this.getSeriesNamesForDisplay()),a=[],null!=c&&0<c.length?c.forEach(function(t){var e,s=n.filter(function(e){return e.groupedKey==t})[0],o=(r.length&&(e=r.filter(function(e){return e.groupedKey==t})[0]),[]),s=(void 0!==s&&(o=s.table.getObjArray(),r.length&&(o=l.mergeIndicatorRowsIntoRows(o,e.table.getObjArray()))),l.prepareDataByMode(o,i,t));a.push(s)}):n.forEach(function(e){e=e.table.getObjArray(),l.indicatorDataRows.length&&(e=l.mergeIndicatorRowsIntoRows(e,l.indicatorDataRows)),e=l.prepareDataByMode(e,i);a.push(e)}),this.layoutInstructions.series=a):(c=o.getObjArray(),this.indicatorDataRows&&(c=l.mergeIndicatorRowsIntoRows(c,this.indicatorDataRows)),o=null!=e?this.prepareDataByCategories(c,e):this.prepareData(c),this.layoutInstructions.series=o,this.seriesLabels=[""],Object.prototype.hasOwnProperty.call(t,"mode")&&t.mode.length&&(e=this.getMode(),this.layoutInstructions.mode=0<e.length?e:""))),Object.prototype.hasOwnProperty.call(this.layoutInstructions,"varSource")&&delete this.layoutInstructions.varSource,Object.prototype.hasOwnProperty.call(this.layoutInstructions,"default")&&delete this.layoutInstructions.default,Object.prototype.hasOwnProperty.call(this.layoutInstructions,"selected")&&delete this.layoutInstructions.selected,Object.prototype.hasOwnProperty.call(this.layoutInstructions,"seriesNames")&&delete this.layoutInstructions.seriesNames,Object.prototype.hasOwnProperty.call(this.layoutInstructions,"indicator")&&delete this.layoutInstructions.indicator,delete this.layoutInstructions.x,delete this.layoutInstructions.y,delete this.layoutInstructions.label,delete this.layoutInstructions.src,this.layoutInstructions.categories=this.categories,this.layoutInstructions.seriesLabels=this.seriesLabels,null!=s?s.categoriesArray.forEach(function(e,t){e=parseInt(e)-1;s[t]=d.processor.PUtils.getUtilsInstance("dateUtils").getMonthName(d.processor.PStoryConfig.getConfig("lang"))[e]}):s=this.layoutInstructions.categories,Object.keys(s).map(function(e){return s[e]}));return this.layoutInstructions.accessibilityCategories=c,void 0!==t.benchmarkLines&&(o=l.prepareBenchmarkLines(),this.layoutInstructions.benchmarkLines=o),this.layoutInstructions},d.processor.BarBlockProcessor.prototype.prepareDataByCategories=function(n,e){var r=this,t=this.config,i=new d.processor.PExp(t.y),a=new d.processor.PExp(t.x),l=[],c=(this.categories=[],e.key);return e.categoriesArray.forEach(function(t){var s={},o=!1,e=(s[c]=t,s.amount=0,s.sum=0,n.forEach(function(e){if(e[c]==t)return s=e,!(o=!0)}),r.config.indicator&&r.config.indicator.indicatorSrc&&!1===o&&(s.indicator=0),r.prepareRow(s,a,i));l.push(e)}),l},d.processor.BarBlockProcessor.prototype.prepareDataByMode=function(n,e,r){var i=this,t=this.config,a=new d.processor.PExp(t.y),l=new d.processor.PExp(t.x),c=[],p=(this.categories=this.categories||[],t.series);return e.forEach(function(t){var s={},o=!1,e=(s.month=r,s[p]=t,s.amount=0,s.sum=0,n.forEach(function(e){if(e[p]==t)return s=e,!(o=!0)}),i.config.indicator&&i.config.indicator.indicatorSrc&&!1===o&&(s.indicator=0),i.prepareRow(s,l,a));c.push(e)}),c},d.processor.BarBlockProcessor.prototype.prepareData=function(e){var t=this,s=this.config,o=new d.processor.PExp(s.y),n=new d.processor.PExp(s.x),r=[];return this.categories=[],e.forEach(function(e){e=t.prepareRow(e,n,o);r.push(e)}),r},d.processor.BarBlockProcessor.prototype.prepareRow=function(e,t,s){var o=this.config,n={};Object.prototype.hasOwnProperty.call(this.config,"label")&&"-"!=(i=this.processText(o.label,e,this.model))&&(n.label=i.replace(/span/g,"tspan"));try{var r=s.eval(e,this.model);n.value=this.persoUtils.toFixed(r,2)}catch(e){d.error("BarBlockProcessor.prepareRow() Error: failed to evaluate block.y expression. Error message: "+e.message,!1,e),n.value=null}var i=null;try{i=t.eval(e,this.model)}catch(e){d.error("BarBlockProcessor.prepareRow() Error: failed to evaluate block.x expression. Error message: "+e.message,!1,e)}return o.series&&-1!=this.categories.indexOf(i)||this.categories.push(i),void 0!==e.indicator&&null!==e.indicator&&(n.indicator=e.indicator,n.indicatorDisplay=!0),Object.prototype.hasOwnProperty.call(o,"series")&&void 0!==o.series&&(n.mode=e[o.series]),Object.prototype.hasOwnProperty.call(o,"var")&&Object.prototype.hasOwnProperty.call(o,"default")&&(n.category=e[o.varSource],n.selected=!1,void 0!==o.selected&&e[o.varSource]==o.selected&&(n.selected=!0)),n},d.processor.BarBlockProcessor.prototype.getCategories=function(){var e,t,s,o=null;return Object.prototype.hasOwnProperty.call(this.config,"categories")&&(e=this.config.categories,null!=(e=this.model.fetchFromSrc(this,e))&&(t=e.getObjArray(),s=e.data.cols[0],o={categoriesArray:t.map(function(e){return e[s]}),key:s})),o},d.processor.BarBlockProcessor.prototype.getSeries=function(){var e,t,s,o=null;return Object.prototype.hasOwnProperty.call(this.config,"seriesNames")?(t=(e=this.model.fetchFromSrc(this,this.config.seriesNames)).getObjArray(),s=e.data.cols[0],o=t.map(function(e){return e[s]})):d.log("Personetics.processor.BarBlockProcessor - Error: missing 'seriesNames' block property"),o},d.processor.BarBlockProcessor.prototype.getMode=function(){var e=null;return Object.prototype.hasOwnProperty.call(this.config,"mode")?e=this.model.fetchFromSrc(this,this.config.mode):d.log("Personetics.processor.BarBlockProcessor - Error: missing 'mode' block property"),e},d.processor.BarBlockProcessor.prototype.getSeriesNamesForDisplay=function(){var t=this;return this.config.seriesNamesForDisplay.map(function(e){return t.processText(e,t.model)})},d.processor.BarBlockProcessor.prototype.prepareBenchmarkLines=function(){var n=this,t=[];return this.config.benchmarkLines.forEach(function(s){var e,o={benchmarks:[]};o.label=n.processText(s.label,n.model),s.value&&void 0!==(e=new d.processor.PExp(s.value).eval(n.model))&&e.forEach(function(e){var t={};t.label=n.processText(s.innerLabel,n.model),t.value=e,o.benchmarks.push(t)}),t.push(o)}),t},d.processor.BarBlockProcessor.prototype.mergeIndicatorRowsIntoRows=function(e,s){var o=this;return e.forEach(function(t){s.forEach(function(e){o.config.series?t.month==e.month&&t.mode==e.mode&&(t.indicator=e.amount):t.month==e.month&&(t.indicator=e.amount)})}),e}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.PieBlockProcessor=function(e,t,s,o,n,r){i.processor.BlockProcessor.call(this,e,t,s,o,n,r)},i.processor.PieBlockProcessor.prototype=Object.create(i.processor.BlockProcessor.prototype),i.processor.PieBlockProcessor.prototype.processData=function(){this.layoutInstructions=i.processor.BlockProcessor.prototype.processData.call(this);var e,o=this,n=this.config,t=n.src,t=this.model.fetchFromSrc(this,t),r=(this.persoUtils=i.processor.PUtils.getUtilsInstance("utils"),0<(e=Object.prototype.hasOwnProperty.call(n,"centerText")?this.processText(n.centerText,this.model):e).length&&(this.layoutInstructions.centerText=e.replace(/span/g,"tspan")),n.selected);return null!=t&&((e=t.getObjArray()).forEach(function(e,t){e.highlight=!1,null!=r&&Object.prototype.hasOwnProperty.call(n,"varSource")&&(e[n.varSource]==r||void 0!==e[n.varSource]&&e[n.varSource]==r[n.varSource])&&(e.highlight=!0),Object.prototype.hasOwnProperty.call(n,"label")&&0<(s=o.processText(n.label,e,o.model)).length&&"-"!=s&&(e.label=s.replace(/span/g,"tspan")),Object.prototype.hasOwnProperty.call(e,"category")&&(e.categoryId=e.category,delete e.category),Object.prototype.hasOwnProperty.call(e,n.sliceName)&&(s=e[n.sliceName],delete e[n.sliceName],e.category=s);var s=new i.processor.PExp(n.sliceValue);try{s.eval(e,this.model)}catch(e){i.error("PieBlockProcessor.processData() Error: failed to evaluate block.sliceValue expression. Error message: "+e.message,!1,e)}s=e[n.sliceValue]||e.amount;e.value=o.persoUtils.toFixed(s,2),e.index=++t,delete e[n.sliceValue],delete e.amount}),this.layoutInstructions.slices=e,Object.prototype.hasOwnProperty.call(n,"mode")&&n.mode.length&&("out"!==(t=n.mode.toLowerCase())&&"in"!==t&&"basic"!==t&&(t=this.model.fetchFromSrc(this,this.config.mode),this.layoutInstructions.mode=0<t.length?t:""))),Object.prototype.hasOwnProperty.call(this.layoutInstructions,"varSource")&&delete this.layoutInstructions.varSource,Object.prototype.hasOwnProperty.call(this.layoutInstructions,"default")&&delete this.layoutInstructions.default,Object.prototype.hasOwnProperty.call(this.layoutInstructions,"selected")&&delete this.layoutInstructions.selected,Object.prototype.hasOwnProperty.call(this.layoutInstructions,"seriesNames")&&delete this.layoutInstructions.seriesNames,delete this.layoutInstructions.sliceName,delete this.layoutInstructions.sliceValue,delete this.layoutInstructions.label,delete this.layoutInstructions.src,this.layoutInstructions}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.PinBlockProcessor=function(e,t,s,o,n,r){i.processor.BarBlockProcessor.call(this,e,t,s,o,n,r)},i.processor.PinBlockProcessor.prototype=Object.create(i.processor.BarBlockProcessor.prototype)}((window,window.Personetics=window.Personetics||{})),function(p){p.processor=p.processor||{},p.processor.LineBlockProcessor=function(e,t,s,o,n,r){p.processor.BarBlockProcessor.call(this,e,t,s,o,n,r)},p.processor.LineBlockProcessor.prototype=Object.create(p.processor.BarBlockProcessor.prototype),p.processor.LineBlockProcessor.prototype.processData=function(){this.layoutInstructions=p.processor.BarBlockProcessor.prototype.processData.call(this);var e=this.config,t=null;if(e.highlightedCategory){e=new p.processor.PExp(e.highlightedCategory);try{t=e.eval(this.model)}catch(e){p.error("LineBlockProcessor.processData() Error: failed to evaluate block.highlightedCategory expression. Error message: "+e.message,!1,e)}}return delete this.layoutInstructions.label2,this.layoutInstructions.highlightedCategories=[t],this.layoutInstructions},p.processor.LineBlockProcessor.prototype.prepareDataByCategories=function(e,t){var o=this,s=this.config,n=new p.processor.PExp(s.y),r=new p.processor.PExp(s.x),i=[],a=(this.categories=[],t.key);return t.categoriesArray.forEach(function(t){var s={};s[a]=t,s.amount=0,e.forEach(function(e){if(e[a]==t)return s=e,!1}),o.prepareCategoryRow(s,r,n,a)}),e.forEach(function(e){e=o.prepareSeriesRow(e,r,n,a);i.push(e)}),i},p.processor.LineBlockProcessor.prototype.prepareSeriesRow=function(e,t,s,o){var n,r=this.config,i={};Object.prototype.hasOwnProperty.call(this.config,"label")&&"-"!=(n=this.processText(r.label,e,this.model))&&(i.label=n.replace(/span/g,"tspan")),Object.prototype.hasOwnProperty.call(this.config,"label2")&&"-"!=(n=this.processText(r.label2,e,this.model))&&(i.label2=n.replace(/span/g,"tspan"));try{t.eval(e)}catch(e){p.error("LineBlockProcessor.prepareRow() Error: failed to evaluate block.x expression. Error message: "+e.message,!1,e)}try{var a=s.eval(e),l=p.processor.PStoryConfig.getConfig("amountFormat").match(/\+*(#((.)*(#|0))?)/g)[0].match(/0/g),c=l?l.length:0;i.value=parseFloat(a.toFixed(c))}catch(e){p.error("LineBlockProcessor.prepareRow() Error: failed to evaluate block.y expression. Error message: "+e.message,!1,e),i.value=null}return i.category=e[o],i},p.processor.LineBlockProcessor.prototype.prepareCategoryRow=function(e,t,s,o){var n,r={};try{n=t.eval(e),r.label=n,r.value=e[o]}catch(e){p.error("LineBlockProcessor.prepareRow() Error: failed to evaluate block.x expression. Error message: "+e.message,!1,e)}this.categories.push(r)}}((window,window.Personetics=window.Personetics||{})),function(a){a.processor=a.processor||{},a.processor.CalendarBlock=function(e,t,s,o,n,r){a.processor.BlockProcessor.call(this,e,t,s,o,n,r)},a.processor.CalendarBlock.prototype=Object.create(a.processor.BlockProcessor.prototype),a.processor.CalendarBlock.prototype.processData=function(){this.layoutInstructions=a.processor.BlockProcessor.prototype.processData.call(this);var t=this.config,e=t.actionableSrc,s=t.highlightedSrc,o=this.model.fetchFromSrc(this,e);if(this.layoutInstructions.highlightedSrc=this.model.fetchFromSrc(this,s),null!=o&&Object.prototype.hasOwnProperty.call(o,"data")&&(this.layoutInstructions.actionableSrc=o.data.rows.map(function(e){return{id:e[o.colMap.id],date:e[o.colMap.date],type:"C"===e[o.colMap.debitOrCredit]?"In":"D"===e[o.colMap.debitOrCredit]?"Out":null}})),Object.prototype.hasOwnProperty.call(t,"startDate")&&null!=t.startDate&&0<t.startDate.length){e=null,s=t.startDate,s=new a.processor.PExp(s);try{e=s.eval(this.model)}catch(e){a.error("PBlockProcessorManager.evaluateDefault() Error: Failed to evaluate "+t.type+" block's default expression Error message: "+e.message,!1,e)}e&&(this.layoutInstructions.startDate=e)}if(Object.prototype.hasOwnProperty.call(t,"endDate")&&null!=t.endDate&&0<t.endDate.length){s=null,e=t.endDate,e=new a.processor.PExp(e);try{s=e.eval(this.model)}catch(e){a.error("PBlockProcessorManager.evaluateDefault() Error: Failed to evaluate "+t.type+" block's default expression Error message: "+e.message,!1,e)}s&&(this.layoutInstructions.endDate=s)}if(Object.prototype.hasOwnProperty.call(t,"default")&&null!=t.default&&0<t.default.length){e=null,s=t.default,s=new a.processor.PExp(s);try{e=s.eval(this.model)}catch(e){a.error("PBlockProcessorManager.evaluateDefault() Error: Failed to evaluate "+t.type+" block's default expression Error message: "+e.message,!1,e)}e&&(this.layoutInstructions.default=e)}var n=a.processor.PStoryConfig.getConfig("lang"),r=a.processor.PStoryConfig.getConfig("calendarSunFirst")||"en"!==n?"-short":"-short-default",i=a.pstoryDictionary.weekDays;return this.layoutInstructions.weekDays=[],i[n]&&(this.layoutInstructions.weekDays=i[n].map(function(e,t){return i[n+r]&&i[n+r].length>t?{dayName:e,shortDayName:i[n+r][t]}:{dayName:e}})),Object.prototype.hasOwnProperty.call(this.config,"bottomText")&&null!=t.bottomText&&0<t.bottomText.length&&(s=this.processText(t.bottomText,this.model),this.layoutInstructions.bottomText=s),delete this.layoutInstructions.src,this.layoutInstructions}}((window,window.Personetics=window.Personetics||{})),function(m,c){m.PBlockProcessorManager=new function(){var e=null;this.getInstance=function(){return e=null==e?new t:e},this.getNewInstance=function(){return e=new t}};var t=function(){this.dialogsToBlocksMap={},this.actionsMap={},this.processorFactory={txt:c.processor.TextBlockProcessor,text:c.processor.TextBlockProcessor,number:c.processor.NumberBlockProcessor,amount:c.processor.AmountBlockProcessor,image:c.processor.ImageBlock,buttons:c.processor.ButtonsProcessorBlock,"radio-button":c.processor.ButtonsProcessorBlock,tabs:c.processor.TabsProcessorBlock,"account-selector":c.processor.AccountSelectorProcessorBlock,"entity-selector":c.processor.EntitySelectorProcessorBlock,"entity-list":c.processor.EntityListProcessorBlock,textboxes:c.processor.TextBoxesProcessorBlock,"date-box":c.processor.DateBoxBlockProcessor,tranList:c.processor.TableBlockProcessor,"bar-chart":c.processor.BarBlockProcessor,"new-bar-chart":c.processor.BarBlockProcessor,"pie-chart":c.processor.PieBlockProcessor,"arc-chart":c.processor.PieBlockProcessor,"pin-graph":c.processor.PinBlockProcessor,"pin-chart":c.processor.PinBlockProcessor,"new-pin-chart":c.processor.PinBlockProcessor,"line-chart":c.processor.LineBlockProcessor,calendar:c.processor.CalendarBlock,trivia:c.processor.TriviaProcessorBlock,counter:c.processor.CounterProcessorBlock,dateInput:c.processor.DateInput,numberInput:c.processor.NumberInput,filter:c.processor.Filter}};t.prototype.start=function(e){if(this.storyDefinition=e.story,this.defaultLang="en",void 0!==e.customizationOptions&&null!==e.customizationOptions)for(var t in e.customizationOptions)Object.prototype.hasOwnProperty.call(e.customizationOptions,t)&&c.processor.PStoryConfig.setConfig(t,e.customizationOptions[t]);this.texts=e.texts,this.model=new c.processor.PModel(this,e),this.PAction=new c.processor.PAction,m.model=this.model,this.initProcessors(),this.initActions()},t.prototype.initProcessors=function(){var o=this;this.storyDefinition.dialogs.forEach(function(e){var s=e.id;o.dialogsToBlocksMap[s]={},Object.prototype.hasOwnProperty.call(e,"class")&&(o.dialogsToBlocksMap[s].class=e.class),e.blocks.forEach(function(e,t){e=o.createProcessor(e,s,t);e&&(o.dialogsToBlocksMap[s][t]={processor:e,previousData:null})})})},t.prototype.createProcessor=function(e,t,s){var o=e.type,n=this.processorFactory[o];if(n){var r=null;if(Object.prototype.hasOwnProperty.call(this.texts,t)){var r=this.texts[t][this.defaultLang]||{},i=c.processor.PStoryConfig.getConfig("lang");if(Object.prototype.hasOwnProperty.call(this.texts[t],i)){var a,l=this.texts[t][i];for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(r[a]=l[a])}}i=new n(this,e,r,this.model,t,s);return i.initProcessor(),i}return c.log("createProcessor() - invalid processor type '"+o+"'"),null},t.prototype.process=function(){var e,t=[];for(e in this.dialogsToBlocksMap)if(Object.prototype.hasOwnProperty.call(this.dialogsToBlocksMap,e)){var s,o,n=this.dialogsToBlocksMap[e],r=[],i=null;for(s in Object.prototype.hasOwnProperty.call(n,"class")&&(i=n.class,delete n.class),n)Object.prototype.hasOwnProperty.call(n,s)&&(o=n[s].processor,(o=this.processBlock(o,o))&&r.push(o));var a={type:"h-box",class:"pstory-dialog-frame",columns:[{width:12,blocks:r}]};null!==i&&(a.class=i),t.push(a)}return t},t.prototype.processPermutations=function(e,t,s){for(var o in this.dialogsToBlocksMap){var n,r=this.dialogsToBlocksMap[o],i=null;for(n in Object.prototype.hasOwnProperty.call(r,"class")&&void 0!==r.class&&(i=r.class),r)if("class"!=n&&Object.prototype.hasOwnProperty.call(r,n)&&void 0!==r[n]){var a=r[n].processor,a=this.processBlock(a,a);if(a)try{for(var l=JSON.stringify(a),c=o+","+i+","+a.id,p=[],d=0;d<s.length;d++)p.push(t[d]);if(Object.prototype.hasOwnProperty.call(e,c)){for(var u=!1,h=null,f=e[c],g=0;g<f.length;g++)f[g].value==l&&(u=!0,h=g);u?f[h].selectorValues.push(p):f.push({selectorValues:[p],value:l})}else e[c]=[{selectorValues:[p],value:l}]}catch(e){m.Personetics.log("<< Permutation Not Available >>: ",e)}}}},t.prototype.processBlocks=function(s){var o=[],n=this;return s.blocks.forEach(function(e,t){t=n.processBlockConfig(s.id,t);t&&o.push(t)}),o},t.prototype.processBlockConfig=function(e,t){if(Object.prototype.hasOwnProperty.call(this.dialogsToBlocksMap,e)&&Object.prototype.hasOwnProperty.call(this.dialogsToBlocksMap[e],t))return t=(e=this.dialogsToBlocksMap[e][t]).processor,this.processBlock(e,t)},t.prototype.processBlock=function(e,t){var s=null,o=t.config,n=!0;if(o.showIf){var r=new c.processor.PExp(o.showIf);try{n=r.eval(this.model)}catch(e){c.error("PBlockProcessorManager.processBlock() Error: Failed to evaluate showIf property, not showing block. Error Message: "+e.message,n=!1,e)}}return n&&(this.evaluateDefault(o),s=t.processData(),e.previousData=s),s},t.prototype.evaluateDefault=function(t){var e=this.getBlockVarValue(t);if(null!=e)t.selected=e;else if(Object.prototype.hasOwnProperty.call(t,"default")&&null!=t.default&&0<t.default.length){var s=t.default,s=new c.processor.PExp(s);try{e=s.eval(this.model)}catch(e){e.message="PBlockProcessorManager.evaluateDefault() Error: Failed to evaluate "+t.type+" block's default expression Error message: "+e.message,c.error(e.message,!1,e)}e&&(t.selected=e,this.setBlockVarValue(t,e))}},t.prototype.resetVariables=function(e){e.var&&!this.model.varValuesForSave[e.var]&&(this.model.varValues[e.var]=null)},t.prototype.getBlockVarValue=function(e){e=e.var;if(null!=e&&0<e.length)return this.model.getVarValue(e)},t.prototype.setBlockVarValue=function(e,t){e=e.var;null!=e&&0<e.length&&this.model.setVarValue(e,t)},t.prototype.setDlgVarMapping=function(e,t){var s=t.var,t=t.type;this.model.setDlgVarMapping(e,t,s)},t.prototype.getModel=function(){return this.model},t.prototype.handleQueryData=function(e,t){e=t.doProcessData(e);this.story.handleQueryData(e,t)},t.prototype.initActions=function(){var s=this,e=(this.actionsMap={},s.storyDefinition.actions);e&&e.forEach(function(e){var t=c.utils.persoHelper.deepObjectExtend({},e,!0);s.actionsMap[e.actionId]=t})},t.prototype.getAction=function(e){var t;if(this.actionsMap&&Object.prototype.hasOwnProperty.call(this.actionsMap,e.actionId))return t=this.actionsMap[e.actionId],this.PAction.processAction(t,e.context,this.model);t=new Error("PBlockProcessorManager.getAction() Error: action "+e.actionId+"doesn't exist."),c.error(t.message,!1,t)},t.prototype.processActions=function(e){var t,s=[],o=0;for(t in this.actionsMap){var n=this.actionsMap[t],n=this.PAction.processAction(n,e[o],this.model);s.push(n),o++}return s}}(window,window.Personetics=window.Personetics||{}),function(i){i.processor=i.processor||{},i.processor.EntitySelectorProcessorBlock=function(e,t,s,o,n,r){i.processor.OptionsProcessorBlock.call(this,e,t,s,o,n,r)},i.processor.EntitySelectorProcessorBlock.prototype=Object.create(i.processor.OptionsProcessorBlock.prototype),i.processor.EntitySelectorProcessorBlock.prototype.addProperties=function(e,t,s,o){t=i.processor.OptionsProcessorBlock.prototype.addProperties.call(this,e,t,s,o);s=new i.processor.POptionModel(e,this.model);if(void 0!==(o=o||t)){if(void 0!==o.text&&o.type&&"static"!==o.type&&(t.text=this.getDataTextVal(o,s,t,o.text)),void 0!==o.text2&&(t.text2=this.getDataTextVal(o,s,t,o.text2)),void 0!==o.text3&&(t.text3=this.getDataTextVal(o,s,t,o.text3)),void 0!==o.text4&&(t.text4=this.getDataTextVal(o,s,t,o.text4)),void 0!==o.text5&&(t.text5=this.getDataTextVal(o,s,t,o.text5)),void 0!==o.text6&&(t.text6=this.getDataTextVal(o,s,t,o.text6)),void 0!==o.text7&&(t.text7=this.getDataTextVal(o,s,t,o.text7)),void 0!==o.spendingPercentage&&o.type&&"static"!==o.type){e=new i.processor.PExp(o.spendingPercentage);try{var n=this.layoutInstructions.subType;t.spendingPercentage="goals"===n?Object.hasOwnProperty.call(t,o.spendingPercentage)?t[o.spendingPercentage]:null:e.eval(s,this.model)}catch(e){i.error("EntitySelectorProcessorBlock.addProperties() Error: Failed to evaluate spendingPercentage property. Error Message: "+e.message+" Error Stack: "+e.stack,!1,e)}}if(t.spendingPercentage&&1<t.spendingPercentage&&(t.spendingPercentage=1),void 0!==o.spendingLevel&&o.type&&"static"!==o.type){e=new i.processor.PExp(o.spendingLevel);try{t.spendingLevel=e.eval(s,this.model)}catch(e){i.error("EntitySelectorProcessorBlock.addProperties() Error: Failed to evaluate spendingLevel property. Error Message: "+e.message,!1,e)}}if(void 0!==o.icon&&void 0===t.icon){var e=new i.processor.PExp(o.icon),r=null;try{r="goals"===n?Object.hasOwnProperty.call(t,o.icon)?t[o.icon]:null:e.eval(s,this.model)}catch(e){i.error("EntitySelectorProcessorBlock.addProperties() Error: Failed to evaluate icon property. Error Message: "+e.message,!1,e)}t.icon=r}void 0!==o.action&&(t.action=o.action),void 0!==o.amountLabel&&(n=o.amountLabel,t.amountLabel=this.processText(n,s,this.model))}return t},i.processor.EntitySelectorProcessorBlock.prototype.getDataTextVal=function(e,t,s,o){var n=this.layoutInstructions.subType,o=this.processText(o,t,this.model),t="data"===e.type&&"goals"===n,e=t&&Object.hasOwnProperty.call(s,o)?s[o]:null,o="goals"===n&&"-"===o?"":o;return t?e:o},i.processor.EntitySelectorProcessorBlock.prototype.processData=function(){return this.layoutInstructions=i.processor.OptionsProcessorBlock.prototype.processData.call(this),delete this.layoutInstructions.selected,this.layoutInstructions},i.processor.EntitySelectorProcessorBlock.prototype.getOptId=function(e){return e}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.EntityListProcessorBlock=function(e,t,s,o,n,r){i.processor.OptionsProcessorBlock.call(this,e,t,s,o,n,r)},i.processor.EntityListProcessorBlock.prototype=Object.create(i.processor.OptionsProcessorBlock.prototype),i.processor.EntityListProcessorBlock.prototype.addProperties=function(e,t,s,o){t=i.processor.OptionsProcessorBlock.prototype.addProperties.call(this,e,t,s,o);var n,s=new i.processor.POptionModel(e,this.model);return void 0!==(o=o||t)&&(void 0!==o.entityTitle&&(e=o.entityTitle,t.entityTitle=this.processText(e,s,this.model)),void 0!==o.entityLabel1&&(e=o.entityLabel1,t.entityLabel1=this.processText(e,s,this.model)),void 0!==o.entityLabel2&&(e=o.entityLabel2,t.entityLabel2=this.processText(e,s,this.model)),void 0!==o.buttonLabel&&(e=o.buttonLabel,t.buttonLabel=this.processText(e,s,this.model)),void 0!==o.buttonLink&&(e=null,e="-"===(n=this.processText(o.buttonLink,s,this.model))?o.buttonLink:n,"data"===o.type?t.buttonLink=Object.hasOwnProperty.call(t,e)?t[e]:null:t.buttonLink=e),void 0!==o.icon&&(n=null,n="-"===(e=this.processText(o.icon,s,this.model))?o.icon:e,"data"===o.type?t.icon=Object.hasOwnProperty.call(t,n)?t[n]:null:t.icon=n),void 0!==o.editable&&(t.editable=o.editable),void 0!==o.action?t.action=o.action:t.buttonLink=null,void 0!==o.id&&(t.id=o.id)),t},i.processor.EntityListProcessorBlock.prototype.processData=function(){return this.layoutInstructions=i.processor.OptionsProcessorBlock.prototype.processData.call(this),this.layoutInstructions},i.processor.EntityListProcessorBlock.prototype.getOptId=function(e){return e}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.TriviaProcessorBlock=function(e,t,s,o,n,r){i.processor.OptionsProcessorBlock.call(this,e,t,s,o,n,r)},i.processor.TriviaProcessorBlock.prototype=Object.create(i.processor.OptionsProcessorBlock.prototype),i.processor.TriviaProcessorBlock.prototype.addProperties=function(e,t,s,o){t=i.processor.OptionsProcessorBlock.prototype.addProperties.call(this,e,t,s,o);s=new i.processor.POptionModel(e,this.model);return void 0!==t&&(void 0!==t.txt&&(o=t.txt,t.txt=this.processText(o,s,this.model)),t.text&&void 0===t.txt&&(t.txt=t.text)),t},i.processor.TriviaProcessorBlock.prototype.processData=function(){var e;return this.config.options=this.config.answers,this.layoutInstructions=i.processor.OptionsProcessorBlock.prototype.processData.call(this),void 0!==this.config.icon&&this.config.icon&&(e=this.processText(this.config.icon,this.model),this.layoutInstructions.icon=e),void 0!==this.config.questionText&&this.config.questionText&&(e=this.processText(this.config.questionText,this.model),this.layoutInstructions.questionText=e),void 0!==this.config.pageNumber&&this.config.pageNumber&&(e=this.processText(this.config.pageNumber,this.model),this.layoutInstructions.pageNumber=e),void 0!==this.config.backgroundImage&&this.config.backgroundImage&&(e=this.processText(this.config.backgroundImage,this.model),this.layoutInstructions.backgroundImage=e),void 0!==this.config.questionNumber&&this.config.questionNumber&&void 0!==this.config.totalNumberOfQuestions&&this.config.totalNumberOfQuestions&&(this.layoutInstructions.pageNavigation=!0),this.layoutInstructions.answers=this.layoutInstructions.options,delete this.layoutInstructions.options,this.layoutInstructions}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.CounterProcessorBlock=function(e,t,s,o,n,r){i.processor.BlockProcessor.call(this,e,t,s,o,n,r)},i.processor.CounterProcessorBlock.prototype=Object.create(i.processor.BlockProcessor.prototype),i.processor.CounterProcessorBlock.prototype.processData=function(){var e;return this.layoutInstructions=i.processor.BlockProcessor.prototype.processData.call(this),void 0!==this.config.id&&this.config.id&&(this.layoutInstructions.id=this.config.id),void 0!==this.config.txt&&this.config.txt&&(e=this.processText(this.config.txt,this.model),this.layoutInstructions.txt=e),void 0!==this.config.iconURL&&this.config.iconURL&&(e=this.processText(this.config.iconURL,this.model),this.layoutInstructions.iconURL=e),void 0!==this.config.sumTotal&&this.config.sumTotal&&(e=this.processText(this.config.sumTotal,this.model),this.layoutInstructions.sumTotal=e),void 0!==this.config.sumCounter&&this.config.sumCounter&&(e=this.processText(this.config.sumCounter,this.model),this.layoutInstructions.sumCounter=e),this.layoutInstructions}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.DateInput=function(e,t,s,o,n,r){i.processor.BlockProcessor.call(this,e,t,s,o,n,r)},i.processor.DateInput.prototype=Object.create(i.processor.BlockProcessor.prototype),i.processor.DateInput.prototype.processData=function(){var e;return this.layoutInstructions=i.processor.BlockProcessor.prototype.processData.call(this),void 0!==this.config.promptText&&this.config.promptText&&(e=this.processText(this.config.promptText,this.model),this.layoutInstructions.promptText="-"===e?null:e),void 0!==this.config.title&&this.config.title&&(e=this.processText(this.config.title,this.model),this.layoutInstructions.title=e),void 0!==this.config.label&&this.config.label&&(e=this.processText(this.config.label,this.model),this.layoutInstructions.label=e),void 0!==this.config.minDate&&this.config.minDate&&(e=this.processText(this.config.minDate,this.model),this.layoutInstructions.minDate=e),void 0!==this.config.maxDate&&this.config.maxDate&&(e=this.processText(this.config.maxDate,this.model),this.layoutInstructions.maxDate=e),this.layoutInstructions}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.NumberInput=function(e,t,s,o,n,r){i.processor.BlockProcessor.call(this,e,t,s,o,n,r)},i.processor.NumberInput.prototype=Object.create(i.processor.BlockProcessor.prototype),i.processor.NumberInput.prototype.processData=function(){var e;return this.layoutInstructions=i.processor.BlockProcessor.prototype.processData.call(this),void 0!==this.config.promptText&&this.config.promptText&&(e=this.processText(this.config.promptText,this.model),this.layoutInstructions.promptText="-"===e?null:e),void 0!==this.config.title&&this.config.title&&(e=this.processText(this.config.title,this.model),this.layoutInstructions.title=e),void 0!==this.config.label&&this.config.label&&(e=this.processText(this.config.label,this.model),this.layoutInstructions.label=e),void 0!==this.config.minNumber&&this.config.minNumber&&(e=this.processText(this.config.minNumber,this.model),this.layoutInstructions.minNumber="-"===e?0:e),void 0!==this.config.maxNumber&&this.config.maxNumber&&(e=this.processText(this.config.maxNumber,this.model),this.layoutInstructions.maxNumber="-"===e?0:e),this.layoutInstructions}}((window,window.Personetics=window.Personetics||{})),function(i){i.processor=i.processor||{},i.processor.Filter=function(e,t,s,o,n,r){i.processor.BlockProcessor.call(this,e,t,s,o,n,r)},i.processor.Filter.prototype=Object.create(i.processor.BlockProcessor.prototype),i.processor.Filter.prototype.processData=function(){var e;return this.layoutInstructions=i.processor.BlockProcessor.prototype.processData.call(this),void 0!==this.config.text&&this.config.text&&(e=this.processText(this.config.text,this.model),this.layoutInstructions.text=e),void 0!==this.config.tooltipText&&this.config.tooltipText&&(e=this.processText(this.config.tooltipText,this.model),this.layoutInstructions.tooltipText="-"===e?null:e),void 0!==this.config.filters&&this.config.filters.length?this.layoutInstructions.showToggle=!0:this.layoutInstructions.showToggle=!1,this.layoutInstructions}}((window,window.Personetics=window.Personetics||{})),function(o,e){var s=o.UI.Handlebars;o.story=o.story||{},o.story.PCtrlBase=Base.extend({initialize:function(e){this.parent=e,this.templates=[],this.partialTemplates=this.getPartialTemplates(),this.initHandlebars()},start:function(){},getGraphPalette:function(){return null},handleMessage:function(){},initHandlebars:function(){this.handlebars=this.handlebars||{},this.handlebars=e.extend(!0,{},this.handlebars,s),this.registerPartialTemplates()},getTemplateHtml:function(e,t){return this.getTemplate(e)(t)},getTemplate:function(e){var t,s=this.templates[e];return(s=s||this.getPrecompiledTemplate(e))||(t="Error Message: "+(e=new Error("Unknown template '"+e+"'")).message+" Error Stack:"+e.stack,o.error(t,!1,e)),s},getPrecompiledTemplate:function(e){return"#"==e.substr(0,1)&&(e=e.substr(1)),s.templates[e]},compileTemplate:function(e){return this.handlebars.compile(e)},getPartialTemplates:function(){return[{name:"innerCard",id:"pstory-block-account-selector-inner-card"},{name:"innerCardDesktop",id:"pstory-block-account-selector-inner-card-desktop"},{name:"monthPicker",id:"pstory-block-month-picker"},{name:"allCard",id:"tmpl-pstory-all-card"},{name:"allCardASNT2",id:"tmpl-pstory-all-card-asnt2"},{name:"allCardASWT1",id:"tmpl-pstory-all-card-aswt1"},{name:"allCardASWT2",id:"tmpl-pstory-all-card-aswt2"},{name:"allCardASWT3",id:"tmpl-pstory-all-card-aswt3"},{name:"allCardASWT4",id:"tmpl-pstory-all-card-aswt4"},{name:"singleCard",id:"tmpl-pstory-single-card"},{name:"singleCardASNT2",id:"tmpl-pstory-single-card-asnt2"},{name:"singleCardASWT1",id:"tmpl-pstory-single-card-aswt1"},{name:"singleCardASWT2",id:"tmpl-pstory-single-card-aswt2"},{name:"singleCardASWT3",id:"tmpl-pstory-single-card-aswt3"},{name:"singleCardASWT4",id:"tmpl-pstory-single-card-aswt4"},{name:"persoCalendarBlock",id:"tmpl-pstory-calendar"},{name:"calendarDayCL1",id:"tmpl-pstory-calendar-day-CL1"},{name:"calendarDayCL4",id:"tmpl-pstory-calendar-day-CL4"},{name:"entitySelectorIcons",id:"tmpl-pstory-entity-selector-icons"},{name:"entitySelectorCards",id:"tmpl-pstory-entity-selector-cards"}]},registerPartialTemplates:function(){this.partialTemplates.forEach(function(e){var t=s.templates[e.id];null!=t&&s.registerPartial(e.name,t)})}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.PBlockCatalog=e.story.PBlockCatalog||{},e.story.PBlockCatalog.blockMapping={"account-selector":{"AS-NT-1":"Personetics.story.AccountSelectorBlockV2","AS-NT-2":"Personetics.story.AccountSelectorBlockASNT2","AS-NT-4":"Personetics.story.AccountSelectorBlockASNT4","AS-WT-1":"Personetics.story.AccountSelectorBlockASWT1","AS-WT-2":"Personetics.story.AccountSelectorBlockASWT2","AS-WT-3":"Personetics.story.AccountSelectorBlockASWT3","AS-WT-4":"Personetics.story.AccountSelectorBlockASWT4"},"bar-chart":{single:{"BC-1":"Personetics.story.BarChartBlock","BC-2":"Personetics.story.BarChartBlockBC2","BC-3":"Personetics.story.BarChartBlockBC3","BC-4":"Personetics.story.BarChartBlockBC4","BC-5":"Personetics.story.BarChartBlockBC5","BC-6":"Personetics.story.BarChartBlockBC6"},multi:{"CC-18-2":"Personetics.story.BarChartBlock","CC-1":"Personetics.story.ComparableChartBlock","CC-2":"Personetics.story.ComparableChartCC2","CC-3":"Personetics.story.ComparableChartCC3","CC-4":"Personetics.story.ComparableChartCC4","CC-5":"Personetics.story.ComparableChartCC5","CC-6":"Personetics.story.ComparableChartCC6"}},"pin-graph":{"PC-H-1":"Personetics.story.PinGraphChartBlock","PC-V-2":"Personetics.story.PinGraphChartBlocPCV2","PC-V-3":"Personetics.story.PinGraphChartBlockPCV3"},"line-chart":{"LC-1":"Personetics.story.DotsLineChartBlockLC1","LC-2":"Personetics.story.DotsLineChartBlockLC2","LC-3":"Personetics.story.DotsLineChartBlockLC3","LC-WT-1":"Personetics.story.DotsLineChartBlockLCWT1","LC-WT-2":"Personetics.story.DotsLineChartBlockLCWT2"},"pie-chart":{"PC-1":"Personetics.story.PieChartPC1","PC-2":"Personetics.story.PieChartPC2","PC-3":"Personetics.story.PieChartPC3","PC-4":"Personetics.story.PieChartPC4","PC-5":"Personetics.story.PieChartPC5"},filter:{"FL-1":"Personetics.story.FilterFL1"},tranList:{basic:{"TL-1":"Personetics.story.TransactionListBlockTL1","TL-2":"Personetics.story.TransactionListBlockTL2","TL-3":"Personetics.story.TransactionListBlockTL3","TL-5":"Personetics.story.TransactionListBlockTL5","TL-6":"Personetics.story.TransactionListBlockTL6"},dateAndAmountComment:{"TL-1":"Personetics.story.TransactionListBlockTL1","TL-2":"Personetics.story.TransactionListBlockTL2","TL-3":"Personetics.story.TransactionListBlockTL3","TL-5":"Personetics.story.TransactionListBlockTL5","TL-6":"Personetics.story.TransactionListBlockTL6"},dateComment:{"TL-1":"Personetics.story.TransactionListBlockTL1","TL-2":"Personetics.story.TransactionListBlockTL2","TL-3":"Personetics.story.TransactionListBlockTL3","TL-5":"Personetics.story.TransactionListBlockTL5","TL-6":"Personetics.story.TransactionListBlockTL6"},amountComment:{"TL-1":"Personetics.story.TransactionListBlockTL1","TL-2":"Personetics.story.TransactionListBlockTL2","TL-3":"Personetics.story.TransactionListBlockTL3","TL-5":"Personetics.story.TransactionListBlockTL5","TL-6":"Personetics.story.TransactionListBlockTL6"},feedback:{"TL-FB":"Personetics.story.FeedbackTransaction"}},textboxes:{"BX-1":"Personetics.story.TextBoxesBX1","BX-2":"Personetics.story.TextBoxesBX2","BX-3":"Personetics.story.TextBoxes"},buttons:{feedbackQuestion:{"QR-1":"Personetics.story.QuickReplyButtons"},feedbackUndoButton:{"FBU-1":"Personetics.story.FeedbackUndoButton"},basic:{"BTN-1":"Personetics.story.NewButtonsBlock","BTN-2":"Personetics.story.NewButtonsBlockBTN2","BTN-3":"Personetics.story.NewButtonsBlockBTN3","BTN-4":"Personetics.story.NewButtonsBlockBTN4","BTN-6":"Personetics.story.NewButtonsBlockBTN6"},"radio-button":{"RB-1":"Personetics.story.RadioButton","RB-2":"Personetics.story.RadioButtonRB2","RB-3":"Personetics.story.RadioButtonRB3","RB-4":"Personetics.story.RadioButtonRB4"},detailedLink:{"LNK-1":"Personetics.story.triviaButtons","LNK-2":"Personetics.story.triviaButtonsLNK2","LNK-5":"Personetics.story.triviaButtonsLNK5","LNK-6":"Personetics.story.triviaButtonsLNK6"}},tabs:{"TB-1":"Personetics.story.TabsTB1","TB-2":"Personetics.story.TabsTB2","TB-3":"Personetics.story.TabsTB3","TB-4":"Personetics.story.TabsTB4","TB-6":"Personetics.story.TabsTB6"},calendar:{"CL-1":"Personetics.story.CalendarBlockCL1","CL-2":"Personetics.story.CalendarBlockCL2","CL-3":"Personetics.story.CalendarBlockCL3","CL-4":"Personetics.story.CalendarBlockCL4","CL-6":"Personetics.story.CalendarBlockCL6"},"entity-selector":{icons:{"ES-1":"Personetics.story.EntitySelectorBlockES1Icons","ES-2":"Personetics.story.EntitySelectorBlockES2Icons","ES-3":"Personetics.story.EntitySelectorBlockES3Icons"},cards:{"ES-1":"Personetics.story.EntitySelectorBlockES1Cards","ES-3":"Personetics.story.EntitySelectorBlockES3Cards"},goals:{"ES-1":"Personetics.story.EntitySelectorGoals"}},trivia:{"TRV-1":"Personetics.story.TriviaBlockTRV1","TRV-3":"Personetics.story.TriviaBlockTRV3","TRV-4":"Personetics.story.TriviaBlockTRV4","TRV-5":"Personetics.story.TriviaBlockTRV5"},counter:{"SCR-1":"Personetics.story.CounterBlockSCR1","SCR-2":"Personetics.story.CounterBlockSCR2","SCR-4":"Personetics.story.CounterBlockSCR4"},"entity-list":{"EL-1":"Personetics.story.EntityListEL1","EL-3":"Personetics.story.EntityListEL3","EL-4":"Personetics.story.EntityListEL4"}}}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.PBlockCatalog=e.story.PBlockCatalog||{},e.story.PBlockCatalog.blockMapping["bar-chart"].multi["CC-3"]="Personetics.story.GlorifiComparableChartCC3",e.story.PBlockCatalog.blockMapping["pie-chart"]["PC-4"]="Personetics.story.SOCGENPieChartPC4"}((window,window.Personetics=window.Personetics||{}),jQuery),function(i,a){a.story=a.story||{},a.story.PBlockMappingUtility=new function(){function o(e,t){for(var s=e.split("."),e=s.pop(),o=0;o<s.length;o++)t=t[s[o]];return t[e]}var n={"bar-chart":"single",buttons:"basic",tranList:"basic","entity-selector":"icons"},r=a.story.PBlockCatalog.blockMapping;return{getBlockClass:function(e,t,s){if("undefined"!==e&&r[e])return s=s?r[e][s][t]||r[e][s][1]:r[e][t]||r[e][1],o(s,i);a.log("Invalid block type '"+e+"'")},getClassObjectFromEntry:function(e,t,s,o){e=e.widthModes[t][s];return o&&e[o]?e=e[o]:"function"!=typeof e&&(e=e[n[s]]),e},isSubTypeExist:function(e,t){return!(!r[e]||!r[e][t])},isTypeExist:function(e){return!!n[e]},getDefaultSubType:function(e){if(n[e])return n[e]}}}}(window,window.Personetics=window.Personetics||{},jQuery),function(e){e.colorsConfigObjectMapping={darkMode:{alertColor:"#ff0000",brandColor:"#d7dced",datesColor:"#cbced7",headerColor:"#ffffff",inflowColor:"#15a4ff",outflowColor:"#ff6c53",pickerColor:"#e4e4e4",greyLightColor:"#D7D7D7",backgroundColor:"#121212",backgroundDarkColor:"#383838"}}}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.selectorsObj={brandColor:[["border-color","","border-color"],["color-forty-opacity","","color","opacity: 0.4"],["color-sixty-opacity","","color","opacity:0.6"],["color-eighty-opacity","","color","opacity:0.8"],["backgroundColor","","background-color"],["selected-dot-background",".perso-dot-wrapper .perso-dot-item.perso-selected","background-color"],["mtd",".perso-indicator-type-mtd-1 , .perso-legend-wrapper .perso-bar-chart-legend.perso-indicator-type-mtd-1:before","border-color"],["svg-dot-stroke",".perso-svg-chart-container .perso-dot","stroke"],["svg-dot-fill",".perso-svg-chart-container .perso-dot","fill"],["svg-line-graph-stroke",".perso-svg-chart-container .perso-line","stroke"],["progress-bar-background",".pstory-entity-icon .pstory-entity-icon-indicator .perso-partial-rectangle","background-color"],["progress-bar-background",".pstory-entity-icon .pstory-entity-icon-indicator .perso-partial-circle","stroke"],["teaser-progress-bar-background",".perso-entity .perso-entity-indicator .perso-partial-circle","stroke"],["tabs-coloring",".pstory-tab-animated-border-bottom","background-color"],["tabs-coloring",".pstory-tab.pstory-header-button.perso-selected","color"],["two-tabs-coloring",".pstory-tab.pstory-header-button","color"],["dot-selected-background",".perso-dot-item.perso-selected","background-color"],["budget-coloring",".perso-svg-container-group .perso-line","stroke","opacity: 0.3;"],["budget-coloring",".perso-bar-budget-label","color"],["teasers-general",".perso-teaser-template.perso-unread .pstory-block-date-box, .perso-teaser-template.perso-new .pstory-block-date-box","color"],["teasers-general",".perso-teaser-template.perso-unread .perso-teaser-text, .perso-teaser-template.perso-new .perso-teaser-text","color"],["teasers-general",".perso-teaser-template.perso-unread .perso-teaser-top .perso-insight-title-text, .perso-teaser-template.perso-new .perso-teaser-top .perso-insight-title-text","color"],["teasers-general",".perso-teaser-template.perso-unread .pstory-block-date-box:before, .perso-teaser-template.perso-new .pstory-block-date-box:before","background-color"],["teasers-general",".perso-teaser-template .perso-double-box .perso-double-box-value","color"],["teasers-general",".perso-teaser-template a.pstory-button","background-color"],["teasers-general",".perso-filter-selected-tab","background"],["teasers-general",".perso-teaser-filter-tab","color"],["teasers-general",".personetics-no-insights-btn","background-color"],["line-chart",".perso-dot","stroke"],["pie-chart",".pstory-pie-chart .perso-total-txt","fill"],["button-coloring",".pstory-button:not(:active)","color"],["button-coloring",".pstory-button","border-color"],["button-coloring",".pstory-button:active","background-color"],["svg-dot-label-fill",".perso-svg-chart-container .perso-dot-label","fill"],["svg-dot-label-fill",".perso-dot-label-polygon","fill"],["svg-path-stroke",".perso-svg-chart-container .perso-line","stroke"],["selected-button-background",".pstory-button.perso-selected","background"],["selected-radio-button-background",".pstory-radio-button.perso-selected","background-color"],["teaser-line-chart",".perso-line","stroke"],["teaser-line-chart",".perso-dot","stroke"],["story-general",".personetics-no-story-btn","background-color"],["selected-dot-background",".pstory-block-entity-selector .perso-dot-item.perso-selected","background-color"],["rb2-selected-border-color",".pstory-radio-button.perso-selected","border-color"],["rb2-selected-color",".pstory-radio-button.perso-selected label","color"],["budget-amount-border-color",".perso-category-data-wrapper .perso-category-data .perso-budget-amount-wrapper","border-color"],["budget-amount-color",".perso-category-data-wrapper .perso-category-data .perso-budget-amount-wrapper .perso-budget-amount","color"],["subscribed-placeholder-color",".perso-category-wrapper .perso-category-data-wrapper .perso-category-data .perso-budget-amount-wrapper .perso-placeholder","color"],["disclaimer-finish-btn-background",".perso-modal-text .perso-disclaimer-finish-button","background"],["stop-btn-background",".perso-modal-text .perso-stop-button","background"],["close-btn-border",".perso-modal-text .perso-stop-button-no","border-color"],["close-btn-color",".perso-modal-text .perso-stop-button-no","color"],["title-text-color",".pstory-title-text","color"],["subscription-button-border-color",".perso-button-column .perso-subscription-details-wrapper .perso-button","border-color"]],pickerColor:[["tabs-coloring",".pstory-tab.pstory-header-button.perso-selected","color"],["color-sixty-opacity","","color"],["selected-month-item-color",".perso-month-picker-item.perso-selected","color"],["unselected-month-item-color",".perso-month-picker-item:not(.perso-selected)","color","opacity:0.6"],["horizontal-months-color",".perso-svg-chart-container.multiHorizontal text","fill"]],outflowColor:[["pie-chart",".pstory-pie-chart .perso-arc .perso-selected","fill"]],headerColor:[["comparable-bar-in-background",".perso-bars-wrapper .perso-series-wrapper .perso-series .perso-bar-wrapper.perso-in .perso-bar:not(.perso-indicator)","background-color"],["color-sixty-opacity","","color","opacity:0.6"],["tabs-coloring",".pstory-tab.pstory-header-button:not(.perso-selected)","color"],["tabs-coloring-sixty-opacity",".pstory-tab.pstory-header-button:not(.perso-selected) span","color","opacity:0.6"],["tabs-selected-coloring",".pstory-tab.pstory-header-button.perso-selected","background-color"],["seperator-coloring",".pstory-tab.pstory-header-button:first-child::after","background-color"],["seperator-coloring",".pstory-tab.pstory-header-button:last-child::after","background-color"],["border-color","","border-color"],["svg-tick-text-fill",".perso-svg-chart-container .tick text","fill"],["svg-line-graph-stroke",".perso-svg-chart-container .perso-line","stroke"],["pie-texts-color",".pstory-pie-info .pstory-pie-category","color"],["pie-texts-color",".pstory-pie-chart .perso-total-txt","fill"],["pie-texts-color",".pstory-pie-chart .perso-total-amount","fill"],["teasers-general",".perso-teaser-template.perso-read .pstory-block-date-box","color"],["teasers-general",".perso-teaser-template.perso-read .perso-teaser-text","color"],["teasers-general",".perso-teaser-template.perso-read .perso-teaser-top .perso-insight-title-text","color"],["teasers-general",".perso-teaser-template.perso-read .pstory-block-date-box:before","background-color"],["teasers-general",".perso-teaser-template .perso-double-box .perso-double-box-text","color"],["teasers-general",".perso-text-section .perso-teaser-text","color"],["teasers-general",".personetics-error-larg","color"],["teasers-general",".personetics-error-small","color"],["teasers-general",".personetics-nothing-toshow-msg","color"],["teasers-general",".personetics-no-insights-small","color"],["teasers-general",".personetics-no-insights-larg","color"],["month-picker-selected-background",".perso-month-picker-container .pstory-month-picker-selected-tab","background-color"],["not-selected-button-color",".pstory-button:not(.perso-selected)","color"],["incorrect-answer-color",".perso-answer-text-incorrect","color"],["unselected-text-color",".pstory-tab:not(.perso-selected)","color"],["story-general",".personetics-error-larg","color"],["story-general",".personetics-error-small","color"],["message-text-color",".perso-message-text","color"],["pin-amount-tooltip-borde-color:after","","border-top-color"],["rb2-border-color",".pstory-radio-button","border-color"],["rb2-color",".pstory-button label","color"],["tootip-after-color",".perso-tooltip-container:after","border-top-color"],["benchmark",".perso-bar-benchmark-line .perso-benchmark-line","background-color","box-shadow:0 1px 1px 0 #000000"],["benchmark",".perso-bar-benchmark-line .perso-benchmark-label","color","text-shadow: 0 1px 2px #000000"],["user-tag-placeholder-color",".perso-tag-user-input::placeholder","color"],["user-tag-placeholder-color",".perso-tag-user-input:-ms-input-placeholder","color"],["user-tag-placeholder-color",".perso-tag-user-input::-webkit-input-placeholder","color"],["user-tag-placeholder-color",".perso-details-value","color"]],alertColor:[["range-before-background",".perso-calendar-row .perso-calendar-day.perso-range:before","background-color"],["range-before-background",".perso-calendar-row .perso-calendar-day.perso-range.perso-right-edge:before","background-color"],["range-before-background",".perso-calendar-row .perso-calendar-day.perso-range.perso-left-edge:before","background-color"],["range-before-background",".perso-calendar-row .perso-calendar-day.perso-range.before-last-perso-calendar-range:before","background-color"],["range-before-background",".perso-calendar-row .perso-calendar-day.perso-range.last-perso-calendar-range:before","background-color"],["progress-bar-background",".pstory-entity-icon.perso-above-threshold .pstory-entity-icon-indicator .perso-partial-rectangle","background-color"],["progress-bar-background",".pstory-entity-icon.perso-above-threshold .pstory-entity-icon-indicator .perso-partial-circle","stroke"],["teaser-progress-bar-background",".perso-entity.perso-above-threshold .perso-entity-indicator .perso-partial-circle","stroke"]],greyLightColor:[["border-color","","border-color"],["dot-background",".perso-dot-wrapper .perso-dot-item","background-color"],["bottom-line-border",".perso-account-selector-carousel-wrapper:after","border-color"],["month-picker-background",".perso-month-picker-container:before","background-color"],["bars-background",".perso-bar-chart-container .perso-bars-wrapper .perso-bar-wrapper.perso-simple-bar .perso-bar:not(.perso-indicator)","background-color"],["bars-series-background",".perso-series-wrapper .perso-series .perso-bar-wrapper.perso-out .perso-bar:not(.perso-indicator)","background-color"],["line-between-border-color",".perso-static-tooltip:first-child:after","border-color"],["separator-line-border-color",".perso-pinGraph-container .perso-pinGraph-raw","border-color"],["svg-vertical-line",".perso-svg-chart-container .axis line","stroke"],["tabs-unselected-coloring",".perso-tablist:before","background-color"],["buttons-background",".pstory-block-container .pstory-block-content .pstory-button:before","background-color"],["button-bottom-border-color",".pstory-block-container .pstory-block-content .pstory-radio-button-wrapper","border-color"],["answer-bottom-border-color",".perso-answers-wrapper","border-color"],["button-bottom-border-color",".perso-trivia-button","border-color"],["indicator-stroke-color",".pstory-entity-icon-indicator .perso-main-circle","stroke"],["selected-answer-background",".perso-answer.perso-selected","background-color"],["teasers-general",".perso-double-box-left .perso-double-box-container","border-color"],["teasers-general",".perso-teaser-filter:before","background-color"],["teaser-indicator-stroke-color",".perso-entity .perso-entity-indicator .perso-main-circle","stroke"],["before-border-color",".perso-table-row:before","border-color"],["active-answer-background",".perso-answer:active","background-color","opacity: 0.3"],["rb2-hover-background",".pstory-button:not(.perso-selected):hover","background-color"],["budget-placeholder-color",".perso-category-data-wrapper .perso-category-data .perso-budget-amount-wrapper .perso-placeholder","color"],["budget-placeholder-text-color",".perso-category-data-wrapper .perso-category-data .perso-budget-amount-wrapper .perso-placeholder .perso-placeholder-text","color"]],backgroundColor:[["border-color","","border-color"],["calendar-first-range-background",".perso-calendar-day.perso-range.first-perso-calendar-range:before","background-image"],["month-picker-selected-color",".perso-month-picker-container .perso-month-picker-item.perso-selected","color"],["svg-label-text-fill",".perso-svg-chart-container .perso-dot-label-text","fill"],["svg-label-text-fill",".perso-svg-chart-container .perso-dot-label2-text","fill"],["selected-button-color",".pstory-button.perso-selected","color"],["not-selected-button-background",".pstory-button:not(.perso-selected)","background-color"],["tabs-background-coloring",".perso-tablist","background-color"],["tabs-background-coloring",".pstory-tab.pstory-header-button","background-color"],["tabs-selected-coloring",".pstory-tab.pstory-header-button.perso-selected","color"],["selected-radio-button-color",".pstory-radio-button.perso-selected label","color"],["selected-month-color",".perso-month-picker-item.perso-selected","color"],["unselected-month-color",".perso-month-picker-item:not(.perso-selected)","color","opacity:0.6"],["teasers-general",".perso-teaser-template a.pstory-button","color"],["teasers-general",".personetics-no-insights-btn .personetics-btn-text","color"],["teaser-line-chart",".perso-dot","fill"],["area-container-fill",".perso-area-container","fill"],["calendar-range-background",".perso-calendar-row .perso-calendar-day.perso-available:before","background-color"],["calendar-range-background",".perso-calendar-row .perso-calendar-day.perso-available.perso-left-edge:before","background-color"],["calendar-range-background",".perso-calendar-row .perso-calendar-day.perso-available.perso-right-edge:before","background-color"],["close-btn-background",".perso-modal-text .perso-stop-button-no","background"],["story-widget-background",".perso-story-widget","background-color"]],backgroundDarkColor:[["selected-answer-background",".perso-answer.perso-selected","background-color"],["category-container-selected",".perso-category-container:hover","background-color"],["category-container-selected",".perso-category-container.perso-selected","background-color"],["svg-container-background",".perso-svg-chart-container","background-color"],["amount-tip-border-top-color",".perso-bar-chart-tooltip-container:after","border-top-color"],["tooltip-text-container-before-after",".pstory-block-tooltip-text-container:after","border-top-color"],["tooltip-text-container-before-after",".pstory-block-tooltip-text-container:before","border-bottom-color"],["progress-bar-background",".pstory-entity-icon .pstory-entity-icon-indicator","background-color"],["teaser-filter-wrapper-background",".perso-teaser-widget .perso-teaser-filter-wrapper","background-color"],["title-wrapper-background",".perso-title-outer-wrapper","background-color"]]}}((window,window.Personetics=window.Personetics||{}),jQuery),function(c,i){c.story=c.story||{},c.story.PBlockFactory=new function(){this.blockFactoryMap={},this.index="0",this.blockClassMaps=c.story.PBlockMappingUtility,this.registerBlock=function(e,t){var s=this.registerBlockOnFactory(e),o=e,n="default";t.widthMode&&(n=t.widthMode),void 0===s.widthModes[n]&&(s.widthModes[n]={}),t.blockClass?this.setBlockClassByClass(t,s,o,n):t.version&&t.subType?this.setBlockClassBySubType(t,s,e,o,n):t.version&&this.setBlockClassByVersion(t,s,e,o,n)},this.createBlock=function(e,t,s){var o,n=s.cfg,r=t.type,i="default",a=t.class||t.type,n=n.widthMode||i,l=this.blockFactoryMap[r];return l&&(void 0===l.widthModes[n]&&(n=i),void 0===l.widthModes[n][a]&&(void 0===l.widthModes.default[a]?a=r:n=i),o=this.blockClassMaps.getClassObjectFromEntry(l,n,a,t.subType)),o||(o=c.story.Block,c.log("Invalid block type '"+r+"'")),new o(e,t,s)},this.registerBlockOnFactory=function(e){var t;return e&&!(t=this.blockFactoryMap[e])&&(this.blockFactoryMap[e]=t={type:e,widthModes:{}}),t},this.setBlockClassByClass=function(e,t,s,o){e.class&&(s=e.class),t.widthModes[o][s]=e.blockClass},this.setBlockClassBySubType=function(e,t,s,o,n){var r=this.blockClassMaps.getBlockClass(s,e.version,e.subType),e=e.subType;!i.isEmptyObject(t.widthModes[n][s])&&"function"!=typeof t.widthModes[n][s]||(t.widthModes[n][o]={},t.widthModes[n][o][e]={}),t.widthModes[n][o][e]=r},this.setBlockClassByVersion=function(e,t,s,o,n){s=this.blockClassMaps.getBlockClass(s,e.version);t.widthModes[n][o]=s}}}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,t){s.story=s.story||{},s.story.PSkinControler=Base.extend({initialize:function(){s.projectConfiguration.setConfig({supportCollapse:!1,accountSelectorCollapse:!1,monthPickerCollapse:!1,pieChartCollapse:!1,calendarCollapse:!1,showTitle:!0,showLoadingAnimation:!(personetics.config&&(personetics.config.enableNativeLoader||personetics.config.loaderEvent)),showFeedback:!0})},setStory:function(e){this.story=e},setPersoneticsWrapper:function(e){this.persoWrapper=e},getPersoneticsWrapper:function(e){e=e&&e.length?t(e).parents("#perso-responsive-container"):t("#perso-responsive-container");return e=this.persoWrapper?this.persoWrapper:e},getMode:function(){var e=s.utils.persoBrowserDetector.getBrowserData().deviceType;return e.slice(e.indexOf("-")+1)},registerWidgets:function(){this.registerDefaultWidgets()},registerBlocks:function(){this.registerDefaultBlocks(),this.registerDefaultChartHeplers()},getTablesFormat:function(){return s.story.getTablesFormat()},afterRender:function(e,t){e.shouldShow()&&(e.el.css({opacity:0,visibility:"visible"}),e.el.fadeTo(0,1)),t&&t()},beforeRender:function(e,t){t()},registerBlock:function(e,t){s.story.PBlockFactory.registerBlock(e,t)},registerChartHelper:function(e,t){s.story.BlockChartFactory.registerChartHelper(e,t)},getAccountSelectorPalette:function(){return["darkBlue","turquoise","grey","red","lightBlue","orange"]},getGraphPalette:function(){return["#5D68C2","#3B49B6","#1729AF","#111F88","#08176C"]},getColumnGraphPalette:function(){return["#5D68C2","#3B49B6","#1729AF","#111F88","#08176C"]},getBarGraphPalette:function(){return["#5D68C2","#3B49B6","#1729AF","#111F88","#08176C"]},getPieGraphPalette:function(){return["#5D68C2","#3B49B6","#1729AF","#111F88","#08176C"]},getBarChartMultiSeriesLabels:function(t){return function(){var e;return t&&0<t.length?(e=t[this.series.index],"<span class='"+this.series.name+"'>"+e+"</span>"):""}},registerDefaultBlocks:function(){this.registerBlock("txt",{blockClass:s.story.TextBlock}),this.registerBlock("text",{blockClass:s.story.TextBlock}),this.registerBlock("date-box",{blockClass:s.story.DateBoxBlock}),this.registerBlock("image",{blockClass:s.story.ImageBlock}),this.registerBlock("textboxes",{blockClass:s.story.TextBoxes}),this.registerBlock("buttons",{blockClass:s.story.ButtonsBlock}),this.registerBlock("account-selector",{blockClass:s.story.AccountSelectorBlock}),this.registerBlock("entity-selector",{blockClass:s.story.EntitySelectorBlock}),this.registerBlock("tabs",{blockClass:s.story.TabsBlock}),this.registerBlock("external-links",{blockClass:s.story.ButtonsBlock}),this.registerBlock("line-chart",{blockClass:s.story.DotsLineChartBlock}),this.registerBlock("bar-chart",{blockClass:s.story.BarChartBlock}),this.registerBlock("pinGraph-chart",{blockClass:s.story.PinGraphChartBlock})},registerDefaultChartHeplers:function(){this.registerChartHelper("verticalHelper",{helperClass:s.utils.d3Helpers.VerticalChartHelper}),this.registerChartHelper("horizontalHelper",{helperClass:s.utils.d3Helpers.HorizontalChartHelper}),this.registerChartHelper("multiVerticalHelper",{helperClass:s.utils.d3Helpers.MultiVerticalChartHelper}),this.registerChartHelper("multiHorizontalHelper",{helperClass:s.utils.d3Helpers.MultiHorizontalChartHelper}),this.registerChartHelper("pinGraphHelper",{helperClass:s.utils.d3Helpers.PinGraphChartHelper}),this.registerChartHelper("lineChartHelper",{helperClass:s.utils.d3Helpers.LineChartHelper})},registerDefaultWidgets:function(){s.UI.PWidgetFactory.registerWidget("app-ctrl",{widgetClass:s.UI.PAppCtrl,widgetName:"Base app ctrl"}),s.UI.PWidgetFactory.registerWidget("master",{widgetClass:s.UI.PAppCtrl,widgetName:"Base master"}),s.UI.PWidgetFactory.registerWidget("ratings",{widgetClass:s.UI.PRatingCtrl,widgetName:"Base ratings"}),s.UI.PWidgetFactory.registerWidget("story-widget",{widgetClass:s.UI.PStoryWidgetCtrl,widgetName:"Base story widget"}),s.UI.PWidgetFactory.registerWidget("loading-animation",{widgetClass:s.UI.PLoadingAnimationCtrl,widgetName:"Base loading"}),s.UI.PWidgetFactory.registerWidget("teaser-insight-widget",{widgetClass:s.UI.PInsightTeaserWidgetCtrl,widgetName:"Base teaser insight widget"})}}),s.story.skinController=s.story.PSkinControler}((window,window.Personetics=window.Personetics||{}),jQuery),function(a,l){a.story=a.story||{},a.story.PDialog=Base.extend({initialize:function(e,t){this.story=e,this.config=t,this.lang=e.lang,this.id=e.getId()+"_"+this.config.id,this.txts={},this.visible=!1,this.class=this.config.class||"",this.config.showIf&&(this.showCondExp=new a.processor.PExp(this.config.showIf)),this.isShouldShow=null,this.loadTexts(e.texts,e.lang,e.defaultLang),this.initializeBlocks()},loadTexts:function(e,o,n){var s=this.config.txt||{},r=e&&Object.prototype.hasOwnProperty.call(e,this.config.id)?e[this.config.id]:null,i=(r&&(e=Object.prototype.hasOwnProperty.call(r,o)?r[o]:r[n],l.each(e,function(e,t){s[e]=t})),this);s?l.each(s,function(e,t){var s=t;r&&(s=(s=(s=r[o]?r[o][e]:null)||(r[n]?r[n][e]:t))||t),i.txts[e]=s}):a.log("Personetics.story.PDialog.loadTexts: dialog doesn't have any text configuration")},getId:function(){return this.id},getShortId:function(){return this.config.id},getText:function(e){var t,s;return t=this.txts&&(s=this.txts)?s[e]:t},processText:function(e,t,s){e=this.getText(e);return e?"preview"==this.story.mode?e.getTextTemplate():e.process(t,s):"-"},shouldShow:function(){if(!this.showCondExp)return!0;if(null==this.isShouldShow)try{this.isShouldShow=this.showCondExp.eval(this.story.model)}catch(e){this.isShouldShow=null}return this.isShouldShow},generateData:function(){var e=this.isFirstDialog,t={id:this.getId(),class:this.config.class,backgroundImage:this.config.backgroundImage||""};return this.config.isSingleDialogMode&&(t.btn=[],t.btn.diaogBtn=[],t.btn.showBtn=[],this.config.next?t.btn.push({diaogBtn:a.dictionary.getText("continue"),actionBtn:"continue",showBtn:!0}):t.btn.push({diaogBtn:a.dictionary.getText("close"),actionBtn:"close",showBtn:!0}),e||t.btn.push({diaogBtn:a.dictionary.getText("previous"),actionBtn:"prev",showBtn:!0})),t},render:function(e,t){this.isFirstDialog=t;var t=this.shouldShow(),s=this.config.isSingleDialogMode;s&&!t?this.story.renderDialog():t&&(t=this.story.getTemplate("#tmpl-pstory-dialog"),s&&(t=this.story.getTemplate("#tmpl-pstory-dialog-continue-btn"),e.find(".pstory-dialog-frame").hide()),s=t(this.generateData()),t=l(s),this.el=t,e.append(t))},afterRender:function(){var o,n,e=this.el,t=this.shouldShow(),s=this.config.isSingleDialogMode;t&&(t=this.el.find(".pstory-dialog-content"),s&&(this.story.parent.scrollTo&&this.story.parent.scrollTo(e.offset().top),s=this.el.find(".pstory-dialog-buttons").height(),t.height(t.height()-s)),t.parents(".pstory-dialog-frame").hasClass("perso-horizontal")&&(this.config.dialogWidth=t.width()),this.renderBlocks(t),t.parents(".pstory-dialog-frame").hasClass("perso-horizontal")&&(e=t.find(".pstory-block-frame"),o=t.width(),n=0,o/=e.length,l.each(e,function(e,t){var s=parseInt(l(t).css("margin-left"))+parseInt(l(t).css("margin-right")),s=o-s,s=(l(t).width(s),l(t).children().first().height());n=n<s?s:n}),t.height(n)))},bindEvents:function(){var e,t,s,o=this.story;this.shouldShow()&&(e=this.el,t=this.el.find(".pstory-dialog-content"),(s=o.cfg.dlgClickHandler)&&t.bind("click",function(){s(this)}),e.find(".pstory-dialog-btn").bind("click",function(){var e={};if("prev"==l(this).data("action"))e.renderPreviousDialog=!0;else if("close"==l(this).data("action"))return void o.closeHandler();o.renderDialog(null,e)}))},initializeBlocks:function(){var o=this,n=this.story;n.blockSessionManager.resetDialog(this.getShortId()),this.config.blocks.forEach(function(e,t){var s=!0;if(e.showIf)try{s=new a.processor.PExp(e.showIf).eval(n.model)}catch(e){s=!0}s&&(e.index=t,n.blockSessionManager.startBlock(o.getShortId(),o.txts,e,t))})},renderBlocks:function(e){this.story.blockSessionManager.renderBlocks(this.getShortId(),e,this.isFirstDialog)},setIsBlock:function(){this.shouldShow()&&(this.el.addClass("perso-block"),l(this.el).find("*").off())},setVisible:function(e){this.visible!=e&&(this.visible=e,this.story.blockSessionManager.setVisible(this.getShortId,e))},addBlock:function(e){this.blocks.push(e)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.PWorkflowCtx=Base.extend({initialize:function(e){this.wf=e,this.dialogs=[],this.firstDialogId=null},pushDlg:function(e){this.dialogs.push(e);var t=e.shouldShow();!this.firstDialogId&&t&&(this.firstDialogId=e.getShortId())},getFirstDialogId:function(){return this.firstDialogId},hasDlg:function(t){return this.dialogs.forEach(function(e){if(e.getId()==t)return!0}),!1},getDlg:function(t){var s=null;return this.dialogs.forEach(function(e){return e.getShortId()==t&&(s=e),!0}),s},getAllDlg:function(){var t=[];return this.dialogs.forEach(function(e){t.push(e)}),this.dialogs=[],t},removeDlgsAfter:function(t){var e;if(!t)return e=this.dialogs,this.dialogs=[],e;var s=[],o=[],n=!0;return this.dialogs.forEach(function(e){(n?s:o).push(e),e.getId()==t&&(n=!1)}),this.dialogs=s,o}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(n,c,i){c.story=c.story||{},c.story.PStory=c.story.PCtrlBase.extend({initialize:function(e){this.cfg=e,this.super=c.story.PCtrlBase.prototype,this.super.initialize.call(this,e.parent),this.cfg.chartsLibClass="undefined"!=typeof Highcharts?"highcharts":null,this.cfg.widthMode="",this.storyDef=e.flowDef||e.storyDefinition,this.id=this.storyDef.storyId,this.insight=e.insight,this.pserver=e.pserver,this.pserver||("undefined"!=typeof personetics&&null!==personetics?this.pserver=personetics.pserverProxy:this.pserver=null);var t={};this.texts=e.texts||e.storyText,this.ctx=new c.story.PWorkflowCtx(this),this.templates={},this.closeHandler=e.closeHandler,this.defaultLang=e.defaultLang||"en",t.lang=e.lang||this.defaultLang;var s=(s=e.uxCtrl)||new c.story.skinController,o=(this.uxCtrl=s,this.desktopScreenWidth=this.uxCtrl.getDesktopScreenWidth(),this.mobileMaxScreenWidth=this.uxCtrl.getMobileMaxScreenWidth(),this.screenWidth=this.uxCtrl.getPersoneticsWrapper().width(),this.uxCtrl.registerBlocks(),t.useProjectDefaultCurrency=c.projectConfiguration.getConfig("useProjectDefaultCurrency"),t.supportHtmlTagInProcessor=c.projectConfiguration.getConfig("supportHtmlTagInProcessor"),t.amountFormat=c.projectConfiguration.getConfig("amountFormat"),t.dateFormat=c.projectConfiguration.getConfig("dateFormat"),t.currencySymbol=c.projectConfiguration.getConfig("currencySymbol"),t.supportCollapse=c.projectConfiguration.getConfig("supportCollapse"),this.options=t,this.expressions=e.expressions,this.blockSessionManager=new c.story.PBlockSessionManager(this),this.manager=n.PBlockProcessorManager.getInstance(),this.model=this.blockSessionManager.getModel(),{});this.storyDef.dialogs.forEach(function(e){o[e.id]?c.log("duplicate dlg found: "+e.id):o[e.id]=e}),this.dlgCfgMap=o},getId:function(){return this.id},fireEvent:function(e,t){this.handleEvent(e,t)},setTeaserVariablesPayload:function(){var e=this.manager;if(Object.prototype.hasOwnProperty.call(personetics.config,"teaserVariablesPayload")&&personetics.config.teaserVariablesPayload){var t,s=personetics.config.teaserVariablesPayload;for(t in s="string"==typeof s?JSON.parse(s):s)e.setBlockVarValue({var:t},s[t])}},start:function(e){this.parentEl=e,this.lang=this.cfg.lang,c.dictionary.setLanguage(this.lang);var t=1==c.processor.PStoryConfig.isRtl()?"rtl":"ltr",t={storyId:this.getId(),langClass:"pstory-lang-"+this.lang,directionClass:"pstory-direction-"+t,cssClass:this.cfg.cssClass},s=Object.prototype.hasOwnProperty.call(this.storyDef,"class")&&"undefined"!==this.storyDef.class?this.storyDef.class:"",s=(t.class=s,"perso-feedback"===t.class&&(this.cfg.onEndHandleEvent=function(){},this.cfg.onStartHandleEvent=function(){}),this.getTemplateHtml("#pstory-frame",t)),t=i(s);i(e).find(".pstory-frame").length<=0&&(t=e.append(t)),this.frameEl=t.find(".pstory-frame"),this.el=this.frameEl.find(".pstory-container"),this.setTeaserVariablesPayload();try{this.renderTitleText(),this.setPlaceHolderForFixedTitle(),this.renderDialogs(),this.scrollHandler()}catch(e){s="Error message: "+e.message+" Error stack: "+e.stack,c.messenger.dispatch(c.messenger.MSG_SECURITY_ERROR,{message:e.message}),c.error(s,!0)}},renderDialogs:function(){this.cfg.isSingleDialogMode?this.renderDialog():this.doNextLoop()},renderTitleText:function(){var e,t,s,o,n,r;this.cfg.showTitle&&(r=null,e=this.getTitle(),t=this.getSubtitle(),n=c.utils.persoValidator.isXssScriptDetected(JSON.stringify(e)),o=c.utils.persoValidator.isXssScriptDetected(JSON.stringify(t)),s=this.parent&&"inbox-story-widget"!==this.parent.config.widgetType,(o||n)&&(r=new Error("XSS script was detected"),c.error(r.message,!1,r)),o=this.cfg.iconType,0<this.parentEl.siblings().find(".pstory-title-text").length?(this.parentEl.siblings().find(".pstory-subtitle-text").html(t),this.parentEl.siblings().find(".pstory-title .perso-teaser-image").addClass("perso-"+o),this.parentEl.siblings().find(".pstory-title-text").attr({role:"text","aria-label":e+", heading level 1"}),this.parentEl.siblings().find(".pstory-title-text").html(e)):s&&(n=this.getTemplateHtml("#tmpl-pstory-title-inside-story",{title:this.getTitle(),backButtonText:"back"}),r=i(n),this.el.append(r),this.el.find(".pstory-subtitle-text").html(t),this.el.find(".pstory-title .perso-teaser-image").addClass("perso-"+o),this.el.find(".pstory-title-text").attr({role:"text","aria-label":e+", heading level 1"}),this.el.find(".pstory-title-text").html(e)))},getTitle:function(){return this.getTitleHelper("title")},getSubtitle:function(){return this.getTitleHelper("subtitle")},getTitleHelper:function(e){var t=this.options.lang,s=this.defaultLang,o=this.storyDef[e];return Object.prototype.hasOwnProperty.call(this.texts,e)&&this.texts[e]&&(e=this.texts[e],Object.prototype.hasOwnProperty.call(e,t)?o=e[t]:Object.prototype.hasOwnProperty.call(e,s)&&(o=e[s])),o?new c.processor.PTextTemplate(o.txt,this).process(this.model):null},addTouchScroll:function(){this.frameEl.addClass("pstory-scrolling-touch")},renderDialog:function(e,t){var s;this.current?(this.current.setIsBlock(),(t=t&&Object.prototype.hasOwnProperty.call(t,"renderPreviousDialog")&&t.renderPreviousDialog?this.findPreviousDialog():this.current.config.next)&&(s=this.renderNextDlg(t,null))):s=this.pushDlg(this.storyDef.dialogs[0],null),s||(t=this.el.height(),e&&e!=t&&this.cfg.resizeHandler&&this.cfg.resizeHandler(t))},findPreviousDialog:function(){var o=this.current,e=this.storyDef.dialogs,n=null;return i.each(e,function(e,s){var t=s.next;if(t)if(i.isArray(t))i.each(t,function(e,t){if(t.target==o.config.id)return!(n={target:s.id})});else if(t.target==o.config.id)return!(n={target:s.id})}),n},doNextLoop:function(s){var e,o=this,t=this.current,n=!1;(function e(){var t;o.next(e)||n||(n=!0,t=o.el.height(),o.afterLastDialog(t,s))})(),t&&(t=t.config.next)&&(t=(i.isArray(t)?t[0]:t).target,t="pdlg-"+o.id+"_"+t,e=this.el.parents(".perso-insights-container"),this.scrollTo(e,t),this.setFocus(t))},afterLastDialog:function(e,t){var s=this;t&&t!=e&&s.cfg.resizeHandler&&s.cfg.resizeHandler(e,s.el),s.cfg.onEndHandleEvent&&s.cfg.onEndHandleEvent(s.el)},setPlaceHolderForFixedTitle:function(){for(var e=i(".pstory-title-wrapper").height(),t=this.parent&&this.parent.config,s=this.el.parents(".personetics-widgets-wrapper"),o=this.el.parents("#story-frame-container"),n=(0==o.length&&(o=this.el.parents(".pstory-frame")),this.el.parents(".pstory-frame"));0==n.height();)n=n.parent();s=0<s.height()?s.innerHeight():n.height();t&&"inbox-story-widget"===t.widgetType&&(s=t.containerINSTHeight),o.height(s-e)},pushDlg:function(e,t){e.isSingleDialogMode=this.cfg.isSingleDialogMode,e.widthMode=this.cfg.widthMode,e.chartsLibClass=this.cfg.chartsLibClass;var s=new c.story.PDialog(this,e);this.ctx.pushDlg(s);var o=this.ctx.getFirstDialogId()==e.id,n=(this.current=s,this),r=(this.uxCtrl.beforeRender(s,function(){s.render(n.el,o),s.afterRender(),s.bindEvents(),n.uxCtrl.afterRender(s,t)}),{el:this.storyHasTriviaDlg()?n.el.find(".perso-result-page-frame"):n.el.parents(".pstory-frame"),insight:n.insight,lang:this.lang});return!e.next&&this.storyHasTriviaDlg()&&this.parent.parentCtrl.startWidget("ratings",r),s},next:function(e){this.current||(t=this.pushDlg(this.storyDef.dialogs[0],e));var t,s=this.current.config.next;return t=!t&&s?this.renderNextDlg(s,e):t},renderNextDlg:function(e,t){var s=e,o=this.getDialogSpecialBlock(this.current.config.blocks),n=this.getBlockVar(o);if(Array.isArray(e)||(s=[e]),0==o.length||o&&this.blockSessionManager.getModel().getVarValue(n))for(var r=0;r<s.length;r++){var i=s[r],a=!0;if(i.cond){var l=new c.processor.PExp(i.cond);try{a=l.eval(this.model)}catch(e){a=!1}}if(a){if(this.ctx.hasDlg(i.target))break;l=this.dlgCfgMap[i.target];if(l){this.pushDlg(l,t);break}a=new Error("could not find dialog definition for target: "+i.target),c.error(a.message,!1,a)}}},refreshStory:function(){var s=this,e=(this.el.prevObject.removeClass("pstory-scrolling-touch"),this.ctx.getAllDlg());this.current=null,e.forEach(function(e){e.el&&e.el.remove(),i.each(e.config.blocks,function(e,t){s.blockSessionManager.resetVariables(t)})}),this.blockSessionManager.reset(),this.cfg.isSingleDialogMode?this.renderDialog():this.doNextLoop(),this.el.prevObject.addClass("pstory-scrolling-touch")},handleEvent:function(e){this.el.prevObject.removeClass("pstory-scrolling-touch");var s=this,t=this.el.height();this.cfg.onStartHandleEvent&&this.cfg.onStartHandleEvent(t,this.el),this.current=null,e&&(this.current=this.ctx.getDlg(e.dlgId)),this.ctx.removeDlgsAfter(this.current.getId()).forEach(function(e){e.el&&e.el.remove(),i.each(e.config.blocks,function(e,t){s.blockSessionManager.resetVariables(t)})}),this.blockSessionManager.reset(),this.cfg.isSingleDialogMode?this.renderDialog(t):this.doNextLoop(t),this.el.prevObject.addClass("pstory-scrolling-touch")},handleQueryData:function(e,t){this.blockSessionManager.renderBlock(t.dlgId,t.index,e)},handleScroll:function(s,o){this.ctx.dialogs.forEach(function(e){var t=e.el.position().top,t=t+e.el.height()<=s||o<=t?!1:!0;e.setVisible(t)})},scrollTo:function(){},setFocus:function(){},scrollHandler:function(){var t=this;i(this.frameEl).bind("scroll",function(){var e=i(this.frameEl).scrollTop();t.blockSessionManager.handleEvent("scroll",e)})},getDialogSpecialBlock:function(e){var s=this,o=["trivia","quiz"],n=[];return e.forEach(function(e){var t=s.getBlockType(e);-1!==o.indexOf(t)&&n.push(e)}),n},getBlockType:function(e){return e.buttonType&&e.class&&"button"===e.buttonType&&"perso-radio-buttons"===e.class?"quiz":e.type||void 0},getBlockVar:function(e){var t;return t=e.length?e.map(function(e){if(Object.prototype.hasOwnProperty.call(e,"var")&&e.var)return e.var})[0]:t},storyHasTriviaDlg:function(){return this.convertObjectToArray().some(function(e){return e.triviaDialog})},convertObjectToArray:function(){var t=this;return Object.keys(t.dlgCfgMap).map(function(e){return t.dlgCfgMap[e]})}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e){e.SkinConfigs=e.SkinConfigs||{};var t={"perso-desktop":{"perso-small":399,"perso-large":400},"perso-tablet":{"perso-large":999,"perso-xl":1e3},"perso-mobile":{"perso-small":347,"perso-medium":395,"perso-large":396}};e.SkinConfigs.getBreakPointsObject=function(){return t}}((window,window.Personetics=window.Personetics||{}),jQuery),function(e,t,i){var a=e.d3,e=(t.utils=t.utils||{},t.utils.d3Extensions={},t.utils.persoHelper);function s(e){var t;0==e.indexOf("<ul")&&(t=function(e){var t=32;switch(e){case"disc":t=9679;break;case"square":t=9632;break;case"circle":t=9675;break;case"check-mark":t=10003;break;case"arrow-right":t=10158;break;default:t=32}return"<tspan>"+String.fromCharCode(t)+"</tspan>"}(i(e).get(0).className.split(/\s+/)[1]),e=(e=(e=(e=e.replace(/<ul/g,"<tspan")).replace(/<\/ul>/g,"</tspan>")).replace(/<li/g,"<tspan>"+t+'<tspan li="true"')).replace(/<\/li>/g,"</tspan></tspan>")),e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<u/g,'<tspan text-decoration="underline"')).replace(/<\/u>/g,"</tspan>")).replace(/<b|<strong/g,'<tspan style="font-weight: bold"')).replace(/<\/b>|<\/strong>/g,"</tspan>")).replace(/<i|<em/g,'<tspan font-style="italic"')).replace(/<\/i>|<\/em>/g,"</tspan>")).replace(/<span|<div|<p/g,"<tspan")).replace(/<\/(span|div|p)/g,"</tspan"),function n(r,e){i.each(e,function(e,t){var s,o;void 0===t.tagName?(s=a.select(r).append("tspan")).text(i(t).text()):(s=a.select(r).append(t.nodeName.toLowerCase()),o=t.attributes,i.each(o,function(e,t){s.attr(t.name,t.value)}),0<i(t).children().length?n(s[0][0],i(t).get(0).childNodes):s.text(i(t).text()))})}(this,i(e="<tspan>"+e+"</tspan>"))}t.utils.d3Extensions.html=function(e){return this.each("function"==typeof e?function(){"string"!=typeof(v=e.apply(this,arguments))&&(v=a.select(v)),s.call(this,v)}:function(){s.call(this,e)})},a.selection.prototype.html=t.utils.d3Extensions.html,t.utils.d3Extensions.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments),e=0<i(e).length?i(e)[0].innerText:e;this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=0<i(t).length?i(t)[0].innerText:t}):this.textContent},t.utils.d3Extensions.last=function(){var e=this.size()-1;return a.select(this[0][e])},a.selection.prototype.last=t.utils.d3Extensions.last,void 0!==e&&e.isOldAndroidVersion()&&(a.selection.prototype.text=t.utils.d3Extensions.text)}(window,window.Personetics=window.Personetics||{},jQuery),function(o,i){o.story=o.story||{},o.story.Block=Base.extend({initialize:function(e,t,s){this.parent=e,this.story=s,this.layoutInstructions=t,this.isFirstBlock=!1;e=personetics.config.deviceType,this.remoteAssetsMgr=o.utils.remoteAssets,this.useRemoteAssets=o.projectConfiguration.getConfig("useRemoteAssets"),this.localBaseUrl=o.projectConfiguration.getConfig("localBaseUrl"),personetics.config.persoEBMode&&(this.localBaseUrl=o.utils.remoteAssets.getEBLocalBaseUrl("story")),!e||"Angular"!==e&&"RJS"!==e||(this.localBaseUrl=o.utils.remoteAssets.getWrapperLocalBaseUrl(e)),this.remoteBaseUrl=o.projectConfiguration.getConfig("remoteBaseUrl"),this.darkAsset=o.projectConfiguration.getConfig("darkModeAsset"),s=personetics.config.darkMode?this.darkAsset:"",this.localBaseUrl=this.localBaseUrl+s,this.remoteBaseUrl=this.remoteBaseUrl+s,this.layoutInstructions.baseUrl=this.useRemoteAssets?this.remoteBaseUrl:this.localBaseUrl,this.layoutInstructions.localBaseUrl=this.localBaseUrl,this.defaultAssetConfig=this.getDefaultAssetConfig(),this.enableChartsRTL=o.utils.projectConf.verifyConfig("enableChartsRTL",!0),e=this.getHtmlTemplateId(t.class,t.type,t.subType);if(e&&(this.template=this.story.templates[e]),e&&!this.template){if(this.template=this.story.getTemplate("#pstory-block-"+e),!this.template)throw"Block template not found for: "+e;this.story.templates[e]=this.template}},getDefaultAssetConfig:function(){return{defaultAssetName:o.utils.projectConf.verifyConfig("storyBlocksConfigurations/base/defaultAssetName","category-default"),defaultAssetDirectory:o.utils.projectConf.verifyConfig("storyBlocksConfigurations/base/defaultAssetDirectory","category_icons"),defaultAssetExtension:o.utils.projectConf.verifyConfig("storyBlocksConfigurations/base/defaultIconExtension","svg"),loadingAssetMaxTries:2,loadingAssetTriesAttrName:"data-asset-loading-tries"}},getHtmlTemplateId:function(){throw"No template id defined for block"},initBlock:function(){},handleQueryData:function(e){this.renderData(e),this.bindEvents()},setVisible:function(){},beforeRender:function(e,t){this.layoutInstructions=t,this.layoutInstructions.isFirstBlock=this.isFirstBlock},render:function(e,t){this.layoutInstructions=this.layoutInstructions||t,this.el=e;t=this.template(this.layoutInstructions);e.append(t),this.frameEl=e.find(".pstory-block-frame").last()},renderAgain:function(e){e=this.template(e);i(this.frameEl).replaceWith(e)},renderData:function(){},afterRender:function(){var e;this.supportBlockCollapse=this.getSupportBlockCollapse(),this.supportBlockCollapse&&(e=this.getCollapseParams(),this.collapseHelper=o.story.BlockChartFactory.generateHelperClazz("collapseHelper",e)),this.frameEl&&this.doScrollEvent(!0)},bindEvents:function(){this.frameEl.find(".pstory-block-content").bind("keyup",o.bind(this,this.keyUpEvent))},keyUpEvent:function(e){var t=this.story.uxCtrl.getPersoneticsWrapper(),s=".pstory-block-frame .pstory-block-content",o=t.find(s),n=t.find(s).index(i(this.frameEl.find(".pstory-block-content")));switch(e.which){case 39:var r=n+1;(r>=o.length?t.find(".perso-ratings-wrapper .perso-ratings-text"):i(o[r])).focus();break;case 37:r=n-1;(r<0?t.find(".pstory-title-wrapper  .pstory-title-text"):i(o[r])).focus()}},handleEvent:function(e){"scroll"===e[0]&&this.frameEl&&this.doScrollEvent(e)},getSupportBlockCollapse:function(){return!1},getCollapseParams:function(){return{el:this.frameEl,type:this.layoutInstructions.type,uxCtrl:this.story.uxCtrl}},doScrollEvent:function(){personetics.config.didScroll=!0},notifyReportEvent:function(e,t){var s=o.projectConfiguration.getConfig("reporting");o.utils.PEventReporting.setValue(e),t||o.utils.PEventReporting.notifyEvent(),"accountSelectorChevron"!==e.type&&"accountSelectorSwipe"!==e.type||(e.value=this.options[this.getViewedElIndex()].id),s&&o.utils.PEventReporting.notifyReportingEventֿ(e)},setIsFirstBlock:function(e){this.isFirstBlock=e},isBlockPositionInViewport:function(e){var t=this.story.uxCtrl.getPersoneticsWrapper(e),s=t.scrollTop()+t.height();return i(e).offset().top-t.offset().top+i(e).height()*this.getBlockPercentInViewportToStartAnimate()<=s},getBlockPercentInViewportToStartAnimate:function(){return"desktop"===this.story.cfg.widthMode?this.story.uxCtrl.getBlockPercentInViewportToStartAnimateDesktop(this.layoutInstructions.type):this.story.uxCtrl.getBlockPercentInViewportToStartAnimate(this.layoutInstructions.type)},scrollToEl:function(e,t,s){s=s||0;i(e).animate({scrollTop:i(t).last().get(0).getBoundingClientRect().bottom},s)},fallbackAsset:function(e){var t,s=this,o=i(e);o.length&&(t=s.localBaseUrl+"/"+s.defaultAssetConfig.defaultAssetDirectory+"/"+s.defaultAssetConfig.defaultAssetName+"."+s.defaultAssetConfig.defaultAssetExtension,s.remoteAssetsMgr.setDefaultAsset(e,t),s.remoteAssetsMgr.removeAssetLoadingTriesAttr(e),o.off("error"))}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(r,n){r.story=r.story||{},r.story.TextBlock=r.story.Block.extend({getHtmlTemplateId:function(e){switch(e){case"note":case"perso-note":return"txt-note";default:return"txt"}},beforeRender:function(e,t){var s,o="[0-9]{2}([\\-/ \\.])[0-9]{2}[\\-/ \\.][0-9]{4}",n=new RegExp(o);this.browserData=r.utils.persoBrowserDetector.getBrowserData(),-1!=t.text.indexOf("{{Emoji")&&(s=r.utils.emojisHelper.parseEmoji(t.text),t.text=s),personetics.config.mappedColors&&personetics.config.mappedColors.headerColor&&(t.useExternalHeaderColor=!0),this.textHasDate(t.text,n)&&(this.isTextHasDate=!0,s=this.extractDateFromText(t.text,n,o),n=r.processor.PStoryConfig.getConfig("lang"),!s||"he"!==n&&"HE"!==n&&"He"!==n||(o=r.utils.accessibility.formatAccessibleDate(s),t.extractedDateStr=s,t.formattedAccessibleDate=o)),r.story.Block.prototype.beforeRender.call(this,e,t),this.layoutInstructions=t},render:function(e,t){var s=n(e),o=t,t=("perso-H4"!=t.class&&"perso-H5"!=t.class||(o.needAccessibility=!0),this.template(o)),o=(e.append(t),this.frameEl=e.find(".pstory-block-frame").last(),this.frameEl.find(".pstory-block-content"));o&&"perso-desktop"===this.browserData.deviceType&&n(o).attr("tabindex","-1"),s.parents(".pstory-container.perso-feedback").length&&s.find(".pstory-block-text").last().addClass("perso-feedback-text-bubble-in")},afterRender:function(e){var t,s=this,o=n(e);s.isTextHasDate&&(e=n(e).find(".pstory-block-content").last().text(),Object.prototype.hasOwnProperty.call(s.layoutInstructions,"formattedAccessibleDate")&&s.layoutInstructions.formattedAccessibleDate.length&&s.replaceTextWithSpans(o.find(".pstory-block-content"),e)),o.parents(".pstory-container.perso-feedback").length&&(e=(t=o.find(".pstory-block-text").last()).hasClass("topAnswer"),t&&t.length&&e&&s.setAriaLabelOnFeedbackAnswer(t),e||setTimeout(function(){s.scrollToEl(".pstory-container.perso-feedback",t,300)},100))},extractDateFromText:function(e,t,s){var o;return o=e.length&&t.test(e)?e.match(s)[0]:o},textHasDate:function(e,t){var s=!1;return s=e.length&&t.test(e)?!0:s},replaceTextWithSpans:function(e,t){var s='<span aria-hidden="true">'+this.layoutInstructions.extractedDateStr+"</span>",o='<span class="perso-accessibility-read">'+this.layoutInstructions.formattedAccessibleDate+"</span>",t=t.replace(this.layoutInstructions.extractedDateStr,s+o);n(e).last().html(t)},setAriaLabelOnFeedbackAnswer:function(e){var t=r.dictionary.getText("accessibilitySubmittedAnswer"),s=e.find(".pstory-block-container");s.attr("aria-label",t+this.layoutInstructions.text),s.attr("role","text"),r.utils.accessibility.putFocus(e)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(o,n,r){n.story=n.story||{},n.story.ImageBlock=n.story.Block.extend({getHtmlTemplateId:function(){return"image"},getImageConfigs:function(){return{defaultAssetName:n.utils.projectConf.verifyConfig("storyBlocksConfigurations/image/defaultAssetName","image-default"),defaultAssetDirectory:n.utils.projectConf.verifyConfig("storyBlocksConfigurations/image/defaultAssetDirectory","story_images"),defaultAssetExtension:n.utils.projectConf.verifyConfig("storyBlocksConfigurations/image/defaultIconExtension","svg")}},updateImageConfigsFromProject:function(){this.imageConfig.defaultAssetExtension=n.projectConfiguration.getConfig("defaultImageExtension")?n.projectConfiguration.getConfig("defaultImageExtension"):this.imageConfig.defaultAssetExtension},initialize:function(e,t,s){this.imageConfig=this.getImageConfigs(),this.updateImageConfigsFromProject(),n.story.Block.prototype.initialize.call(this,e,t,s)},beforeRender:function(e,t){n.story.Block.prototype.beforeRender.call(this,e,t),this.layoutInstructions.assetExtension=this.layoutInstructions.fileType||this.imageConfig.defaultAssetExtension,this.layoutInstructions.assetDirectory=this.layoutInstructions.directory||this.imageConfig.defaultAssetDirectory;e=this.layoutInstructions.url;this.browserData=n.utils.persoBrowserDetector.getBrowserData(),0==e.indexOf("http")?this.layoutInstructions.isAbsoluteURL=!0:this.layoutInstructions.url=e.substr(0,e.lastIndexOf("."))||e},afterRender:function(){var e=this.frameEl.find(".pstory-block-content");e&&"perso-mobile"===this.browserData.deviceType&&(r(e).removeAttr("title"),r(e).removeAttr("tabindex")),this.frameEl.find(".perso-introduce-personetics").attr("aria-label",n.dictionary.getText("accessibilityIntroducePersonetics")),this.frameEl.find(".perso-introduce-personetics").attr("role","img")},bindEvents:function(){n.story.Block.prototype.bindEvents.call(this);var s=this,e=s.frameEl.find("img.perso-image");e.on("load",function(){s.remoteAssetsMgr.finishedLoading(this),s.setImageDimensions(this)}),e.on("error",function(e){var t=r(this).data(s.defaultAssetConfig.loadingAssetTriesAttrName);t&&t>s.defaultAssetConfig.loadingAssetMaxTries?s.fallbackAsset(this):(t=s.localBaseUrl+"/"+s.imageConfig.defaultAssetDirectory+"/"+s.imageConfig.defaultAssetName+"."+s.imageConfig.defaultAssetExtension,s.remoteAssetsMgr.setDefaultAsset(this,t),s.remoteAssetsMgr.setAssetLoadingTriesAttr(this),e.stopImmediatePropagation())})},setImageDimensions:function(e){var t=r(e),s=o.innerWidth/t.width(),s=o.innerHeight/s;e.width>t.width()&&(s=e.height/e.width*t.width()),e.width<=t.width()&&(s=e.height),e.height<1&&e.width<1&&(s=.9*t.width()),t.css({height:s})}})}(window,window.Personetics=window.Personetics||{},jQuery),function(i,a){i.story=i.story||{},i.story.TransactionsListBlock=i.story.Block.extend({$selectors:function(){var e={$persoTxName:".perso-tx-name",$persoTxContainer:".perso-tx-container",$persoTxWithoutIcons:"perso-tx-without-icon",$persoTxDate:".perso-tx-date",$persoDatePlaceholder:".perso-date-placeholder",$persoTxSeparator:".perso-separator",$persoTxAccountName:".perso-tx-account-name",$persoTxAmount:".perso-tx-amount",$persoTxDateComment:".perso-tx-date-comment",$persoTxAmountComment:".perso-tx-amount-comment",$persoTxWithNoIcons:"perso-tx-col-with-no-icons",$persoTxIcon:".perso-tx-icon",$persoTableRowWrapper:".perso-table-row-wrapper",$persoTxTag:"perso-tx-tag",$persoTxInstallmentComment:".perso-tx-installment-comment",$persoActive:"perso-active"};return e.$persoThemeHeaderColor=e.$persoTxDate+" , "+e.$persoTxSeparator+" , "+e.$persoTxAccountName+" , "+e.$persoTxAmount+" , "+e.$persoTxDateComment+" , "+e.$persoTxAmountComment+" , "+e.$persoTxInstallmentComment,e.$persoThemeBrandColor=e.$persoTxName,e},getTxListConfig:function(e){var t=i.utils.persoHelper.deepObjectExtend({},this.getTxListExtendedConfig(e),!0);return t=i.utils.persoHelper.deepObjectExtend(t,this.getTxListCatalogConfig(),!0),i.utils.persoHelper.deepObjectExtend(t,this.getTxListProjectConfig(e),!0)},getTxListCatalogConfig:function(){return{}},getTxListProjectConfig:function(e){var t=i.projectConfiguration.getConfig("storyBlocksConfigurations/tranList")||{};return Object.prototype.hasOwnProperty.call(t,e)?t[e]:{}},getTxListDefaultConfig:function(){return{configOptions:{account:!0,amountColors:!1,transactionEnrichmentModal:!0,displayUserTag:!0,dateFormat:"MM/DD/YYYY",amountFormat:"###,###,###.00",visualElements:["logo","CG","default"],separator:"|",iconExtension:"svg",defaultAssetExtension:"svg",defaultAssetName:"category-default",defaultAssetType:"cg",modal:"transactionModal"},dataSourceMap:{txId:"id",txName:"transaction",txDescription:"description",txDate:"date",txTimeStamp:"date",txAmount:"amount",txAccountName:"accountNumber",txIcon:"visualElementType",txMode:"mode",txSeparator:"separator",txCurrency:"currencyCd",txIconExtension:"iconExtension",txAssetType:"assetType",txAssetsOrder:"assetsOrderArray",txTag:"userTag",txCategoryDescription:"categoryDescription",txCategoryId:"category",txDevice:"device",txFacebookLink:"facebookLink",txTwitterLink:"twitterLink",txHomePageLink:"homepageLink",txCustomerSupportLink:"customerSupportLink",txInstallmentNumber:"installmentNumber",txTotalInstallments:"totalInstallments"},visualElementsColumnMap:{logo:"icon",cg:"category",direction:"mode",default:"default","no-icons":"no-icons"}}},getTxListExtendedConfig:function(e){var t=this.getTxListDefaultConfig(),e=this.getTxSubTypeConfig(e)||{};return i.utils.persoHelper.deepObjectExtend(e,t)},getTxSubTypeConfig:function(e){switch(e){case"basic":return this.getTxBasicConfig();case"dateAndAmountComment":return this.getDateAndAmountCommentConfig();case"amountComment":return this.getAmountComment();case"dateComment":return this.getDateCommentConfig()}},getTxBasicConfig:function(){return{}},getDateAndAmountCommentConfig:function(){return{configOptions:{visualElements:["logo","CG","direction","default"]},dataSourceMap:{txAmountComment:"amountComment",txDateComment:"dateComment"}}},getAmountComment:function(){return{dataSourceMap:{txAmountComment:"amountComment",txTag:"userTag2"}}},getDateCommentConfig:function(){return{dataSourceMap:{txDateComment:"dateComment"}}},initialize:function(e,t,s){this.txConfigObject=this.getTxListConfig(t.subType),this.selectors=this.$selectors(),this.transactionHelper=i.utils.TransactionHelper(),this.texts=this.getTexts(),this.remoteAssetsMgr=i.utils.remoteAssets,this.modalUtil=i.utils.persoModalManager,i.story.Block.prototype.initialize.call(this,e,t,s)},getTexts:function(){return{staticTexts:{paymentTxt:i.dictionary.getText("paymentTxt"),outOfTxt:i.dictionary.getText("outOfTxt")},accessibilityTexts:{accessibilityTableTitleLbl:i.dictionary.getText("accessibilityTableTitle"),accessibilityTableStartLbl:i.dictionary.getText("accessibilityTableStart"),accessibilityTableEndLbl:i.dictionary.getText("accessibilityTableEnd"),accessibilityTransactionOpenModalBtn:i.dictionary.getText("accessibilityTransactionOpenModal")}}},beforeRender:function(e,t){i.story.Block.prototype.beforeRender.call(this,e,t),this.layoutInstructions.configObject=this.txConfigObject,t.tableObject=this.transactionHelper.convertTableToObject(t),t.tableObject=this.addDisplayInstallment(t.tableObject),this.txConfig=this.txConfigObject.configOptions,this.layoutInstructions.assetExtension=this.layoutInstructions.fileType||this.txConfig.defaultAssetExtension,this.tableObject=t.tableObject,this.txConfig.txModalExist=this.modalUtil.getModalBlocks(this.txConfig.modal),this.layoutInstructions.staticTexts=this.texts.staticTexts,void 0!==this.txConfig.txModalExist&&null!==this.txConfig.txModalExist||(this.txConfig.transactionEnrichmentModal=!1),this.layoutInstructions.transactionEnrichment=!!this.txConfig&&(this.txConfig.transactionEnrichmentModal||this.txConfig.displayUserTag)},addDisplayInstallment:function(e){var t=i.utils.projectConf.verifyConfig("storyBlocksConfigurations/tranList/displayInstallment",!1);return e.forEach(function(e){e.displayInstallment=!1,t&&0<e.txInstallmentNumber&&0<e.txTotalInstallments&&(e.displayInstallment=!0)}),e},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.headerColor&&i.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoThemeHeaderColor+", "+this.selectors.$persoDatePlaceholder),"perso-theme-headerColor-color"),personetics.config.theme.brandColor&&i.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoThemeBrandColor+","+this.selectors.$persoTxTag),"perso-theme-brandColor-color"),personetics.config.theme.greyLightColor&&i.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTableRowWrapper+", "+this.selectors.$persoTxContainer+", "+this.selectors.$persoDatePlaceholder),"perso-theme-greyLightColor-border-color"))},afterRender:function(e){this.frameEl&&(i.story.Block.prototype.afterRender.call(this,e),this.setNoIconsClass(this.tableObject),this.setAccessibilityTitle(),this.setAccessibilityOnTx(),this.setThemeClasses())},bindEvents:function(){i.story.Block.prototype.bindEvents.call(this);var t=this;this.txConfig&&this.txConfig.transactionEnrichmentModal&&this.el.find(this.selectors.$persoTableRowWrapper).bind("click",function(e){t.modalUtil.initModal({modalId:t.txConfig.modal,params:{layoutInstructions:t.layoutInstructions,parent:t.parent,story:t.story},clickedEl:e.currentTarget,dialogEl:t.el})}).bind("keyup",i.bind(this,this.keyUpEvent)).addClass(this.selectors.$persoActive),this.handleTxAssets()},render:function(e,t){t&&t.rows?i.story.Block.prototype.render.call(this,e,t):i.log("TransactionList.render() Error: invalid rows property - not rendering")},setNoIconsClass:function(e){var s=this;e&&a.each(e,function(e,t){Object.prototype.hasOwnProperty.call(t,"txIcon")&&"no-icons"===t.txIcon&&(s.frameEl.find(s.selectors.$persoTxName).addClass(s.selectors.$persoTxWithoutIcons),s.frameEl.find(s.selectors.$persoTxInfoContainer).addClass(s.selectors.$persoTxWithoutIcons))})},setAccessibilityTitle:function(){i.utils.accessibility.addAltTextToElement(this.frameEl,this.texts.accessibilityTexts.accessibilityTableTitleLbl)},setAccessibilityOnTx:function(){for(var e=this.texts.accessibilityTexts,t=this.frameEl.find(this.selectors.$persoTxContainer),s=0;s<t.toArray().length;s++){var o,n=a(t[s]),r=i.utils.accessibility.getElementChildNodesText(n);this.txConfig&&this.txConfig.displayUserTag&&((o=n.find(this.selectors.$persoTxTag))&&o.length&&(r+=", "+o.text())),this.txConfig&&this.txConfig.transactionEnrichmentModal&&(r+=", "+e.accessibilityTransactionOpenModalBtn),0==s?n.attr("aria-label",e.accessibilityTableStartLbl+", "+r):s==t.toArray().length-1?n.attr("aria-label",r+", "+e.accessibilityTableEndLbl):n.attr("aria-label",r)}},handleTxAssets:function(){var r=this,e=r.frameEl.find(this.selectors.$persoTxIcon);e.on("load",function(){r.remoteAssetsMgr.finishedLoading(this)}),e.on("error",function(){var e=a(this).data("asset-index"),e=r.tableObject[e],t=e.txAssetsOrder,s="",o=a(this).data(r.defaultAssetConfig.loadingAssetTriesAttrName)||0,n=o<t.length&&t[o]&&t[o].assetName?t[o].assetName.toLowerCase():r.txConfig.defaultAssetName,t=t[o].assetType;"no-icons"!==n&&n!==r.txConfig.defaultAssetName?(s=r.layoutInstructions.baseUrl+"/"+t+"/"+n+"."+e.txIconExtension,r.remoteAssetsMgr.setDefaultAsset(this,s),r.remoteAssetsMgr.setAssetLoadingTriesAttr(this)):n==r.txConfig.defaultAssetName?(s=r.localBaseUrl+"/"+t+"/"+n+"."+r.txConfig.defaultAssetExtension,r.remoteAssetsMgr.setDefaultAsset(this,s)):a(this).parent().addClass(r.selectors.$persoTxWithNoIcons)})},keyUpEvent:function(e){13===e.which&&a(e.currentTarget).click()}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(d,p){d.story=d.story||{},d.story.TransactionModalBlock=d.story.Block.extend({getHtmlTemplateId:function(){return"transaction-modal"},$selectors:function(){return{$persoTxIcon:".perso-tx-col-icon:not(.perso-tx-col-with-no-icons) .perso-tx-icon",$persoTableRow:"#perso-table-row-",$persoModalUpdateButton:".perso-modal-button.perso-updateButton",$persoModalCloseButton:".perso-modal-button.perso-closeButton",$persoModalCancelTagButton:".perso-modal-button.perso-cancelTagButton",$persoModalSubmitTagButton:".perso-modal-button.perso-submitTagButton",$persoChecked:"perso-checked",$persoTagUserInput:".perso-tag-user-input",$persoCheckboxEl:".perso-checkbox",$persoCheckbox:"perso-checkbox",$persoError:"perso-error",$pstoryBlockTextValidation:".pstory-block-text-validation .perso-text-validation",$pstoryBlockTagUserInput:".pstory-block-tag-user-input",$persoTagCharacterCounter:".perso-tag-character-counter",$persoImage:".perso-image",$persoImages:".perso-image,.perso-transaction-image",$pstoryBlockTopContainer:".pstory-block-top-container",$pstoryCategoriesListContainer:".pstory-categories-list-container",$pstoryBlockMiddleContainer:".pstory-block-middle-container",$pstoryBlockBottomContainer:".pstory-block-bottom-container",$pstoryWarningBlockContainer:".pstory-warning-block-container",$pstoryMainBlockContainer:".pstory-main-block-container",$persoCategoryContainerField:"perso-category-container",$persoCategoryContainer:".perso-category-container",$persoSelectedCategoryContainer:".perso-category-container.perso-selected",$persoCategoryContainerFirstChild:".perso-category-container:first-child",$pstoryBlockTransactionName:".pstory-block-transaction-name .pstory-block-content",$pstoryApplyAllTagCheckbox:".pstory-apply-all-personalTag-checkbox",$pstoryApplyAllTagText:".pstory-apply-all-personalTag-text",$pstoryBlockClosePageTitleText:".pstory-block-close-page-title-text .pstory-block-content",$persoHide:"perso-hide",$persoSubModalShowEl:".perso-sub-modal-show",$persoSubModalShow:"perso-sub-modal-show",$persoTagEditButtonEl:".perso-tag-edit-button",$persoTagEditButton:"perso-tag-edit-button",$persoCloseBtn:"perso-closeButton",$persoModalButtonEl:".perso-modal-button",$persoCancelTagButtonEl:".perso-cancelTagButton",$persoCancelTagButton:"cancelTagButton",$persoSubmitTagButtonEl:".perso-submitTagButton",$persoSubmitTagButton:"submitTagButton",$persoModalButton:"perso-modal-button",$persoMainButton:".perso-main-button",$persoTagPopupButton:".perso-tag-popup-button",$persoWarningButton:".perso-warning-button",$persoCloseButton:"closeButton",$persoStayButtonId:"stayButton",$persoLeaveButtonId:"leaveButton",$persoUpdateButton:"updateButton",$persoOpen:"perso-open",$persoClose:"perso-close",$persoDesktop:"perso-desktop",$persoSelected:"perso-selected",$persoDisabled:"perso-disabled",$persoDetailsValue:".perso-details-value",$persoCategoryIcon:".perso-category-icon",$persoEdited:"perso-edited",$accessibilityRead:"accessibility-read",$accessibilityReadNotPersoHide:".accessibility-read:not(.perso-hide)",$pstoryBlockApplyAllCategoryCheckBox:".pstory-block-apply-all-category-checkbox",$pstoryApplyAllCategoryCheckbox:".pstory-apply-all-category-checkbox",$pstoryApplyAllCategoryText:".pstory-apply-all-category-text",$pstoryBlockConfirmationMsgContainer:".pstory-block-confirmation-msg-container",$pstoryBlockConfirmationMsgClose:".pstory-block-confirmation-msg-close",$confirmationMsgTemplate:"pstory-block-confirmation-text",$confirmationTextUpdatedStory:"confirmation-text-updated-story",$confirmationTextNotUpdatedStory:"confirmation-text-not-updated-story",$persoNoApplyAll:"perso-no-apply-all",$persoTransactionLinkButtonEl:".perso-transaction-link-button",$persoTransactionLinkButton:"perso-transaction-link-button",$pstoryCategoriesList:".pstory-categories-list",$pstoryBlockCategoryUpdateText:".pstory-block-category-update-text",$pstoryBlockTagUpdateText:".pstory-block-tag-update-text",$categoryUpdateText:".category-update-text",$persoCategoryName:".perso-category-name",$tagUpdateText:".tag-update-text",$pstoryBlockTagUserInputContent:".pstory-block-tag-user-input .pstory-block-content",$persoUpdateButtonDisabled:".perso-updateButton.perso-disabled",$persoUpdateButtonEnabled:".perso-updateButton:not(.perso-disabled)",$persoSubmitButtonDisabled:".perso-submitTagButton.perso-disabled",$persoSubmitButtonEnabled:".perso-submitTagButton:not(.perso-disabled)",$pstoryTagError:".pstory-block-tag-user-input.perso-error .pstory-block-content",$pstoryBlockConfirmationMsgTxt:".pstory-block-confirmation-msg-txt",$pstoryClosePageText:".pstory-block-close-page-text",$persoStayButton:".perso-stayButton",$persoLeaveButton:".perso-leaveButton",$persoTransactionIconContainer:".pstory-block-transaction-icon .pstory-block-container",$persoBlockClosePageIconContainer:".pstory-block-close-page-icon .pstory-block-container",$pstoryBlockContainerPart:".pstory-block-container-part",$persoDetailsContainer:".perso-details-container",$pstoryBlockTransactionDetailsTitle:".pstory-block-transaction-details-title",$pstoryTransactionDetails:".pstory-transaction-details",$persoDetailsTitle:".perso-details-title",$persoDetailsLabelContainer:".perso-details-container .perso-label-container",$persoNotCategoryList:":not('.pstory-block-categories-list')",$persoCategoryList:".pstory-block-categories-list",$pstoryMainMiddleBlockContainer:".pstory-main-block-container .pstory-block-middle-container",$pstoryMainBottomBlockContainer:".pstory-main-block-container .pstory-block-bottom-container",$persoTableRowWrapper:".perso-table-row-wrapper",$persoDetailsCategory:"perso-details-category",$persoDetailsCategoryEl:".perso-details-category",$persoDetailsEditIcon:".perso-details-edit-icon",$persoDetailsPersonalTagEl:".perso-details-personalTag",$persoDetailsPersonalTag:"perso-details-personalTag",$persoTagUpdatePopup:".perso-tag-update-popup",$pstoryBlockTransactionPopupButtons:".pstory-block-transaction-popup-buttons",$pstoryBlockTransactionModalButtons:".pstory-block-transaction-modal-buttons",$persoSeparator:".perso-details-container.perso-separator",$persoColFirstContainer:".perso-col-first-container",$persoNoTag:"perso-no-tag",$persoTransactionImage:".perso-transaction-image",$persoModalButtonText:".perso-modal-button-text",$persoLoading:"perso-loading",$persoAssetLoading:"perso-asset-loading"}},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&(d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$categoryUpdateText+","+this.selectors.$persoCategoryName+","+this.selectors.$tagUpdateText+","+this.selectors.$persoTagUserInput+","+this.selectors.$pstoryApplyAllCategoryText+","+this.selectors.$pstoryApplyAllTagText+","+this.selectors.$persoTagCharacterCounter+","+this.selectors.$persoModalCloseButton+","+this.selectors.$persoModalCancelTagButton+","+this.selectors.$pstoryBlockClosePageTitleText+","+this.selectors.$pstoryClosePageText+","+this.selectors.$persoStayButton+","+this.selectors.$pstoryTransactionDetails+","+this.selectors.$persoDetailsTitle+","+this.selectors.$persoDetailsLabelContainer),"perso-theme-brandColor-color"),d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$pstoryBlockTagUserInputContent+","+this.selectors.$persoModalCloseButton+","+this.selectors.$persoStayButton+","+this.selectors.$persoColFirstContainer+","+this.selectors.$persoModalCancelTagButton),"perso-theme-brandColor-border-color"),d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$persoLeaveButton),"perso-theme-brandColor-background")),personetics.config.theme.headerColor&&(d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$persoUpdateButtonDisabled+","+this.selectors.$persoSeparator+","+this.selectors.$persoSubmitButtonDisabled),"perso-theme-headerColor-background"),d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$pstoryBlockTransactionName),"perso-theme-headerColor-color"),d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$pstoryBlockTagUserInput),"perso-theme-headerColor-user-tag-placeholder-color")),personetics.config.theme.alertColor&&(d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$pstoryBlockTextValidation),"perso-theme-alertColor-color"),d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$pstoryTagError),"perso-theme-alertColor-border-color")),personetics.config.theme.greyLightColor&&d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$pstoryBlockCategoryUpdateText+","+this.selectors.$pstoryBlockTagUpdateText),"perso-theme-greyLightColor-border-color"),personetics.config.theme.backgroundColor&&(d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$pstoryCategoriesList+","+this.selectors.$persoModalCloseButton+","+this.selectors.$persoStayButton+","+this.selectors.$persoTransactionIconContainer+","+this.selectors.$persoBlockClosePageIconContainer+","+this.selectors.$pstoryMainMiddleBlockContainer+","+this.selectors.$persoModalCancelTagButton),"perso-theme-backgroundColor-background"),d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$persoModalUpdateButton+","+this.selectors.$persoLeaveButton+","+this.selectors.$persoModalSubmitTagButton),"perso-theme-backgroundColor-color")),personetics.config.theme.backgroundDarkColor&&(d.utils.persoTheming.addClassToElement(this.modalBlockEl,"perso-theme-backgroundDarkColor-background"),d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$pstoryCategoriesListContainer),"perso-theme-backgroundDarkColor-category-container-selected"),d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$pstoryBlockContainerPart+","+this.selectors.$persoTagUserInput),"perso-theme-backgroundDarkColor-background")))},setThemeClassesButton:function(){personetics.config.theme&&(this.modalBlockEl.find(this.selectors.$persoModalUpdateButton+","+this.selectors.$persoModalSubmitTagButton).removeClass("perso-theme-brandColor-background perso-theme-headerColor-background"),personetics.config.theme.brandColor&&d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$persoUpdateButtonEnabled+","+this.selectors.$persoSubmitButtonEnabled),"perso-theme-brandColor-background"),personetics.config.theme.headerColor&&d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$persoUpdateButtonDisabled+","+this.selectors.$persoSubmitButtonDisabled),"perso-theme-headerColor-background"))},setThemeClassesConfirmation:function(){var e;personetics.config.theme&&(e=this.story&&this.story.parentEl,personetics.config.theme.brandColor&&d.utils.persoTheming.addClassToElement(e.find(this.selectors.$pstoryBlockConfirmationMsgContainer),"perso-theme-brandColor-background"),personetics.config.theme.backgroundColor&&d.utils.persoTheming.addClassToElement(e.find(this.selectors.$pstoryBlockConfirmationMsgTxt),"perso-theme-backgroundColor-color"))},setThemeClassesTag:function(e){personetics.config.theme&&e?personetics.config.theme.headerColor&&d.utils.persoTheming.addClassToElement(this.modalBlockEl.find(this.selectors.$persoDetailsPersonalTagEl),"perso-theme-headerColor-user-tag-placeholder-color"):this.modalBlockEl.find(this.selectors.$persoDetailsPersonalTagEl).removeClass("perso-theme-headerColor-user-tag-placeholder-color")},getRemoteAssetsConfig:function(){return{defaultAssetName:"category-default",defaultAssetDirectory:"category_icons",defaultAssetExtension:"svg"}},transactionModalConfiguration:function(){return{config:{confirmationMsgDisappear:4e3,confirmationMsgFadeOut:500,tagInputMaxLength:15,autoRefresh:!1,categoryApplyAllState:!0,tagApplyAllState:!0,tagRegex:/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+/,warningModalId:"closePageBlocks",contactBtnNumSupport:4,iconDisplay:d.utils.projectConf.verifyConfig("storyBlocksConfigurations/transactionModal/iconDisplay",!0),iconHierarchy:d.utils.projectConf.verifyConfig("storyBlocksConfigurations/transactionModal/visualElements",["logo","CG","default"])},events:{userCategorySingleTx:"userCategorySingleTx",TransactionCategoryUpdateSingle:"TransactionCategoryUpdateSingle",userCategory:"userCategory",TransactionCategoryUpdate:"TransactionCategoryUpdate",userPersonalTagSingleTx:"userPersonalTagSingleTx",userPersonalTag:"userPersonalTag",TransactionTagUpdateSingle:"TransactionPersonalTagUpdateSingle",TransactionTagUpdate:"TransactionPersonalTagUpdate"},transactionKeys:{txTag:"txTag",txDevice:"txDevice",txDescription:"txDescription",txCategoryDescription:"txCategoryDescription",transactionData:"transactionData",transactionLinks:"transaction-links",transactionDetails:"transaction-details",transactionIcon:"transactionIcon",description:"description",personalTag:"personalTag",categoriesList:"categories-list",facebook:"txFacebookLink",twitter:"txTwitterLink",homepage:"txHomePageLink",customerSupport:"txCustomerSupportLink"}}},getTxModalObject:function(){var e=this.transactionData,t=this.transactionModalConfig.transactionKeys;return{category:{previousVal:e[t.txCategoryDescription],applyAll:this.applyAllCheckBox.categoryCheckBox.length&&this.transactionModalConfig.config.categoryApplyAllState,new:null,change:!1},tag:{previousVal:void 0===e[t.txTag]?null:e[t.txTag],applyAll:this.applyAllCheckBox.tagCheckBox.length&&this.transactionModalConfig.config.tagApplyAllState,new:null,change:!1}}},initialize:function(e){d.story.Block.prototype.initialize.call(this,e.modalParams.parent,e.modalParams.layoutInstructions,e.modalParams.story);var t=this;this.beforeRender(e),this.render(this.modalBlockEl),setTimeout(function(){t.bindEvents(t.modalBlockEl),t.afterRender(t.modalBlockEl)},this.modalManager.modalSettings.fadeDuration||0)},beforeRender:function(e){this.selectors=this.$selectors(),this.transactionModalConfig=this.transactionModalConfiguration(),this.modalBlockConfig=e,this.storyId=this.story&&this.story.storyDef&&this.story.storyDef.storyId,this.insightId=this.story&&this.story.insight&&this.story.insight.id,this.pCtrlBase=new d.story.PCtrlBase,this.transactionId=e.storyClickedEl.getAttribute("data-id"),this.transactionHelper=d.utils.TransactionHelper(),this.transactionRowData=this.transactionHelper.parseTableToObj(this.layoutInstructions),this.remoteAssetsConfig=this.getRemoteAssetsConfig(),this.selectedRowData=this.getTransactionData(this.transactionRowData,this.transactionId),this.transactionData=this.getTransactionData(this.layoutInstructions.tableObject,this.transactionId),this.processedModalBlocks=this.processModalBlocks(e),this.processedWarningModalBlocks=this.processWarningModalBlocks(e),this.modalManager=e.modalManager,this.modalBlockEl=e.modalManager.modalManagerEl,this.transactionModalConfig.config.autoRefresh=this.layoutInstructions.autoRefresh||!1,this.transactionModalConfig.config.enableAutoRefresh=d.projectConfiguration.getConfig("enableAutoRefresh")||!1,this.isDesktop=d.utils.persoBrowserDetector.getBrowserData().deviceType===this.selectors.$persoDesktop,this.shiftKeyDown=!1,this.txListFacts=this.getTableFact(this.layoutInstructions)},processModalBlocks:function(n){var r,i=this,a=[],l=n.modalTexts,c=this.transactionModalConfig.transactionKeys;return d.utils.persoHelper.deepObjectExtend([],n.modalBlock.blocks,!0).forEach(function(e){var t,s,o;"modal"!==e.type&&(e.src=i.layoutInstructions.srcExp,e.selected=i.selectedRowData,e.type===c.transactionData?(t=e.text||e.url,Object.prototype.hasOwnProperty.call(l,t)&&l[t]&&i.transactionId&&((t=l[t])===c.transactionIcon&&((s=p(n.storyClickedEl).find(i.selectors.$persoTxIcon))&&s.length?i.transactionModalConfig.config.iconDisplay?(s=s.get(0).getAttribute("src"))&&(e.url=s):(o=(s=d.utils.TransactionHelper()).mapVisualElementsValues(i.transactionModalConfig.config.iconHierarchy,i.layoutInstructions.configObject.visualElementsColumnMap),s.setVisualElementType(i.selectedRowData,o,i.transactionModalConfig.config.iconHierarchy,i.remoteAssetsConfig.defaultAssetName),s.setAssetsOrderArray(i.selectedRowData,o,i.transactionModalConfig.config.iconHierarchy,i.remoteAssetsConfig.defaultAssetName),i.transactionData.txAssetsOrder=i.selectedRowData.assetsOrderArray,e.url=i.layoutInstructions.baseUrl+"/"+i.selectedRowData.assetType+"/"+i.selectedRowData.visualElementType.toLowerCase()+"."+i.transactionData.txIconExtension):e.blockIgnore=!0),t===c.description&&(e.text=i.transactionData[c.txDevice]||i.transactionData[c.txDescription]),e.blockIgnore||a.push(e))):(e.blockId===c.categoriesList&&(e.selectedCategory={icon:i.transactionData.txCategoryId,categoryDescription:i.transactionData.txCategoryDescription}),(r=n.modalManager.pBlockManager.createProcessor(e,n.modalBlock.id))&&(s=r.processData(),e.blockId===c.transactionLinks?s&&s.options&&(s.options.forEach(function(e){var t=e.id;t&&c[t]?e.url=i.transactionData[c[t]]:e.url=null}),(o=i.transactionModalConfig.config.contactBtnNumSupport)&&s.options.length>o&&(s.options=s.options.slice(0,o))):e.blockId===c.transactionDetails&&(s=i.addDisplayBlock(s)),a.push(s))))}),a},addDisplayBlock:function(e){var t=e&&e.options,s=this.transactionModalConfig.transactionKeys;return t&&t.forEach(function(e){e.id===s.personalTag?(e.displayBlock=!("-"===e.entityTitle||"-"===e.entityLabel1&&"-"===e.entityLabel2),e.entityLabel1="-"!==e.entityLabel1?e.entityLabel1:null):e.displayBlock=!("-"===e.entityTitle||"-"===e.entityLabel1)}),e},processWarningModalBlocks:function(t){var s=this,o=[],e=t.modalBlock.blocks.filter(function(e){return"modal"===e.type&&e.blockId===s.transactionModalConfig.config.warningModalId});return e&&e.length&&d.utils.persoHelper.deepObjectExtend([],e[0].blocks,!0).forEach(function(e){e=t.modalManager.pBlockManager.createProcessor(e,t.modalBlock.id);o.push(e.processData())}),o},getTransactionData:function(e,t){if(e&&e.length){e=e.filter(function(e){return e.txId===t||e.id===t});if(e)return e[0]}},getTableFact:function(e){var t,s=e.srcExp?e.srcExp.split("."):null,o=this.modalManager.pBlockManager.model.facts;if(s&&s.length)for(var n=0;n<s.length;n++)if(void 0!==(t=o[s[n]])&&t&&Object.keys(t).length)return t},render:function(e){this.renderTransactionModalBlock(e);var t=e.find(this.selectors.$pstoryMainBlockContainer);this.renderTransactionModalBlocks(t,this.processedModalBlocks),t=e.find(this.selectors.$pstoryWarningBlockContainer),this.renderTransactionModalBlocks(t,this.processedWarningModalBlocks),this.handleTxModalAssets(e)},renderTransactionModalBlock:function(e){e&&e.length&&e.append(this.template)},renderTransactionModalBlocks:function(t,e){var s,o,n,r=this,i=this.remoteAssetsConfig,a=this.selectors,l={top:t.find(a.$pstoryBlockTopContainer),middle:t.find(a.$pstoryBlockMiddleContainer),bottom:t.find(a.$pstoryBlockBottomContainer)},c=null,p=0;i.baseUrl=this.layoutInstructions.baseUrl,e.forEach(function(e){if(!Object.prototype.hasOwnProperty.call(e,"hideBlock")||!1===e.hideBlock){e.remoteAssetsConfig=i;try{o=r.getBlockContainerObj(t,e,l,c,p),n=o.container,p=o.part,c=o.temp,n&&(s=r.getTemplate("pstory-block-"+e.blockId,e),n.append(s))}catch(e){d.log(e)}}})},getBlockContainerObj:function(e,t,s,o,n){var r=Object.prototype.hasOwnProperty.call(t,"section")||t.section?s[t.section]:s.middle;return r.is(s.middle)&&(Object.prototype.hasOwnProperty.call(t,"part")?(o!==(n=isNaN(t.part)?t.part:t.part-1)&&(r.append("<div class=pstory-block-container-part></div>"),o=n),r=p(r.find(this.selectors.$pstoryBlockContainerPart)[n]),t.blockType&&r.addClass("perso-"+t.blockType)):r=null),{container:r,temp:o,part:n}},getTemplate:function(e,t){return this.pCtrlBase.getTemplateHtml(e,t)},afterRender:function(e){var t=this.selectors,s=(this.firstBlockEl=e.find(t.$pstoryBlockTransactionName),this.nextBlockEl=null,this.applyAllCheckBox={categoryCheckBox:e.find(t.$pstoryApplyAllCategoryCheckbox),tagCheckBox:e.find(t.$pstoryApplyAllTagCheckbox),tagCheckBoxText:e.find(t.$pstoryApplyAllTagText)},this.txModalObject=this.getTxModalObject(),e.find(t.$persoDetailsPersonalTagEl+" "+t.$persoDetailsValue)),s=(s&&s.length&&s.get(0).classList.contains(t.$persoNoTag)&&this.setThemeClassesTag(!0),e.find(t.$persoModalUpdateButton+","+t.$persoModalSubmitTagButton));s&&s.length&&s.addClass(t.$persoDisabled),this.removeDetailsTitle(e,t),this.setCheckBoxFirstState(e,t),this.setSelectedDropDownCategory(e,t),this.setDropDownCategoryWidth(e,t),this.setTagInputText(e,t),this.updateTagCounter(e),this.renderAccessibility(e),this.setThemeClasses()},removeDetailsTitle:function(e,t){e.find(t.$persoDetailsContainer).length||e.find(t.$pstoryBlockTransactionDetailsTitle+","+t.$persoCategoryList).closest(t.$pstoryBlockContainerPart).remove()},setCheckBoxFirstState:function(e,t){var s=e.find(t.$pstoryApplyAllCategoryCheckbox),s=(this.transactionModalConfig.config.categoryApplyAllState&&(s&&s.length?s.addClass(t.$persoChecked):(s=e.find(t.$pstoryCategoriesListContainer))&&s.length&&s.addClass(t.$persoNoApplyAll)),e.find(t.$pstoryApplyAllTagCheckbox));this.transactionModalConfig.config.tagApplyAllState&&s&&s.length&&s.addClass(t.$persoChecked)},setSelectedDropDownCategory:function(e,t){var s=p(e.find(t.$persoDetailsCategoryEl));s&&s.length&&(s=s.get(0).getAttribute("data-id"),e.find(s?"#"+s:"").addClass(t.$persoSelected))},setTagInputText:function(e,t){e=e.find(t.$persoTagUserInput),t=this.transactionData[this.transactionModalConfig.transactionKeys.txTag];e&&e.length&&t&&e.attr("value",t)},updateTagCounter:function(e){var t,s=this.selectors,o=e.find(s.$persoTagCharacterCounter),e=e.find(s.$persoTagUserInput),n=e.parents().find(s.$pstoryBlockTagUserInput),r=this.transactionModalConfig.config.tagInputMaxLength;e&&e.length&&(t=e.get(0).value.length,o&&o.length&&e&&e.length&&n&&n.length&&t<=r&&(o.text(t+"/"+r),o.attr("aria-label",t+" "+this.getTexts().accessibilityOfLbl+" "+r),1<=t?n.get(0).classList.contains(s.$persoEdited)||(n.addClass(s.$persoEdited),n.find(s.$persoTagEditButtonEl).attr("aria-hidden","false").addClass(s.$accessibilityRead)):0===t&&(n.removeClass(s.$persoEdited),n.find(s.$persoTagEditButtonEl).attr("aria-hidden","true").removeClass(s.$accessibilityRead))))},renderAccessibility:function(e){var t=this.getTexts(),s=this.selectors,o=e.find(s.$pstoryBlockTransactionName),n=e.find(s.$persoTagEditButtonEl);o&&o.length&&(o.attr("aria-label",t.accessibilityTransactionModalText+","+o.text()),d.utils.accessibility.putFocus(o)),n.attr("aria-label",t.accessibilityClearTagButton),this.setCategoryTagSelectAccessibility(e,t),this.setCheckBoxAccessibility(e.find(s.$pstoryApplyAllCategoryCheckbox)),this.setCheckBoxAccessibility(e.find(s.$pstoryApplyAllTagCheckbox)),this.setModalButtonsAccessibility(e.find(s.$persoMainButton),t),this.setModalButtonsAccessibility(e.find(s.$persoWarningButton),t),this.setModalButtonsAccessibility(e.find(s.$persoTagPopupButton),t),this.setCategoriesAccessibility(e,s),this.setContactButtonsAccessibility(e,s,t)},setCategoryTagSelectAccessibility:function(e,t){var s=e.find(this.selectors.$persoDetailsCategoryEl),o=e.find(this.selectors.$persoDetailsPersonalTagEl),e=e.find(this.selectors.$persoDetailsEditIcon),n=d.utils.accessibility.getElementChildNodesText(s),r=d.utils.accessibility.getElementChildNodesText(o);e&&e.length&&(s.attr("aria-label",n+t.accessibilityDropDownCategories),o.attr("aria-label",r+t.accessibilityTagButton))},setContactButtonsAccessibility:function(e,t,s){var o=e.find(t.$persoTransactionLinkButtonEl);if(o&&o.length)for(var n,r=0;r<o.length;r++)(n=o[r].getAttribute("data-id"))&&(n=s[n]+". "+(r+1)+" "+s.accessibilityOutOfTxt+" "+o.length,o[r].setAttribute("aria-label",n))},setCategoriesAccessibility:function(e,t){var s=this.getTexts(),o=e.find(t.$persoCategoryContainer);if(o&&o.length)for(var n,r=0;r<o.length;r++)n=o[r].classList.contains(t.$persoSelected)?", "+s.accessibilitySelected:"",n=o[r].getAttribute("value")+","+s.accessibilityTransactionModalButton+","+(r+1)+" "+s.accessibilityOutOfTxt+" "+o.length+n,o[r].setAttribute("aria-label",n)},setCheckBoxAccessibility:function(e){var t,s=this.getTexts();e&&e.length&&(t=e.get(0).classList.contains(this.selectors.$persoChecked)?s.accessibilityChecked:s.accessibilityUnchecked,s=e.attr("value")+","+s.accessibilityCheckBox+","+t+",",e.attr("aria-label",s))},setModalButtonsAccessibility:function(e,t){for(var s=0;s<e.length;s++){var o=p(e[s]).hasClass(this.selectors.$persoDisabled)?"disabled":"",o=e[s].innerText+", "+(s+1)+" "+t.accessibilityOutOfTxt+" "+e.length+", "+o;e[s].setAttribute("aria-label",o)}},bindEvents:function(e){var t=this,s=(this.setDropDownEvents(e),t.isDesktop&&e.bind("keyup",this.keyUpEvent.bind(this,e)).bind("keydown",function(e){t.shiftKeyDown=!!e.shiftKey}),e.find(this.selectors.$persoModalButtonEl)),o=e.find(this.selectors.$persoCategoryContainer),n=e.find(this.selectors.$persoDetailsPersonalTagEl),r=e.find(this.selectors.$persoTransactionLinkButtonEl),i=e.find(this.selectors.$persoTagEditButtonEl);s.on("click",this.handleTransactionModalButtons.bind(this,e)),o.on("click",this.handleDropDownCategories.bind(this,e)),n.on("click",this.personalTagClicked.bind(this,e)),r.on("click",this.handleContactButtons.bind(this,e)),i.on("click",this.clearEditInput.bind(this,e)),this.bindTagSectionEvents(e)},personalTagClicked:function(e){var t=e.find(this.selectors.$pstoryBlockTransactionPopupButtons),s=e.find(this.selectors.$pstoryBlockTransactionModalButtons),o=e.find(this.selectors.$pstoryMainMiddleBlockContainer);o.find(this.selectors.$pstoryBlockContainerPart).hide(),o.find(this.selectors.$persoTagUpdatePopup).show(),this.updateModalButtons(s,t),this.activateSubmitButton(e,this.selectors.$persoModalSubmitTagButton),d.utils.accessibility.putFocus(this.selectors.$tagUpdateText)},closeTagPopup:function(e){e=e.find(this.selectors.$pstoryMainMiddleBlockContainer);e.find(this.selectors.$pstoryBlockContainerPart).show(),e.find(this.selectors.$persoTagUpdatePopup).hide()},HandleSubmitTagBtn:function(e){var t=e.find(this.selectors.$persoDetailsPersonalTagEl),s=e.find(this.selectors.$persoTagUserInput).val(),o=t.find(this.selectors.$persoDetailsValue),n=o.attr("data-val")?o.attr("data-val"):"",r=null===this.txModalObject.tag.previousVal&&!s;s!==n&&(s===this.txModalObject.tag.previousVal||r?this.hideOnNoChange(null):this.showOnChange(s),void 0!==this.txModalObject.tag.new&&null!==this.txModalObject.tag.new?(this.setThemeClassesTag(!1),o.removeClass(this.selectors.$persoNoTag),this.appendAttrText(o,e,this.txModalObject.tag.new)):(this.setThemeClassesTag(!0),o.addClass(this.selectors.$persoNoTag),this.appendAttrText(o,e,this.txModalObject.tag.previousVal))),d.utils.accessibility.putFocus(t),this.handleUpdateButton(this.selectors.$persoModalUpdateButton)},appendAttrText:function(e,t,s){var o=e.attr("data-val2"),o=s||o;e.text(o),e.attr("data-val",s),t.find(this.selectors.$persoTagUserInput).attr("value",s)},checkTagValue:function(e){var t=e.find(this.selectors.$persoDetailsPersonalTagEl).find(this.selectors.$persoDetailsValue),t=t.attr("data-val")?t.attr("data-val"):"";return e.find(this.selectors.$persoTagUserInput).val()===t},activateSubmitButton:function(e,t){var s=e.find(this.selectors.$pstoryTagError).length;this.checkTagValue(e)||s?this.disableUpdateButton(t):this.enableUpdateButton(t),this.setThemeClassesButton()},updateModalButtons:function(e,t){t.removeClass(this.selectors.$persoHide),e.addClass(this.selectors.$persoHide)},handleContactButtons:function(e,t){var s=this,o=this.processedModalBlocks.filter(function(e){return e.blockId===s.transactionModalConfig.transactionKeys.transactionLinks});o&&o.length&&((t=t.currentTarget.getAttribute("data-index"))&&(o={requestString:"navigateToPage",data:{navigateTarget:"navigateToURL",actionType:"externalNavigation",payload:{URL:o[0].options[t].url,externalLink:"true"}}},this.story.blockSessionManager.widgetEvent(this,o)))},setDropDownEvents:function(s){var o=this,n=this.selectors,e=s.find(n.$persoDetailsCategoryEl),t=s.find(n.$persoCategoryContainer),r=s.find(n.$pstoryBlockContainerPart);e.on("click",function(){var e=s.find(n.$pstoryCategoriesListContainer);e&&e.get(0).classList.contains(n.$persoOpen)?o.closeDropDownCategories(s,n):(e.addClass(n.$persoOpen),r.children(n.$persoNotCategoryList).hide(),t.attr("aria-hidden","false"),o.isDesktop&&t.attr("tabindex","0").addClass(n.$accessibilityRead),t&&t.length&&d.utils.accessibility.putFocus(t[0]))}),s.parent().on("click",function(e){var t=s.find(n.$pstoryCategoriesListContainer+","+n.$persoDetailsCategoryEl);t.length&&!t.get(0).contains(e.target)&&o.closeDropDownCategories(s,n)})},setDropDownCategoryWidth:function(e,t){e=e.find(t.$pstoryCategoriesList),t=e.closest(t.$pstoryBlockContainerPart),t=t.length?t.outerWidth():0;e.width(t)},bindTagSectionEvents:function(t){var s=this,e=t.find(this.selectors.$persoTagUserInput),o=t.find(this.selectors.$persoCheckboxEl);o&&o.length&&o.on("click",function(e){s.handleCheckBox(e)}),e&&e.length&&(e.get(0).setAttribute("maxlength",this.transactionModalConfig.config.tagInputMaxLength),e.on("keyup",function(e){s.validateTagText(t,e)}).on("input",this.updateTagCounter.bind(this,t)))},keyUpEvent:function(e,t){var s,o,n=this.selectors,r=e.find(n.$persoSubModalShowEl),i=n.$accessibilityReadNotPersoHide,a=r.find(i),l=this.nextBlockEl||this.firstBlockEl,c=a.index(l);switch(t.which){case 9:var p=l.get(0).classList.contains(n.$persoCategoryContainerField);this.shiftKeyDown?(s=c-1,p&&!a[s].classList.contains(n.$persoCategoryContainerField)||this.handleLeftArrowButton(s,a)):(o=c+1,p&&!a[o].classList.contains(n.$persoCategoryContainerField)||this.handleRightArrowButton(o,a));break;case 13:l&&l.length&&(l.get(0).classList.contains(n.$persoDetailsCategory)&&(l.click(),this.nextBlockEl=r.find(n.$persoCategoryContainerFirstChild)),l.get(0).classList.contains(n.$persoCategoryContainerField)&&(l.click(),this.nextBlockEl=r.find(n.$persoDetailsCategoryEl)),l.get(0).classList.contains(n.$persoDetailsPersonalTag)&&(l.click(),this.nextBlockEl=r.find(n.$tagUpdateText)),l.get(0).classList.contains(n.$persoCheckbox)&&l.click(),l.get(0).classList.contains(n.$persoTagEditButton)&&(l.click(),this.nextBlockEl=r.find(n.$persoTagUserInput)),l.get(0).classList.contains(n.$persoCloseBtn)&&(this.nextBlockEl=e.find(n.$pstoryBlockClosePageTitleText)),l.get(0).classList.contains(n.$persoModalButton)&&l.click(),l.get(0).classList.contains(n.$persoTransactionLinkButton)&&l.click());break;case 32:break;case 39:l.get(0).classList.contains(n.$persoCategoryContainerField)&&a[o=c+1].classList.contains(n.$persoCategoryContainerField)&&this.handleRightArrowButton(o,a);break;case 37:l.get(0).classList.contains(n.$persoCategoryContainerField)&&a[s=c-1].classList.contains(n.$persoCategoryContainerField)&&this.handleLeftArrowButton(s,a)}},handleTransactionModalButtons:function(e,t){var s=t.currentTarget,o=this.selectors,n=e.find(o.$pstoryMainBlockContainer),t=e.find(this.selectors.$pstoryMainBottomBlockContainer),r=t.find(o.$pstoryBlockTransactionPopupButtons),i=t.find(o.$pstoryBlockTransactionModalButtons),a=e.find(o.$pstoryWarningBlockContainer);if(void 0!==s&&!p(s).hasClass(o.$persoDisabled))switch(s.getAttribute("data-id")){case o.$persoCloseButton:this.closeTransactionModal(n,a,o);break;case o.$persoUpdateButton:personetics.config.persoEBMode?(this.sendUpdateRequest(!1),this.modalManager.closeModal(this.modalBlockConfig.storyClickedEl,this.transactionModalConfig.config.autoRefresh,this.transactionModalConfig.config.enableAutoRefresh)):(this.onUpdateLoading(p(s),!0),this.sendUpdateRequest(!0));break;case o.$persoStayButtonId:this.stayInTransactionModal(a,n,o,e);break;case o.$persoLeaveButtonId:this.modalManager.closeModal(this.modalBlockConfig.storyClickedEl);break;case o.$persoCancelTagButton:this.closeTagPopup(e),this.updateModalButtons(r,i);break;case o.$persoSubmitTagButton:this.HandleSubmitTagBtn(e),this.closeTagPopup(e),this.updateModalButtons(r,i)}},handleDropDownCategories:function(e,t){var s=p(t.currentTarget),t=t.currentTarget,o=this.selectors,n=p(e.find(o.$persoSelectedCategoryContainer)),r=p(e.find(o.$persoDetailsCategoryEl)),i=t.getAttribute("value");r.find(o.$persoDetailsValue).text(i),r.attr("data-id",t.getAttribute("id")),n.removeClass(o.$persoSelected),s.addClass(o.$persoSelected),this.txModalObject.category&&this.txModalObject.category.previousVal!==i?(this.txModalObject.category.change=!0,this.txModalObject.category.new=i,e.find(o.$pstoryApplyAllCategoryText).removeClass(o.$persoHide),e.find(o.$pstoryApplyAllCategoryCheckbox).removeClass(o.$persoHide)):(this.txModalObject.category.change=!1,e.find(o.$pstoryApplyAllCategoryCheckbox).addClass(o.$persoHide),e.find(o.$pstoryApplyAllCategoryText).addClass(o.$persoHide),this.txModalObject.category.new=null),this.setCategoriesAccessibility(e,o),this.closeDropDownCategories(e,o),this.handleUpdateButton(o.$persoModalUpdateButton)},clearEditInput:function(e){var t=this.selectors,s=e.find(t.$persoTagUserInput);s&&s.length&&(s.get(0).value=null,d.utils.accessibility.putFocus(s),this.updateTagCounter(e),this.activateSubmitButton(e,t.$persoModalSubmitTagButton))},handleUpdateButton:function(e){this.txModalObject.category.change||this.txModalObject.tag.change?this.enableUpdateButton(e):this.disableUpdateButton(e),this.setThemeClassesButton()},disableUpdateButton:function(e){this.modalBlockEl.find(e).addClass(this.selectors.$persoDisabled)},enableUpdateButton:function(e){this.modalBlockEl.find(e).removeClass(this.selectors.$persoDisabled)},closeDropDownCategories:function(e,t){var s=e.find(t.$pstoryCategoriesListContainer),o=e.find(t.$persoCategoryContainer),n=e.find(t.$persoDetailsCategoryEl),e=e.find(t.$pstoryBlockContainerPart);s&&s.get(0).classList.contains(t.$persoOpen)&&(e.children(t.$persoNotCategoryList).show(),s.removeClass(t.$persoOpen),o.attr("aria-hidden","true"),this.isDesktop&&o.attr("tabindex","-1").removeClass(t.$accessibilityRead),d.utils.accessibility.putFocus(n))},closeTransactionModal:function(e,t,s){!1===this.txModalObject.category.change&&!1===this.txModalObject.tag.change?this.modalManager.closeModal(this.modalBlockConfig.storyClickedEl):(e.removeClass(s.$persoSubModalShow),t.addClass(s.$persoSubModalShow),d.utils.accessibility.putFocus(t.find(s.$pstoryBlockClosePageTitleText)))},stayInTransactionModal:function(e,t,s,o){e.removeClass(s.$persoSubModalShow),t.addClass(s.$persoSubModalShow);e=o.find(s.$pstoryBlockTransactionName);e&&e.length&&d.utils.accessibility.putFocus(e)},showConfirmationMsg:function(){var e,t,s=this.getConfirmationMsgBlock();Object.keys(s).length&&(e=this.story&&this.story.parentEl,s=this.getTemplate(this.selectors.$confirmationMsgTemplate,s),t=this,e&&e.append(s),e.find(this.selectors.$pstoryBlockConfirmationMsgClose).bind("click",d.bind(t,t.removeConfirmationMsg)),this.setThemeClassesConfirmation(),d.utils.accessibility.putFocus(e.find(this.selectors.$pstoryBlockConfirmationMsgTxt)),setTimeout(function(){t.removeConfirmationMsg()},this.transactionModalConfig.config.confirmationMsgDisappear))},removeConfirmationMsg:function(){var e=this.selectors,t=(this.story&&this.story.parentEl).find(e.$pstoryBlockConfirmationMsgContainer),s=this;t.addClass(e.$persoClose),setTimeout(function(){t.remove(),d.utils.accessibility.putFocus(s.modalBlockConfig.storyClickedEl)},this.transactionModalConfig.config.confirmationMsgFadeOut)},getConfirmationMsgBlock:function(){var t=this,s=this.selectors;return this.processedModalBlocks.filter(function(e){return t.transactionModalConfig.config.autoRefresh&&t.transactionModalConfig.config.enableAutoRefresh?e.blockId===s.$confirmationTextUpdatedStory:e.blockId===s.$confirmationTextNotUpdatedStory})[0]},onUpdateLoading:function(e,t){t&&(t=e.find(this.selectors.$persoModalButtonText),e.addClass(this.selectors.$persoLoading),t.addClass(this.selectors.$persoAssetLoading))},sendUpdateRequest:function(e){var t=this.transactionId,s=(this.eventListCategory=[],this.notifyEvents=[],this.transactionData[this.transactionModalConfig.transactionKeys.txDevice]);this.txModalObject.category.change&&this.updateCategoryEvents(t,s),this.txModalObject.tag.change&&this.updateTagEvents(t,s),this.transactionModalConfig.config.autoRefresh&&this.transactionModalConfig.config.enableAutoRefresh&&(t=this.getTransactionColIndFacts(),this.mapTransactionFacts(t)),this.sendNotifyReportEvent(),personetics.updateUserDataAssets(this.eventListCategory,this.onSuccessCategory.bind(this,e),this.onErrorCategory.bind(this))},getTransactionColIndFacts:function(){var s={};if(this.txListFacts)return this.txListFacts.cols.forEach(function(e,t){switch(e){case"device":s.deviceInd=t;break;case"id":s.idInd=t;break;case"categoryGroup":s.categoryGroupInd=t;break;case"categoryDescription":s.categoryDescriptionInd=t;break;case"category":s.categoryInd=t;break;case"userTag":s.userTagInd=t}}),s},mapTransactionFacts:function(o){var n=this;this.txListFacts&&this.txListFacts.rows.forEach(function(e,t){for(var s in n.txModalObject)"category"===s&&n.txModalObject[s].change?n.checkTransactionFacts(e,t,s,o,d.bind(n,n.updateCategoryTransactionFacts)):"tag"===s&&n.txModalObject[s].change&&n.checkTransactionFacts(e,t,s,o,d.bind(n,n.updateTagTransactionFacts))})},checkTransactionFacts:function(e,t,s,o,n){var r=d.processor.PStoryConfig.getConfig("lang"),i=this.transactionData[this.transactionModalConfig.transactionKeys.txDevice];!this.txModalObject[s].applyAll||this.txModalObject[s].applyAll&&null===i?this.transactionId===e[o.idInd]&&n(t,o,r):i===e[o.deviceInd]&&n(t,o,r)},updateTagTransactionFacts:function(e,t){this.txListFacts&&(this.txListFacts.rows[e][t.userTagInd]=this.txModalObject.tag.new)},updateCategoryTransactionFacts:function(e,t,s){var o=this.txListFacts;o&&(o.rows[e][t.categoryGroupInd][s]=this.txModalObject.category.new,o.rows[e][t.categoryDescriptionInd][s]=this.txModalObject.category.new,o.rows[e][t.categoryInd]=this.modalBlockEl.find(this.selectors.$persoDetailsCategoryEl).attr("data-id"))},updateTagEvents:function(e,t){var s=this.transactionModalConfig,o=this.txModalObject.tag.new,n=this.createNotifyParams(s.events.TransactionTagUpdateSingle,e+" ‘"+o+"’"),e=this.createEventListConfig(s.events.userPersonalTagSingleTx,e,o);this.eventListCategory.push(e),this.notifyEvents.push(n),this.txModalObject.tag.applyAll&&t&&(e=this.createNotifyParams(s.events.TransactionTagUpdate,t+" ‘"+o+"’"),n=this.createEventListConfig(s.events.userPersonalTag,t,o),this.eventListCategory.push(n),this.notifyEvents.push(e))},updateCategoryEvents:function(e,t){var s=this.modalBlockEl.find(this.selectors.$persoDetailsCategoryEl).attr("data-id"),o=this.createNotifyParams(this.transactionModalConfig.events.TransactionCategoryUpdateSingle,e+" "+s),e=this.createEventListConfig(this.transactionModalConfig.events.userCategorySingleTx,e,s);this.eventListCategory.push(e),this.notifyEvents.push(o),this.txModalObject.category.applyAll&&t&&(e=this.createNotifyParams(this.transactionModalConfig.events.TransactionCategoryUpdate,t+" "+s),o=this.createEventListConfig(this.transactionModalConfig.events.userCategory,t,s),this.eventListCategory.push(o),this.notifyEvents.push(e))},sendNotifyReportEvent:function(){var t=this;this.notifyEvents.forEach(function(e){t.notifyReportEvent(e)})},createNotifyParams:function(e,t){return{type:e,value:t,insightId:this.storyId,instanceId:this.insightId}},createEventListConfig:function(e,t,s){return{assetAlias:e,assetId:t,value:s}},onSuccessCategory:function(e){this.showConfirmationMsg(),e&&this.modalManager.closeModal(null,this.transactionModalConfig.config.autoRefresh,this.transactionModalConfig.config.enableAutoRefresh)},onErrorCategory:function(){this.modalBlockEl.find(this.selectors.$pstoryBlockBottomContainer).addClass(this.selectors.$persoError)},showOnChange:function(e){this.applyAllCheckBox.tagCheckBox.removeClass(this.selectors.$persoHide),this.applyAllCheckBox.tagCheckBoxText.removeClass(this.selectors.$persoHide),this.txModalObject.tag.new=e,this.txModalObject.tag.change=!0},hideOnNoChange:function(e){this.applyAllCheckBox.tagCheckBox.addClass(this.selectors.$persoHide),this.applyAllCheckBox.tagCheckBoxText.addClass(this.selectors.$persoHide),this.txModalObject.tag.new=e,this.txModalObject.tag.change=!1},validateTagText:function(e,t){var s=this.transactionModalConfig.config.tagRegex,o=t.currentTarget.value,n=this.selectors,r=e.find(n.$pstoryBlockTextValidation),i=e.find(n.$pstoryBlockTagUserInput),a=e.find(n.$pstoryMainMiddleBlockContainer);t&&!t.shiftKey&&(s.test(o)?(r.addClass(n.$persoError).addClass(n.$accessibilityRead),i.addClass(n.$persoError),a.scrollTop(a.height()),d.utils.accessibility.putFocus(r)):(r.removeClass(n.$persoError).removeClass(n.$accessibilityRead),i.removeClass(n.$persoError)),this.activateSubmitButton(e,n.$persoModalSubmitTagButton))},handleCheckBox:function(e){var e=p(e.target),t=this.selectors;e&&e.get(0).classList.contains(t.$persoChecked)?(e.removeClass(t.$persoChecked),this.applyAllCheckBox.categoryCheckBox.is(e)&&(this.txModalObject.category.applyAll=!1),this.applyAllCheckBox.tagCheckBox.is(e)&&(this.txModalObject.tag.applyAll=!1)):(e.addClass(t.$persoChecked),this.applyAllCheckBox.categoryCheckBox.is(e)&&(this.txModalObject.category.applyAll=!0),this.applyAllCheckBox.tagCheckBox.is(e)&&(this.txModalObject.tag.applyAll=!0)),this.setCheckBoxAccessibility(e),d.utils.accessibility.putFocus(e)},handleRightArrowButton:function(e,t){e&&(e=e<t.length?p(t[e]):p(t[t.length-1]))&&e.length&&(e.focus(),this.nextBlockEl=e)},handleLeftArrowButton:function(e,t){e&&(t=p(e<0?t[0]:t[e]))&&t.length&&(t.focus(),this.nextBlockEl=t)},handleTxModalAssets:function(e){var r=this,t=e.find(this.selectors.$persoTransactionImage),s=e.find(this.selectors.$persoImages),e=e.find(this.selectors.$persoImage);s.on("load",function(){r.remoteAssetsMgr.finishedLoading(this)}),t.on("error",function(){var e=r.transactionData,t=e.txAssetsOrder,s="",o=p(this).data(r.defaultAssetConfig.loadingAssetTriesAttrName)||0,n=o<t.length&&t[o]&&t[o].assetName?t[o].assetName.toLowerCase():r.txConfig.defaultAssetName,t=t[o].assetType;"no-icons"!==n&&n!==r.remoteAssetsConfig.defaultAssetName?(s=r.layoutInstructions.baseUrl+"/"+t+"/"+n+"."+e.txIconExtension,r.remoteAssetsMgr.setDefaultAsset(this,s),r.remoteAssetsMgr.setAssetLoadingTriesAttr(this)):n==r.remoteAssetsConfig.defaultAssetName?(s=r.localBaseUrl+"/"+t+"/"+n+"."+r.remoteAssetsConfig.defaultAssetExtension,r.remoteAssetsMgr.setDefaultAsset(this,s)):p(this).parent().addClass(r.selectors.$persoTxWithNoIcons)}),e.on("error",function(){var e=p(this).data(r.defaultAssetConfig.loadingAssetTriesAttrName);e&&e>r.defaultAssetConfig.loadingAssetMaxTries?r.fallbackAsset(this):(e=r.localBaseUrl+"/"+r.remoteAssetsConfig.defaultAssetDirectory+"/"+r.remoteAssetsConfig.defaultAssetName+"."+r.remoteAssetsConfig.defaultAssetExtension,r.remoteAssetsMgr.setDefaultAsset(this,e),r.remoteAssetsMgr.setAssetLoadingTriesAttr(this))})},getTexts:function(){return{accessibilityTransactionModalText:d.dictionary.getText("accessibilityTransactionModalText"),accessibilityDropDownCategories:d.dictionary.getText("accessibilityDropDownCategories"),accessibilityTagButton:d.dictionary.getText("accessibilityTagButton"),accessibilityTransactionModalButton:d.dictionary.getText("accessibilityTransactionModalButton"),accessibilityOutOfTxt:d.dictionary.getText("accessibilityOutOfTxt"),accessibilitySelected:d.dictionary.getText("accessibilitySelected"),accessibilityCheckBox:d.dictionary.getText("accessibilityCheckBox"),accessibilityDeleteTag:d.dictionary.getText("accessibilityDeleteTag"),accessibilityClearTagButton:d.dictionary.getText("accessibilityClearTagButton"),accessibilityOfLbl:d.dictionary.getText("accessibilityOfLbl"),accessibilityChecked:d.dictionary.getText("accessibilityChecked"),accessibilityUnchecked:d.dictionary.getText("accessibilityUnchecked"),facebook:d.dictionary.getText("facebook"),twitter:d.dictionary.getText("twitter"),homepage:d.dictionary.getText("homepage"),customerSupport:d.dictionary.getText("customerSupport"),accessibilityEntityListStart:d.dictionary.getText("accessibilityEntityListStart"),accessibilityEntityListEnd:d.dictionary.getText("accessibilityEntityListEnd")}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(o,n){o.story=o.story||{},o.story.OptionsBlock=o.story.Block.extend({bindEvents:function(){o.story.Block.prototype.bindEvents.call(this),this.frameEl.find(".pstory-button").bind("click",o.bind(this,this.optionClickEvent)).bind("touchstart",function(){}),this.bindEvnetsForAnimation()},optionClickEvent:function(e){var t=n(e.currentTarget),s=t.attr("pstory-id"),o=t.attr("action-id");this.frameEl.find(".pstory-button.perso-selected").attr("pstory-id")!=s&&(this.onInputSelect(e),s=t.attr("pstory-id"),this.currentSelectedOption=this.getOptionById(s),"radio-button"===this.layoutInstructions.type&&this.setRadioAccessibility(),this.parent.notifyEvent(this,"setSelectedValue",this.currentSelectedOption),o&&this.parent.notifyEvent(this,"actionEvent",{actionId:o,context:this.currentSelectedOption}),e={value:"radio-button"===this.layoutInstructions.type.toLowerCase()?this.getRadioResult(this.layoutInstructions.options,t):this.getReportValue(t),type:"radio-button"===this.layoutInstructions.type.toLowerCase()?"quiz":this.layoutInstructions.type},this.notifyReportEvent(e))},getRadioResult:function(e,t){for(var s in e)if(e[s].id===t.attr("pstory-id"))return"true"===e[s].answer?o.dictionary.getText("right"):o.dictionary.getText("wrong");return o.dictionary.getText("wrong")},getOptionById:function(t){return this.layoutInstructions.options.filter(function(e){return e.id==t})[0]},onInputSelect:function(e){e=n(e.currentTarget);n(this.frameEl).find(".pstory-button").removeClass("perso-selected"),e.addClass("perso-selected")},bindEvnetsForAnimation:function(){}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(n,r){n.story=n.story||{},n.story.TextBoxes=n.story.OptionsBlock.extend({getHtmlTemplateId:function(){return"textboxes"},$selectors:function(){return{$pstoryDialogFrame:".pstory-dialog-frame",$pstoryDialogFrameTextBox:".pstory-dialog-frame-text-box",$pstoryButton:".pstory-button",$persoTextBoxEl:".perso-textbox, .perso-textbox-with-image",$persoLabel:".perso-label",$persoValue:".perso-value",$persoAmountEl:".perso-value .perso-amount",$pstoryBlockTextBoxContent:".pstory-block-container .pstory-block-content",$persoTextBoxImage:".perso-textbox-image"}},getBoxesConfigs:function(){return{showBoxesIcons:n.utils.projectConf.verifyConfig("storyBlocksConfigurations/textBoxes/showBoxesIcons",!0),defaultAssetName:n.utils.projectConf.verifyConfig("storyBlocksConfigurations/textBoxes/defaultAssetName","category-default"),defaultAssetDirectory:n.utils.projectConf.verifyConfig("storyBlocksConfigurations/textBoxes/defaultAssetDirectory","category_icons"),defaultAssetExtension:n.utils.projectConf.verifyConfig("storyBlocksConfigurations/textBoxes/defaultIconExtension","svg")}},initialize:function(e,t,s){this.selectors=this.$selectors(),this.boxesConfig=this.getBoxesConfigs(),n.story.Block.prototype.initialize.call(this,e,t,s)},layoutObjHasOwnProperty:function(e,t){if(t&&t.length)for(var s=0;s<t.length;s++)if(Object.prototype.hasOwnProperty.call(t[s],e))return!0;return!1},getAggregatedDisplayIconsMode:function(e){return this.boxesConfig.showBoxesIcons&&this.layoutObjHasOwnProperty("image",e.options)},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.headerColor&&n.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoLabel),"perso-theme-headerColor-color"),personetics.config.theme.brandColor&&n.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoValue),"perso-theme-brandColor-color"),personetics.config.theme.greyLightColor&&n.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTextBoxBx1Separator),"perso-theme-greyLightColor-background"))},beforeRender:function(e,t){this.layoutInstructions.config=this.boxesConfig,this.layoutInstructions.config.renderBoxIcons=this.getAggregatedDisplayIconsMode(t),this.layoutInstructions.assetExtension=this.layoutInstructions.fileType||this.boxesConfig.defaultAssetExtension,this.layoutInstructions.assetDirectory=this.layoutInstructions.directory||this.boxesConfig.defaultAssetDirectory,n.story.OptionsBlock.prototype.beforeRender.call(this,e,t)},afterRender:function(){this.setThemeClasses(),this.addRoleAndDataForAccessibility(),this.boxesHeight(),this.bindEvents(),this.el.closest(this.selectors.$pstoryDialogFrame).addClass(this.selectors.$pstoryDialogFrameTextBox)},boxesHeight:function(){var e=this.frameEl.find(this.selectors.$persoTextBoxEl),t=0;e.each(function(){var e=r(this).height();t<=e&&(t=e)}),0<t&&e.css("minHeight",t)},addRoleAndDataForAccessibility:function(){var e=this.frameEl.find(this.selectors.$persoTextBoxEl),t=n.utils.persoBrowserDetector.getBrowserData(),s=this.frameEl.find(this.selectors.$pstoryBlockTextBoxContent),o=this;e.each(function(){var e=r(this).find(o.selectors.$persoLabel).text(),t="",t=0<r(this).find(o.selectors.$persoAmountEl).length?r(this).find(o.selectors.$persoAmountEl).attr("aria-label"):r(this).find(o.selectors.$persoValue).text();r(this).attr("aria-label",t+", "+e+", ")}),s&&"perso-desktop"==t.deviceType&&r(s).attr("tabindex","-1")},bindEvents:function(){n.story.OptionsBlock.prototype.bindEvents.call(this);var t=this,e=this.frameEl.find(this.selectors.$pstoryButton),e=(r(e).bind("click",function(e){e.stopImmediatePropagation();e=r(e.target).attr("action-id");e&&(t.parent.notifyEvent(t,"actionEvent",{actionId:e}),t.notifyReportEvent({value:e,type:"actionEvent"}))}),t.frameEl.find(t.selectors.$persoTextBoxImage));e.on("load",function(){t.remoteAssetsMgr.finishedLoading(this)}),e.on("error",function(){var e=r(this).data(t.defaultAssetConfig.loadingAssetTriesAttrName);e&&e>t.defaultAssetConfig.loadingAssetMaxTries?t.fallbackAsset(this):(e=t.localBaseUrl+"/"+t.boxesConfig.defaultAssetDirectory+"/"+t.boxesConfig.defaultAssetName+"."+t.boxesConfig.defaultAssetExtension,t.remoteAssetsMgr.setDefaultAsset(this,e),t.remoteAssetsMgr.setAssetLoadingTriesAttr(this))})}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(i,r,a){r.story=r.story||{},r.story.ButtonsBlock=r.story.OptionsBlock.extend({getHtmlTemplateId:function(){return"buttons"},$btnselectors:function(){return{$persoAmount:".perso-amount",$accessibilityHelper:".accessibility-helper",$persoSelected:"perso-selected",$label:"label",$pstoryBasicButton:"div:not(.perso-trivia-button-col) > .pstory-button:not(.pstory-radio-button)",$pstoryRadioButton:".pstory-radio-button",$pstoryRadioButtonLabel:".pstory-button.pstory-radio-button label"}},getBtnTexts:function(){return{selected:r.dictionary.getText("accessibilitySelected"),unselected:r.dictionary.getText("accessibilityUnSelected"),radioButton:r.dictionary.getText("accessibilityRadioButton"),of:r.dictionary.getText("accessibilityOfLbl")}},beforeRender:function(e,t){r.story.OptionsBlock.prototype.beforeRender.call(this,e,t),this.btntexts=this.getBtnTexts(),this.btnselectors=this.$btnselectors(),this.initSelectedValue(),"perso-radio-buttons"!=this.layoutInstructions.class&&this.layoutInstructions.options.forEach(function(e){var t;-1!=e.text.indexOf("{{Emoji")&&(t=r.utils.emojisHelper.parseEmoji(e.text),e.text=t),e.text=r.utils.string.extractContent(e.text)}),a.each(this.layoutInstructions.options,function(e,t){"toggle"==t.type&&(t.toggleState=t.class+"-"+t.id)}),Object.prototype.hasOwnProperty.call(this.layoutInstructions,"class")&&-1<this.layoutInstructions.class.indexOf("perso-radio-buttons")&&(this.layoutInstructions.typeRadio=!0,this.layoutInstructions.type="radio-button")},optionClickEvent:function(e){var t=a(e.target),s=(void 0===t.data("navigateToPayload")?t.children("a"):t).data("navigateToPayload");s?(t=(t=a(e.currentTarget)).attr("action-id"))?this.doActionNavigation({actionId:t}):this.doNavigateToPage(s):r.story.OptionsBlock.prototype.optionClickEvent.call(this,e)},buttonKyedownEvent:function(e){var t=a(e.target);t.hasClass("pstory-radio-button")&&-1!==[13].indexOf(e.which)&&t.click()},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&(this.frameEl.hasClass("perso-secondary")||r.utils.persoTheming.addClassToElement(this.frameEl.find(this.btnselectors.$pstoryBasicButton),"perso-theme-brandColor-background"),r.utils.persoTheming.addClassToElement(this.frameEl.find(this.btnselectors.$pstoryRadioButtonLabel),"perso-theme-brandColor-color")),personetics.config.theme.greyLightColor&&(r.utils.persoTheming.addClassToElement(this.frameEl,"perso-theme-greyLightColor-buttons-background"),this.frameEl.hasClass("perso-secondary")&&r.utils.persoTheming.addClassToElement(this.frameEl.find(this.btnselectors.$pstoryBasicButton),"perso-theme-greyLightColor-background"),r.utils.persoTheming.addClassToElement(this.frameEl,"perso-theme-greyLightColor-button-bottom-border-color")),personetics.config.theme.backgroundColor&&r.utils.persoTheming.addClassToElement(this.frameEl.find(this.btnselectors.$pstoryBasicButton),"perso-theme-backgroundColor-color"))},afterRender:function(o){var n;r.story.OptionsBlock.prototype.afterRender.call(this,o),"navigateTo"===this.layoutInstructions.buttonType||"perso-trivia"===this.layoutInstructions.buttonType&&this.layoutInstructions.options.length?(n=[],a.each(this.layoutInstructions.options,function(e,t){var s=o.find("#"+t.id);n[e]={},t.payload?(n[e].navigateTarget=t.navigateTarget,n[e].payload=t.payload):n[e].navigateTarget=t.navigateTarget,s.length&&s.data("navigateToPayload",n[e])})):"radio-button"===this.layoutInstructions.type&&(r.utils.accessibility.trackFocus(this.frameEl),this.setRadioAccessibility()),this.setThemeClasses()},setRadioAccessibility:function(){var n=this,r=this.frameEl.find(this.btnselectors.$label);r.map(function(e,t){var t=a(t),s=t.parent().hasClass(n.btnselectors.$persoSelected),o=t.find(n.btnselectors.$persoAmount),s=s?n.btntexts.selected:n.btntexts.unselected,e=n.btntexts.radioButton+", "+(e+1)+" "+n.btntexts.of+" "+r.length;o.length?e+=", "+o.eq(0).attr("aria-label")+" - "+o.eq(1).attr("aria-label"):e+=", "+t.get(0).innerText,e+=", "+s,i.MSInputMethodContext&&document.documentMode?(0===(o=t.find(n.btnselectors.$accessibilityHelper)).length&&(t.append("<span class='accessibility-helper'></span>"),o=t.find(n.btnselectors.$accessibilityHelper)),o.attr("aria-label",e)):t.attr("aria-label",e)})},getReportValue:function(e){e=void 0!==e.attr("pstory-type-text")?e.attr("pstory-type-text"):e.attr("pstory-id");return e},doNavigateToPage:function(e){var t={requestString:"navigateToPage",data:e},s=(Object.prototype.hasOwnProperty.call(t,"data")&&Object.prototype.hasOwnProperty.call(t.data,"payload")&&(s=t.data.payload,delete t.data.payload,t.data.payload=s),{value:e.navigateTarget,type:"navigateButton"}),o=(this.notifyReportEvent(s),this);setTimeout(function(){o.parent.notifyEvent(o,"doNavigateToPage",t)},0)},doActionNavigation:function(e){var t=this.parent.blockProcessorManager.getAction(e),s={type:"navigateButton"},o=(t&&Object.prototype.hasOwnProperty.call(t,"payload")&&t.payload&&(s.value=t.payload.navigateTarget),this.notifyReportEvent(s),this);setTimeout(function(){o.parent.notifyEvent(o,"actionEvent",e)},0)},bindEvents:function(){r.story.OptionsBlock.prototype.bindEvents.call(this),this.el.find(".pstory-block-buttons.perso-radio-buttons").bind("keypress",".pstory-radio-button",r.bind(this,this.buttonKyedownEvent))},initSelectedValue:function(){this.parent.notifyEvent(this,"setSelectedValue",{context:null})}})}(window,window.Personetics=window.Personetics||{},jQuery),function(s,i){s.story=s.story||{},s.story.NewButtonsBlock=s.story.ButtonsBlock.extend({getHtmlTemplateId:function(e){return"perso-trivia"==e?"trivia-buttons":"buttons-new"},beforeRender:function(e,t){s.story.ButtonsBlock.prototype.beforeRender.call(this,e,t)},bindEvents:function(){s.story.ButtonsBlock.prototype.bindEvents.call(this)},keyUpEvent:function(e){var t,s,o=this.story.uxCtrl.getPersoneticsWrapper(),n=o.find(".pstory-block-frame .pstory-block-content"),r=o.find(".pstory-block-frame .pstory-block-content").index(i(this.frameEl.find(".pstory-block-content")));switch(e.which){case 39:(this.frameEl.find(".pstory-radio-button-wrapper").length?i(e.target).hasClass("pstory-block-content")?this.frameEl.find(".pstory-radio-button-wrapper .pstory-button").first():i(e.target).parent().next(".pstory-radio-button-wrapper").length?i(e.target).parent().next(".pstory-radio-button-wrapper").find(".pstory-button"):(t=r+1)>=n.length?o.find(".perso-ratings-wrapper .perso-ratings-text"):i(n[t]):(t=r+1)>=n.length?o.find(".perso-ratings-wrapper .perso-ratings-text"):i(n[t])).focus();break;case 37:(this.frameEl.find(".pstory-radio-button-wrapper").length?i(e.target).hasClass("pstory-block-content")?this.frameEl.find(".pstory-radio-button-wrapper .pstory-button").last():i(e.target).parent().prev(".pstory-radio-button-wrapper").length?i(e.target).parent().prev(".pstory-radio-button-wrapper").find(".pstory-button"):(s=r-1)<0?o.find(".pstory-title-wrapper  .pstory-title-text"):s=i(n[s]):(s=r-1)<0?o.find(".pstory-title-wrapper  .pstory-title-text"):s=i(n[s])).focus();break;case 32:case 13:i(e.target).find(".pstory-button").first().focus(),i(e.target).find(".pstory-button").first().click()}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,o){s.story=s.story||{},s.story.triviaButtons=s.story.ButtonsBlock.extend({getHtmlTemplateId:function(){return"trivia-buttons"},$selectors:function(){return{$persoTriviaFrameContainer:".pstory-container.perso-trivia-frame-container",$persoTriviaButton:".perso-trivia-button .pstory-button",$persoTriviaButtonContainer:".perso-trivia-button",$persoResultPageFrame:".perso-result-page-frame",$persoTriviaButtonTitle:".perso-trivia-button-title",$persoTriviaButtonDescription:".perso-trivia-button-description",$persoTriviaButtonDescriptionSpan:".perso-trivia-button-description span"}},beforeRender:function(e,t){s.story.ButtonsBlock.prototype.beforeRender.call(this,e,t),this.selectors=this.$selectors()},bindEvents:function(){s.story.ButtonsBlock.prototype.bindEvents.call(this),o(this.selectors.$persoTriviaButton).off("click").on("touchstart",function(){}),o(this.selectors.$persoTriviaFrameContainer).on("click",this.selectors.$persoTriviaButtonContainer,s.bind(this,this.triviaButtonClickHandler))},triviaButtonClickHandler:function(e){var e=o(e.target).parents(this.selectors.$persoTriviaButtonContainer).find(".pstory-link-navigateTo"),t=e.data("navigateToPayload");t&&((e=e.attr("action-id"))?this.doActionNavigation({actionId:e}):this.doNavigateToPage(t))},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTriviaButtonTitle),"perso-theme-brandColor-color"),personetics.config.theme.headerColor&&(s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTriviaButtonDescription),"perso-theme-headerColor-color"),s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTriviaButtonDescriptionSpan),"perso-theme-headerColor-color")),personetics.config.theme.greyLightColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTriviaButtonContainer),"perso-theme-greyLightColor-border-color"))}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,r){s.story=s.story||{},s.story.QuickReplyButtons=s.story.ButtonsBlock.extend({getHtmlTemplateId:function(){return"quick-reply-buttons"},$selectors:function(){return{$persoFeedbackContainer:".pstory-container.perso-feedback",$persoQuickReplyButtonsContainer:".perso-quick-reply-buttons-container",$persoQuickReplyButton:".perso-quick-reply-button",$persoQuickReplyAnswersSpacerLast:".perso-quick-reply-answers-spacer-last",$persoQuickReplyAnswersSpacerRubber:".perso-quick-reply-answers-spacer-rubber",$pstoryFrame:".pstory-frame",$pstoryDialogFrame:".pstory-dialog-frame",$persoRightScrollBtn:".perso-feedback-scroll-button.perso-right-btn",$persoleftScrollBtn:".perso-feedback-scroll-button.perso-left-btn",$persoStickToBottomClass:".perso-stick-to-bottom",$persoFirstIn:"perso-first-in",$persoIn:"perso-in",$persoOut:"perso-out",$persoHide:"perso-hide",$persoShow:"perso-show",$persoStickToBottom:"perso-stick-to-bottom",$persoClearSpace:"perso-clear-space"}},quickReplyConfig:function(){return{timeOuts:{showButtonsContainer:750,hideButtonsContainer:100,scrollToQuickReplay:500},replyButtonsSlide:{replyButtonsSlideAmount:100}}},getTexts:function(){return{accessibilityTexts:{of:s.dictionary.getText("accessibilityOfLbl"),selected:s.dictionary.getText("accessibilitySelected"),undo:s.dictionary.getText("accessibilityUndo")}}},beforeRender:function(e,t){s.story.ButtonsBlock.prototype.beforeRender.call(this,e,t),this.selectors=this.$selectors(),this.options=t.options,this.texts=this.getTexts(),this.quickReplyConfig=this.quickReplyConfig()},render:function(e,t){s.story.Block.prototype.render.call(this,e,t)},afterRender:function(e){var s=this,t=r(e);this.initUiSelectors(t),this.setStickToBottomOnContainer(e),this.showHideSpacers(),setTimeout(function(){s.$uiSelectors.$persoQuickReplyButtonsContainer.addClass(s.selectors.$persoFirstIn);var e=s.$uiSelectors.$feedbackBubblesContainer.find(s.selectors.$persoQuickReplyButtonsContainer).last(),t=s.$uiSelectors.$feedbackBubblesContainer;s.scrollToEl(t,e)},this.quickReplyConfig.timeOuts.showButtonsContainer),this.setAriaLabelOnAnswers(e)},initUiSelectors:function(e){var t={},e=e.parents(this.selectors.$persoFeedbackContainer);t.$feedbackBubblesContainer=e,t.$persoQuickReplyButton=e.find(this.selectors.$persoQuickReplyButton),t.$persoQuickReplyButtonsContainer=e.find(this.selectors.$persoQuickReplyButtonsContainer),t.$persoQuickReplyAnswersSpacerLast=e.find(this.selectors.$persoQuickReplyAnswersSpacerLast),t.$persoQuickReplyAnswersSpacerRubber=e.find(this.selectors.$persoQuickReplyAnswersSpacerRubber),t.$rightScrollBtn=e.find(this.selectors.$persoRightScrollBtn),t.$leftScrollBtn=e.find(this.selectors.$persoleftScrollBtn),this.$uiSelectors=t},bindEvents:function(){var o=this,n=o.$uiSelectors.$feedbackBubblesContainer.find(o.selectors.$persoQuickReplyButtonsContainer).last();o.$uiSelectors.$persoQuickReplyButton.on("click",function(e){var t=r(e.target).parents(o.selectors.$pstoryDialogFrame),t=(o.hideQuickReplyAnimation(e.target),t.siblings().addClass(o.selectors.$persoClearSpace),r(e.target).index()),e=r(e.target).data("action-id")||null;o.sendActionEvent(e,t)}),o.$uiSelectors.$feedbackBubblesContainer.scroll(function(){var e,t,s;n.is(":visible")&&(t=(e=r(this).find(o.selectors.$persoQuickReplyButtonsContainer).last()).parents(o.selectors.$persoStickToBottomClass),s=e.get(0).getBoundingClientRect().top,100<(s=(1-(r(this).get(0).getBoundingClientRect().bottom-s)/e.outerHeight(!0))/2*100)?s=100:s<0&&(s=0),t.css("transform","translateY("+s+"%)"))}),o.$uiSelectors.$rightScrollBtn.on("click",function(e){r(e.target).siblings(o.selectors.$persoQuickReplyButtonsContainer).get(0).scrollLeft+=o.quickReplyConfig.replyButtonsSlide.replyButtonsSlideAmount}),o.$uiSelectors.$leftScrollBtn.on("click",function(e){r(e.target).siblings(o.selectors.$persoQuickReplyButtonsContainer).get(0).scrollLeft-=o.quickReplyConfig.replyButtonsSlide.replyButtonsSlideAmount})},sendActionEvent:function(e,t){e&&(t=void 0!==t?this.options[t]:{},this.parent.notifyEvent(this,"actionEvent",{actionId:e,context:t}))},setStickToBottomOnContainer:function(e){e=r(e);e&&e.length&&e.parents(this.selectors.$pstoryDialogFrame).addClass(this.selectors.$persoStickToBottom)},showHideSpacers:function(){this.$uiSelectors.$persoQuickReplyButtonsContainer.last().get(0).scrollWidth>this.$uiSelectors.$persoQuickReplyButtonsContainer.last().get(0).offsetWidth&&(this.$uiSelectors.$persoQuickReplyAnswersSpacerLast.addClass(this.selectors.$persoShow),this.$uiSelectors.$persoQuickReplyAnswersSpacerRubber.addClass(this.selectors.$persoShow))},hideQuickReplyAnimation:function(e){e=r(e).parents(this.selectors.$persoQuickReplyButtonsContainer);e.removeClass(this.selectors.$persoFirstIn),e.removeClass(this.selectors.$persoIn),e.addClass(this.selectors.$persoOut),e.hide()},setAriaLabelOnAnswers:function(e){var s=this,e=r(e).find(s.selectors.$persoQuickReplyButton);e&&e.length&&e.toArray().forEach(function(e,t){r(e).attr("aria-label",s.options[t].text+", "+(t+1)+" "+s.texts.accessibilityTexts.of+" "+s.options.length)})}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s){s.story=s.story||{},s.story.RadioButton=s.story.ButtonsBlock.extend({getHtmlTemplateId:function(){return"radio-button"},beforeRender:function(e,t){s.story.ButtonsBlock.prototype.beforeRender.call(this,e,t)},render:function(e,t){s.story.ButtonsBlock.prototype.render.call(this,e,t)},afterRender:function(e,t){s.story.ButtonsBlock.prototype.afterRender.call(this,e,t)},bindEvents:function(){s.story.ButtonsBlock.prototype.bindEvents.call(this)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,o){s.story=s.story||{},s.story.FeedbackUndoButton=s.story.ButtonsBlock.extend({getHtmlTemplateId:function(){return"feedback-undo-button"},$selectors:function(){return{$persoFeedbackContainer:".pstory-container.perso-feedback",$persoFeedbackUndoBubble:".perso-feedback-undo-bubble",$persoFeedbackUndoBubbleDisabled:"perso-feedback-undo-disabled",$persoFeedbackUndoBubbleIn:"perso-feedback-undo-bubble-in",$persoIn:"perso-in"}},blockConfig:function(){return{timeOuts:{showUndoBubbleTimeout:1e3,undoBubbleOpacityTimeOut:200}}},beforeRender:function(e,t){s.story.ButtonsBlock.prototype.beforeRender.call(this,e,t),this.selectors=this.$selectors(),this.options=t.options,this.blockConfig=this.blockConfig()},render:function(e,t){s.story.Block.prototype.render.call(this,e,t)},afterRender:function(e){var e=o(e),t=this;this.initUiSelectors(e),setTimeout(function(){t.scrollToEl(t.selectors.$persoFeedbackContainer,t.selectors.$persoFeedbackUndoBubble)},100),this.animateUndoBubbleEntrance(this.$uiSelectors.$persoUndoBubble)},initUiSelectors:function(e){var t={},e=o(e);t.$persoUndoBubble=e.find(this.selectors.$persoFeedbackUndoBubble),this.$uiSelectors=t},bindEvents:function(){var s=this;s.$uiSelectors.$persoUndoBubble.on("click","div",function(e){var e=o(e.target),t=e.data("action-id")||e.parent().data("action-id")||null;s.sendActionEvent(t,s.options[0]),e.parent().removeClass(s.selectors.$persoFeedbackUndoBubbleIn),e.parent().addClass(s.selectors.$persoFeedbackUndoBubbleDisabled)})},sendActionEvent:function(e,t){e&&this.parent.notifyEvent(this,"actionEvent",{actionId:e,context:t})},animateUndoBubbleEntrance:function(e){var t=this,s=o(e);setTimeout(function(){s.addClass(t.selectors.$persoFeedbackUndoBubbleIn)},t.blockConfig.timeOuts.showUndoBubbleTimeout)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(i,a){i.story=i.story||{},i.story.AccountSelectorBlockV2=i.story.OptionsBlock.extend({getHtmlTemplateId:function(){return"account-selector-v2"},$selectors:function(){return{$persoBtn:".perso-btn",$persoDotItem:".perso-dot-item",$pstoryDialogFrame:".pstory-dialog-frame",$ASCarouselWrapper:"#perso-account-selector-carousel-wrapper",$carouselContainer:"#carouselContainer",$carouselLeftButton:".perso-carousel-button-wrapper #left",$carouselRightButton:".perso-carousel-button-wrapper #right",$persoDotWrapper:".perso-dot-wrapper",$persoAllCardContainer:"#perso-all-cards-info-container",$persoCardInfoConttainer:".perso-card-info-container",$persoItem:".perso-item",$persoAccessibilityItem:".perso-accessibility-item",$persoDotsList:".perso-dots-list",$persoAccountIcon:".perso-image-all, .perso-image-single",$persoAccessibilityWrapper:".perso-accessibility-wrapper.perso-accessibility-account-selector .perso-accessibility-read",$persoCardsNumberText:".perso-cards-number-text",$persoCardTotalText:".perso-card-total-txt",$persoCardAmountText:".perso-card-amount-txt",$persoAccountNumber:".perso-account-number",$persoAccountName:".perso-account-name",$persoNewCarouselWrapper:".perso-new-carousel-wrapper",$persoTabsContainer:".perso-as-tabs-container",$selectedTab:".perso-as-tab[aria-selected='true']"}},getAccountSelectorConfigs:function(){return{blockHeight:96,showBrackets:i.utils.projectConf.verifyConfig("showBrackets",!1),showASIcon:i.utils.projectConf.verifyConfig("showASIcon",!0),showASTabs:i.utils.projectConf.verifyConfig("showASTabs",!1),multiCardOnView:i.utils.projectConf.verifyConfig("multiCardOnView",!1),defaultAllIconAssetName:"all_accounts",defaultAssetName:i.utils.projectConf.verifyConfig("storyBlocksConfigurations/account-selector/defaultAssetName","account-default"),defaultAssetDirectory:i.utils.projectConf.verifyConfig("storyBlocksConfigurations/account-selector/defaultAssetDirectory","account_types"),defaultAssetExtension:i.utils.projectConf.verifyConfig("storyBlocksConfigurations/account-selector/defaultIconExtension","svg"),allAccount:"All",showAllAccountCountText:i.utils.projectConf.verifyConfig("showAllAccountCountText",!0),specificAccount:"Specific",accountSelectorSendEvents:"AccountSelector",enableAccountSelectorRTL:i.utils.projectConf.verifyConfig("enableAccountSelectorRTL",!0)}},getCollapseParams:function(){return{el:this.frameEl,type:this.layoutInstructions.type,uxCtrl:this.story.uxCtrl,height:this.accountSelectorConfig.blockHeight}},beforeRender:function(e,t){i.story.OptionsBlock.prototype.beforeRender.call(this,e,t),this.accountSelectorConfig=this.getAccountSelectorConfigs(),this.options=this.sortOptions(t.options,"id","all"),this.showAllCard=this.isItemInArray(this.options,"id","all"),this.setImageValueForOptions(),this.showASTabs=Object.prototype.hasOwnProperty.call(this.accountSelectorConfig,"showASTabs")&&this.accountSelectorConfig.showASTabs,this.multiCardOnView=Object.prototype.hasOwnProperty.call(this.accountSelectorConfig,"multiCardOnView")&&this.accountSelectorConfig.multiCardOnView,this.showAllCard&&(this.options[0].isAllCard=this.showAllCard,this.options[0].numberOfAccounts=this.options.length-1,this.options[0]=a.extend(this.options[0],this.getTexts().allCardTexts),this.showASTabs&&(this.cards=this.options.splice(1),this.allCardObj=this.options[0])),this.browserData=i.utils.persoBrowserDetector.getBrowserData(),this.selectors=this.$selectors(),this.extendOptionsWithParams(this.options,this.getTexts().singleCardTexts,"id","all"),this.layoutInstructions.assetExtension=this.layoutInstructions.fileType||this.accountSelectorConfig.defaultAssetExtension,this.layoutInstructions.assetDirectory=this.layoutInstructions.directory||this.accountSelectorConfig.defaultAssetDirectory,this.layoutInstructions.showIcon=!(Object.prototype.hasOwnProperty.call(this.accountSelectorConfig,"showASIcon")&&0==this.accountSelectorConfig.showASIcon),this.layoutInstructions.isSingleCard=1===this.options.length&&!this.showAllCard,this.layoutInstructions.showBrackets=this.accountSelectorConfig.showBrackets,this.layoutInstructions.showAllAccountCountText=this.accountSelectorConfig.showAllAccountCountText,this.texts=this.getTexts(),this.isRTLMode=i.processor.PStoryConfig.isRtl()&&this.accountSelectorConfig.enableAccountSelectorRTL,this.isRTLMode&&this.options.length&&this.options.reverse(),this.lastItemInView=this.setSelectedItem()},setSelectedItem:function(){var s=-1;return this.layoutInstructions.options.forEach(function(e,t){e.selected&&(s=t)}),-1<s?s:0},render:function(e){this.frameEl=e;var t={isAllCard:this.showAllCard&&this.showASTabs,allAccountsHeaderLabel:i.dictionary.getText("lblaccSelectAll"),chooseAccountHeaderLabel:i.dictionary.getText("lblaccSelectChoose")},t=this.template(t),t=(e.append(t),this.getCarouselConfigs()),e=a(e).find(this.selectors.$ASCarouselWrapper),s=this.getTemplate(this.layoutInstructions),e={el:e,numberOfItems:this.options.length,config:t,template:s,isAllCard:this.showAllCard,firstCreateCarousel:!0};this.callPersoCarousel(e)},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&(i.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCardTotalText),"perso-theme-brandColor-color"),i.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCardAmountText),"perso-theme-brandColor-color"),i.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCardsNumberText),"perso-theme-brandColor-color-forty-opacity"),i.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoAccountName),"perso-theme-brandColor-color-sixty-opacity"),i.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoAccountNumber),"perso-theme-brandColor-color-eighty-opacity"),i.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoDotsList),"perso-theme-brandColor-selected-dot-background")),personetics.config.theme.backgroundColor&&(i.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoItem+", "+this.selectors.$persoNewCarouselWrapper+", "+this.selectors.$persoCardInfoConttainer+", "+this.selectors.$persoAllCardContainer+", "+this.selectors.$persoTabsContainer),"perso-theme-backgroundColor-background"),i.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$selectedTab),"perso-theme-backgroundColor-color")),personetics.config.theme.greyLightColor&&(i.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoDotsList),"perso-theme-greyLightColor-dot-background"),i.utils.persoTheming.addClassToElement(this.frameEl,"perso-theme-greyLightColor-bottom-line-border")))},setTabsThemeClasses:function(){var e;personetics.config.theme&&(personetics.config.theme.brandColor&&(i.utils.persoTheming.addClassToElement(this.frameEl.find(".perso-as-selected-tab"),"perso-theme-brandColor-background"),i.utils.persoTheming.addClassToElement(this.frameEl.find(".perso-as-tab[aria-selected='false']"),"perso-theme-brandColor-color"),(e=this.frameEl.find(".perso-as-tab[aria-selected='true']")).length&&e.removeClass("perso-theme-brandColor-color")),personetics.config.theme.backgroundColor&&(i.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$selectedTab),"perso-theme-backgroundColor-color"),(e=this.frameEl.find(".perso-as-tab[aria-selected='false']")).length&&e.removeClass("perso-theme-backgroundColor-color")))},afterRender:function(e){this.removePaddingFromDialog(e),this.renderAccessibility(),this.showASTabs&&(this.renderTabsAccessibility(),this.setTabsThemeClasses()),this.setThemeClasses(),i.story.OptionsBlock.prototype.afterRender.call(this,e)},bindEvents:function(){a(this.frameEl).on("click",this.selectors.$persoBtn,i.bind(this,this.onCardMovement)),"perso-desktop"===this.browserData.deviceType&&this.getCarouselConfigs().isDotsClickAble&&a(this.frameEl).on("click",this.selectors.$persoDotItem,i.bind(this,this.onCardMovement)),this.getCarouselConfigs().isSwipeable&&(!this.showASTabs||this.showASTabs&&!this.showAllCard)&&a(this.frameEl).find(this.selectors.$ASCarouselWrapper).swipe(i.bind(this,this.onCardMovement)),this.showASTabs&&a(this.frameEl).find(".perso-as-tab").on("click",i.bind(this,this.onTabClick)),this.handleAccountAssets()},onTabClick:function(e){var t=this;this.clickedTab=a(e.currentTarget),"true"!==this.clickedTab.attr("aria-selected")&&(this.setSelectedTab(),e={value:this.clickedTab.data("value"),type:this.layoutInstructions.type},this.notifyReportEvent(e),this.updateCarouselOptions(),this.parent.notifyEvent(this,"setSelectedValue",this.options[0]),a(this.selectors.$ASCarouselWrapper).fadeTo(200,0,function(){a(t.selectors.$ASCarouselWrapper).empty(),t.renderCards(),t.setThemeClasses()}),a(this.selectors.$ASCarouselWrapper).fadeTo(200,1))},renderCards:function(){var e={el:a(this.selectors.$ASCarouselWrapper),numberOfItems:this.options.length,config:this.getCarouselConfigs(),template:this.getTemplate(this.layoutInstructions)};e.config.defaultItem=0,this.isRTLMode&&(e.config.isRTLCarousel=!0,e.config.isStackedCardsCarousel||(e.config.defaultItem=this.options.length)),this.callPersoCarousel(e),this.bindCardMovement(),this.renderAccessibility()},bindCardMovement:function(){a(this.selectors.$ASCarouselWrapper).swipe(i.bind(this,this.onCardMovement)),this.bindCardClick()},updateCarouselOptions:function(){this.layoutInstructions.options=[],this.options=[],"all"===this.clickedTab.data("value")?(this.layoutInstructions.options.push(this.allCardObj),this.options.push(this.allCardObj)):(this.layoutInstructions.options=this.cards,this.options=this.cards)},setSelectedTab:function(){var e=a(".perso-as-tab[data-value='all']"),t=a(".perso-as-tab[data-value='choose']");"all"===this.clickedTab.data("value")?(e.attr("aria-selected",!0),t.attr("aria-selected",!1)):(e.attr("aria-selected",!1),t.attr("aria-selected",!0)),this.animateSelectedTab(),this.setTabsThemeClasses(),this.renderTabsAccessibility()},animateSelectedTab:function(){var e=this.clickedTab.width(),e=(this.clickedTab.index()-1)*e;this.isRTLMode?a(".perso-as-selected-tab").css({right:e}):a(".perso-as-selected-tab").css({left:e})},renderTabsAccessibility:function(){var s=this,o=a(".perso-as-tab");o.each(function(e,t){t=a(t),e=("all"===t.data("value")?s.getTexts().commonTexts.accessibilityTabAllAccounts:s.getTexts().commonTexts.accessibilityTabChooseAccount)+", "+(e+1)+" "+s.getTexts().commonTexts.accessibilityTabOf+" "+o.length;t.attr("aria-label",e)})},callPersoCarousel:function(e){var t=i.utils.PersoCarousel;t&&t.createCarousel(e)},getCarouselConfigs:function(){return{showItemsEdges:this.accountSelectorConfig.showASCardsEdges||!1,endlessCarousel:!1,showIndicator:!0,isSwipeable:!0,isDotsClickAble:!0,defaultItem:this.lastItemInView+1,isStackedCardsCarousel:this.accountSelectorConfig.isStackedCardsCarousel||!1}},onCardMovement:function(){var e=this,t={},s=e.getViewedElIndex(),o=e.options[s],n=("click"===event.type?t.type="accountSelectorChevron":t.type="accountSelectorSwipe",o&&s!==this.lastItemInView&&(void 0!==o.isAllCard&&null!==o.isAllCard&&!0===o.isAllCard?t.value=e.accountSelectorConfig.allAccount:t.value=e.accountSelectorConfig.specificAccount,e.parent.notifyEvent(this,"setSelectedValue",o),e.notifyReportEvent(t),this.lastItemInView=s),s=this.getViewedElIndex(),i.utils.accessibility.removeFocusAttr(this.frameEl.find(this.selectors.$persoAccessibilityItem)),a(this.frameEl.find(this.selectors.$persoAccessibilityItem)[s])),o=(n.attr("role","text"),a(this.frameEl.find(this.selectors.$persoAccessibilityWrapper)));0!==s?o.attr("aria-hidden","true"):o.attr("aria-hidden","false"),setTimeout(function(){i.utils.accessibility.putFocus(n)},500),this.bindCardClick()},bindCardClick:function(){this.accountSelectorConfig.showASCardsEdges&&a(".perso-animate-prev").add(".perso-animate-next").click(i.bind(this,this.onCardMovement))},removePaddingFromDialog:function(e){e&&e.parents(this.selectors.$pstoryDialogFrame).length&&e.parents(this.selectors.$pstoryDialogFrame).css("padding","0")},getTemplate:function(e){return(new i.story.PCtrlBase).getTemplateHtml("pstory-block-account-selector-card-v2",e)},sortOptions:function(e,s,o){return e.length&&e.sort(function(e,t){return e[s]===o?-1:t[s]===o?1:0}),e},isItemInArray:function(e,t,s){var o=!1;return o=e.length&&s?e.some(function(e){return e[t]===s}):o},getTexts:function(){return{allCardTexts:{lblTotal:this.options[0]&&this.options[0].text2?this.options[0].text2:"",lblAmount:this.options[0]&&this.options[0].text?this.options[0].text:"",lblAccounts:i.dictionary.getText("lblaccSelectAccounts")},singleCardTexts:{lblCashflow:i.dictionary.getText("lblCashflow")},commonTexts:{lblAccessibiliotyAccountSelectorText:i.dictionary.getText("lblAccessibiliotyAccountSelectorText"),accessibilityOutOfTxt:i.dictionary.getText("accessibilityOutOfTxt"),accessibilitySelected:i.dictionary.getText("accessibilitySelected"),accessibilityAccountSelectorLeftButton:i.dictionary.getText("accessibilityAccountSelectorLeftButton"),accessibilityAccountSelectorRightButton:i.dictionary.getText("accessibilityAccountSelectorRightButton"),accessibilityAccountNumber:i.dictionary.getText("accessibilityAccountNumber"),accessibilityAccountName:i.dictionary.getText("accessibilityAccountName"),accessibilityTabAllAccounts:i.dictionary.getText("lblaccSelectAll"),accessibilityTabChooseAccount:i.dictionary.getText("lblaccSelectChoose"),accessibilityTabOf:i.dictionary.getText("lblOf")}}},setImageValueForOptions:function(){var s=this;a.each(this.options,function(e,t){t.image="all"===t.id?s.accountSelectorConfig.defaultAllIconAssetName:t.accountType})},extendOptionsWithParams:function(e,s,o,n){var r=this;e.length&&e.filter(function(e,t){e[o]!==n&&(r.options[t]=a.extend(e,s))})},getViewedElIndex:function(){var e,t=this.frameEl.find(this.selectors.$carouselContainer);return e=t&&t.length?parseInt(a(t).attr("data-perso-item-viewed"))||0:e},doScrollEvent:function(e){var t;this.supportBlockCollapse&&(t=this.frameEl.find(this.selectors.$ASCarouselWrapper),this.collapseHelper.scrollEvent(this,t,e))},getSupportBlockCollapse:function(){return 1==i.projectConfiguration.getConfig("supportCollapse")&&1==i.projectConfiguration.getConfig("accountSelectorCollapse")},onUnCollapsed:function(e){e.get(0).style.removeProperty("top"),e.get(0).style.top=0},renderAccessibility:function(){this.setAccountSelectorAltText(),this.setAccountSelectorNumeration(),this.setAccountSelectorArrowButtonsLabel()},setAccountSelectorAltText:function(){i.utils.accessibility.addAltTextToElement(this.frameEl.find(this.selectors.$ASCarouselWrapper),this.getTexts().commonTexts.lblAccessibiliotyAccountSelectorText)},setAccountSelectorArrowButtonsLabel:function(){this.frameEl.find(this.selectors.$carouselContainer).attr("role","none"),this.frameEl.find(this.selectors.$persoDotsList).attr("role","none");var e=this.frameEl.find(this.selectors.$carouselLeftButton),t=this.frameEl.find(this.selectors.$carouselRightButton);e.length&&(e=a(e[0]),this.isRTLMode?e.attr("aria-label",this.getTexts().commonTexts.accessibilityAccountSelectorRightButton):e.attr("aria-label",this.getTexts().commonTexts.accessibilityAccountSelectorLeftButton)),t.length&&(e=a(t[0]),this.isRTLMode?e.attr("aria-label",this.getTexts().commonTexts.accessibilityAccountSelectorLeftButton):e.attr("aria-label",this.getTexts().commonTexts.accessibilityAccountSelectorRightButton))},setAccountSelectorNumeration:function(){var n=this,r=this.getViewedElIndex(),e=this.frameEl.find(this.selectors.$persoAccessibilityItem);i.utils.accessibility.removeFocusAttr(e),e.toArray().forEach(function(e,t){var s,o,e=a(e);e.length&&(s=i.utils.accessibility.getElementChildNodesText(e),s=n.processingAccessibilityText(s,t),o=n.getTexts().commonTexts.accessibilitySelected,n.multiCardOnView&&!e.hasClass("perso-selected")&&(o=""),o=", "+(t+1)+" "+n.getTexts().commonTexts.accessibilityOutOfTxt+" "+n.options.length+" "+o,e.attr("aria-label",s+o),t==r&&(i.utils.accessibility.putFocusAttr(e),e.attr("role","text")))})},processingAccessibilityText:function(e,t){if(e)return e=e.split(","),this.options[t].isAllCard?e.join(","):this.texts.commonTexts.accessibilityAccountNumber+": "+e.splice(1,1)+", "+this.texts.commonTexts.accessibilityAccountName+": "+e.splice(0,1)+", "+e.join(",")},handleAccountAssets:function(){var t=this,e=t.frameEl.find(t.selectors.$persoAccountIcon);e.on("load",function(){t.remoteAssetsMgr.finishedLoading(this)}),e.on("error",function(){var e=a(this).data(t.defaultAssetConfig.loadingAssetTriesAttrName);e&&e>t.defaultAssetConfig.loadingAssetMaxTries?t.fallbackAsset(this):(e=(e=a(this).data("perso-card-type"))&&"all"===e?t.accountSelectorConfig.defaultAllIconAssetName:t.accountSelectorConfig.defaultAssetName,e=t.localBaseUrl+"/"+t.accountSelectorConfig.defaultAssetDirectory+"/"+e+"."+t.accountSelectorConfig.defaultAssetExtension,t.remoteAssetsMgr.setDefaultAsset(this,e),t.remoteAssetsMgr.setAssetLoadingTriesAttr(this))})}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(a,u){a.story=a.story||{},a.story.BarChartBlock=a.story.Block.extend({getHtmlTemplateId:function(){return"pure-bar-chart"},$selectors:function(){return{$persoBarChartContainer:".pstory-bar-chart .perso-bar-chart-container",$persoBarChartWrapper:".pstory-bar-chart .perso-bar-chart-wrapper",$persoBarsWrapper:".pstory-bar-chart .perso-bars-wrapper",$persoComparableChart:".pstory-block-container .pstory-block-content .pstory-bar-chart .perso-comparable-chart",$persoLegentIndicatorHeight:".perso-legend-wrapper .perso-bar-chart-legend",$persoLegendText:".perso-bar-chart-legend-txt",$pstoryBarChart:".pstory-bar-chart",$persoSelectedMonthPickerTab:".pstory-month-picker-selected-tab",$persoMonthPickerContainer:".perso-month-picker-container",$persoMonthPickerWrapper:".perso-month-picker-wrapper",$persoMonthAmount:".perso-month-amount",$persoMonthAmountNotSeries:".perso-month-amount:not(.is-series)"}},getBarChartConfigs:function(){return{monthPickerHeight:50,addBarsWrapperHeightForNegative:!1,addMonthAmountMarginsCalc:!0,addIndicatorTopPosition:!0,isBarClickable:a.utils.projectConf.verifyConfig("isBarClickable",!1),indicatorType:a.utils.projectConf.verifyConfig("indicatorType","mtd-5")}},initialize:function(e,t,s){this.selectors=this.$selectors(),this.barChartConfig=this.getBarChartConfigs(),a.story.Block.prototype.initialize.call(this,e,t,s)},getBarChartOptions:function(e){return this.barChartConfig.options||this.story.uxCtrl.getBarChartNewOptions(e)},chartHasOwnIndicators:function(e){if(e)for(var t=0;t<e.length;t++)if(e[t].indicator)return!0;return!1},beforeRender:function(e,t){a.story.Block.prototype.beforeRender.call(this,e,t),this.isDesktopMode="desktop"===this.story.cfg.widthMode,this.series=t.series,t.isSeries=this.isSeries=Object.prototype.hasOwnProperty.call(this.layoutInstructions,"seriesLabels")&&0<this.layoutInstructions.seriesLabels.length&&0<this.layoutInstructions.seriesLabels[0].length,this.chartType=this.isSeries?"multiVertical":"vertical",this.setSelected(),this.texts=this.getTexts(),this.browserData=a.utils.persoBrowserDetector.getBrowserData(),this.prepereData(),this.options=this.getBarChartOptions(this.chartType),this.benchmarkConfig=this.story.uxCtrl.getBarBenchmarkConfig(),this.mode=Object.prototype.hasOwnProperty.call(t,"mode")&&0<t.mode.length?t.mode.toLowerCase():"out",this.layoutInstructions.isNegativeChart="out"===this.mode,this.layoutInstructions.texts=this.texts,this.layoutInstructions.config=this.barChartConfig,a.processor.PStoryConfig.isRtl()&&this.enableChartsRTL&&this.layoutInstructions.series.reverse()},prepereData:function(){var s=this;this.prepereAccessibilityCategories(),this.setSeriesNamesForDisplay(),this.isSeries&&u.each(this.layoutInstructions.series,function(e,t){s.layoutInstructions.series[e].category=t[0].category}),this.prepereBenchmarkData()},prepereBenchmarkData:function(){var t=this;this.benchmarkLines=this.layoutInstructions.benchmarkLines||[],this.benchmarkLinesData=this.benchmarkLines,this.seriesDataAndBenchmarkData=this.series,this.benchmarkLinesData.forEach(function(e){t.seriesDataAndBenchmarkData=t.seriesDataAndBenchmarkData.concat(e.benchmarks)})},getTexts:function(){return{accessibilityBarChartTitle:a.dictionary.getText("accessibilityBarChartPureTitle"),series:a.dictionary.getText("accessibilitySeries"),selected:a.dictionary.getText("accessibilitySelected"),notSelected:a.dictionary.getText("accessibilityNotSelected"),in:a.dictionary.getText("lblIn"),out:a.dictionary.getText("lblOut"),tab:a.dictionary.getText("lblTab"),of:a.dictionary.getText("lblOf"),doubleTap:a.dictionary.getText("accessibilityNextMonthDoubleClick")}},prepereAccessibilityCategories:function(){var n=this,r=a.processor.PUtils.getUtilsInstance("dateUtils"),i=a.processor.PStoryConfig.getConfig("lang");u.each(this.layoutInstructions.categories,function(e,t){var s=r.getMonthNumber(i+"-short",t),s=r.getMonthName(i)[s],o=n.getSeriesLabel(n.layoutInstructions.series[e],n.layoutInstructions.isSeries),o=n.getAmountAsLabel(n.layoutInstructions.series[e],o),s=s||t;n.layoutInstructions.series[e].displayLabel=t,n.layoutInstructions.series[e].fullMonthName=s,n.layoutInstructions.series[e].accLabel=s+", "+n.texts.tab+", "+(e+1)+" "+n.texts.of+" "+n.layoutInstructions.categories.length+", "+o,!n.browserData||"perso-mobile"==n.browserData.deviceType&&"Chrome"==n.browserData.browser||(n.layoutInstructions.series[e].accLabel=n.layoutInstructions.series[e].accLabel+", "+n.texts.doubleTap)})},setSeriesNamesForDisplay:function(){var e,t;this.isSeries&&(e=this.layoutInstructions.seriesNamesForDisplay,t=this.texts,null==e&&(e=this.layoutInstructions.seriesLabels.map(function(e){return t[e.toLowerCase()]})),this.seriesNamesForDisplay=e)},setSelected:function(){var t=this,o=!1,e=t.layoutInstructions.series;u.each(e,function(e,s){if(t.isSeries)u.each(s,function(e,t){if(1==t.selected)return s.selected||(s.selected=!0),!(o=!0)});else if(1==s.selected)return!(o=!0)}),0==o&&(e.length&&t.isSeries?u.each(e[e.length-1],function(e,t){null!=t&&(t.selected=!0)}):e[e.length-1].selected=!0)},getSeriesLabel:function(e,t){return t?e.map(function(e){return e.label}):e.label},getAmountAsLabel:function(s,e){var o=a.utils.persoValidator.isValidSelector;return Array.isArray(e)?e.map(function(e,t){if(o(e)&&u(e).get(0).getAttribute("aria-label").length)return s[t].mode+": "+u(e).get(0).getAttribute("aria-label")}).join(", "):o(e)&&u(e).get(0).getAttribute("aria-label").length?", "+u(e).get(0).getAttribute("aria-label"):""},render:function(e,t){a.story.Block.prototype.render.call(this,e,t);e=this.frameEl.find(this.selectors.$persoBarChartContainer);this.mode.length&&"out"==this.mode&&e.addClass("perso-negative"),0<e.length&&this.renderBars(e)},renderBars:function(e){var t,s=this;this.isSeries?(t=u(e).find(".perso-series-wrapper"),s.setBarsWidth(t),s.setBarsSeriesHeight(t),s.renderTooltips()):(t=u(e).find(".perso-bar-wrapper"),s.setBarsWidth(t),s.setBarHeight(t))},setBarsWidth:function(e){parseFloat(u(e).css("width"))||u(e).css("width",100/this.layoutInstructions.categories.length+"%")},addHeightToBarsWrapper:function(){for(var e=Array.prototype.slice.call(document.getElementsByClassName("perso-bar-wrapper")),t=e.filter(function(e){return!0===e.classList.contains("perso-negative-bar")}),s=e.filter(function(e){return!1===e.classList.contains("perso-negative-bar")}),o=0,n=0,r=0;r<t.length;r++)t[r].offsetHeight>o&&(o=t[r].offsetHeight);for(var i=0;i<s.length;i++)s[i].offsetHeight>n&&(n=s[i].offsetHeight);this.frameEl.find(this.selectors.$persoBarsWrapper).css("height",n+o+"px")},setBarHeight:function(e){var t=this.getMaxValue(),s=this.getMinValue();this.calculateBarsHeight(e,s,t),this.barChartConfig.addBarsWrapperHeightForNegative&&s<0&&this.addHeightToBarsWrapper()},setBarsSeriesHeight:function(e){var t=this.getSeiresMaxValue();this.calculateSeriesBarsHeight(e,t)},calculateBarsHeight:function(e,t,s){var a=this,l=!1,o=s,c=(a.maxBarValue=Math.max.apply(Math,this.series.map(function(e){return e.value})),t<0&&(0<=s?s+=Math.abs(t):l=!0),this.prepareCalculateBarHeightOptions(s)),p=a.calculateBarHeightByValue(o,c),d=[];u.each(e,function(e,t){var s=a.series[e].value,e=a.series[e].indicator,o=!1,n=(s<=e&&(e=s,o=!0),a.calculateBarHeightByValue(s,c)),r=a.calculateBarHeightByValue(e,c),i=n.normalValue,r=r.normalValue,o=(u(t).css("height",i+"px"),u(t).find(".perso-indicator").css("height",r+"px"),o&&u(t).find(".perso-indicator").addClass("perso-indicator-full"),0);s<0?e===s||0===e?u(t).find(".perso-indicator").addClass("negative-top-bar"):u(t).find(".perso-indicator").addClass("negative-bottom-bar"):e===s||0===e?u(t).find(".perso-indicator").addClass("top-bar"):u(t).find(".perso-indicator").addClass("bottom-bar"),n.y<0?(u(t).addClass("perso-negative-bar"),0==l&&(o=p.normalValue,d.push(i))):o=a.calculateBarHeightByValue(a.maxBarValue,c).normalValue-i,u(t).css("top",o+"px"),a.barChartConfig.addIndicatorTopPosition&&u(t).find(".perso-indicator").css("top",-1*r+"px")}),a.barChartConfig.addMonthAmountMarginsCalc&&(d=d.length?Math.max.apply(null,d):0,u(".perso-month-amount").css("margin-top","calc(0.44em + "+d+"px)"))},calculateSeriesBarsHeight:function(e,r){var i=this,a=this.prepareCalculateBarHeightOptions(r);e.length&&u.each(e,function(n,e){e=u(e).find(".perso-bar-wrapper");e.length&&u.each(e,function(e,t){var s=Math.abs(i.series[n][e].value),o=Math.abs(i.series[n][e].indicator),e=i.series[n][e].mode||"",e=(u(t).addClass("perso-"+e.toLowerCase()),i.calculateBarHeightByValue(s,a).normalValue),o=i.calculateBarHeightByValue(o,a).normalValue;e<o&&(o=e),u(t).css("height",e+"px"),u(t).find(".perso-indicator").css("height",o+"px"),u(t).css("top","calc(100% - "+e+"px)"),u(t).find(".perso-indicator").css("top",-1*o+"px"),s==r&&u(t).parents(".perso-bars-wrapper").css("height",e+"px")})})},prepareCalculateBarHeightOptions:function(e){var t=this.story.uxCtrl.getPersoneticsWrapper(),t=this.options.minBarHeight*t.width(),s=this.options.height*this.options.defaultBarHeight;return{m:s/(Math.abs(e)||1),minHeight:t,containerHeight:s}},calculateBarHeightByValue:function(e,t){var e=t.m*e,s=Math.abs(e);return{normalValue:Math.abs(s+t.minHeight),y:e,avgValue:(Math.abs(s+t.minHeight)+e)/2}},getMaxValue:function(){return Math.max.apply(Math,this.seriesDataAndBenchmarkData.map(function(e){return e.value}))},getMinValue:function(){return Math.min.apply(Math,this.seriesDataAndBenchmarkData.map(function(e){return e.value}))},getSeiresMaxValue:function(){var s=0;return this.isSeries&&u.each(this.series,function(e,t){t=Math.max.apply(Math,t.map(function(e){return e.value}));s<t&&(s=t)}),s},drawBenchmark:function(){var e=this.benchmarkLinesData[0].benchmarks;if(this.benchmarkValue=e[0].value,"undefined"!=e&&0<e.length){for(var t=1;t<e.length;t++)if(e[t].value!=this.benchmarkValue)return;this.renderBenchmark(),this.setBenchmarkHeight()}},renderBenchmark:function(){var e={label:this.benchmarkLinesData[0].label,numOfBars:this.series.length},e=this.getBenchmarkTemplate(e);u(".perso-bar-chart-container").append(e)},getBenchmarkTemplate:function(e){return(new a.story.PCtrlBase).getTemplateHtml("tmpl-pstory-benchmark",e)},setBenchmarkHeight:function(){this.benchmarkEl=u(".perso-bar-benchmark-line"),this.benchmarkEl.css("top",this.calcBenchmarkTop()+"px")},calcBenchmarkTop:function(){var e=this.prepareCalculateBarHeightOptions(this.getMaxValue());return this.benchmarkValue>this.maxBarValue?-(this.calculateBarHeightByValue(this.benchmarkValue-this.maxBarValue,e).normalValue+this.benchmarkEl.height()/2):this.calculateBarHeightByValue(this.maxBarValue-this.benchmarkValue,e).avgValue-this.benchmarkEl.height()/2},beforeRenderBenchmark:function(){var e=this.prepareCalculateBarHeightOptions(this.getMaxValue());this.getMaxValue()>this.maxBarValue&&this.frameEl.find(this.selectors.$persoBarChartContainer).css("margin-top",this.calculateBarHeightByValue(this.getMaxValue()-this.maxBarValue,e).normalValue)},setThemeClasses:function(){personetics.config.theme&&((personetics.config.theme.outflowColor||personetics.config.theme.inflowColor)&&(a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBarChartWrapper),"perso-theme-bar-chart-selected-background"),a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBarChartWrapper),"perso-theme-brandColor-budget-coloring")),personetics.config.theme.brandColor&&(a.utils.persoTheming.addClassToElement(this.frameEl,"perso-theme-brandColor-mtd"),a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoSelectedMonthPickerTab),"perso-theme-brandColor-background")),personetics.config.theme.headerColor&&(a.utils.persoTheming.addClassToElement(this.frameEl,"perso-theme-headerColor-benchmark"),a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoLegendText),"perso-theme-headerColor-color"),a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoMonthAmount),"perso-theme-headerColor-color")),personetics.config.theme.pickerColor&&(a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoMonthPickerContainer),"perso-theme-pickerColor-selected-month-item-color"),a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoMonthPickerContainer),"perso-theme-pickerColor-unselected-month-item-color")),personetics.config.theme.backgroundColor&&a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoMonthPickerWrapper),"perso-theme-backgroundColor-background"),personetics.config.theme.greyLightColor&&(a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBarChartWrapper),"perso-theme-greyLightColor-bars-background"),a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoMonthPickerWrapper),"perso-theme-greyLightColor-month-picker-background")))},afterRender:function(e){this.frameEl&&(this.frameEl.closest(".pstory-dialog-frame").addClass("perso-pure-bar-chart-dialog"),this.setMonthPickerTabWidth(),this.setDefaultMonthPickerTab(),this.setDefaultBar(),this.setMonthAmount(this.series[this.getDefaultIndex()].label),this.isBlockPositionInViewport(this.frameEl)&&this.doAnimations(),this.lastItemClicked=this.frameEl.find(".perso-month-picker-item.perso-selected")),this.renderAccessibility(),this.chartHasOwnIndicators(this.series)&&this.frameEl.find(".perso-month-amount").addClass("perso-indicators-mode"),a.story.Block.prototype.afterRender.call(this,this,e),this.setThemeClasses()},renderAccessibility:function(){var e=this.frameEl.find(".pstory-block-container .pstory-block-content"),t=a.projectConfiguration.getConfig("supportHtmlTagInProcessor"),s=this.frameEl.find(this.selectors.$persoComparableChart);t&&this.frameEl.find(this.selectors.$persoMonthAmountNotSeries).attr("aria-hidden","true"),e&&"perso-desktop"==this.browserData.deviceType&&u(e).attr("tabindex","0"),s&&"perso-desktop"==this.browserData.deviceType&&u(s).attr("tabindex","-1"),a.utils.accessibility.addAltTextToElement(this.frameEl,this.texts.accessibilityBarChartTitle)},setBarsWrapperHeight:function(){var e=this.frameEl.find(".perso-bars-wrapper"),t=this.options.height*this.story.uxCtrl.getPersoneticsWrapper().height();e.length&&u(e).height(t)},setDefaultBar:function(){var e=this.frameEl.find(".perso-bar.perso-selected");e.parents(".perso-series-wrapper").find(".perso-tooltip").addClass("perso-selected"),this.createDefaultBarTransElem(e)},getDefaultIndex:function(){var s=0;return u.each(this.layoutInstructions.series,function(e,t){if(t.selected)return s=e,!1}),s},getSelectedBarIndex:function(){return this.selectedBarIndex||0},updateSelectedAccText:function(){this.frameEl.find(".perso-accessibility-bar-selected-text").text(this.frameEl.find(".perso-month-picker-item.perso-selected").attr("aria-label")+",")},createDefaultBarTransElem:function(e){u(e).each(function(e,t){u(t).addClass("perso-selected-animated"),u(t).append(u("<div class='perso-animated-bar'></div>"))})},bindEvents:function(){a.story.Block.prototype.bindEvents.call(this),this.frameEl.find(".perso-month-picker-item").bind("click",a.bind(this,this.monthPickerItemClick)),this.barChartConfig.isBarClickable&&this.frameEl.find(".perso-bar").bind("click",a.bind(this,this.barItemClick))},tabClickListener:function(t){var e;this.changeSelectedElm(t),this.isSeries?this.changeDisplayedTooltip():(e=this.series.filter(function(e){return e.category==t})[0],this.setMonthAmount(e.label))},changeSelectedElm:function(e){var t=this.frameEl.find(".perso-bar");t.removeClass("perso-selected perso-selected-animated"),t.find(".perso-filler-bar").remove(),t.filter("[pstory-category='"+e+"']").addClass("perso-selected"),this.updateSelectedAccText()},changeDisplayedTooltip:function(){this.frameEl.find(".perso-tooltip").removeClass("perso-selected"),this.frameEl.find(".perso-bar.perso-selected").parents(".perso-series-wrapper").find(".perso-tooltip").addClass("perso-selected")},setMonthAmount:function(e){var t=u(".perso-month-amount");t.length&&t.html(e)},addTooltipsAmount:function(){var s=this;u.each(this.layoutInstructions.series,function(e){var t=s.layoutInstructions.series[e].category,t=u(".perso-bar-chart-tooltip-container.perso-month-"+t);t.length&&t.html(s.layoutInstructions.series[e].label)})},renderTooltips:function(){var r=this,e=r.frameEl.find(".perso-series-wrapper");u.each(e,function(e,t){var s=u(t).find(".perso-tooltip"),o=u(t).find(".perso-bar"),n=(r.setTooltipLabels(s,o.attr("pstory-category")),Math.max(u(t).find(".perso-in").height(),u(t).find(".perso-out").height())+r.options.tooltipJMarginBottom);s.css({bottom:n,left:-1*(s.width()/2-o.width())+parseInt(u(t).css("padding-left"))/2})})},setTooltipLabels:function(s,t){var o,n=this.seriesNamesForDisplay;s.length&&(u(s).empty(),o=this.series.filter(function(e){return e.category==t})[0],u.each(this.layoutInstructions.seriesLabels,function(e,t){t.toLowerCase()==o[e].mode.toLowerCase()&&(u('<span class="perso-tooltip-label"></span>').appendTo(s),t=n[e]+" "+o[e].label,0==o[e].label.indexOf("<ul")&&(t=o[e].label.replace(/(<li[^>]*>)(.*<\/li>.*)/,"$1"+n[e]+" $2")),u(s.find(".perso-tooltip-label").get(e)).html(t))}))},getSeriesHigherBar:function(e){var t;return e&&(e=u(e).find(".perso-bar").map(function(){return u(this).height()}).get(),t=Math.max.apply(null,e)),t||0},getCollapsedFixedElement:function(){return this.frameEl.find(".perso-month-picker-wrapper")},getCollapseParams:function(){var e=a.story.Block.prototype.getCollapseParams.call(this);return u.extend(e,{fixedContainer:this.getCollapsedFixedElement(),el:this.frameEl,height:this.barChartConfig.monthPickerHeight})},doScrollEvent:function(e){var t;a.story.Block.prototype.doScrollEvent.call(this,e),this.isBlockPositionInViewport(this.frameEl)&&this.doAnimations(),!this.supportBlockCollapse||"vertical"!=this.chartType&&"multiVertical"!=this.chartType||(t=this.frameEl.find(".perso-month-picker-container"),this.collapseHelper.scrollEvent(this,t,e))},getSupportBlockCollapse:function(){return 1==a.projectConfiguration.getConfig("supportCollapse")&&1==a.projectConfiguration.getConfig("monthPickerCollapse")},getBlockPercentInViewportToStartAnimate:function(){return a.story.Block.prototype.getBlockPercentInViewportToStartAnimate.call(this)[this.chartType]},doAnimations:function(){var e,t,s;this.isBarSelected||((e=this).isDraw||(t=!e.isSeries&&e.series[e.getDefaultIndex()].value<0?"perso-negative":"",(s=this.frameEl.find(".perso-animated-bar")).length&&(s.addClass("perso-filler-bar").addClass(t),e.amountAnimation(u(e.frameEl.find(".perso-month-amount"))),e.isDraw=!0),u.isArray(this.benchmarkLines)&&0<this.benchmarkLines.length&&(this.beforeRenderBenchmark(),s[0].addEventListener("animationend",function(){e.drawBenchmark()}))))},amountAnimation:function(e){var s=this,o=e.find(".perso-int-num"),n=e.find(".perso-currency");u(o).each(function(){var e=u(this).text(),t=e.match(/[^0-9]/g)||[];u(n).addClass("perso-fade-in"),u(o).addClass("perso-fade-in"),u(this).attr("Counter",0).animate({Counter:parseFloat(e.replace(/[^0-9]/g,""))},{duration:s.options.amountAnimationDuration,easing:"swing",step:function(e){e=Math.ceil(e);u(this).text(s.formatNumbers(e,t))}})})},formatNumbers:function(e,t){t=t[0]||",",e=e.toString().split();return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),e.join()},setDefaultMonthPickerTab:function(){var e=this.getDefaultIndex();this.changeSelectedTabAnimationMonthPicker(this.frameEl.find(".perso-month-picker-item")[e],!0)},setMonthPickerTabWidth:function(){var e=this.frameEl.find(".perso-month-picker-container .perso-month-picker-item");u(e).css("width",100/this.layoutInstructions.categories.length+"%")},barItemClick:function(e){e=u(e.currentTarget).attr("pstory-category");this.barChartConfig.BarClicked=!0,this.frameEl.find(".perso-month-picker-item[pstory-category="+e+"]").click()},monthPickerItemClick:function(e){this.isBarSelected=!0,this.lastItemClicked=this.frameEl.find(".perso-month-picker-item.perso-selected");var t=u(this.lastItemClicked).attr("pstory-category"),s=e.currentTarget,o=u(s).attr("pstory-category");o!==t&&(this.frameEl.find(".perso-month-picker-item").removeClass("perso-selected perso-default-month"),this.changeSelectedTabAnimationMonthPicker(s),this.tabClickListener(o),this.parent.notifyEvent(this,"setSelectedValue",o),t={value:o,type:this.barChartConfig.BarClicked?"barChartBarClick":"barChartPickerClick"},delete this.barChartConfig.BarClicked,this.notifyReportEvent(t),document.activeElement===e.target&&a.utils.accessibility.putFocus(u(e.target)))},changeSelectedTabAnimationMonthPicker:function(e,t){var s,o,n;null!=e&&0!=e.length&&(s=this.frameEl.find(".pstory-month-picker-selected-tab"),o=(e=u(e)).width(),n=(e.index()-1)*o,e.addClass("perso-selected"),t&&e.addClass("perso-default-month"),this.updateSelectedAccText(),this.setSelectedAccText(e),this.removeSelectedAccText(e.siblings(".perso-month-picker-item")),s.css({left:n+"px",width:o+"px"}))},setSelectedAccText:function(e){var t;e.length&&(t=e.attr("aria-label"),e.attr("aria-label",""),e.attr("aria-label",this.texts.selected+", "+t))},removeSelectedAccText:function(e){var o=this;e.length&&e.toArray().forEach(function(e){var e=u(e),t=e.attr("aria-label"),s=o.texts.selected+", ";-1<t.indexOf(s)&&(t=t.slice(s.length),e.attr("aria-label",""),e.attr("aria-label",t))})},keyUpEvent:function(e){var t=this.story.uxCtrl.getPersoneticsWrapper(),s=".pstory-block-frame .pstory-block-content",o=t.find(s),n=u(this.frameEl.find(".pstory-block-content")),r=t.find(s).index(n),i=this.frameEl.find(".perso-month-picker-item"),a=this.frameEl.find(".perso-month-picker-item.selected");switch(e.which){case 39:a.index()-1!=this.lastItemClicked.index()-1?(0==(this.lastItemClicked=a).next(".perso-month-picker-item").length?i[i.length-1]:a.next()).focus():u(e.target).next(".perso-month-picker-item").length?u(e.target).next().focus():n.get(0)==e.target?i[0].focus():this.frameEl.find(".perso-bar-chart-wrapper").get(0)==e.target?(a.next(".perso-month-picker-item").length?a.next(".perso-month-picker-item"):a).focus():0==u(e.target).next(".perso-month-picker-item").length?o[r+1].focus():a.index()==i.length&&i[i.length-1].focus();break;case 37:(a.index()-1!=this.lastItemClicked.index()-1?(this.lastItemClicked=a).prev(".perso-month-picker-item").length?a.prev(".perso-month-picker-item"):a:n.get(0)==e.target?o[r-1]:u(e.target).prev(".perso-month-picker-item").length?u(e.target).prev():this.frameEl.find(".perso-bar-chart-wrapper").get(0)==e.target?a.prev(".perso-month-picker-item").length?a.prev(".perso-month-picker-item"):a:n).focus();break;case 13:case 32:u(e.target).click(),this.frameEl.find(".perso-bar-chart-wrapper").focus()}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(o,l){o.story=o.story||{},o.story.PinChartCatalogParent=o.story.Block.extend({$selectors:function(){return{$persoSelectedPin:".perso-pinGraph-raw:first-child",$persoUnSelectedPins:".perso-pinGraph-raw:not(:first-child)",$pstoryPinGraphContainer:".pstory-pinGraph-chart",$persoPinGraphContainer:".perso-pinGraph-container",$persoGraphBar:".perso-bar-wrapper .perso-pinGraph-bar",$persoNegativeGraph:".pstory-pinGraph-chart.perso-negative",$persoPositiveGraph:".pstory-pinGraph-chart:not(.perso-negative)",$persoInfoRow:".perso-info-row",$persoPinGrapItemWrapper:".perso-pinGraph-raw",$persoDateText:".perso-date-txt",$persoAmount:".perso-pinGraph-amount"}},initialize:function(e,t,s){this.selectors=this.$selectors(),o.story.Block.prototype.initialize.call(this,e,t,s)},beforeRender:function(e,t){t&&(o.story.Block.prototype.beforeRender.call(this,e,t),this.series=t.series,this.categories=t.categories,this.chartType=t.type,e=this.getPinChartConfig(),this.pinChartConfig=o.utils.projectConf.verifyConfig("pinChartConfig",e),this.mode=Object.prototype.hasOwnProperty.call(t,"mode")&&0<t.mode.length?t.mode.toLowerCase():"",this.maxValue=this.getMaxValue(),this.options=this.story.uxCtrl.getHorizontalPinGraphChartOptions(),this.browserData=o.utils.persoBrowserDetector.getBrowserData())},setFillerBarThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.inflowColor&&o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoPositiveGraph+" "+this.selectors.$persoGraphBar),"perso-theme-inflowColor-background"),personetics.config.theme.outflowColor&&o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoNegativeGraph+" "+this.selectors.$persoGraphBar),"perso-theme-outflowColor-background"))},render:function(e,t){o.story.Block.prototype.render.call(this,e,t);e=this.frameEl.find(this.selectors.$pstoryPinGraphContainer);this.mode.length&&"out"==this.mode&&e.addClass("perso-negative"),0<e.length&&this.renderPinChart(e),o.processor.PStoryConfig.isRtl()&&this.enableChartsRTL&&e.addClass("pstory-pinGraph-chart-rtl"),this.setFillerBarThemeClasses()},renderPinChart:function(e){var s=this,e=l(e).find(this.selectors.$persoPinGrapItemWrapper),o=Math.abs(s.maxValue);e.length&&l.each(e,function(e,t){l(t).css("box-sizing","border-box"),s.setCategoryText(t,e),s.setBarPercentsByValue(t,e,o),s.setAmount(t,e)})},setCategoryText:function(e,t){e=l(e).find(this.selectors.$persoDateText);e.length&&l(e).text(this.categories[t])},setContainerHeight:function(e){var t;e.length&&(t=this.story.uxCtrl.getPersoneticsWrapper().height()*this.options.pinChartHeight,l(e).css("height",t))},setBarPercentsByValue:function(e,t,s){e=l(e).find(this.selectors.$persoGraphBar);e.length&&(t=Math.abs(this.series[t].value)/s*this.options.maxBarPercent,this.pinChartConfig.isHorizontal?l(e).css({width:t+"%","max-width":t+"%"}):l(e).css({height:t+"%","min-height":t+"%","max-height":t+"%"}))},setAmount:function(e,t){t=this.modifyAmountAriaLabel(this.series[t].label),e=l(e).find(this.selectors.$persoAmount);e.length&&l(e).html(t)},getMaxValue:function(){return Math.max.apply(Math,this.series.map(function(e){return e.value}))},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.pickerColor&&(o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoSelectedPin+" "+this.selectors.$persoDateText),"perso-theme-pickerColor-color"),o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoUnSelectedPins+" "+this.selectors.$persoDateText),"perso-theme-pickerColor-color-sixty-opacity")),personetics.config.theme.headerColor&&o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoAmount),"perso-theme-headerColor-color"),personetics.config.theme.greyLightColor&&(o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoUnSelectedPins+" "+this.selectors.$persoGraphBar),"perso-theme-greyLightColor-background"),o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$pstoryPinGraphContainer),"perso-theme-greyLightColor-separator-line-border-color")),personetics.config.theme.backgroundDarkColor&&o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoPinGraphContainer),"perso-theme-backgroundDarkColor-background"))},afterRender:function(){var e,t;this.isBlockPositionInViewport(this.frameEl)&&this.doAnimations(),"perso-mobile"==this.browserData.deviceType&&(e=this.frameEl.find(".pstory-block-content"),t=this.frameEl.find(this.selectors.$persoPinGrapItemWrapper),e&&(e.removeAttr("tabindex"),t.removeAttr("tabindex"))),this.setAccessibilityText(),this.setThemeClasses()},getBlockPercentInViewportToStartAnimate:function(){return o.story.Block.prototype.getBlockPercentInViewportToStartAnimate.call(this)[this.chartType]},doAnimations:function(){var e;this.isDraw||(e=this.frameEl.find(this.selectors.$persoPinGraphContainer)).length&&(e.addClass("perso-do-bar-animation"),e.addClass("perso-do-amount-animation"),this.isDraw=!0)},doScrollEvent:function(e){o.story.Block.prototype.doScrollEvent.call(this,e),this.isBlockPositionInViewport(this.frameEl)&&this.doAnimations()},bindEvents:function(){o.story.Block.prototype.bindEvents.call(this)},keyUpEvent:function(e){var t=this.story.uxCtrl.getPersoneticsWrapper(),s=".pstory-block-frame .pstory-block-content",o=t.find(s),n=this.frameEl.find(".pstory-block-content"),r=t.find(s).index(l(this.frameEl.find(".pstory-block-content"))),i=this.frameEl.find(this.selectors.$persoPinGrapItemWrapper);switch(e.which){case 39:(e.target==n.get(0)?i[0]:(a=l(e.target).nextAll(this.selectors.$persoPinGrapItemWrapper)).length?l(a[0]):o[r+1]).focus();break;case 37:if(e.target!=n.get(0)){var a=l(e.target).prevAll(this.selectors.$persoPinGrapItemWrapper);(a.length?l(a[0]):n).focus();break}o[r-1].focus()}},setAccessibilityText:function(){var n=this,e=o.dictionary.getText("accessibilityPinGraph"),r=o.dictionary.getText("accessibilityTableStart"),i=o.dictionary.getText("accessibilityTableEnd"),t=this.frameEl.find(this.selectors.$persoPinGrapItemWrapper)||[];o.utils.accessibility.addAltTextToElement(this.frameEl,e),l.each(t,function(e,t){var s=n.categories[e]+", "+n.series[e].label,o="",o=0==e?r+", "+s:e==n.series.length-1?i+", "+s:s;l(t).attr("aria-label",o)})},modifyAmountAriaLabel:function(e){var t=(0,o.utils.persoValidator.isValidSelector)(e)&&l(e).get(0);return e&&t?(t.setAttribute("aria-label",", "+t.getAttribute("aria-label")),t.outerHTML):e||""}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.PinGraphChartBlock=e.story.PinChartCatalogParent.extend({getHtmlTemplateId:function(){return"pure-pinGraph-chart"},getPinChartConfig:function(){return{isHorizontal:!0}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(o,e){o.story=o.story||{},o.story.DotsLineChartBlock=o.story.Block.extend({getHtmlTemplateId:function(){return"line-chart"},$selectors:function(){return{$persoCatalogVersion:"",$pstoryFrame:".pstory-frame",$pstoryContainer:".pstory-container",$pstoryDialogFrame:".pstory-dialog-frame",$pstoryBlockLineChart:".pstory-block-line-chart",$pstoryBlockContainer:".pstory-block-container",$pstoryLineChart:".pstory-line-chart",$persoSvgChartContainer:".perso-svg-chart-container",$persoTooltipLineChartAmount:".perso-line-chart-amount",$persoTooltipLineChartDate:".perso-line-chart-month"}},beforeRender:function(e,t){this.selectors=this.$selectors(),o.story.Block.prototype.beforeRender.call(this,e,t),this.texts={accessibilityLineChartTitle:o.dictionary.getText("accessibilityLineGraphTitle"),accessibilityLineGraphHighlightedDot:o.dictionary.getText("accessibilityLineGraphHighlightedDot")},this.beforeRenderChart()},beforeRenderChart:function(){this.chartType="lineChart",1==this.layoutInstructions.series.length&&e.isArray(this.layoutInstructions.series[0])&&(this.layoutInstructions.series=this.layoutInstructions.series[0]),this.chartTypeHelper=this.chartType+"Helper",this.initChartHelper(this.chartTypeHelper)},render:function(e,t){o.story.Block.prototype.render.call(this,e,t);var s=this.frameEl.find(this.selectors.$pstoryLineChart);0<s.length&&(t=t,e=s,s=this.initLineChartOptions(),o.processor.PStoryConfig.isRtl()&&this.enableChartsRTL&&(t.series=t.series.reverse()),s.enableChartsRTL=this.enableChartsRTL,t.lineChartOptions=s,this.chartHelper.prepareChart(t,s,this.selectors),this.chartHelper.renderChart(e,t))},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&(o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$pstoryLineChart),"perso-theme-brandColor-svg-dot-stroke"),o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$pstoryLineChart),"perso-theme-brandColor-svg-path-stroke"),o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTooltipLineChartAmount),"perso-theme-brandColor-color"),this.layoutInstructions.lineChartOptions&&this.layoutInstructions.lineChartOptions.LineGraphThemeColor&&o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$pstoryLineChart),"perso-theme-brandColor-svg-line-graph-stroke")),personetics.config.theme.headerColor&&(o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$pstoryLineChart),"perso-theme-headerColor-svg-tick-text-fill"),o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTooltipLineChartDate),"perso-theme-headerColor-color")),personetics.config.theme.greyLightColor&&o.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$pstoryLineChart),"perso-theme-greyLightColor-svg-vertical-line"))},afterRender:function(e){o.story.Block.prototype.afterRender.call(this,e);e=this.el.find(this.selectors.$pstoryLineChart);e.length&&this.chartHelper.renderAccessibilityData(this.frameEl,this.texts),o.utils.accessibility.trackFocus(e),this.setThemeClasses()},initLineChartOptions:function(){var e=1.3,t=this.story.uxCtrl.getPersoneticsWrapper().width(),t=(470<t&&t<790&&(this.el.find(this.selectors.$pstoryBlockContainer).css("text-align","center"),e=1.17),this.story.uxCtrl.getDotsLineChartOptions(e));return this.setConfigsForLineChart(t)},initChartHelper:function(e){this.chartHelper=o.story.BlockChartFactory.generateHelperClazz(e,this.story.cfg)},doScrollEvent:function(e){o.story.Block.prototype.doScrollEvent.call(this,e),this.isBlockPositionInViewport(this.frameEl)&&"function"==typeof this.chartHelper.lineAnimations&&this.chartHelper.lineAnimations()},bindEvents:function(){o.story.Block.prototype.bindEvents.call(this)},setConfigsForLineChart:function(e){return this.lineChartOptions=e,this.lineChartConfigs=this.getLineChartCatalogConfigs(),this.updateLineChartConfigs(this.lineChartConfigs),this.getLineChartConfigsFromProject(),this.lineChartOptions},getLineChartCatalogConfigs:function(){return{areaConfig:{},skinCtrlConfig:{},dotAsImgConfig:{},bubbleTooltipMode:!1,LineGraphThemeColor:!1}},getLineChartConfigsFromProject:function(){var e=o.projectConfiguration.config.lineChartConfigs;void 0!==e&&e&&this.updateLineChartConfigs(e)},updateLineChartConfigs:function(e,t){for(var s in e)t||"object"!==_typeof(e[s])||Array.isArray(e[s])?this.lineChartOptions[s]=e[s]:this.updateLineChartConfigs(e[s],"skinCtrlConfig"===s?!0:!1)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e,n,o){var c=e.d3;n.story=n.story||{},n.story.NewPieChartBlock=n.story.Block.extend({beforeRender:function(e,t){n.story.Block.prototype.beforeRender.call(this,e,t),this.options=this.getPieOptions(),this.setTotal(t),this.colors=c.scale.ordinal().range(this.getGraphPalette()),this.texts={accessibilityPieTitle:n.dictionary.getText("accessibilityPieTitle")},this.grayscaleId="grayscale_"+ +new Date,this.dropShadow="",this.options.arcs.filter.dropShadow&&(this.dropShadowId="drop-shadow_"+ +new Date,this.dropShadow="url(#"+this.dropShadowId+")"),this.isOldAndroidVersion=n.utils.persoHelper.isOldAndroidVersion(),this.layoutInstructions.slices=this.layoutInstructions.slices.sort(function(e,t){return Math.abs(t.value)-Math.abs(e.value)})},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.headerColor&&n.utils.persoTheming.addClassToElement(this.frameEl,"perso-theme-headerColor-pie-texts-color"),personetics.config.theme.backgroundColor&&n.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$pstoryPieData),"perso-theme-backgroundColor-background"))},afterRender:function(e){this.setThemeClasses(),n.story.Block.prototype.afterRender.call(this,e)},getPieOptions:function(){return this.story.uxCtrl.getPieOptions()},setPieDefination:function(){var t=.05*this.totalAmountInt,e=.04;return void 0!==this.options.arcs.padAngle&&(e=this.options.arcs.padAngle),c.layout.pie().padAngle(e).value(function(e){return Math.abs(e.value)+t})},sortPie:function(e){return e.sort(function(e,t){return Math.abs(t.value)-Math.abs(e.value)}),e},setTotal:function(e){var t=e.centerText,s=[],t=(t?s=t.split(/<br>|<\/br>/):n.log("Center text is empty"),this.totalText=s[0]||"",this.totalAmount=s[1]||"",new RegExp(/^(\<[^>]+\>)+/g).exec(this.totalText));t&&(s=t[0].replace(/</g,"</"),!this.totalText.substr(-s.length)===s&&(this.totalText+=s,this.totalAmount=t[0]+this.totalAmount)),Object.prototype.hasOwnProperty.call(e,"slices")&&0<e.slices.length?(s=e.slices.reduce(function(e,t){return{value:Math.abs(e.value)+Math.abs(t.value)}}),this.totalAmountInt=s.value):this.totalAmountInt=0},getGraphPalette:function(){return this.story.uxCtrl.getPieGraphPalette()},render:function(e,t){t.slices?(t.texts=this.texts,n.story.Block.prototype.render.call(this,e,t),this.frameEl=e.find(".pstory-block-frame").last(),0<(e=this.frameEl.find(".pstory-pie-chart")).length&&this.renderPieChart(e,t)):n.log("PieChartBlock.render() Error: invalid slices property - not rendering")},renderPieChart:function(e,t){(null==t.slices||0==t.slices.length||1==t.slices.length&&0==t.slices[0].value)&&(t.slices=[{value:1,label:"",category:n.dictionary.getText("lblPieNoTransaction"),class:"perso_empty"}]),t.slices=this.sortPie(t.slices),c.selection.prototype.moveToFront=function(){return this.each(function(){var e=this.parentNode;e.parentNode.appendChild(e)})},this.setPieSizeOnStart(),this.defineArcs(),this.renderPieBase(e),this.renderShadowFilter(this),this.renderPie(e,t,this),this.options.doAnimations||(this.options.pieDelay=this.options.pieDelay=this.options.pieDuration=this.options.pieTextDelay=this.options.pieTextDuration=this.options.pieSelectedDelay=0,this.pieAnimation()),this.renderAccessibilityData(e,t)},setPieSizeOnStart:function(){this.width=this.frameEl.find(".pstory-pie-chart").width(),void 0!==this.maxWidth&&this.width>this.maxWidth&&(this.width=this.maxWidth),this.height=.7*this.width,this.innerRadius=1,this.outerRadius=1,this.innerRadiusOver=1,this.outerRadiusOver=1},setPieSize:function(e){this.margin={top:0,right:20,bottom:0,left:20},this.width=e,this.height=.6*this.width,this.radius=Math.min(this.width,this.height)/2,this.innerRadius=this.radius-4,this.outerRadius=this.radius-22,this.innerRadiusOver=this.radius-1,this.outerRadiusOver=this.radius-25,-1!==this.el.find(".pstory-block-pie-chart").get(0).className.indexOf("perso-empty")&&(this.innerRadiusOver=this.innerRadius,this.outerRadiusOver=this.outerRadius)},defineArcs:function(){this.arc=c.svg.arc().innerRadius(this.innerRadius).outerRadius(this.outerRadius),this.arcOver=c.svg.arc().innerRadius(this.innerRadiusOver).outerRadius(this.outerRadiusOver)},renderPieBase:function(e){this.svg=this.renderPieSvgBase(e)},renderPieSvgBase:function(e){if(e)return c.select(e.get(0)).append("svg").attr("width",this.width).attr("height",this.height).append("g").attr("transform","translate("+this.width/2+","+.5*this.height+")")},renderPie:function(e,t){this.renderArcs(t),1===t.slices.length&&"perso_empty"===t.slices[0].class?(this.el.find(".pstory-block-pie-chart").addClass("perso-empty"),this.renderPieTitle(n.dictionary.getText("lblPieStaticTitle")),this.renderPieAmount(n.dictionary.getText("lblPieStaticAmount"))):(this.renderPieTitle(this.totalText),1==this.options.drawCenterLine&&this.renderLine(),this.renderPieAmount(this.totalAmount))},renderArcs:function(e){var s=this;s.svg.selectAll(".arc").data(s.setPieDefination()(e.slices)).enter().append("g").attr("class","perso-arc").attr("pstory-id",function(e){return e.data.category}).append("path").attr("d",s.arc).attr("class",function(e){var t="";return e.data.highlight&&(t+="perso-selected"),t}).style("filter",function(e){if(e.data.highlight)return s.options.arcs.filter.dropShadow?"url(#"+s.options.arcs.filter.dropShadow.id+")":""}).style("fill",function(e){return s.colors(e.data.category)}).on("click",function(e,t){s.onPieItemClick(e,t,this)})},renderTicks:function(e,t){e&&e.svg.append("g").attr("class","perso-ticks").selectAll("line").data(e.setPieDefination()(t)).enter().append("line").attr("class","tick").attr("x1",0).attr("x2",0).attr("y1",.8*-e.radius).attr("y2",.9*-e.radius).attr("stroke","gray").attr("transform",function(e){return"rotate("+(e.startAngle+e.endAngle)/2*(180/Math.PI)+")"})},renderPieLabels:function(s,e){var t=this.story.uxCtrl.getPersoneticsWrapper();s&&s.svg.append("g").attr("class","perso-pie-labels").attr("transform","translate(8,0)").selectAll("text").data(s.setPieDefination()(e)).enter().append("text").attr("class","perso-pie-label").attr("transform",function(e){var t=s.radius+20,e=(e.startAngle+e.endAngle)/2;return"translate("+t*Math.sin(e)+","+-t*Math.cos(e)+")"}).attr("dy","-0.5em").attr("text-anchor","middle").html(function(e){return e.data.category}).call(s.wrapLabelText,.28*t.width())},renderPieTitle:function(e){var t=this.options.totaltxt_SpaceFromCenter||-.3*this.story.uxCtrl.getValueByScreenWidth(this.options.center_text_total_font_size)+"px";void 0!==this.options.center_text_total_max_width&&null!==this.options.center_text_total_max_width&&(e=this.limitTextLength(e,this.options.center_text_total_max_width)),this.svg.append("text").attr("class","perso-total-txt").style("font-size",this.story.uxCtrl.getValueByScreenWidth(this.options.center_text_total_font_size)+"px").attr("dy",t).html(e)},limitTextLength:function(e,t){for(var s=this.story.uxCtrl.getValueByScreenWidth(t),o=n.utils.string.textWidth(e);s<o;)e=e.slice(0,-4)+"...",o=n.utils.string.textWidth(e);return e},renderPieAmount:function(e){var t=this.options.totalAmount_SpaceFromCenter||.9*this.story.uxCtrl.getValueByScreenWidth(this.options.center_text_amount_font_size)+"px";void 0!==this.options.center_text_amount_max_width&&null!==this.options.center_text_amount_max_width&&(e=this.limitTextLength(e,this.options.center_text_amount_max_width)),this.svg.append("text").attr("class","perso-total-amount").style("font-size",this.story.uxCtrl.getValueByScreenWidth(this.options.center_text_amount_font_size)+"px").attr("dy",t).html(e)},renderLine:function(){var e=this.options.centerLineWidth||0;this.svg.append("line").attr("class","perso-centerLine").attr("x1",e/2*-1).attr("x2",e/2)},pieAnimation:function(){this.pieDrew||(this.pieTransition(),this.textTransition(),this.pieDrew=!0)},pieTransition:function(){this.setPieSize(this.frameEl.find(".pstory-pie-chart").width()),this.defineArcs(),this.svg.selectAll(".perso-arc path").transition().delay(this.options.pieDelay).duration(this.options.pieDuration).attr("d",this.arc)},textTransition:function(){var e=this.svg.select(".perso-total-txt"),e=(e.style({"font-size":"0",opacity:"1"}),void 0!==e&&e.transition().duration(this.options.pieTextDuration).delay(this.options.pieTextDelay).style("font-size",this.story.uxCtrl.getValueByScreenWidth(this.options.center_text_total_font_size)+"px"),this.svg.select(".perso-total-amount"));e.style({"font-size":"0",opacity:"1"}),void 0!==e&&e.transition().duration(this.options.pieTextDuration).delay(this.options.pieTextDelay).style("font-size",this.story.uxCtrl.getValueByScreenWidth(this.options.center_text_amount_font_size)+"px")},renderAccessibilityData:function(){var e=this.texts.accessibilityPieTitle+". "+this.createDataString();this.svg.selectAll("*").attr("aria-hidden",!0),n.utils.accessibility.addAltTextToElement(this.frameEl,e)},createDataString:function(){var e=n.projectConfiguration.getConfig("supportHtmlTagInProcessor"),t=o("<span></span>"),s="",s=e?this.frameEl.find(".perso-total-amount .perso-amount").attr("aria-label"):this.frameEl.find(".perso-total-amount").text();return t.append(this.totalText+": "+s+"."),t.text()},onPieItemClick:function(e,t,s){var o=this.getSelectedIndex(),o=(t!==o&&c.select(o).attr("class","perso-selected"),c.select(s).attr("class","perso-selected"),this.frameEl.find(".pstory-pie-chart svg .perso-pie-label"));void 0!==o&&o.length>t&&((s=o[t]).className.baseVal=n.utils.string.addClass(s.className,"perso-selected")),this.handleClick(e,t)},renderShadowFilter:function(e){var t=e.options.arcs.filter.dropShadow;t&&((e=e.svg.append("defs").append("filter").attr("id",this.dropShadowId).attr("height","130%")).append("feGaussianBlur").attr("in",t.in).attr("stdDeviation",t.stdDeviation).attr("result","blur"),e.append("feOffset").attr("in","blur").attr("dx",t.dxOffset).attr("dy",t.dyOffset).attr("result","offsetBlur"),e.append("feFlood").attr("in","offsetBlur").attr("flood-color",t.color).attr("flood-opacity","1").attr("result","offsetColor"),e.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("operator","in").attr("result","offsetBlur"),(e=e.append("feMerge")).append("feMergeNode").attr("in","offsetBlur"),e.append("feMergeNode").attr("in",t.in))},handleClick:function(e,t,s){e.data&&(e=e.data),this.parent.notifyEvent(this,"setSelectedValue",e.category),e={value:e.category,type:s};this.notifyReportEvent(e),this.setSelectedIndex(t)},getSelectedPathIndex:function(){var s=0,o=this.frameEl.find("path.perso-selected").parent().attr("pstory-id");return this.layoutInstructions.slices.filter(function(e,t){if(e.category==o)return s=t,!0}),s},wrapLabelText:function(e,l){e.each(function(){for(var e,t=c.select(this),s=t.text().split(/\s+/).reverse(),o=[],n=0,r=t.attr("y"),i=parseFloat(t.attr("dy")),a=t.text(null).append("tspan").attr("x",0).attr("y",r).attr("dy",i+"em");e=s.pop();)o.push(e),a.text(o.join(" ")),a.node().getComputedTextLength()>l&&(o.pop(),a.text(o.join(" ")),o=[e],a=t.append("tspan").attr("x",0).attr("y",r).attr("dy",.15*++n+i+"em").text(e))})},doScrollEvent:function(e){n.story.Block.prototype.doScrollEvent.call(this,e),this.isBlockPositionInViewport(this.frameEl)&&"function"==typeof this.pieAnimation&&this.pieAnimation()},getSelectedIndex:function(){return this.index||0},setSelectedIndex:function(e){this.index=e},bindEvents:function(){n.story.Block.prototype.bindEvents.call(this)}})}(window,window.Personetics=window.Personetics||{},jQuery),function(r,l){r.story=r.story||{},r.story.CalendarBlock=r.story.Block.extend({getHtmlTemplateId:function(){return"calendar"},$selectors:function(){return{$persoDot:".perso-calendar-day .perso-dot",$persoBottomText:"#perso-calendar-bottom-text",$persoCalendarDays:".perso-calendar-days",$persoWeekDay:".perso-calendar-week-day",$persoCircleText:".perso-calendar-day .circleText",$persoCircleTextNotBold:".perso-calendar-day:not(.perso-bold) .circleText",$persoCircleTextBold:".perso-calendar-day.perso-bold .circleText",$persoCalendarContainer:".pstory-block-container .perso-calendar",$persoCalendarInnerContainer:".perso-calendar-inner-container",$persoCalendarMonths:".perso-calendar-inner-container .perso-calendar-months",$persoTypeInDot:".perso-calendar-day.perso-type-in .perso-dot",$persoTypeOutDot:".perso-calendar-day.perso-type-out .perso-dot"}},getDayTemplate:function(){return"calendarDayCL1"},initialize:function(e,t,s){r.story.Block.prototype.initialize.call(this,e,t,s),this.calendarConfigs=this.getCalendarCatalogConfigs(),this.updateCalendarConfigsFromProject(),this.createMarkedRangesDates(t),this.supportCollapse=this.getSupportBlockCollapse(),this.bottomText="",Object.prototype.hasOwnProperty.call(t,"bottomText")&&(this.bottomText=t.bottomText),t.accessibilityTexts={accessibilityCalendarTitle:r.dictionary.getText("accessibilityCalendarTitle")+(0<this.bottomText.length?" , "+this.bottomText:"")},this.selectors=this.$selectors()},createMarkedRangesDates:function(s){var o=this;o.rangeEventsDates=[],Object.prototype.hasOwnProperty.call(s,"highlightedSrc")&&0<s.highlightedSrc.length&&s.highlightedSrc.forEach(function(e,t){Object.prototype.hasOwnProperty.call(s,"markedRange")&&s.markedRange.length>t&&o.rangeEventsDates.push({startRangeDate:moment(e).add(-1*s.markedRange[t],"day"),endRangeDate:moment(e).add(s.markedRange[t],"day")})})},onInputClick:function(e,t){var t=l(t),s=(this.lastItemClicked=t,this.getCollapsedFixedElement()),s=(this.supportCollapse||s.hasClass("pstory-collapse-enabled_calendar")||s.addClass("pstory-collapse-enabled pstory-collapse-enabled_calendar"),this.getHeightFixedElements()),t=(this.scrollToTxList(t,s),{type:"calendar",value:this.lastItemClicked.find(".perso-action").first().attr("data-reporting")});this.notifyReportEvent(t)},setSelectedRow:function(e){e=l(e);e&&e.length&&(e.hasClass("perso-selected")||(l(".perso-calendar-row").removeClass("perso-selected"),e.addClass("perso-selected")))},scrollToTxList:function(e,t){var s,o,e=l(e);e&&e.length&&(e=e.attr("trans-id"),s=l("#perso-table-row-"+e),"perso-tablet"!=(o=r.utils.persoBrowserDetector.getBrowserData().deviceType)&&"perso-desktop"!=o||this.supportCollapse?s.scrollintoview({direction:"y",duration:1200,initialTop:t}):document.getElementById("perso-table-row-"+e).scrollIntoView({behavior:"smooth"}))},getHeightFixedElements:function(){var s=this,o=0,e=l(".pstory-collapse-enabled");return e&&0<e.length&&l.each(e,function(e,t){if(l(t).hasClass("pstory-collapse-enabled_calendar"))return s.supportCollapse&&(o+=l(t).outerHeight()),!1;o+=l(t).outerHeight()}),o},render:function(e,t){r.story.Block.prototype.render.call(this,e,t)},beforeRender:function(e,t){r.story.Block.prototype.beforeRender.call(this,e,t);e=this.dateDiffIndays(moment(t.startDate),moment(t.endDate)),this.layoutInstructions.allDays=[],this.layoutInstructions.getDayTemplate=this.getDayTemplate,this.renderCalendarRows(moment(t.startDate),e),t=this.layoutInstructions.allDays.length;this.layoutInstructions.numOfWeeks=parseInt(t/7)+(t%7&&1),this.texts={accessibilityTexts:{accessibilitySelected:r.dictionary.getText("accessibilitySelected")}}},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&(r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoDot),"perso-theme-brandColor-background"),r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBottomText),"perso-theme-brandColor-border-color")),personetics.config.theme.headerColor&&r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBottomText),"perso-theme-headerColor-color"),personetics.config.theme.alertColor&&r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCalendarDays),"perso-theme-alertColor-range-before-background"),personetics.config.theme.datesColor&&(r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoWeekDay),"perso-theme-datesColor-color"),r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCircleText),"perso-theme-datesColor-color")),personetics.config.theme.backgroundColor&&(r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCalendarContainer+","+this.selectors.$persoCalendarInnerContainer),"perso-theme-backgroundColor-background"),r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCalendarDays),"perso-theme-backgroundColor-calendar-range-background")),personetics.config.theme.backgroundDarkColor&&r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCalendarMonths),"perso-theme-backgroundDarkColor-background"))},afterRender:function(e){var t=l(e).find(".perso-calendar-days"),s=(this.setClickableRowsClass(t),l(e).find("#perso-calendar-bottom-text"));s&&0<s.length&&s.text(this.layoutInstructions.bottomText),this.lastItemClicked=this.frameEl,this.setDefaultRowSelected(t),r.story.Block.prototype.afterRender.call(this,this,e),this.renderAccessibilityData(e),s&&0<s.length&&r.utils.persoMultiLineEllipsis.generateEllipsisString(s.get(0)),this.calendarConfigs.setCalendarRoundedEdges&&(e=t.find(".first-perso-calendar-range")).length&&e.addClass("perso-rounded-edges").addClass("remove-before"),this.setThemeClasses()},renderAccessibilityData:function(e){var e=l(e),t=(this.ariaLabelsTextsMap=this.getAriaLablesTextMap(this.frameEl.find(".perso-clickable-calendar-row")),e.find(".perso-calendar-inlined")),e=e.find(".perso-accessibility-calendar");e&&0<e.length&&e.find(".perso-accessibility-read").css({height:t.outerHeight(),width:t.width()}),r.utils.accessibility.trackFocus(t)},setClickableRowsClass:function(e){var o=this;e&&e.length&&((e=e.find(".perso-calendar-row")).length&&l.each(e,function(e,t){var t=l(t),s=t.find(".perso-action");0<s.length&&(o.setCalendarRowAccessibility(t),s=l(s[0]),t.addClass("perso-clickable-calendar-row"),t.attr("trans-id",s.data("trans-id")),t.attr("role","text"),t.attr("aria-live","assertive"))}))},setCalendarRowAccessibility:function(e){var t,s=e.find(".perso-available"),o="";e.attr("tabindex",0),0<s.length&&(t=l(s[0]),s=l(s[s.length-1]),o=t.data("date-text")+" to "+s.data("date-text")+o),e.attr("aria-label",o)},setDefaultRowSelected:function(e){e&&e.length&&((e=e.find(".perso-default"))&&e.length&&(e=e.parent(),this.setSelectedRow(e)))},renderCalendarRows:function(e,t){var s=r.projectConfiguration.getConfig("calendarSunFirst")?e.day():e.isoWeekday()-1;e.subtract(s,"day");for(var o=0;o<=t+s;o++)this.layoutInstructions.allDays.push(r.utils.persoHelper.deepObjectExtend({time:moment(e).valueOf(),isEmptyDay:o<s,isFirstDay:o==s,isLastDay:o==t+s,dayItem:e.get("date")<10?"0"+e.get("date"):e.get("date")},this.addDayAttributes(e,o<s))),e.add(1,"day")},addDayAttributes:function(t,e){var s,o={attributes:[],class:[]},n=this.layoutInstructions.actionableSrc.filter(function(e){return t.isSame(e.date,"day")});return n&&0<n.length&&!e?(o.class.push("perso-bold perso-action"),this.calendarConfigs.setCalendarTransactionType&&(s=this.setTransactionTypeClass(n),o.class.push(s))):o.class.push("perso-disabled"),Object.prototype.hasOwnProperty.call(this.layoutInstructions,"default")&&t.isSame(moment(this.layoutInstructions.default),"day")&&o.class.push("perso-default"),e||(o.class.push("perso-available"),this.rangeEventsDates.forEach(function(e){moment(t).isBetween(e.startRangeDate,e.endRangeDate)&&o.class.push("perso-range"),t.isSame(moment(e.startRangeDate),"day")&&o.class.push("first-perso-calendar-range"),t.clone().add(-1,"d").isSame(moment(e.startRangeDate),"day")&&o.class.push("after-first-perso-calendar-range"),t.isSame(moment(e.endRangeDate),"day")&&o.class.push("perso-range last-perso-calendar-range"),t.clone().add(1,"d").isSame(moment(e.endRangeDate),"day")&&o.class.push("perso-range before-last-perso-calendar-range")}),n&&0<n.length&&(s=n[0].id,e=n.filter(function(e){return"In"==e.type})[0],n=n.filter(function(e){return"Out"==e.type})[0],o.type=e?n?"Both":"In":n?"Out":null,o.attributes.push({attrName:"data-trans-id",attrVal:s})),o.attributes.push({attrName:"data-date-text",attrVal:t.format("MMMM Do YYYY")},{attrName:"data-reporting",attrVal:t.format(r.projectConfiguration.getConfig("dateFormat"))})),o},dateDiffIndays:function(e,t){e=new Date(e),t=new Date(t);return Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())-Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))/864e5)},getCollapsedFixedElement:function(){return this.frameEl.find(".perso-calendar-inner-container")},getCollapseParams:function(){var e=r.story.Block.prototype.getCollapseParams.call(this);return l.extend(e,{fixedContainer:this.getCollapsedFixedElement(),el:this.frameEl})},getSupportBlockCollapse:function(){return 1==r.projectConfiguration.getConfig("supportCollapse")&&1==r.projectConfiguration.getConfig("calendarCollapse")},doScrollEvent:function(e){r.story.Block.prototype.doScrollEvent.call(this,e);var t=this.frameEl.find(".perso-calendar-month");this.supportBlockCollapse&&this.collapseHelper.scrollEvent(this,t,e)},updateAriaLabelText:function(e){var s=this,o=l(e),e=s.frameEl.find(".perso-clickable-calendar-row");o&&o.length&&e.toArray().forEach(function(e,t){e=l(e);e.hasClass("perso-selected")?o.attr("aria-label",s.texts.accessibilityTexts.accessibilitySelected+", "+s.ariaLabelsTextsMap[t]):e.attr("aria-label",s.ariaLabelsTextsMap[t])})},getAriaLablesTextMap:function(e){var t=this,e=l(e),s=[];return e&&e.length&&e.toArray().forEach(function(e){e=l(e),e=t.processingAccessibilityText(e.attr("aria-label"));s.push(e)}),s},processingAccessibilityText:function(e){if(e)return e.split(/\r?\n/).map(function(e){return e.trim()}).filter(function(e){return e.length}).join(",")},keyUpEvent:function(e){var t=this.story.uxCtrl.getPersoneticsWrapper(),s=".pstory-block-frame .pstory-block-content",o=t.find(s),n=l(this.frameEl.find(".pstory-block-content")),r=t.find(s).index(n),i=this.frameEl.find(".perso-calendar-row.perso-clickable-calendar-row"),a=this.frameEl.find(".perso-calendar-row.perso-clickable-calendar-row.perso-selected");switch(e.which){case 39:a.index()-1!=this.lastItemClicked.index()-1?(0==(this.lastItemClicked=a).next(".perso-calendar-row.perso-clickable-calendar-row").length?i[i.length-1]:a.next()).focus():l(e.target).next(".perso-calendar-row.perso-clickable-calendar-row").length?l(e.target).next().focus():n.get(0)==e.target?i[0].focus():this.frameEl.find(".perso-calendar-inlined").get(0)==e.target?(a.next(".perso-calendar-row.perso-clickable-calendar-row").length?a.next(".perso-calendar-row.perso-clickable-calendar-row"):a).focus():0==l(e.target).next(".perso-calendar-row.perso-clickable-calendar-row").length?o[r+1].focus():a.index()==i.length&&i[i.length-1].focus();break;case 37:(a.index()-1!=this.lastItemClicked.index()-1?(this.lastItemClicked=a).prev(".perso-calendar-row").length?a.prev(".perso-calendar-row"):a:n.get(0)==e.target?o[r-1]:l(e.target).prev(".perso-calendar-row.perso-clickable-calendar-row").length?l(e.target).prev():this.frameEl.find(".perso-calendar-inlined").get(0)==e.target?a.prev(".perso-calendar-row.perso-clickable-calendar-row").length?a.prev(".perso-calendar-row.perso-clickable-calendar-row"):a:n).focus();break;case 13:case 32:l(e.target).click(),this.frameEl.find(".perso-calendar-inlined").focus()}},bindEvents:function(){r.story.Block.prototype.bindEvents.call(this);var t=this;l(".perso-clickable-calendar-row").click(function(e){e.preventDefault();t.setSelectedRow(e.currentTarget),t.updateAriaLabelText(l(e.currentTarget)),t.onInputClick(e,this)})},setTransactionTypeClass:function(e){var t={};return e.forEach(function(e){e.type||(e.type="Unidentified"),t[e.type]=!0}),Object.prototype.hasOwnProperty.call(t,"In")?Object.prototype.hasOwnProperty.call(t,"Out")?"perso-type-both":Object.prototype.hasOwnProperty.call(t,"Unidentified")?"perso-type-semi-in":"perso-type-in":Object.prototype.hasOwnProperty.call(t,"Out")?Object.prototype.hasOwnProperty.call(t,"Unidentified")?"perso-type-semi-out":"perso-type-out":""},getCalendarCatalogConfigs:function(){return{setCalendarTransactionType:!1,setCalendarRoundedEdges:!1}},updateCalendarConfigsFromProject:function(){"boolean"==typeof r.projectConfiguration.getConfig("setCalendarTransactionType")&&(this.calendarConfigs.setCalendarTransactionType=r.projectConfiguration.getConfig("setCalendarTransactionType")),"boolean"==typeof r.projectConfiguration.getConfig("setCalendarRoundedEdges")&&(this.calendarConfigs.setCalendarRoundedEdges=r.projectConfiguration.getConfig("setCalendarRoundedEdges"))}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,a,l){a.story=a.story||{},a.story.PBlockSessionManager=Base.extend({initialize:function(e){this.story=e,this.blockProcessorManager=PBlockProcessorManager.getInstance(),this.BlockMappingUtility=a.story.PBlockMappingUtility;var t=e.options,e={story:e.storyDef,texts:e.texts,externalParams:e.cfg.params,facts:e.cfg.data||e.cfg.insightFacts,expressions:e.expressions,customizationOptions:t};this.blockProcessorManager.start(e),this.dialogsToBlocksMap={},this.processedData=[]},reset:function(){this.processedData=[]},resetDialog:function(e){Object.prototype.hasOwnProperty.call(this.dialogsToBlocksMap,e)&&(this.dialogsToBlocksMap[e]=[])},startBlock:function(e,t,s,o){Object.prototype.hasOwnProperty.call(this.dialogsToBlocksMap,e)||(this.dialogsToBlocksMap[e]=[]);o=this.blockProcessorManager.processBlockConfig(e,o);if(this.BlockMappingUtility.isTypeExist(o.type)&&!this.BlockMappingUtility.isSubTypeExist(o.type,o.subType)&&(n=this.BlockMappingUtility.getDefaultSubType(o.type),o.subType=n,s.subType=n),a.utils.persoValidator.isXssScriptDetected(JSON.stringify(o)))throw"XSS script was detected";var n=a.story.PBlockFactory.createBlock(this,o,this.story);this.dialogsToBlocksMap[e].push({dlgId:e,config:s,layoutInstructions:o,renderer:n}),n.initBlock()},renderBlocks:function(e,o,n){if(!Object.prototype.hasOwnProperty.call(this.dialogsToBlocksMap,e))throw"Invalid dialog id '"+e+"'";var t,r=this,i=!0;l.each(this.dialogsToBlocksMap[e],function(e,t){"buttons"===t.config.type&&(i?i=!1:t.layoutInstructions.class=t.layoutInstructions.class+" perso-secondary");var s=t.renderer,t=t.layoutInstructions;n&&0==e&&s.setIsFirstBlock(!0),r.processedData.push(t),s.beforeRender(o,t),s.render(o,t),s.afterRender(o,t),s.bindEvents()}),i||(t=0,(e=o.find(".pstory-block-buttons-navigateTo")).each(function(){t=Math.max(t,a.utils.string.textWidth(l(this).find("a").text()))}),e.each(function(){l(this).find("a").width(t)})),s.setProcessorData&&s.setProcessorData(this.processedData)},findBlock:function(e){var o=e.rendererObj,n=null;return l.each(this.dialogsToBlocksMap,function(e,t){if(l.each(t,function(e,t){var s=t.renderer;if(o==s)return n=t,!1}),n)return!1}),n},notifyEvent:function(e,t,s){switch(t){case"doNavigateToPage":this.doNavigateToPage(s);break;case"setSelectedValue":this.setSelectedValue(e,s);break;case"actionEvent":this.actionEvent(e,s);break;case"autoRefresh":this.autoRefresh();break;case"partialRefresh":this.partialRefresh(e)}},autoRefresh:function(){this.story.refreshStory()},partialRefresh:function(e){e=this.findBlock({rendererObj:e});this.story.fireEvent(e)},setSelectedValue:function(e,t){var s=this.findBlock({rendererObj:e});this.blockProcessorManager.setBlockVarValue(s.config,t),this.partialRefresh(e)},doNavigateToPage:function(e){var t=personetics.getJSBridge();t&&l.isFunction(t.navigateToPage)?t.navigateToPage(e):a.log("Events Delegate not defined")},actionEvent:function(e,t){this.setSelectedValue(e,t.context);var t=this.blockProcessorManager.getAction(t),s=(delete t.actionId,{requestString:"navigateToPage"});Object.prototype.hasOwnProperty.call(t,"payload")?s.data=t.payload:s.data={},Object.prototype.hasOwnProperty.call(t,"actionType")&&(s.requestString="callPersoneticsAPI"==t.actionType?"callPersoneticsAPI":s.requestString,s.data.actionType=t.actionType),Object.prototype.hasOwnProperty.call(s,"data")&&Object.prototype.hasOwnProperty.call(s.data,"payload")&&(t=s.data.payload,delete s.data.payload,s.data.payload=t),this.widgetEvent(e,s)},widgetEvent:function(e,t){var s=personetics.getJSBridge();s&&l.isFunction(s.widgetEvent)?s.widgetEvent(e,t):a.log("Events Delegate not defined")},setVisible:function(e,s){Object.prototype.hasOwnProperty.call(this.dialogsToBlocksMap,e)&&l.each(this.dialogsToBlocksMap[e],function(e,t){t.renderer.setVisible(s)})},resetVariables:function(e){this.blockProcessorManager.resetVariables(e)},getModel:function(){return this.blockProcessorManager.getModel()},handleEvent:function(){var s=arguments;l.each(this.dialogsToBlocksMap,function(e,t){l.each(t,function(e,t){t.renderer.handleEvent(s)})})}})}(window,window.Personetics=window.Personetics||{},jQuery),function(r,i){r.story=r.story||{},r.story.EntitySelectorBlock=r.story.OptionsBlock.extend({$selectors:function(){return{$persoBtn:".perso-btn",$persoBtnClass:"perso-btn",$persoDotItem:".perso-dot-item",$ESCarouselWrapper:".perso-carousel-inner-wrapper",$carouselContainer:"#carouselContainer",$persoItem:".perso-item",$nextArrow:"#right.perso-btn",$previousArrow:"#left.perso-btn",$persoCarouserWrapper:".perso-new-carousel-wrapper",$persoAccessibilityItem:".perso-accessibility-item",$persoDotsList:".perso-dots-list",$persoEntityImg:".entity-img",$persoAccessibilityWrapper:".perso-accessibility-wrapper .perso-accessibility-read",$persoItemElm:"perso-item",$persoCategoryText:".entity-text2",$persoEntityText:".entity-text",$persoDialogFrame:".pstory-dialog-frame",$persoEntityBlock:".pstory-block-entity-selector"}},getEntityListDefaultConfig:function(){return{catalogNumber:1,defaultAssetName:r.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-selector/defaultAssetName","category-default"),defaultAssetDirectory:r.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-selector/defaultAssetDirectory","category_icons"),defaultAssetExtension:r.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-selector/defaultIconExtension","svg"),configOptions:{supportCollapse:!0,useAnimationsInPrecentage:!0,showIconProgressBar:!0,alertThreshold:.5},carouselOptions:{endlessCarousel:!1,showIndicator:!0,isSwipeable:!0,isDotsClickAble:!0}}},getEntityListCatalogConfig:function(){return{}},getEntityListProjectConfig:function(e){var t=r.projectConfiguration.getConfig("storyBlocksConfigurations/entity-selector")||{};return Object.prototype.hasOwnProperty.call(t,e)?t[e]:{}},getEntityListConfig:function(e){var t={},t=r.utils.persoHelper.deepObjectExtend(t,this.getEntityListDefaultConfig(),!0),e=(t=r.utils.persoHelper.deepObjectExtend(t,this.getEntityListCatalogConfig(),!0),t=r.utils.persoHelper.deepObjectExtend(t,this.getEntityListProjectConfig(e),!0),{configOptions:{supportCollapse:1==r.projectConfiguration.getConfig("supportCollapse")&&1==r.projectConfiguration.getConfig("entitySelectorCollapse")&&1==t.configOptions.supportCollapse}});return t=r.utils.persoHelper.deepObjectExtend(t,e,!0)},initialize:function(e,t,s){this.selectors=this.$selectors(),this.texts=this.getTexts(),this.config=this.getEntityListConfig(t.subType),r.story.OptionsBlock.prototype.initialize.call(this,e,t,s)},getTexts:function(){return{accessibilityEntitySelector:r.dictionary.getText("accessibilityEntitySelector"),accessibilityESNextButton:r.dictionary.getText("accessibilityESNextButton"),accessibilityESPreviousButton:r.dictionary.getText("accessibilityESPreviousButton"),accessibilityOutOfText:r.dictionary.getText("accessibilityOutOfTxt"),accessibilitySelected:r.dictionary.getText("accessibilitySelected")}},getHtmlTemplateId:function(){return"entity-selector-"+this.layoutInstructions.subType},getTemplate:function(e){var t=new r.story.PCtrlBase,s="pstory-block-entity-selector-"+this.layoutInstructions.subType+"-es"+this.config.catalogNumber;return t.getTemplateHtml(s,e)},beforeRender:function(e,t){r.story.OptionsBlock.prototype.beforeRender.call(this,e,t),this.browserData=r.utils.persoBrowserDetector.getBrowserData(),this.layoutInstructions.assetExtension=this.layoutInstructions.fileType||this.config.defaultAssetExtension,this.layoutInstructions.assetDirectory=this.layoutInstructions.directory||this.config.defaultAssetDirectory,this.lastItemInView=0,this.layoutInstructions.catalogClass="perso-ES"+this.config.catalogNumber+"-"+this.layoutInstructions.subType+"-block",this.isRTLMode=r.processor.PStoryConfig.isRtl()},render:function(e){r.story.OptionsBlock.prototype.render.call(this,e),this.frameEl=e;e=this.getTemplate(this.layoutInstructions),e={el:this.frameEl.find(this.selectors.$ESCarouselWrapper),numberOfItems:this.layoutInstructions.options.length,config:this.getCarouselConfigs(),template:e,firstCreateCarousel:!0};this.callPersoCarousel(e)},afterRender:function(){var e;this.callCollapseOnce=!0,this.isEntityFirstElm=i(this.selectors.$persoDialogFrame).first().find(this.selectors.$persoEntityBlock).length,this.config.configOptions.supportCollapse&&(e=this.getCollapseParams(),this.collapseHelper=r.story.BlockChartFactory.generateHelperClazz("collapseHelper",e)),this.frameEl&&(this.doScrollEvent(!0),this.callCollapseOnce=!1),this.setDefaultSelected(),this.updateButtonsAndWrapperAccessibility(),this.updateEntityAccessibility()},getCarouselConfigs:function(){var e=this.config.carouselOptions;return r.utils.persoHelper.deepObjectExtend({defaultItem:this.getDefaultItem()},e,!0)},getCatalogClass:function(){},getDefaultItem:function(){var s=-1;return this.layoutInstructions.options.some(function(e,t){if(e.selected)return s=t,!0}),s+1},callPersoCarousel:function(e){var t=r.utils.PersoCarousel;t&&t.createCarousel(e)},bindEvents:function(){r.story.Block.prototype.bindEvents.call(this),this.onEntityMovement&&(i(this.frameEl).on("click",this.selectors.$persoBtn,r.bind(this,this.onEntityMovement)),this.getCarouselConfigs().isDotsClickAble&&i(this.frameEl).on("click",this.selectors.$persoDotItem,r.bind(this,this.onEntityMovement)),this.getCarouselConfigs().isItemsClickAble&&i(this.frameEl).on("click",this.selectors.$persoItem,r.bind(this,this.onEntityMovement)),this.getCarouselConfigs().isSwipeable&&i(this.frameEl).find(this.selectors.$ESCarouselWrapper).swipe(r.bind(this,this.onEntityMovement))),this.handleESAssets()},handleESAssets:function(){var t=this,e=t.frameEl.find(this.selectors.$persoEntityImg);e.on("load",function(){t.remoteAssetsMgr.finishedLoading(this)}),e.on("error",function(){var e=i(this).data(t.defaultAssetConfig.loadingAssetTriesAttrName);e&&e>t.defaultAssetConfig.loadingAssetMaxTries?t.fallbackAsset(this):(e=t.localBaseUrl+"/"+t.config.defaultAssetDirectory+"/"+t.config.defaultAssetName+"."+t.config.defaultAssetExtension,t.remoteAssetsMgr.setDefaultAsset(this,e),t.remoteAssetsMgr.setAssetLoadingTriesAttr(this))})},setSelectedEntity:function(){var e=this.getViewedElIndex(),t=this.frameEl.find(this.selectors.$persoItem),t=(t.removeClass("perso-selected"),t[e]);i(t).addClass("perso-selected")},onEntityMovement:function(e){var t,s=this,o=this.getViewedElIndex(),n=this.layoutInstructions.options[o];n&&o!==this.lastItemInView&&(t={},"click"===(e=e||event).type?i(e.target).hasClass(this.selectors.$persoBtnClass)?t.type="entitySelectorChevron":t.type="entitySelectorClick":t.type="entitySelectorSwipe",t.value=n.id,this.parent.notifyEvent(this,"setSelectedValue",n),this.notifyReportEvent(t),this.lastItemInView=o,this.updateEntityAccessibility(),setTimeout(function(){r.utils.accessibility.putFocus(i(s.frameEl.find(s.selectors.$persoAccessibilityItem)[o]))},500))},getViewedElIndex:function(){var e,t=this.frameEl.find(this.selectors.$carouselContainer);return e=t&&t.length?parseInt(i(t).attr("data-perso-item-viewed"))||0:e},doScrollEvent:function(e){var t;!this.supportBlockCollapse||this.isEntityFirstElm&&!this.callCollapseOnce||(t=this.frameEl.find(this.selectors.$ESCarouselWrapper),this.collapseHelper.scrollEvent(this,t,e))},getCollapseParams:function(){return{el:this.frameEl,type:this.layoutInstructions.type,uxCtrl:this.story.uxCtrl,height:this.frameEl.height()}},onUnCollapsed:function(e){e.css("top",0)},setDefaultSelected:function(){var e=this.layoutInstructions.options.filter(function(e){return e.selected});e&&0!=e.length||(e=this.layoutInstructions.options[0],this.parent.notifyEvent(this,"setSelectedValue",e))},updateEntityAccessibility:function(){r.utils.accessibility.removeFocusAttr(this.frameEl.find(this.selectors.$persoAccessibilityItem));var e=this.getViewedElIndex(),t=this.layoutInstructions.options.length,s=i(this.frameEl.find(this.selectors.$persoAccessibilityItem)[e]),t=e+1+" "+this.texts.accessibilityOutOfText+" "+t+", "+this.texts.accessibilitySelected+", "+this.getAccessibilityEntityText(e)+".",t=(s.attr({"aria-label":t,role:"text"}),i(this.frameEl.find(this.selectors.$persoAccessibilityWrapper)));0!==e?t.attr("aria-hidden","true"):t.attr("aria-hidden","false"),r.utils.accessibility.putFocusAttr(s)},getAccessibilityEntityText:function(e){e=this.layoutInstructions.options[e];return(e.text||"")+" "+(e.text3||"")+" "+(e.text2||"")+", "+(e.text4||"")},updateButtonsAndWrapperAccessibility:function(){r.utils.accessibility.addAltTextToElement(this.frameEl.find(this.selectors.$ESCarouselWrapper),this.texts.accessibilityEntitySelector),this.frameEl.find(this.selectors.$carouselContainer).attr("role","none"),this.frameEl.find(this.selectors.$persoDotsList).attr("role","none"),this.frameEl.find(this.selectors.$nextArrow).attr("aria-label",this.texts.accessibilityESNextButton),this.frameEl.find(this.selectors.$previousArrow).attr("aria-label",this.texts.accessibilityESPreviousButton)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,c){s.story=s.story||{},s.story.EntitySelectorIconsBlock=s.story.EntitySelectorBlock.extend({$selectors:function(){var e=s.story.EntitySelectorBlock.prototype.$selectors.call(this);return s.utils.persoHelper.deepObjectExtend({$iconsText:".pstory-entity-details",$persoBtn:"perso-btn",$persoBtnLeft:"#left.perso-btn",$persoBtnRight:"#right.perso-btn",$persoNewCarouselWrapper:".perso-new-carousel-wrapper",$persoItem:"perso-item",$persoSelectedItem:".perso-item.perso-selected",persoMainCircle:"perso-main-circle",persoPartialCircle:"perso-partial-circle",$persoPartialCircle:".perso-partial-circle",persoPartialRectangle:"perso-partial-rectangle",$persoPartialRectangle:".perso-partial-rectangle",pstoryEntityIconIndicator:"pstory-entity-icon-indicator",$pstoryEntityIconIndicator:".pstory-entity-icon-indicator",persoAboveThreshold:"perso-above-threshold",$pstoryEntitySelectorItemIcon:".pstory-entity-selector-item .pstory-entity-icon",$pstoryEntitySelectorItem:".pstory-entity-selector-item",persoAntiClockwise:"perso-anti-clockwise",persoDesktop:"perso-desktop",persoTablet:"perso-tablet",persoFillOver:"perso-fill-over",full:"full",mainIndicator:"mainIndicator",partialIndicator:"partialIndicator",main:"main",partial:"partial",$persoIcons:".perso-carousel-inner-wrapper.perso-icons",$persoDotItem:".perso-dot-item",$persoDotsList:".perso-dots-list"},e,!0)},getEntityListDefaultConfig:function(){var e=s.story.EntitySelectorBlock.prototype.getEntityListDefaultConfig.call(this);return s.utils.persoHelper.deepObjectExtend(e,{configOptions:{selectedIndicatorSize:30,selectedIndicatorRadius:28,indicatorFillDirectionAntiClockWise:!1,visibleIcons:3},carouselOptions:{howItemsEdges:!1,isItemsClickAble:!0,displayManyItems:!0,centerSelectedElement:!0,fontSize:10,itemSize:"4.5em",selectedItemSize:"6.8em"}},!0)},beforeRender:function(e,t){s.story.EntitySelectorBlock.prototype.beforeRender.call(this,e,t)},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&(s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoEntityText),"perso-theme-brandColor-color"),s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoDotsList),"perso-theme-brandColor-dot-selected-background"),s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$pstoryEntitySelectorItem),"perso-theme-brandColor-progress-bar-background")),personetics.config.theme.alertColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$pstoryEntitySelectorItem),"perso-theme-alertColor-progress-bar-background"),personetics.config.theme.datesColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCategoryText),"perso-theme-datesColor-color"),personetics.config.theme.backgroundColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoIcons+","+this.selectors.$persoItem),"perso-theme-backgroundColor-background"),personetics.config.theme.greyLightColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoDotItem),"perso-theme-greyLightColor-background"))},setThemeClassesIndicator:function(){personetics.config.theme&&personetics.config.theme.greyLightColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$pstoryEntitySelectorItemIcon),"perso-theme-greyLightColor-indicator-stroke-color")},afterRender:function(e){s.story.EntitySelectorBlock.prototype.afterRender.call(this,e),this.entityIcons=e.find(this.selectors.$pstoryEntitySelectorItemIcon),this.doWhenEntityMovment(),this.addIconsAccessibility(),this.bindEvents(),this.prepareIconIndicator(),this.setThemeClasses()},onEntityMovement:function(){var e=this,t=event;setTimeout(function(){e.onEntityMovementAnimate(),e.setThemeClasses(),s.story.EntitySelectorBlock.prototype.onEntityMovement.call(e,t)},200)},doWhenEntityMovment:function(){var e=this.getViewedElIndex();this.setSelectedEntity(e),this.setText(e)},setSelectedEntity:function(e){var t=this.frameEl.find(this.selectors.$persoItem),t=(t.removeClass("perso-selected"),t[e]);c(t).addClass("perso-selected")},setText:function(e){var e=this.layoutInstructions.options[e],t="";e.text&&(t+='<div class="entity-text">'+e.text+"</div>"),e.text2&&(t+='<div class="entity-text2">'+e.text2+"</div>"),this.frameEl.find(this.selectors.$iconsText).html(t)},addIconsAccessibility:function(){s.utils.accessibility.removeFocusAttr(this.frameEl.find(this.selectors.$iconsText))},getAccessibilityEntityText:function(e){e=this.layoutInstructions.options[e];return(this.extractHtmlText(e.text)||"")+(this.extractHtmlText(e.text2)||"")},extractHtmlText:function(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent||t.innerText},onEntityMovementAnimate:function(){var e=this.getViewedElIndex();this.doWhenEntityMovment(),this.renderNextHiddenIconIndicator(e)},renderNextHiddenIconIndicator:function(){for(var e=this.entityIcons,t=0;t<e.length;t++){var s=e.get(t);!s.classList.contains(this.selectors.persoFillOver)&&this.isBlockPositionInCarouselViewport(c(s))&&this.prepareIconIndicator(t)}},isBlockPositionInCarouselViewport:function(e){var t=e.parents().find(this.selectors.$persoNewCarouselWrapper),s=t.find(this.selectors.$persoBtnLeft).get(0).getBoundingClientRect().right,t=t.find(this.selectors.$persoBtnRight).get(0).getBoundingClientRect().left,o=c(e).offset().left,e=o+c(e).get(0).getBoundingClientRect().width;return this.isRTLMode?t<o&&e<s||this.entityIcons.length<=1:s<o&&e<t||this.entityIcons.length<=1},getPercentageShape:function(){},getPercentageShapeFunctions:function(){return{circle:{main:this.renderIndicatorMainCircle,partial:this.renderIndicatorPartialCircle},rectangle:{main:this.renderIndicatorMainRectangle,partial:this.renderIndicatorPartialRectangle}}},prepareIconIndicator:function(e){var s=this.entityIcons,o=this.layoutInstructions.options,n=this.browserData.deviceType===this.selectors.persoDesktop||this.browserData.deviceType===this.selectors.persoTablet,r=this.config.configOptions,i=this.getValueByScreenWidth(r.selectedIndicatorSize,n),a=this.getValueByScreenWidth(r.selectedIndicatorRadius,n),l=this;0<=e?this.renderIconIndicator(e,this.selectors.partialIndicator,{icons:s,ignoreRatio:n,config:r,size:i,radius:a,entityOptions:o}):setTimeout(function(){for(var e=0;e<s.length;e++){var t=c(s[e]);l.isBlockPositionInCarouselViewport(t)?l.renderIconIndicator(e,l.selectors.full,{icons:s,ignoreRatio:n,config:r,size:i,radius:a,entityOptions:o}):l.renderIconIndicator(e,l.selectors.mainIndicator,{icons:s,ignoreRatio:n,config:r,size:i,radius:a,entityOptions:o})}l.setThemeClassesIndicator()},200)},renderIconIndicator:function(e,t,s){var o=s.icons.get(e),n=2*Math.PI*s.radius,r=c(o),i=this.selectors,e=this.getSpendingPercentage(e,s)||0,a=this.setIndicatorStrokeDashOffset(e,n),l=this.getPercentageShapeFunctions()[this.getPercentageShape()];e>s.config.alertThreshold&&r.addClass(i.persoAboveThreshold),l&&(t===i.full?(l[i.main]&&this.getPercentageShapeFunctions()[this.getPercentageShape()][i.main].call(this,o,i,s.size,s.radius),l[i.partial]&&this.getPercentageShapeFunctions()[this.getPercentageShape()][i.partial].call(this,o,i,e,s.size,s.radius,n,a)):t===i.mainIndicator?l[i.main]&&this.getPercentageShapeFunctions()[this.getPercentageShape()][i.main].call(this,o,i,s.size,s.radius):l[i.partial]&&this.getPercentageShapeFunctions()[this.getPercentageShape()][i.partial].call(this,o,i,e,s.size,s.radius,n,a)),!0===s.config.indicatorFillDirectionAntiClockWise&&r.parent().addClass(i.persoAntiClockwise)},renderIndicatorMainCircle:function(e,t,s,o){d3.select(e).append("svg").attr("class",t.pstoryEntityIconIndicator).append("circle").attr("class",t.persoMainCircle).attr("cx",s).attr("cy",s).attr("r",o)},renderIndicatorMainRectangle:function(e,t){c(e).append('<div class="'+t.pstoryEntityIconIndicator+'"></div>')},renderIndicatorPartialCircle:function(t,s,e,o,n,r,i){d3.select(t).select("svg").append("circle").attr("class",s.persoPartialCircle).attr("cx",o).attr("cy",o).attr("r",n).attr("stroke-dashoffset",r).attr("stroke-dasharray",r),this.config.configOptions.useAnimationsInPrecentage?setTimeout(function(){var e=c(t).find(s.$persoPartialCircle).get(0);e.style["stroke-dashoffset"]=i,e.style.transition="stroke-dashoffset 1s linear"},0):c(t).find(s.$persoPartialCircle).css("stroke-dashoffset",i),c(t).addClass(s.persoFillOver)},renderIndicatorPartialRectangle:function(t,s,o){var e=c(t).find(s.$pstoryEntityIconIndicator);0<e.length&&(c(e).append('<div class="'+s.persoPartialRectangle+'"></div>'),this.config.configOptions.useAnimationsInPrecentage?setTimeout(function(){var e=c(t).find(s.$persoPartialRectangle).get(0);c(e).width(100*o+"%")},0):c(t).find(s.$persoPartialRectangle).width(100*o+"%"),c(t).addClass(s.persoFillOver))},setIndicatorStrokeDashOffset:function(e,t){return t-t*e},getSpendingPercentage:function(e,t){if(e<t.entityOptions.length&&t.entityOptions[e].spendingPercentage)return t.entityOptions[e].spendingPercentage},getValueByScreenWidth:function(e,t){var s=this.story.uxCtrl;return t?e:s.getValueByScreenWidth(e)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(t,i){t.story=t.story||{},t.story.EntitySelectorCardsBlock=t.story.EntitySelectorBlock.extend({$selectors:function(){var e=t.story.EntitySelectorBlock.prototype.$selectors.call(this);return t.utils.persoHelper.deepObjectExtend({$spendingPercentageFiller:".spending-percentage-filler",$spendingPercentage:".spending-percentage",$persoCenterText:".entity-center-text",$persoEntityText:".entity-center-text .entity-text",$persoEntityText3:".entity-center-text .entity-text3",$persoRemainingText:".entity-text4",$persoESItem:".pstory-entity-selector-item",$persoESDots:".pstory-block-entity-selector .perso-dot-item:not(.perso-selected)",$persoESDotsSelected:".pstory-block-entity-selector .perso-dot-item.perso-selected",$persoEntitySpendingPrecentage:".entity-spending-percentage",$persoEntityIcon:".pstory-entity-icon"},e,!0)},getEntityListDefaultConfig:function(){var e=t.story.EntitySelectorBlock.prototype.getEntityListDefaultConfig.call(this);return t.utils.persoHelper.deepObjectExtend(e,{configOptions:{spendingPercentageColor:"rgba(214, 214, 218, 1)",spendingPercentageFillColor:"rgba(44, 55, 95, 1)",spendingPercentageAlertFillColor:"rgba(238, 164, 211, 1)"},carouselOptions:{showItemsEdges:!1}},!0)},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&(t.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCenterText+","+this.selectors.$persoEntityText+","+this.selectors.$persoEntityText3),"perso-theme-brandColor-color"),t.utils.persoTheming.addClassToElement(this.frameEl,"perso-theme-brandColor-selected-dot-background")),personetics.config.theme.datesColor&&(t.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoRemainingText),"perso-theme-datesColor-color"),t.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCategoryText),"perso-theme-datesColor-color")),personetics.config.theme.backgroundColor&&t.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoESItem),"perso-theme-backgroundColor-background"),personetics.config.theme.greyLightColor&&t.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoESDots+","+this.selectors.$persoEntitySpendingPrecentage),"perso-theme-greyLightColor-background"),personetics.config.theme.backgroundDarkColor&&t.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoEntityIcon),"perso-theme-backgroundDarkColor-background"))},afterRender:function(e){this.setThemeClasses(),this.fillSpendingPercentage(),t.story.EntitySelectorBlock.prototype.afterRender.call(this,e)},onEntityMovement:function(){this.fillSpendingPercentage(),t.story.EntitySelectorBlock.prototype.onEntityMovement.call(this)},fillSpendingPercentage:function(){var e,t,s,o,n,r;this.config.configOptions.showIconProgressBar&&(e=this.frameEl.find(this.selectors.$spendingPercentageFiller),t=this.getViewedElIndex(),s=this.layoutInstructions.options[t].spendingPercentage||0,o=this.config.configOptions.spendingPercentageColor,n=this.config.configOptions.spendingPercentageFillColor,r=this.config.configOptions.spendingPercentageAlertFillColor,personetics.config.theme&&(n=personetics.config.theme.pickerColor||n,r=personetics.config.theme.alertColor||r,o=personetics.config.theme.greyLightColor||o),n=s<=this.config.configOptions.alertThreshold?n:r,0!=s&&(r=100*s,i(e[t]).css({background:"linear-gradient(to right, "+n+" "+r+"%, "+o+" "+r+"%)"}),this.config.configOptions.useAnimationsInPrecentage&&i(e[t]).css({animation:"persoFillerRight 1s ease-in-out","-webkit-animation":"persoFillerRight 1s ease-in-out"})))}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(a,l){a.story=a.story||{},a.story.TriviaBlock=a.story.Block.extend({getHtmlTemplateId:function(){return"trivia"},$selectors:function(){return{$persoTriviaFrameContainer:".pstory-container.perso-trivia-frame-container",$persoTriviaFrame:".pstory-dialog-frame",$persoTriviaId:"#perso-"+this.layoutInstructions.id,$persoAnswerWrappers:".perso-answers-wrapper",$persoAnswer:".perso-answer",$persoTriviaPageIndex:".perso-trivia-page-index",$persoAanswerIcon:".perso-answer-icon",$persoAnswerText:".perso-answer-text",$persoTriviaQuestion:".perso-trivia-question",$persoTriviaQuestionText:".perso-question-text",$persoAnswerCorrect:"perso-answer-correct",$persoAnswerIncorrect:"perso-answer-incorrect",$persoAnswerTextIncorrect:"perso-answer-text-incorrect",$persoTriviaAnimateOut:"perso-trivia-animate-out",$persoTriviaAnimateIn:"perso-trivia-animate-in",$persoAnswerTransparentIcon:"perso-answer-transparent-icon",$persoSelected:"perso-selected",$persoTrivia:"perso-trivia",$persoSelectedAnswer:".perso-answer.perso-selected",$persoTriviaFrameContainerAnimated:"perso-trivia-frame-container-animated",$persoTriviaButton:".perso-trivia-button .pstory-button",$persoTriviaButtonContainer:".perso-trivia-button",$persoResultPageFrame:".perso-result-page-frame",$persoResultPageH2Text:".perso-result-page-frame .pstory-block-text .pstory-block-content",$persoAnswersContainer:".perso-answers-container"}},getTexts:function(){return{page:a.dictionary.getText("accessibilityPage"),answer:a.dictionary.getText("accessibilityAnswer"),doubleTab:a.dictionary.getText("accessibilityTriviaAnswerDoubleTab"),of:a.dictionary.getText("lblOf"),selected:a.dictionary.getText("accessibilitySelected"),incorrectAnswer:a.dictionary.getText("accessibilityInCorrect"),correct:a.dictionary.getText("accessibilityCorrect")}},triviaConfig:function(){return{timeOuts:{displayNextTrivia:2e3,displayCorrectAnswer:500,moveFocusToQuestions:350},eventKeys:{triviaCorrectAnswer:"triviaCorrect",triviaWrongAnswer:"triviaIncorrect"}}},initUiSelectors:function(e){var t=[];e.length&&(this.$answersWrapper=l(this.el).find(this.selectors.$persoAnswerWrappers),this.$question=l(this.el).find(this.selectors.$persoTriviaQuestion));for(var s=0;s<this.$answersWrapper.length;s++)t.push(l(this.$answersWrapper[s]).find(this.selectors.$persoAnswer));this.$answers=t},beforeRender:function(e,t){a.story.Block.prototype.beforeRender.call(this,e,t),this.isTriviaRTLMode=a.processor.PStoryConfig.isRtl(),this.selectors=this.$selectors(),this.triviaConfig=this.triviaConfig(),this.triviaCatalogConfig=this.getTriviaConfigs(),this.updateTriviaCatalogConfigFromProject(),this.texts=this.getTexts(),this.triviaCatalogConfig.showPaginationAsIndicators&&this.isDataForPagination()&&(t.indicators=this.createPaginationData(),t.showPagination=!0),this.answers=t.answers,this.browserData=a.utils.persoBrowserDetector.getBrowserData()},render:function(e,t){this.el=e,a.story.Block.prototype.render.call(this,e,t)},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&a.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoAnswerText),"perso-theme-brandColor-color"),personetics.config.theme.backgroundColor&&a.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoAnswersContainer),"perso-theme-backgroundColor-background"),personetics.config.theme.greyLightColor&&a.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoAnswersContainer),"perso-theme-greyLightColor-answer-bottom-border-color"),personetics.config.theme.backgroundDarkColor&&a.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoAnswerWrappers),"perso-theme-backgroundDarkColor-selected-answer-background"))},afterRender:function(e){var t=l(e);a.story.Block.prototype.afterRender.call(this,e),this.setContainerClass(t),this.initUiSelectors(t),this.renderAccessibility(t),this.setTriviaQuestionAnimation(t),this.setThemeClasses()},bindEvents:function(){l(this.selectors.$persoTriviaId).on("click",this.selectors.$persoAnswer,a.bind(this,this.onAnswerButtonClicked))},setTriviaQuestionAnimation:function(e){var t=this,s=e.parents(this.selectors.$persoTriviaFrameContainer);setTimeout(function(){s.addClass(t.selectors.$persoTriviaFrameContainerAnimated)},0)},onAnswerButtonClicked:function(e){var t=l(e.currentTarget).parent().index(),s=l(e.currentTarget).find(this.selectors.$persoAanswerIcon),e=l(e.currentTarget).attr("data-val"),o=this.getCorrectAnswer(),n={};this.disableAnswers(),n.value=this.layoutInstructions.id,e.length&&"1"===e?(this.setCorrectAnswer(s,t),n.type=this.triviaConfig.eventKeys.triviaCorrectAnswer):(this.setWrongAnswer(s,t),n.type=this.triviaConfig.eventKeys.triviaWrongAnswer),this.addWrongAnswersClass(o),this.displayNextDialog(t,n)},addWrongAnswersClass:function(s){var o=this;o.$answers.forEach(function(e,t){t!==s&&e.find(o.selectors.$persoAnswerText).addClass(o.selectors.$persoAnswerTextIncorrect)})},setCorrectAnswer:function(e,t){e&&e.length&&(e.addClass(this.selectors.$persoAnswerCorrect),this.updateAccessibilityCorrectAnswer(t))},setWrongAnswer:function(e,t){var s;e&&e.length&&(e.addClass(this.selectors.$persoAnswerIncorrect),s=this.getCorrectAnswer(),this.updateAccessibilityWrongAnswer(s,t),this.displayCorrectAnswer(s,t,e))},updateAccessibilityCorrectAnswer:function(e){this.$answers[e].attr("aria-label",this.texts.selected+". "+this.texts.correct),this.$answers[e].addClass(this.selectors.$persoSelected),a.utils.accessibility.putFocus(this.selectors.$persoSelectedAnswer)},updateAccessibilityWrongAnswer:function(e,t){this.$answers[t].attr("aria-label",this.texts.selected+". "+this.texts.incorrectAnswer),this.$answers[t].addClass(this.selectors.$persoSelected),a.utils.accessibility.putFocus(this.selectors.$persoSelectedAnswer)},displayNextDialog:function(e,t){var s=this,o=s.answers[e];setTimeout(function(){s.parent.notifyEvent(s,"setSelectedValue",o),s.notifyReportEvent(t),s.moveDialog()},this.triviaConfig.timeOuts.displayNextTrivia)},displayCorrectAnswer:function(e,t,s){var o=this;setTimeout(function(){o.$answers[e].find(o.selectors.$persoAanswerIcon).addClass(o.selectors.$persoAnswerCorrect),s.addClass(o.selectors.$persoAnswerTransparentIcon),o.$answers[t].attr("aria-disabled","true")},this.triviaConfig.timeOuts.displayCorrectAnswer)},moveDialog:function(){var t=this,e=this.isTriviaRTLMode?"":"-",s=l(this.el),o=s.parents(this.selectors.$persoTriviaFrame),s=s.parents(this.selectors.$persoTriviaFrameContainer),n=s.find(this.selectors.$persoTriviaFrame).last(),r=s.length?n.outerWidth(!0):0,i=this.getNextDlgIndex();r&&(o.removeClass(this.selectors.$persoTriviaAnimateIn).addClass(this.selectors.$persoTriviaAnimateOut),s.css("transform","translate("+e+r*i+"px)"),n.addClass(this.selectors.$persoTriviaAnimateIn),setTimeout(function(){var e;n.hasClass(t.selectors.$persoTrivia)?a.utils.accessibility.putFocus(t.selectors.$persoTriviaQuestionText):n.hasClass("perso-result-page-frame")&&(e=l(t.selectors.$persoResultPageH2Text).first(),a.utils.accessibility.putFocus(e)),t.setAriaHiddenOnElement(o)},this.triviaConfig.timeOuts.moveFocusToQuestions))},getNextDlgIndex:function(){var e=l(this.el).parents(this.selectors.$persoTriviaFrame);if(e.length)return e.index()+1},setContainerClass:function(e){e.length&&(e=e.parents(this.selectors.$persoTriviaFrame)).length&&!e.parent().hasClass("perso-trivia-frame-container")&&e.parent().addClass("perso-trivia-frame-container")},disableAnswers:function(){for(var e=this.$answersWrapper,t=0;t<e.length;t++)l(e[t]).find(this.selectors.$persoAnswer).addClass("disabled")},getCorrectAnswer:function(){for(var e=this.$answersWrapper,t=0;t<e.length;t++)if("1"===l(e[t]).find(this.selectors.$persoAnswer).attr("data-val"))return t},renderAccessibility:function(e){this.renderAnswersAccessibility(e),this.renderPageIndexAccessibility(e)},renderAnswersAccessibility:function(){for(var e,t=this.$answers.length,s=0;s<t;s++)e=this.layoutInstructions.answers[s].txt+", "+this.texts.answer+" "+(s+1)+" "+this.texts.of+" "+t,!this.browserData||"perso-mobile"==this.browserData.deviceType&&"Chrome"==this.browserData.browser||(e=e+" , "+this.texts.doubleTab),l(this.$answers[s]).attr("aria-label",e)},renderPageIndexAccessibility:function(){var e=this.layoutInstructions.pageNumber.split("/"),t=l(this.el).find(this.selectors.$persoTriviaPageIndex);t.length&&e.length&&t.attr("aria-label",this.texts.page+" "+e[0]+" "+this.texts.of+" "+e[1])},setAriaHiddenOnElement:function(e){e&&e.length&&e.attr("aria-hidden","true")},getTriviaConfigs:function(){return{showPaginationAsIndicators:!1}},isDataForPagination:function(){return Object.prototype.hasOwnProperty.call(this.layoutInstructions,"totalNumberOfQuestions")&&Object.prototype.hasOwnProperty.call(this.layoutInstructions,"questionNumber")},updateTriviaCatalogConfigFromProject:function(){"boolean"==typeof a.projectConfiguration.getConfig("showPaginationAsIndicators")&&(this.triviaCatalogConfig.showPaginationAsIndicators=a.projectConfiguration.getConfig("showPaginationAsIndicators"))},createPaginationData:function(){for(var e=[],t=1;t<=this.layoutInstructions.totalNumberOfQuestions;t++)e.push({isSelected:t<=this.layoutInstructions.questionNumber,class:t<this.layoutInstructions.questionNumber?"perso-index-passed":""});return e}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,r){s.story=s.story||{},s.story.CounterBlock=s.story.Block.extend({$selectors:function(){return{$persoDlgFrame:".pstory-dialog-frame",$persoResultPageFrame:"perso-result-page-frame",$persoCounterId:"#perso-"+this.layoutInstructions.id,$persoCounterBar:".perso-counter-bar",$persoCorrect:".perso-trivia-correct",$persoInCorrect:".perso-trivia-incorrect",$persoAnswersText:".perso-correct-answer",$persoAnimatedBar:"perso-counter-bar-animated",$persoAnimatedAnswer:"perso-correct-answer-animated",$persoCounterCorrectBackground:".perso-trivia-correct-background",$persoCounterIncorrectBackground:".perso-trivia-incorrect-background",$persoCounterCorrectText:".perso-trivia-correct-text",$persoCounterIncorrectText:".perso-trivia-incorrect-text",$persoAnswer:".perso-answer",$persoBold:"perso-bold",$persoBoldClass:".perso-bold",$persoLight:".perso-light-answer",$longRectangle:"longRectangle",$separateRectangles:"separateRectangles"}},getCounterBlockDefaultConfig:function(){},beforeRender:function(e,t){s.story.Block.prototype.beforeRender.call(this,e,t),this.selectors=this.$selectors(),this.config=this.getCounterBlockDefaultConfig(),this.texts=this.getTexts()},setThemeClasses:function(e){personetics.config.theme&&(personetics.config.theme.inflowColor&&(this.config.scoringBar==this.selectors.$longRectangle?s.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoCounterCorrectBackground),"perso-theme-inflowColor-background"):this.config.scoringBar==this.selectors.$separateRectangles&&(s.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoCounterCorrectBackground+" "+this.selectors.$persoAnswer),"perso-theme-inflowColor-background-answer"),s.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoCounterCorrectBackground+" "+this.selectors.$persoLight),"perso-theme-inflowColor-background")),s.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoCounterCorrectText),"perso-theme-inflowColor-color")),personetics.config.theme.outflowColor&&(this.config.scoringBar==this.selectors.$longRectangle?s.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoCounterIncorrectBackground),"perso-theme-outflowColor-background"):this.config.scoringBar==this.selectors.$separateRectangles&&(s.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoCounterIncorrectBackground+" "+this.selectors.$persoAnswer),"perso-theme-outflowColor-background-answer"),s.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoCounterIncorrectBackground+" "+this.selectors.$persoLight),"perso-theme-outflowColor-background")),s.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoCounterIncorrectText),"perso-theme-outflowColor-color")))},render:function(e,t){s.story.Block.prototype.render.call(this,e,t),this.setThemeClasses(e)},afterRender:function(e){switch(s.story.Block.prototype.afterRender.call(this,e),this.setContainerClass(e),this.config.scoringBar){case this.selectors.$longRectangle:this.calculateCounterBarWidth(e);break;case this.selectors.$separateRectangles:this.BoldSeparatedAnswers(e)}this.setAccessibilityText(e),this.doAnimations(e)},BoldSeparatedAnswers:function(e){var s=this,t=this.selectors.$persoCounterId+" "+this.selectors.$persoAnswer,e=r(e).find(t),o=parseInt(this.layoutInstructions.sumCounter),n="<span class='"+this.selectors.$persoBold+"'></span>";r.each(e,function(e,t){e<o&&(r(t).prepend(n),t=r(t).find(s.selectors.$persoBoldClass),e=parseFloat(t.css("animation-duration"))*e,t.css("animation-delay",e+"s"))})},calculateCounterBarWidth:function(e){var t=this.selectors.$persoCounterId+" "+this.selectors.$persoCounterBar,e=r(e).find(t),t=parseInt(this.layoutInstructions.sumCounter),s=this.layoutInstructions.sumTotal,o=parseInt(e.css("max-width"))||100;e.length&&(e.width((o=o<t/s*100?o:t/s*100)+"%"),e.css("max-width",o+"%"))},setContainerClass:function(e){e.length&&(e=e.parents(this.selectors.$persoDlgFrame)).length&&!e.hasClass(this.selectors.$persoResultPageFrame)&&e.addClass(this.selectors.$persoResultPageFrame)},getTexts:function(){return{accessibility:{lblItsCounterBar:s.dictionary.getText("accessibilityCounterBarText"),lblCorrect:s.dictionary.getText("accessibilityCorrect"),lblInCorrect:s.dictionary.getText("accessibilityInCorrect"),lblOutOfText:s.dictionary.getText("accessibilityOutOfTxt")}}},doAnimations:function(e){var t,s,o,n=this;n.isDraw||(e=r(e),t=e.find(this.selectors.$persoCounterBar),s=e.find(this.selectors.$persoAnswersText),o=e.find(this.selectors.$persoAnswer+" "+this.selectors.$persoBoldClass),setTimeout(function(){t.addClass(n.selectors.$persoAnimatedBar)},n.config.timeoutsDuration.barsDuration),setTimeout(function(){o.addClass(n.selectors.$persoAnimatedBar)},n.config.timeoutsDuration.barsDuration),setTimeout(function(){s.addClass(n.selectors.$persoAnimatedAnswer)},n.config.timeoutsDuration.answersDuration),n.isDraw=!0)},setAccessibilityText:function(e){var e=r(e).find(this.selectors.$persoCounterId),t=this.setAriaLabelText();e.length&&t&&e.attr("aria-label",t)},getCounterType:function(e){var t,s=e.split("-")[1];return t=s?s===this.texts.accessibility.lblInCorrect?this.texts.accessibility.lblInCorrect:s===this.texts.accessibility.lblCorrect?this.texts.accessibility.lblCorrect:e:t},setAriaLabelText:function(){var e=parseInt(this.layoutInstructions.sumCounter),t=this.layoutInstructions.sumTotal;return this.getCounterType(this.layoutInstructions.class)+", "+e+" "+this.texts.accessibility.lblOutOfText+" "+t}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(n,i){n.story=n.story||{},n.story.EntitySelectorGoals=n.story.EntitySelectorBlock.extend({$selectors:function(){var e=n.story.EntitySelectorBlock.prototype.$selectors.call(this);return n.utils.persoHelper.deepObjectExtend(e,{$persoLeftSide:"perso-left-side",$persoRightSide:"perso-right-side",$persoText4:"perso-text4",$persoText2:"perso-text2",$spendingPercentageFiller:".perso-spending-percentage-filler",$persoES1Goal:".perso-carousel-item.perso-ES1-goal",$persoCarouselSelected:".perso-carousel .pstory-entity-selector-item.perso-selected",$persoCarouselInnerWrapper:".perso-carousel-inner-wrapper",$persoEntityText3:".perso-entity-text3",$persoEntityText5:".perso-entity-text5",$persoEntityTooltip:".perso-entity-tooltip",$persoChartText:".perso-entity-text3 ,.perso-entity-tooltip ,.perso-entity-text5",$persoEntityImg:".perso-entity-img"},!0)},getEntityListCatalogConfig:function(){return{currencySymbol:n.projectConfiguration.getConfig("currencySymbol"),startDateFormat:n.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-selector/goals/startDateFormat",n.projectConfiguration.getConfig("dateFormat")),targetDateFormat:n.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-selector/goals/targetDateFormat",n.projectConfiguration.getConfig("dateFormat")),goalAmountFormat:n.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-selector/goals/goalAmountFormat",n.projectConfiguration.getConfig("amountFormat")),goalTargetAmount:n.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-selector/goals/goalTargetAmount",n.projectConfiguration.getConfig("amountFormat")),textAnimation:n.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-selector/goals/textAnimation","persoFadein 2s"),balanceForAreaProgress:n.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-selector/goals/balanceForAreaProgress",100),carouselOptions:{showIndicator:!1,hideButtons:!0}}},getEntityGoalConfig:function(){return{lineChartOptions:{screen:{ratio_large:1.23,ratio_medium:1.08,small:347,large:396},startPoint:0,endPoind:245,svgHeight:80,svgWidth:280,marginTop:0,line_left:17,line_top:10,line_width:245,line_height:52,area_display:!0,area_first_point:0,area_last_point:1,area_middle_percentage:.5,area_space_percentage:5,area_add_top:2,min_area_percentage:.145,middle_area_percentage:.5,text_padding_left:5,tooltip_padding_top:17,displayAsGradient:!0,gradientColorPalette:["#0275be"],lineStyle_interpolate:"basis",lineStyle_thickness:1,dots_radius:4,dots_radius_selected:4,doAnimations:!0,lineDuration:1e3,lineDelay:200,dotsDelay:700,dotsLabelDelay:800,dotsDuration:500,areaDelay:500,areaDuration:1200,dotRect:{dot_label_radius:10},enableChartsRTL:!0}}},getStaticTexts:function(){return{targetDateText:n.dictionary.getText("entitySelectorGoalTargetDate")}},initialize:function(e,t,s){n.story.EntitySelectorBlock.prototype.initialize.call(this,e,t,s),this.processOptionsData()},render:function(e){n.story.EntitySelectorBlock.prototype.render.call(this,e),this.setSelectedEntity(),this.renderSpendingFiller(e),this.handleESAssets()},processOptionsData:function(){this.utils=n.processor.PUtils.getUtilsInstance("utils");var t=this.getEntityListCatalogConfig(),s=this;this.layoutInstructions&&this.layoutInstructions.options.forEach(function(e){"static"!==e.type&&(e.text3=e.text3?s.utils.formatDate(e.text3,t.startDateFormat):null,e.text6=e.text6?s.utils.formatDate(e.text6,t.targetDateFormat):null,e.text2=e.text2?s.utils.formatAmount(e.text2,t.currencySymbol,t.goalAmountFormat):null,e.text5=e.text5?s.utils.formatAmount(e.text5,t.currencySymbol,t.goalTargetAmount):null,e.text4=e.text4?s.utils.formatPercent(e.text4):null)}),this.layoutInstructions.texts=this.getStaticTexts()},renderSpendingFiller:function(e){var t=this.$selectors(),s=this.getEntityGoalConfig(),o=this.layoutInstructions.options,e=i(e.find(t.$persoCarouselSelected)),t=e.find(t.$spendingPercentageFiller),n=e.index(),r=(s.lineChartOptions.areaEndPoint=this.getAreaEndPoint(o[n],s.lineChartOptions),this.getStaticTwoPointsData(o[n],s.lineChartOptions));this.callChartHelper(t,r,s),this.setTextStyle(e,s.lineChartOptions,o[n])},onEntityMovement:function(){n.story.EntitySelectorBlock.prototype.onEntityMovement.call(this),this.onEntityGoalMovement()},onEntityGoalMovement:function(){var e,t=this.getEntityGoalConfig(),s=this.layoutInstructions.options,o=this.$selectors(),n=this.el.find(o.$persoCarouselSelected),r=n.index();n.find(".perso-svg-chart-container").length||(o=n.find(o.$spendingPercentageFiller),t.lineChartOptions.areaEndPoint=this.getAreaEndPoint(s[r],t.lineChartOptions),e=this.getStaticTwoPointsData(s[r],t.lineChartOptions),this.setTextStyle(n,t.lineChartOptions,s[r]),this.callChartHelper(o,e,t))},callChartHelper:function(e,t,s){var o=n.story.BlockChartFactory.generateHelperClazz("twoPointsLineChartHelper",{});o.prepareChart(t,s.lineChartOptions),o.renderChart(e),o.lineAnimations()},getStaticTwoPointsData:function(e,t){var s=n.processor.PStoryConfig.isRtl()&&t.enableChartsRTL;return{series:[{startEndPoint:s?t.endPoind:t.startPoint,areaStartEndPoint:s?t.areaEndPoint:t.area_first_point,value:t.area_first_point,areaValue:t.line_height},{startEndPoint:s?t.startPoint:t.endPoind,areaStartEndPoint:s?t.area_first_point:t.areaEndPoint,value:t.area_last_point,areaValue:this.getAreaEndVal(t,t.areaEndPoint),highlight:!0}]}},getAreaEndVal:function(e,t){return t>e.endPoind*e.area_middle_percentage?(e.endPoind-t)/e.area_space_percentage:(e.endPoind-t)/e.area_space_percentage+e.area_add_top},getAreaEndPoint:function(e,t){var s=this.getEntityListCatalogConfig(),o=t.min_area_percentage,s=(!e.spendingPercentage&&e.goalBalance>s.balanceForAreaProgress&&(o=t.middle_area_percentage),t.endPoind*e.spendingPercentage),e=t.endPoind*o;return s<e?e:s},setTextStyle:function(e,t,s){var o=this.$selectors(),o=e.find(o.$persoEntityTooltip);this.setTooltipOffset(t,o),this.addTooltipClasses(s,o),this.addEntityTextStyle(t,e)},addEntityTextStyle:function(e,t){var s=this.$selectors(),o=this.getEntityListCatalogConfig(),o=(t.find(s.$persoChartText).css({opacity:1,animation:o.textAnimation,"-webkit-animation":o.textAnimation}),this.getValueByScreenWidth(e.line_left+e.text_padding_left)),e=t.find(s.$persoEntityText3);this.isRTLMode?e.css("right",o):e.css("left",o)},addTooltipClasses:function(e,t){var s=this.$selectors();e.text4&&t.addClass(s.$persoText4),e.text2&&t.addClass(s.$persoText2)},setTooltipOffset:function(e,t){var s,o=this.$selectors(),n=(e.endPoind-e.areaEndPoint)/e.area_space_percentage-e.tooltip_padding_top,n=this.getValueByScreenWidth(n);e.areaEndPoint>e.endPoind*e.area_middle_percentage?(t.addClass(o.$persoLeftSide),s=this.getValueByScreenWidth(e.endPoind-e.areaEndPoint+e.line_left),this.isRTLMode?t.css({left:s,top:n}):t.css({right:s,top:n})):(t.addClass(o.$persoRightSide),s=this.getValueByScreenWidth(e.areaEndPoint+e.line_left),this.isRTLMode?t.css({right:s,top:n}):t.css({left:s,top:n}))},getValueByScreenWidth:function(e){var t=i("#perso-responsive-container").width(),s=this.getEntityGoalConfig(),o=n.utils.persoBrowserDetector.getBrowserData().deviceType;return"perso-tablet"==o||"perso-desktop"==o||t<s.lineChartOptions.screen.small?e:t>=s.lineChartOptions.screen.large?e*s.lineChartOptions.screen.ratio_large:e*s.lineChartOptions.screen.ratio_medium},getAccessibilityEntityText:function(e){var e=this.layoutInstructions.options[e],t=this.getStaticTexts();return(e.text||"")+", "+(e.text6?t.targetDateText+" "+e.text6:"")+", "+(e.text2||"")+", "+(e.text4||"")}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(a,p){a.story=a.story||{},a.story.ComparableChartBlock=a.story.Block.extend({getHtmlTemplateId:function(){return"multi-bar-chart-static-tooltip"},$selectors:function(){return{$persoBarChart:".pstory-bar-chart",$persoBarChartContainer:".pstory-bar-chart .perso-bar-chart-container",$persoBarChartWrapper:".pstory-bar-chart .perso-bar-chart-wrapper",$persoBarsWrapper:".pstory-bar-chart .perso-bars-wrapper",$persoComparableChart:".pstory-block-container .pstory-block-content .pstory-bar-chart .perso-comparable-chart",$persoComparableChartContainer:".pstory-bar-chart .perso-bar-chart-container",$persoLegentIndicatorHeight:".perso-legend-wrapper .perso-bar-chart-legend",$persoTooltipInflowText:".perso-static-tooltip-text.perso-in",$persoTooltipOutflowText:".perso-static-tooltip-text.perso-out",$persoMonthPickerContainer:".perso-month-picker-container",$persoSelectedMonthPickerTab:".pstory-month-picker-selected-tab",$persoMonthPickerWrapper:".perso-month-picker-wrapper",$persoLegendText:".perso-bar-chart-legend-txt",$persoTooltipContainer:".perso-tooltip-container",$persoTooltipAmount:".perso-tooltip-container .perso-static-tooltip-amount",$persodynamicTooltipAmount:".perso-tooltip-amount",$persoTooltipWrapper:".perso-tooltip",$persoSeries:".perso-series",$persoSeriesWrapper:".perso-series-wrapper",$persoBar:".perso-bar",$persoInflow:".perso-in",$persoOutflow:".perso-out",$persoSelected:"perso-selected",$persoLeftTooltip:"perso-tooltip-type-left",$persoRightTooltip:"perso-tooltip-type-right",$persoMiddleTooltip:"perso-tooltip-type-middle",$persoMonthAmountNotSeries:".perso-month-amount:not(.is-series)"}},getBarChartConfigs:function(){return{monthPickerHeight:50,addBarsWrapperHeightForNegative:!1,addMonthAmountMarginsCalc:!0,addIndicatorTopPosition:!0,isBarClickable:!1,indicatorType:"mtd-5",staticToolTip:!0}},updateBarChartConfigsFromProject:function(){"boolean"==typeof a.projectConfiguration.getConfig("isComparableBarClickable")&&(this.barChartConfig.isBarClickable=a.projectConfiguration.getConfig("isComparableBarClickable")),"string"==typeof a.projectConfiguration.getConfig("indicatorType")&&(this.barChartConfig.indicatorType=a.projectConfiguration.getConfig("indicatorType")),"boolean"==typeof a.projectConfiguration.getConfig("isComparableStaticToolTip")&&(this.barChartConfig.staticToolTip=a.projectConfiguration.getConfig("isComparableStaticToolTip"))},initialize:function(e,t,s){this.selectors=this.$selectors(),this.barChartConfig=this.getBarChartConfigs(),this.updateBarChartConfigsFromProject(),a.story.Block.prototype.initialize.call(this,e,t,s)},getBarChartOptions:function(e){return this.barChartConfig.options||this.story.uxCtrl.getBarChartNewOptions(e)},comparableChartHasOwnIndicator:function(e){if(e)for(var t=0;t<e.length;t++){if(e[t].indicator)return!0;if(e[t].length)for(var s=0;s<e[t].length;s++)if(e[t][s].indicator)return!0}return!1},mapStaticText:function(e){var o={text1:"",text2:"",text1Mode:"",text2Mode:""},n=this.getStaticTexts();return e.forEach(function(e,t){var t=Object.keys(o)[t],s=e.toLowerCase();e=t+"Mode",o[t]=n[s],o[e]=s}),o},reverseSeriesData:function(e){var t;if(e.length)return t=[],e.forEach(function(e){t.push(e.reverse())}),t},beforeRender:function(e,t){a.story.Block.prototype.beforeRender.call(this,e,t),this.isDesktopMode="desktop"===this.story.cfg.widthMode,this.series=t.series,t.isSeries=this.isSeries=Object.prototype.hasOwnProperty.call(this.layoutInstructions,"seriesLabels")&&0<this.layoutInstructions.seriesLabels.length&&0<this.layoutInstructions.seriesLabels[0].length,this.chartType=this.isSeries?"multiVertical":"vertical",this.setSelected(),this.texts=this.getTexts(),this.browserData=a.utils.persoBrowserDetector.getBrowserData(),this.prepereData(),this.options=this.getBarChartOptions(this.chartType),this.benchmarkConfig=this.story.uxCtrl.getBarBenchmarkConfig(),this.mode=Object.prototype.hasOwnProperty.call(t,"mode")&&0<t.mode.length?t.mode.toLowerCase():"out",this.layoutInstructions.config=this.barChartConfig,this.layoutInstructions.staticTexts=this.mapStaticText(this.layoutInstructions.seriesLabels),a.processor.PStoryConfig.isRtl()&&this.enableChartsRTL&&this.layoutInstructions.series.reverse()},getStaticTexts:function(){return{in:a.dictionary.getText("lblInFlows"),out:a.dictionary.getText("lblOutFlows")}},prepereData:function(){var s=this;this.prepereAccessibilityCategories(),this.setSeriesNamesForDisplay(),this.isSeries&&p.each(this.layoutInstructions.series,function(e,t){s.layoutInstructions.series[e].category=t[0].category}),this.prepereBenchmarkData()},prepereBenchmarkData:function(){var t=this;this.benchmarkLines=this.layoutInstructions.benchmarkLines||[],this.benchmarkLines.forEach(function(e){e.benchmarks.unshift(e.benchmarks[0]),e.benchmarks.push(e.benchmarks[e.benchmarks.length-1])}),this.benchmarkLinesData=this.benchmarkLines,this.seriesDataAndBenchmarkData=this.series,this.benchmarkLinesData.forEach(function(e){t.seriesDataAndBenchmarkData=t.seriesDataAndBenchmarkData.concat(e.benchmarks)})},getTexts:function(){return{accessibilityBarChartTitle:a.dictionary.getText("accessibilityBarChartPureTitle"),series:a.dictionary.getText("accessibilitySeries"),selected:a.dictionary.getText("accessibilitySelected"),notSelected:a.dictionary.getText("accessibilityNotSelected"),in:a.dictionary.getText("lblIn"),out:a.dictionary.getText("lblOut"),tab:a.dictionary.getText("lblTab"),of:a.dictionary.getText("lblOf"),doubleTap:a.dictionary.getText("accessibilityNextMonthDoubleClick")}},prepereAccessibilityCategories:function(){var n=this,r=a.processor.PUtils.getUtilsInstance("dateUtils"),i=a.processor.PStoryConfig.getConfig("lang");p.each(this.layoutInstructions.categories,function(e,t){var s=r.getMonthNumber(i+"-short",t),s=r.getMonthName(i)[s],o=n.getSeriesLabel(n.layoutInstructions.series[e],n.layoutInstructions.isSeries),o=n.getAmountAsLabel(n.layoutInstructions.series[e],o),s=s||t;n.layoutInstructions.series[e].displayLabel=t,n.layoutInstructions.series[e].fullMonthName=s,n.layoutInstructions.series[e].accLabel=s+", "+n.texts.tab+", "+(e+1)+" "+n.texts.of+" "+n.layoutInstructions.categories.length+", "+o,!n.browserData||"perso-mobile"==n.browserData.deviceType&&"Chrome"==n.browserData.browser||(n.layoutInstructions.series[e].accLabel=n.layoutInstructions.series[e].accLabel+", "+n.texts.doubleTap)})},setSeriesNamesForDisplay:function(){var e,t;this.isSeries&&(e=this.layoutInstructions.seriesNamesForDisplay,t=this.texts,null==e&&(e=this.layoutInstructions.seriesLabels.map(function(e){return t[e.toLowerCase()]})),this.seriesNamesForDisplay=e)},setSelected:function(){var t=this,o=!1,e=t.layoutInstructions.series;p.each(e,function(e,s){if(t.isSeries)p.each(s,function(e,t){if(1==t.selected)return s.selected||(s.selected=!0),!(o=!0)});else if(1==s.selected)return!(o=!0)}),0==o&&(e.length&&t.isSeries?p.each(e[e.length-1],function(e,t){null!=t&&(t.selected=!0)}):e[e.length-1].selected=!0)},getSeriesLabel:function(e,t){return t?e.map(function(e){return e.label}):e.label},getAmountAsLabel:function(s,e){var o=a.utils.persoValidator.isValidSelector;return Array.isArray(e)?e.map(function(e,t){if(o(e)&&p(e).get(0).getAttribute("aria-label").length)return s[t].mode+": "+p(e).get(0).getAttribute("aria-label")}).join(", "):o(e)&&p(e).get(0).getAttribute("aria-label").length?", "+p(e).get(0).getAttribute("aria-label"):""},setFillerBarThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.inflowColor||personetics.config.theme.outflowColor)&&a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBarsWrapper),"perso-theme-comparable-selected-background")},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.inflowColor&&a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTooltipInflowText),"perso-theme-inflowColor-color"),personetics.config.theme.outflowColor&&a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTooltipOutflowText),"perso-theme-outflowColor-color"),personetics.config.theme.brandColor&&(a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoSelectedMonthPickerTab),"perso-theme-brandColor-background"),a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBarChartWrapper),"perso-theme-brandColor-mtd")),personetics.config.theme.pickerColor&&(a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoMonthPickerContainer),"perso-theme-pickerColor-selected-month-item-color"),a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoMonthPickerContainer),"perso-theme-pickerColor-unselected-month-item-color")),personetics.config.theme.headerColor&&(a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoLegendText+", "+this.selectors.$persoTooltipAmount),"perso-theme-headerColor-color"),a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoComparableChartContainer),"perso-theme-headerColor-comparable-bar-in-background")),personetics.config.theme.backgroundColor&&a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoMonthPickerWrapper),"perso-theme-backgroundColor-background"),personetics.config.theme.greyLightColor&&(a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBarChartWrapper),"perso-theme-greyLightColor-bars-series-background"),a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoMonthPickerWrapper),"perso-theme-greyLightColor-month-picker-background"),a.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTooltipContainer),"perso-theme-greyLightColor-line-between-border-color")))},render:function(e,t){a.story.Block.prototype.render.call(this,e,t);e=this.frameEl.find(this.selectors.$persoComparableChartContainer),t=e.parents(".perso-bar-chart-wrapper");t.length&&t.addClass("perso-with-static-tooltip"),0<e.length&&this.renderBars(e),this.setFillerBarThemeClasses()},renderBars:function(e){var t;this.isSeries?(t=p(e).find(".perso-series-wrapper"),this.setBarsWidth(t),this.setBarsSeriesHeight(t),this.barChartConfig.staticToolTip||this.renderTooltips()):(t=p(e).find(".perso-bar-wrapper"),this.setBarsWidth(t),this.setBarHeight(t))},setBarsWidth:function(e){parseFloat(p(e).css("width"))||p(e).css("width",100/this.layoutInstructions.categories.length+"%")},addHeightToBarsWrapper:function(){for(var e=Array.prototype.slice.call(document.getElementsByClassName("perso-bar-wrapper")),t=e.filter(function(e){return!0===e.classList.contains("perso-negative-bar")}),s=e.filter(function(e){return!1===e.classList.contains("perso-negative-bar")}),o=0,n=0,r=0;r<t.length;r++)t[r].offsetHeight>o&&(o=t[r].offsetHeight);for(var i=0;i<s.length;i++)s[i].offsetHeight>n&&(n=s[i].offsetHeight);this.frameEl.find(this.selectors.$persoBarsWrapper).css("height",n+o+"px")},setBarHeight:function(e){var t=this.getMaxValue(),s=this.getMinValue();this.calculateBarsHeight(e,s,t),this.barChartConfig.addBarsWrapperHeightForNegative&&s<0&&this.addHeightToBarsWrapper()},setBarsSeriesHeight:function(e){var t=this.getSeiresMaxValue();this.calculateSeriesBarsHeight(e,t)},calculateBarsHeight:function(e,t,s){var r=this,i=!1,o=s,a=(t<0&&(0<=s?s+=Math.abs(t):i=!0),this.prepareCalculateBarHeightOptions(s)),l=r.calculateBarHeightByValue(o,a),c=[];p.each(e,function(e,t){var s=r.series[e].value,e=r.series[e].indicator,s=(s<e&&(e=s),r.calculateBarHeightByValue(s,a)),e=r.calculateBarHeightByValue(e,a),o=s.normalValue,e=e.normalValue,n=(p(t).css("height",o+"px"),p(t).find(".perso-indicator").css("height",e+"px"),0);s.y<0?(p(t).addClass("perso-negative-bar"),0==i&&(n=l.normalValue)):n=l.normalValue-o,c.push(n),c.includes?c.includes(0)&&c.fill(0):-1<c.indexOf(0)&&c.map(function(){return 0}),p(t).css("top",n+"px"),r.barChartConfig.addIndicatorTopPosition&&p(t).find(".perso-indicator").css("top",-1*e+"px")}),r.barChartConfig.addMonthAmountMarginsCalc&&p(".perso-month-amount").css("margin-top","calc(4% + "+Math.max.apply(null,c)+"px)")},calculateSeriesBarsHeight:function(e,a){var l=this,c=this.prepareCalculateBarHeightOptions(a);e.length&&p.each(e,function(i,e){e=p(e).find(".perso-bar-wrapper");e.length&&p.each(e,function(e,t){var s=Math.abs(l.series[i][e].value),o=Math.abs(l.series[i][e].indicator),e=(s<o&&(o=s),l.series[i][e].mode||""),e=(p(t).addClass("perso-"+e.toLowerCase()),l.calculateBarHeightByValue(s,c).normalValue),n=l.calculateBarHeightByValue(o,c).normalValue,r=!1;e<=n&&(n=e,r=!0),p(t).css("height",e+"px"),r&&p(t).find(".perso-indicator").addClass("perso-indicator-full"),o===s||0===o?p(t).find(".perso-indicator").addClass("top-bar"):p(t).find(".perso-indicator").addClass("bottom-bar"),p(t).find(".perso-indicator").css("height",n+"px"),p(t).css("top","calc(100% - "+e+"px)"),p(t).find(".perso-indicator").css("top",-1*n+"px"),s==a&&p(t).parents(".perso-bars-wrapper").css("height",e+"px")})})},prepareCalculateBarHeightOptions:function(e){var t=this.story.uxCtrl.getPersoneticsWrapper(),s=this.options.minBarHeight*t.width(),t=this.options.heightWithStaticToolTip*p(t).height();return{m:t/(Math.abs(e)||1),minHeight:s,containerHeight:t}},calculateBarHeightByValue:function(e,t){e=t.m*e;return{normalValue:Math.abs(e+t.minHeight),y:e}},getMaxValue:function(){return Math.max.apply(Math,this.seriesDataAndBenchmarkData.map(function(e){return e.value}))},getMinValue:function(){return Math.min.apply(Math,this.seriesDataAndBenchmarkData.map(function(e){return e.value}))},getSeiresMaxValue:function(){var s=0;return this.isSeries&&p.each(this.series,function(e,t){t=Math.max.apply(Math,t.map(function(e){return e.value}));s<t&&(s=t)}),s},renderBenchmark:function(e){this.renderLineSVG(e),this.renderBenchMarkLines(),this.benchmarkLineAnimation()},beforeRenderBenchmark:function(){var e=Math.max.apply(Math,this.series.map(function(e){return e.value})),t=this.frameEl.find(this.selectors.$persoBarChartWrapper),s=this.frameEl.find(".perso-bars-wrapper"),o=p(s).height(),s=p(s).width()+p(s).width()/this.layoutInstructions.categories.length*2;return this.xScale=d3.scale.ordinal().rangeRoundBands([0,s],0),this.layoutInstructions.categories.unshift("edge1"),this.layoutInstructions.categories.push("edge2"),this.xScale.domain(this.layoutInstructions.categories.map(function(e){return e})),this.minValue=0<this.getMinValue()?0:this.getMinValue(),this.yScale=d3.scale.linear().range([o,0]),this.yScale.domain([this.minValue,this.getMaxValue()]),this.svgWidth=this.xScale("edge2")-this.xScale("edge1"),this.frameEl.find(this.selectors.$persoBarsWrapper).css("margin-top",this.yScale(e)),{el:t,height:o,width:s}},renderLineSVG:function(e){this.svg=d3.select(e.el.get(0)).append("svg").attr("class","perso-svg-chart-container").attr("width",this.svgWidth).attr("height",e.height).style("margin-left",e.el.find(".perso-bar").outerWidth(!0)/2*-1).append("g").attr("class","perso-svg-container-group")},renderBenchMarkLines:function(){var t=this;this.benchmark=this.svg.append("g").attr("class","benchmarkLines"),this.benchmarkLinesData.forEach(function(e){t.renderLine(e.benchmarks),t.renderLabel(e),t.renderClipPath()})},renderLabel:function(e){var t=this.frameEl.find(".perso-bar-chart-wrapper"),s='<label class="perso-bar-budget-label">'+e.label+"</label>",o=this.prepareCalculateBarHeightOptions(this.getMaxValue()).minHeight/2,s=(t.append(s),t.find(".perso-bar-budget-label")),t=(this.frameEl.find(".perso-bar-chart-wrapper").outerWidth(!0)-s.outerWidth())/2,n=Math.round(e.benchmarks.length/2),e=this.yScale(e.benchmarks[n].value)-o;s.css({position:"absolute",left:t,top:e+"px"})},renderLine:function(e){var s=this,t=s.prepareCalculateBarHeightOptions(s.getMaxValue()).minHeight/2;this.line=d3.svg.line().interpolate(s.benchmarkConfig.lineInterpolate).x(function(e,t){return s.xScale(s.layoutInstructions.categories[t])}).y(function(e){return s.yScale(e.value)-t}),this.benchmark.append("g").attr("name","line").append("path").datum(e).attr("class","perso-line").attr("d",this.line).style("clip-path","url(#banchmarkClipPath)")},renderClipPath:function(){var e=this.benchmarkConfig.labelWidthPercent,e=this.convertPercentToSimpleValue(e,this.svgWidth),e=[{x:this.svgWidth/2-e/2+"px",width:0},{x:this.svgWidth/2+e/2+"px",width:0}],t=this.svg.append("defs").append("clipPath").attr("id","banchmarkClipPath");this.clipRects=t.selectAll("rect").data(e).enter().append("rect").attr("x",function(e){return e.x}).attr("width",function(e){return e.width}).attr("height","100%")},convertPercentToSimpleValue:function(e,t){return t/100*e},afterRender:function(e){this.frameEl&&(this.frameEl.closest(".pstory-dialog-frame").addClass("perso-pure-bar-chart-dialog"),this.setMonthPickerTabWidth(),this.setDefaultMonthPickerTab(),this.setDefaultBar(),this.setMonthAmount(this.series[this.getDefaultIndex()].label),this.isBlockPositionInViewport(this.frameEl)&&this.doAnimations(),this.lastItemClicked=this.frameEl.find(".perso-month-picker-item.perso-selected")),this.renderAccessibility(),this.comparableChartHasOwnIndicator(this.series)&&this.frameEl.find(".perso-tooltip-container").addClass("perso-indicators-mode"),a.story.Block.prototype.afterRender.call(this,this,e),this.setThemeClasses()},renderAccessibility:function(){var e=a.projectConfiguration.getConfig("supportHtmlTagInProcessor"),t=this.frameEl.find(".pstory-block-container .pstory-block-content"),s=this.frameEl.find(this.selectors.$persoComparableChart);e&&this.frameEl.find(this.selectors.$persoMonthAmountNotSeries+", "+this.selectors.$persoTooltipContainer).attr("aria-hidden","true"),t&&"perso-desktop"==this.browserData.deviceType&&p(t).attr("tabindex","0"),s&&"perso-desktop"==this.browserData.deviceType&&p(s).attr("tabindex","-1"),a.utils.accessibility.addAltTextToElement(this.frameEl,this.texts.accessibilityBarChartTitle)},setBarsWrapperHeight:function(){var e=this.frameEl.find(".perso-bars-wrapper"),t=this.options.height*this.story.uxCtrl.getPersoneticsWrapper().height();e.length&&p(e).height(t)},setDefaultBar:function(){var e=this.frameEl.find(".perso-bar.perso-selected"),t=e.parents(".perso-series-wrapper"),s=this.layoutInstructions.series[t.index()];this.barChartConfig.staticToolTip?this.setStaticTooltipLabel(s):this.setSelectedTooltip(t),this.createDefaultBarTransElem(e)},setStaticTooltipLabel:function(t){var s=this.frameEl.find(".perso-static-tooltip");p.each(this.seriesNamesForDisplay,function(e){p(s[e]).find(".perso-static-tooltip-amount").empty().html(t[e].label)})},setSelectedTooltip:function(e){this.frameEl.find(this.selectors.$persoTooltipContainer).removeClass(this.selectors.$persoSelected),e.find(this.selectors.$persoTooltipContainer).addClass(this.selectors.$persoSelected)},getDefaultIndex:function(){var s=0;return p.each(this.layoutInstructions.series,function(e,t){if(t.selected)return s=e,!1}),s},getSelectedBarIndex:function(){return this.selectedBarIndex||0},updateSelectedAccText:function(){this.frameEl.find(".perso-accessibility-bar-selected-text").text(this.frameEl.find(".perso-month-picker-item.perso-selected").attr("aria-label")+",")},createDefaultBarTransElem:function(e){p(e).each(function(e,t){p(t).addClass("perso-selected-animated"),p(t).append(p("<div class='perso-animated-bar'></div>"))})},benchmarkLineAnimation:function(){var e=this.benchmarkConfig.labelWidthPercent,e=this.convertPercentToSimpleValue(e,this.svgWidth);this.frameEl.find(".perso-bar-budget-label").css("opacity",1),this.clipRects.transition().duration(this.benchmarkConfig.lineTransitionDuration).delay(this.benchmarkConfig.labelTransitionDuration).attr("width",this.svgWidth/2-e/2+"px").attr("x",function(e,t){return 1==t?e.x:0})},bindEvents:function(){a.story.Block.prototype.bindEvents.call(this),this.frameEl.find(".perso-month-picker-item").bind("click",a.bind(this,this.monthPickerItemClick)),this.barChartConfig.isBarClickable&&this.frameEl.find(".perso-bar").bind("click",a.bind(this,this.barItemClick))},tabClickListener:function(t){var e,s;this.changeSelectedElm(t),this.isSeries?(e=this.frameEl.find(".perso-bar.perso-selected").parents(".perso-series-wrapper"),s=this.layoutInstructions.series[e.index()],this.barChartConfig.staticToolTip?this.setStaticTooltipLabel(s):this.setSelectedTooltip(e)):(s=this.series.filter(function(e){return e.category==t})[0],this.setMonthAmount(s.label))},changeSelectedElm:function(e){var t=this.frameEl.find(".perso-bar");t.removeClass("perso-selected perso-selected-animated"),t.find(".perso-filler-bar").remove(),t.filter("[pstory-category='"+e+"']").addClass("perso-selected"),this.updateSelectedAccText()},changeDisplayedTooltip:function(){this.frameEl.find(".perso-tooltip").removeClass("perso-selected"),this.frameEl.find(".perso-bar.perso-selected").parents(".perso-series-wrapper").find(".perso-tooltip").addClass("perso-selected")},setMonthAmount:function(e){var t=p(".perso-month-amount");t.length&&t.html(e)},renderTooltips:function(){var n=this,e=n.frameEl.find(this.selectors.$persoSeriesWrapper),r=e.length,i=parseInt(r/2);p.each(e,function(e,t){var s=p(t).find(n.selectors.$persoTooltipWrapper),o=p(t).find(n.selectors.$persoBar),s=(n.setTooltipLabels(s,o.attr("pstory-category")),p(t).find(n.selectors.$persoTooltipContainer)),o=(e<i?s.addClass(n.selectors.$persoLeftTooltip):i+r%2<=e?s.addClass(n.selectors.$persoRightTooltip):s.addClass(n.selectors.$persoMiddleTooltip),p(t).find(n.selectors.$persoSeries)),e=Math.max(p(o).find(n.selectors.$persoInflow).height(),p(o).find(n.selectors.$persoOutflow).height())+n.story.uxCtrl.getValueByScreenWidth(n.options.tooltipJMarginBottom);s.css({bottom:e})})},setTooltipLabels:function(s,t){var o,n=this;s.length&&(o=this.series.filter(function(e){return e.category==t})[0],p.each(this.layoutInstructions.seriesLabels,function(e,t){t.toLowerCase()==o[e].mode.toLowerCase()&&p(s.find(n.selectors.$persodynamicTooltipAmount).get(e)).empty().html(o[e].label)}))},getSeriesHigherBar:function(e){var t;return e&&(e=p(e).find(".perso-bar").map(function(){return p(this).height()}).get(),t=Math.max.apply(null,e)),t||0},getCollapsedFixedElement:function(){return this.frameEl.find(".perso-month-picker-wrapper")},getCollapseParams:function(){var e=a.story.Block.prototype.getCollapseParams.call(this);return p.extend(e,{fixedContainer:this.getCollapsedFixedElement(),el:this.frameEl,height:this.barChartConfig.monthPickerHeight})},doScrollEvent:function(e){var t;a.story.Block.prototype.doScrollEvent.call(this,e),this.isBlockPositionInViewport(this.frameEl)&&this.doAnimations(),!this.supportBlockCollapse||"vertical"!=this.chartType&&"multiVertical"!=this.chartType||(t=this.frameEl.find(".perso-month-picker-container"),this.collapseHelper.scrollEvent(this,t,e))},getSupportBlockCollapse:function(){return 1==a.projectConfiguration.getConfig("supportCollapse")&&1==a.projectConfiguration.getConfig("monthPickerCollapse")},getBlockPercentInViewportToStartAnimate:function(){return a.story.Block.prototype.getBlockPercentInViewportToStartAnimate.call(this)[this.chartType]},doAnimations:function(){var e,t,s,o=this;o.isDraw||(e=!o.isSeries&&o.series[o.getDefaultIndex()].value<0?"perso-negative":"",(t=this.frameEl.find(".perso-animated-bar")).length&&(t.addClass("perso-filler-bar").addClass(e),o.amountAnimation(p(o.frameEl.find(".perso-month-amount"))),o.isDraw=!0),0<this.benchmarkLines.length&&(s=this.beforeRenderBenchmark(),setTimeout(function(){o.renderBenchmark(s)},this.benchmarkConfig.benchmarkDrawDelay)))},amountAnimation:function(e){var s=this,o=e.find(".perso-int-num"),n=e.find(".perso-currency");p(o).each(function(){var e=p(this).text(),t=e.match(/[^0-9]/g)||[];p(n).addClass("perso-fade-in"),p(o).addClass("perso-fade-in"),p(this).attr("Counter",0).animate({Counter:parseFloat(e.replace(/[^0-9]/g,""))},{duration:s.options.amountAnimationDuration,easing:"swing",step:function(e){e=Math.ceil(e);p(this).text(s.formatNumbers(e,t))}})})},formatNumbers:function(e,t){t=t[0]||",",e=e.toString().split();return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),e.join()},setDefaultMonthPickerTab:function(){var e=this.getDefaultIndex();this.changeSelectedTabAnimationMonthPicker(this.frameEl.find(".perso-month-picker-item")[e],!0)},setMonthPickerTabWidth:function(){var e=this.frameEl.find(".perso-month-picker-container .perso-month-picker-item");p(e).css("width",100/this.layoutInstructions.categories.length+"%")},barItemClick:function(e){e=p(e.currentTarget).attr("pstory-category");this.barChartConfig.BarClicked=!0,this.frameEl.find(".perso-month-picker-item[pstory-category="+e+"]").click()},monthPickerItemClick:function(e){this.lastItemClicked=this.frameEl.find(".perso-month-picker-item.perso-selected");var t=p(this.lastItemClicked).attr("pstory-category"),s=e.currentTarget,o=p(s).attr("pstory-category");o!==t&&(this.frameEl.find(".perso-month-picker-item").removeClass("perso-selected perso-default-month"),this.changeSelectedTabAnimationMonthPicker(s),this.tabClickListener(o),this.parent.notifyEvent(this,"setSelectedValue",o),t={value:o,type:this.barChartConfig.BarClicked?"comparableBarChartBarClick":"comparableBarChartPickerClick"},delete this.barChartConfig.BarClicked,this.notifyReportEvent(t),document.activeElement===e.target&&a.utils.accessibility.putFocus(p(e.target)))},changeSelectedTabAnimationMonthPicker:function(e,t){var s,o,n;null!=e&&0!=e.length&&(s=this.frameEl.find(".pstory-month-picker-selected-tab"),o=(e=p(e)).width(),n=(e.index()-1)*o,e.addClass("perso-selected"),t&&e.addClass("perso-default-month"),this.updateSelectedAccText(),this.setSelectedAccText(e),this.removeSelectedAccText(e.siblings(".perso-month-picker-item")),s.css({left:n+"px",width:o+"px"}))},setSelectedAccText:function(e){var t;e.length&&(t=e.attr("aria-label"),e.attr("aria-label",""),e.attr("aria-label",this.texts.selected+", "+t))},removeSelectedAccText:function(e){var o=this;e.length&&e.toArray().forEach(function(e){var e=p(e),t=e.attr("aria-label"),s=o.texts.selected+", ";-1<t.indexOf(s)&&(t=t.slice(s.length),e.attr("aria-label",""),e.attr("aria-label",t))})},keyUpEvent:function(e){var t=this.story.uxCtrl.getPersoneticsWrapper(),s=".pstory-block-frame .pstory-block-content",o=t.find(s),n=p(this.frameEl.find(".pstory-block-content")),r=t.find(s).index(n),i=this.frameEl.find(".perso-month-picker-item"),a=this.frameEl.find(".perso-month-picker-item.selected");switch(e.which){case 39:a.index()-1!=this.lastItemClicked.index()-1?(0==(this.lastItemClicked=a).next(".perso-month-picker-item").length?i[i.length-1]:a.next()).focus():p(e.target).next(".perso-month-picker-item").length?p(e.target).next().focus():n.get(0)==e.target?i[0].focus():this.frameEl.find(".perso-bar-chart-wrapper").get(0)==e.target?(a.next(".perso-month-picker-item").length?a.next(".perso-month-picker-item"):a).focus():0==p(e.target).next(".perso-month-picker-item").length?o[r+1].focus():a.index()==i.length&&i[i.length-1].focus();break;case 37:(a.index()-1!=this.lastItemClicked.index()-1?(this.lastItemClicked=a).prev(".perso-month-picker-item").length?a.prev(".perso-month-picker-item"):a:n.get(0)==e.target?o[r-1]:p(e.target).prev(".perso-month-picker-item").length?p(e.target).prev():this.frameEl.find(".perso-bar-chart-wrapper").get(0)==e.target?a.prev(".perso-month-picker-item").length?a.prev(".perso-month-picker-item"):a:n).focus();break;case 13:case 32:p(e.target).click(),this.frameEl.find(".perso-bar-chart-wrapper").focus()}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(t,r,c){var i=t.d3;r.story=r.story||{},r.story.PieChartCatalogParent=r.story.NewPieChartBlock.extend({$selectors:function(){return{$pstoryDialogFrame:".pstory-dialog-frame",$pstoryDialogFramePieClassName:"pstory-dialog-frame-pie",$pstoryDialogFramePie:".pstory-dialog-frame-pie",$pstoryBlockTabs:".pstory-block-tabs",$pstoryButtonSelected:".pstory-button.perso-selected",$pstoryIDName:"pstory-id",$pieArcPath:".pstory-pie-chart svg .perso-arc path",$pstoryPieChart:".pstory-pie-chart",$pstoryBlockPieChart:".pstory-block-pie-chart",$persoEmpty:"perso-empty",$persoArcPathFirst:".perso-arc path:first",$persoSelectedPath:".pstory-pie-chart svg .perso-arc path.perso-selected",$pstoryPieData:".pstory-pie-data",$pstoryPieArrow:".pstory-pie-data .pstory-arrow",$pstoryNextArrow:".pstory-next-arrow",$pstoryPrevArrow:".pstory-previous-arrow",$pstoryFrameContent:".pstory-block-frame .pstory-block-content",$pstoryBlockContent:".pstory-block-content",$pstoryPieInfo:".pstory-pie-info",$pstoryPieAmount:".pstory-pie-amount",$persoAccessibilityNoRead:".perso-accessibility-no-read"}},initialize:function(e,t,s){this.selectors=this.$selectors(),this.texts=c.extend(!0,this.texts,this.getTexts()),r.story.Block.prototype.initialize.call(this,e,t,s)},getPieGrayColors:function(){return this.options&&this.options.grayColorsPalette?this.options.grayColorsPalette:["#ededed","#d5d6d7","#dfe0e2","#ededed","#dfe0e2","#d5d6d7","#dfe0e2"]},getPieGraphPalette:function(e){var t=this.options&&this.options.outflowColorPalette?this.options.outflowColorPalette:["#ff6c53"],s=this.options&&this.options.inflowColorPalette?this.options.inflowColorPalette:["#0275be"],o=this.options&&this.options.basicColorPalette?this.options.basicColorPalette:["#ff6c53"];return personetics.config.theme&&(t=personetics.config.theme.outflowColor?[personetics.config.theme.outflowColor]:t,s=personetics.config.theme.inflowColor?[personetics.config.theme.inflowColor]:s,o=personetics.config.theme.outflowColor?[personetics.config.theme.outflowColor]:o),"basic"===e?o:"out"===e?t:s},beforeRender:function(e,t){r.story.Block.prototype.beforeRender.call(this,e,t),this.options=this.getPieOptions(),this.setTotal(t),this.colors=i.scale.ordinal().range(this.getGraphPalette()),this.grayscaleId="grayscale_"+ +new Date,this.dropShadow="",this.options.arcs.filter.dropShadow&&(this.dropShadowId="drop-shadow_"+ +new Date,this.dropShadow="url(#"+this.dropShadowId+")"),this.amountWrap=r.processor.PStoryConfig.getConfig("supportHtmlTagInProcessor"),this.isOldAndroidVersion=r.utils.persoHelper.isOldAndroidVersion(),this.layoutInstructions.slices=this.layoutInstructions.slices.sort(function(e,t){return Math.abs(t.value)-Math.abs(e.value)});var s=this.getPieChartConfigs(),s=(this.options=r.utils.projectConf.verifyConfig("pieChartConfigs",s),this.layoutInstructions.isRTLMode=r.processor.PStoryConfig.isRtl()&&this.options.enablePieRTL,e.closest(this.selectors.$pstoryDialogFrame).addClass(this.selectors.$pstoryDialogFramePieClassName),this.mode=Object.prototype.hasOwnProperty.call(t,"mode")&&0<t.mode.length?t.mode.toLowerCase():"basic",this.setColorsByMode(e),this.setCornerRadiusPie(),this.grayColors=i.scale.ordinal().range(this.getPieGrayColors()),this.getSelectedDataIndex(t));this.setSelectedIndex(s)},getSelectedDataIndex:function(e){var s=0;return e.slices.forEach(function(e,t){e.highlight&&(s=t)}),s},afterRender:function(e){var t=this,s=t.frameEl.find(t.selectors.$pstoryPieChart),o=r.utils.persoBrowserDetector.getBrowserData(),n=("perso_empty"==this.layoutInstructions.slices[0].class&&c(t.selectors.$persoArcPathFirst,t.frameEl).addClass(t.selectors.$persoEmpty),t.frameEl.find(t.selectors.$persoSelectedPath)[0]),n=(t.arcPaths=t.frameEl.find(t.selectors.$pieArcPath),this.drawSelected(),i.select(n).moveToFront(),t.layoutInstructions.slices[t.getSelectedPathIndex(t.arcPaths)]);t.initPieInfoValues(n),1<t.layoutInstructions.slices.length?t.frameEl.find(t.selectors.$pstoryPieArrow).show():t.frameEl.find(t.selectors.$pstoryPieArrow).hide(),s.length&&"perso-mobile"==o.deviceType&&"Chrome"==o.browser&&s.css("transition","transform 0ms"),this.updateAccessibilityTextOnButtons(),r.story.NewPieChartBlock.prototype.afterRender.call(t,e)},setColorsByMode:function(e){var e=e.parents(this.selectors.$pstoryDialogFrame).prev(this.selectors.$pstoryDialogFrame).find(this.selectors.$pstoryBlockTabs),t=e.find(this.selectors.$pstoryButtonSelected).attr(this.selectors.$pstoryIDName),s=(this.selectedTabId=t,this.mode);e.length&&(s=t.toLowerCase()),this.colors=i.scale.ordinal().range(this.getPieGraphPalette(s))},getTexts:function(){return{nextCategory:r.dictionary.getText("accessibilityNextCategory"),previousCategory:r.dictionary.getText("accessibilityPreviousCategory"),selectedCategoryTitle:r.dictionary.getText("accessibilitySelectedCategoryTitle"),nextCategoryIs:r.dictionary.getText("lblPieNextCategory"),previousCategoryIs:r.dictionary.getText("lblPiePreviousCategory"),currentCategoryIs:r.dictionary.getText("lblPieCurrentCategory"),lblAmount:r.dictionary.getText("lblPieAmount"),accessibilityPieTitle:r.dictionary.getText("accessibilityPieTitle")}},setCornerRadiusPie:function(){void 0!==this.options.arcs&&(this.cornerRadiusPie=void 0!==this.options.arcs.cornerRadius?this.options.arcs.cornerRadius.radiusCorner:0)},renderGradient:function(){var e=this.options.arcs.gradients,o=this.svg.append("defs");e&&c.each(e,function(e,s){s&&(o=o.append("linearGradient").attr("id",s.id).attr("x1","0").attr("x2","0").attr("y1","0").attr("y2","1"),c.each(s.stopColors,function(e,t){o.append("stop").attr("offset",s.offset[e]).attr("stop-color",t)}))})},renderArcs:function(e){var t,s=this;r.story.NewPieChartBlock.prototype.renderArcs.call(this,e),1==this.options.arcs.filter.grayFilter&&(t=this.frameEl.find(s.selectors.$pieArcPath),c.each(t,function(e,t){i.select(t).style("fill",function(e){return s.grayColors(e.data.category)})})),this.arcs=t},drawSelectedCallBack:function(){this.arrowClickFlag=!0},drawSelected:function(){var e,t=this;this.arrowClickFlag=!1,1==this.pieDrew&&t.frameEl&&(t.frameEl.addClass(t.selectedTabId),e=t.arcPaths[this.getSelectedIndex()],i.select(e).transition().duration(0).delay(t.options.pieSelectedDelay).attr("d",t.arcOver.cornerRadius(t.cornerRadiusPie)).style("filter",t.dropShadow).style("fill",function(e){return t.colorArcs(e.data.category)}).each("end",t.drawSelectedCallBack.bind(t)),t.renderGradient())},pieTransition:function(e){r.story.NewPieChartBlock.prototype.pieTransition.call(this,e);this.svg.selectAll(this.selectors.$pieArcPath).transition().duration(0).delay(this.options.pieSelectedDelay).attr("d",this.arc.cornerRadius(this.cornerRadiusPie))},bindEvents:function(){var t,e,s,o,n;r.story.NewPieChartBlock.prototype.bindEvents.call(this),this.frameEl&&(e=(t=this).frameEl.find(t.selectors.$pstoryNextArrow),s=this.frameEl.find(t.selectors.$pstoryPrevArrow),o=t.arcPaths,n="pieChartChevron",e.bind("click",function(){var e;t.arrowClickFlag&&((e=t.getSelectedPathIndex(o))==o.length-1?(t.moveArcs(0),t.handleClick(t.layoutInstructions.slices[0],0,n)):(t.moveArcs(++e),t.handleClick(t.layoutInstructions.slices[e],e,n)),document.activeElement==this&&t.putFocusAccessibility(c(this)),t.updateAccessibilityTextOnButtons())}),s.bind("click",function(){var e;t.arrowClickFlag&&(0==(e=t.getSelectedPathIndex(o))?(t.moveArcs(o.length-1),t.handleClick(t.layoutInstructions.slices[o.length-1],o.length-1,n)):(t.moveArcs(--e),t.handleClick(t.layoutInstructions.slices[e],e,n)),document.activeElement==this&&t.putFocusAccessibility(c(this)),t.updateAccessibilityTextOnButtons())})),this.handlePieChartsAssets()},handlePieChartsAssets:function(){var e=this,t=e.frameEl.find(e.selectors.$pieCategoryIcon);t.on("load",function(){e.remoteAssetsMgr.finishedLoading(this)}),t.on("error",function(){c(this).hide()})},keyUpEvent:function(e){var t=this.story.uxCtrl.getPersoneticsWrapper(),s=this.selectors.$pstoryFrameContent,o=t.find(s),n=c(this.frameEl.find(this.selectors.$pstoryBlockContent)),r=t.find(s).index(n),i=n.find(this.selectors.$pstoryPieData),a=n.find(this.selectors.$pstoryNextArrow),l=n.find(this.selectors.$pstoryPrevArrow);switch(e.which){case 39:(n.get(0)==e.target?i:i.get(0)==e.target||l.get(0)==e.target?a:o[r+1]).focus();break;case 37:(n.get(0)==e.target?o[r-1]:i.get(0)==e.target?n:a.get(0)==e.target?l:i).focus()}},onPieItemClick:function(e,t,s){var o=this,n=this.el.find(o.selectors.$persoSelectedPath);n[0]!=s&&(n.length&&(n[0].className.baseVal=r.utils.string.removeClass(n[0].className,"perso-selected"),i.select(n[0]).attr("d",o.arc).style("fill",function(e){return o.grayColors(e.data.category)})),i.select(s).attr("d",o.arcOver.cornerRadius(this.cornerRadiusPie)).attr("class","perso-selected").style("filter",this.dropShadow).style("fill",function(e){return o.colorArcs(e.data.category)}),i.select(s).moveToFront(),this.handleClick(e,t,"pieChartSlice"),this.updatePieInfoValues(e.data))},updatePieInfoValues:function(e){var t,s,o;e&&(t='<div class="pstory-pie-amount perso-accessibility-no-read"><span>'+e.label+"</span></div>",s='<div class="pstory-pie-category perso-accessibility-no-read"><span>'+e.category+"</span></div>",(o=this.frameEl.find(this.selectors.$pstoryPieInfo)).empty(),o.append(s),o.append(t),this.addInfoTextForAccessibility(o,e),this.setAmountColor(this.colorArcs(e.category)))},setAmountColor:function(e){1==this.options.arcs.filter.grayFilter&&c(this.selectors.$pstoryPieAmount).css("color",e)},initPieInfoValues:function(e){this.updatePieInfoValues(e)},moveArcs:function(e){var t=this,s=t.arcPaths[e],o=this.getSelectedIndex(),n=this.options.arcs.filter.grayFilter?t.grayColors:t.colors;s&&(e!==o&&(o=t.arcPaths[o],i.select(o).attr("d",t.arc).style("fill",function(e){return n(e.data.category)}).attr("class","")),i.select(s).attr("d",t.arcOver.cornerRadius(this.cornerRadiusPie)).attr("class","perso-selected").style("filter",this.dropShadow).style("fill",function(e){return t.colorArcs(e.data.category)}),i.select(s).moveToFront(),t.updatePieInfoValues(t.layoutInstructions.slices[e]),this.setSelectedIndex(e))},colorArcs:function(e){return this.colors(e)},getIsDrawed:function(){return this.isDrawed||!1},setIsDrawed:function(e){this.isDrawed=e},doScrollEvent:function(e){var t;r.story.NewPieChartBlock.prototype.doScrollEvent.call(this,e),this.isBlockPositionInViewport(this.frameEl)&&!this.getIsDrawed()&&(this.setIsDrawed(!0),this.drawSelected()),this.supportBlockCollapse&&(t=this.frameEl.find(".pstory-pie-data"),this.collapseHelper.scrollEvent(this,t,e,this.onScrollEvent))},onScrollEvent:function(){},getSupportBlockCollapse:function(){return 1==r.projectConfiguration.getConfig("supportCollapse")&&1==r.projectConfiguration.getConfig("pieChartCollapse")},onUnCollapsed:function(){this.frameEl.height("inherit")},onCollapsed:function(e,t,s,o){this.frameEl.css({height:o})},putFocusAccessibility:function(e){e.attr("tabindex","0"),e.blur(),t.setTimeout(function(){e.focus()},10)},addInfoTextForAccessibility:function(e,t){r.projectConfiguration.getConfig("supportHtmlTagInProcessor")&&e.attr("aria-hidden",!0),e.prepend('<span class="perso-accessibility-read">'+t.category+", "+t.label+"</span>"),e.find(this.selectors.$persoAccessibilityNoRead).attr("aria-hidden",!0)},updateAccessibilityTextOnButtons:function(){var e,t=this.frameEl.find(this.selectors.$pstoryNextArrow),s=this.frameEl.find(this.selectors.$pstoryPrevArrow),o=this.layoutInstructions.slices,n=this.getSelectedIndex(),r="",i="",a=o[n],l=this.amountWrap?this.getSliceAmountLabel(a.label):a.label,a=this.texts.currentCategoryIs+" "+a.category+", "+this.texts.lblAmount+" "+l;1<o.length&&(l=0==n?(e=n+1,o.length-1):n==o.length-1?(e=0,o.length-2):(e=n+1,n-1),n=o[e],e=o[l],n&&e&&(o=this.amountWrap?this.getSliceAmountLabel(n.label):n.label,l=this.amountWrap?this.getSliceAmountLabel(e.label):e.label,r=", "+this.texts.nextCategoryIs+" "+n.category+", "+this.texts.lblAmount+" "+o,i=", "+this.texts.previousCategoryIs+" "+e.category+", "+this.texts.lblAmount+" "+l)),t.attr("aria-label",a+r+", "+this.texts.nextCategory),s.attr("aria-label",a+i+", "+this.texts.previousCategory)},getSliceAmountLabel:function(e){return(0,r.utils.persoValidator.isValidSelector)(e)&&c(e).length?c(e).get(0).getAttribute("aria-label"):""}})}(window,window.Personetics=window.Personetics||{},jQuery),function(s,a){s.story=s.story||{},s.story.TabsCatalogParent=s.story.OptionsBlock.extend({$selectors:function(){return{$persoTbSelectedButton:".pstory-button.perso-selected",$persoTbBrandColorTabs:"perso-theme-brandColor-tabs-coloring",$persoTbHeaderColorTabs:"perso-theme-headerColor-unselected-text-color",$persoTbBlockConetnt:".pstory-block-frame .pstory-block-content",$persoTbCurrentBlock:".pstory-block-content",$persoTbheaderButton:".pstory-header-button",$persoNotSelectedButton:".pstory-button:not(.perso-selected)",$persoSelectedButton:".pstory-button.perso-selected",$persoTbBackgroundColorTabs:"perso-theme-backgroundColor-tabs-background-coloring"}},beforeRender:function(e,t){this.selectors=this.$selectors(),s.story.Block.prototype.beforeRender.call(this,e,t),this.isDesktopMode="desktop"===this.story.cfg.widthMode,this.layoutInstructions.isDesktopMode=this.isDesktopMode},getOptionById:function(t){return this.layoutInstructions.options.filter(function(e){return e.id==t})[0]},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&s.utils.persoTheming.addClassToElement(this.frameEl,this.selectors.$persoTbBrandColorTabs),this.selectors.$persoTbPickerThemeColor&&personetics.config.theme.pickerColor&&s.utils.persoTheming.addClassToElement(this.frameEl,this.selectors.$persoTbPickerThemeColor),personetics.config.theme.headerColor&&s.utils.persoTheming.addClassToElement(this.frameEl,this.selectors.$persoTbHeaderColorTabs),personetics.config.theme.greyLightColor&&s.utils.persoTheming.addClassToElement(this.frameEl,"perso-theme-greyLightColor-tabs-unselected-coloring"),personetics.config.theme.backgroundColor&&s.utils.persoTheming.addClassToElement(this.frameEl,this.selectors.$persoTbBackgroundColorTabs))},afterRender:function(){var e=this.frameEl.find(this.selectors.$persoTbSelectedButton);this.changeSelectedTabAnimation(e),this.setThemeClasses()},onInputSelect:function(e){s.story.OptionsBlock.prototype.onInputSelect.call(this,e);e=a(e.currentTarget);e.attr("aria-selected",!0),e.siblings('[role="tab"]').attr("aria-selected",!1),this.changeSelectedTabAnimation(e)},changeSelectedTabAnimation:function(e){var t,s,o;null!=e&&0!=e.length&&(t=a(this.frameEl).find(".pstory-tab-animated-border-bottom"),s=e.offset().left-this.frameEl.offset().left,o=e.innerWidth(),this.isDesktopMode?t.css({left:s+"px",width:o+"px"}):t.css({left:(s>e.width()?this.frameEl.width()-t.width():s)+"px"}))},getReportValue:function(e){return"Tab "+(e.attr("value")||e.text())},bindEvents:function(){s.story.OptionsBlock.prototype.bindEvents.call(this)},keyUpEvent:function(e){var t=this.story.uxCtrl.getPersoneticsWrapper(),s=t.find(this.selectors.$persoTbBlockConetnt),o=a(this.frameEl.find(this.selectors.$persoTbCurrentBlock)),n=t.find(this.selectors.$persoTbBlockConetnt).index(o),r=this.selectors.$persoTbheaderButton,i=o.find(r);switch(e.which){case 39:(o.get(0)==e.target?i[0]:a(e.target).next(r).length?a(e.target).next(r):s[n+1]).focus();break;case 37:(o.get(0)==e.target?s[n-1]:a(e.target).prev(r).length?a(e.target).prev(r):o).focus();break;case 13:case 32:-1<e.target.className.indexOf("pstory-header-button")&&a(e.target).click()}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(r,i){r.story=r.story||{},r.story.EntityListParentCatalog=r.story.OptionsBlock.extend({$selectors:function(){return{$persoLastPayment:".perso-last-payment",$persoValue:".perso-value",$persoLabel:".perso-label",$persoButton:".perso-button-wrapper .pstory-button",$persoTextBox:".perso-entity-textbox",$persoTextBoxTopContainer:".perso-entity-textbox-top-container",$persoTextBoxImg:".perso-entity-textbox-image"}},initialize:function(e,t,s){this.selectors=this.$selectors(),r.story.Block.prototype.initialize.call(this,e,t,s)},getAccessibilityTexts:function(){return{accessibilityEntityListTitle:r.dictionary.getText("accessibilityEntityListTitle"),accessibilityEntityListStart:r.dictionary.getText("accessibilityEntityListStart"),accessibilityEntityListEnd:r.dictionary.getText("accessibilityEntityListEnd")}},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.headerColor&&(r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoLastPayment),"perso-theme-headerColor-color"),r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoLabel),"perso-theme-headerColor-color")),personetics.config.theme.brandColor&&(r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoValue),"perso-theme-brandColor-color"),r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoButton),"perso-theme-brandColor-background")),personetics.config.theme.backgroundColor&&r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTextBox),"perso-theme-backgroundColor-background"))},beforeRender:function(){this.layoutInstructions.texts={lastModifiedlbl:r.dictionary.getText("lastPaymentlbl"),doubleTabButton:r.dictionary.getText("accessibilityEntityListDoubleTab")},this.entityListConfig=this.getEntityListConfigs(),this.layoutInstructions.assetExtension=this.layoutInstructions.fileType||this.entityListConfig.defaultAssetExtension,this.layoutInstructions.assetDirectory=this.layoutInstructions.directory||this.entityListConfig.defaultAssetDirectory,this.layoutInstructions.isEntityListAmountOnBottom=this.entityListConfig.isEntityListAmountOnBottom},afterRender:function(e){this.setThemeClasses(),this.bindEvents(),this.setAccessibility(),r.story.OptionsBlock.prototype.afterRender.call(this,e)},getClickedElementIndex:function(e){e=i(e).parents(this.selectors.$persoTextBox);return parseInt(i(e).attr("data-entity-index"))||0},bindEvents:function(){var s=this,e=this.frameEl.find(s.selectors.$persoButton);i(e).bind("click",function(e){e.stopImmediatePropagation();var t=s.getClickedElementIndex(e.currentTarget),t=s.layoutInstructions.options[t],e=i(e.target).attr("action-id");e&&s.parent.notifyEvent(s,"actionEvent",{actionId:e,context:t})}),s.handleEntityAssets()},handleEntityAssets:function(){var t=this,e=t.frameEl.find(t.selectors.$persoTextBoxImg);e.on("load",function(){t.remoteAssetsMgr.finishedLoading(this)}),e.on("error",function(){var e=i(this).data(t.defaultAssetConfig.loadingAssetTriesAttrName);e&&e>t.defaultAssetConfig.loadingAssetMaxTries?t.fallbackAsset(this):(e=t.localBaseUrl+"/"+t.entityListConfig.defaultAssetDirectory+"/"+t.entityListConfig.defaultAssetName+"."+t.entityListConfig.defaultAssetExtension,t.remoteAssetsMgr.setDefaultAsset(this,e),t.remoteAssetsMgr.setAssetLoadingTriesAttr(this))})},setAccessibility:function(){var e=this.getAccessibilityTexts(),t=this.frameEl.find(this.selectors.$persoTextBoxTopContainer);r.utils.accessibility.addAltTextToElement(this.frameEl,e.accessibilityEntityListTitle);for(var s=0;s<t.toArray().length;s++){var o=i(t[s]),n=r.utils.accessibility.getElementChildNodesText(o);0==s?o.attr("aria-label",e.accessibilityEntityListStart+", "+n):s==t.toArray().length-1?o.attr("aria-label",n+", "+e.accessibilityEntityListEnd):o.attr("aria-label",n)}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(a,l){a.story=a.story||{},a.story.FilterParentCatalog=a.story.Block.extend({initialize:function(e,t,s){a.story.Block.prototype.initialize.call(this,e,t,s)},$selectors:function(){return{elements:{$persoBlockFilterToggle:".perso-block-filter-toggle",$persoBlockFilterCheckbox:".perso-block-filter-checkbox",$pstoryBlockTooltipIcon:".pstory-block-tooltip-icon",$pstoryBlockFilterText:".pstory-block-filter-text",$pstoryBlockFilter:".pstory-block-filter",$pstoryBlockTooltipText:".pstory-block-tooltip-text",$pstoryBlockTooltipTextContainer:".pstory-block-tooltip-text-container",$pstoryBlockTooltipContainer:".pstory-block-tooltip-container",$pstoryTitleOuterWrapper:".pstory-title-outer-wrapper"},classes:{persoDesktop:"perso-desktop",displayTooltip:"display-tooltip",bottomTooltip:"bottom-tooltip",topTooltip:"top-tooltip"}}},getFilterConfig:function(){return{sendEventsType:"Filter"}},setThemeClasses:function(){this.selectors=this.$selectors(),personetics.config.theme&&(personetics.config.theme.headerColor&&a.utils.persoTheming.addClassToElement(this.el.find(this.selectors.elements.$pstoryBlockFilterText+","+this.selectors.elements.$pstoryBlockTooltipText),"perso-theme-headerColor-color"),personetics.config.theme.backgroundColor&&a.utils.persoTheming.addClassToElement(this.el.find(this.selectors.elements.$pstoryBlockFilter),"perso-theme-backgroundColor-background"),personetics.config.theme.backgroundDarkColor&&(a.utils.persoTheming.addClassToElement(this.el.find(this.selectors.elements.$pstoryBlockTooltipTextContainer),"perso-theme-backgroundDarkColor-background"),a.utils.persoTheming.addClassToElement(this.el.find(this.selectors.elements.$pstoryBlockTooltipContainer),"perso-theme-backgroundDarkColor-tooltip-text-container-before-after")))},beforeRender:function(e,t){this.reRender=!1,this.selectors=this.$selectors(),this.model=this.parent.getModel(),this.texts=this.getTexts(),this.isDesktop=a.utils.persoBrowserDetector.getBrowserData().deviceType===this.selectors.classes.persoDesktop,this.filterConfig=this.getFilterConfig(),this.showTooltip=!(!Object.prototype.hasOwnProperty.call(t,"tooltipText")||!t.tooltipText),this.showToggle=!(!Object.prototype.hasOwnProperty.call(t,"showToggle")||!t.showToggle),Object.prototype.hasOwnProperty.call(t,"toggleDefault")&&t.toggleDefault&&this.filterFacts(!0),this.undoFilteredTables(!1)},afterRender:function(e){a.story.Block.prototype.afterRender.call(this,e),this.setThemeClasses(),this.showTooltip&&this.setTooltipAccessibilityText(),this.showToggle&&(this.layoutInstructions.toggleDefault?this.setToggleAccessibilityText(!0):this.setToggleAccessibilityText(!1))},bindEvents:function(){var e=this.selectors;this.showToggle&&this.bindToggleEvents(e),this.showTooltip&&this.bindTooltipEvents(e)},bindToggleEvents:function(e){e=this.el.find(e.elements.$persoBlockFilterToggle);e&&e.length&&(e.on("click",this.toggleStatus.bind(this)),this.isDesktop&&e.on("keyup",this.keyUpEvent.bind(this)))},bindTooltipEvents:function(e){e=this.el.find(e.elements.$pstoryBlockTooltipIcon);e&&e.length&&(this.isDesktop?e.on("mouseover",this.displayToolTip.bind(this)).on("mouseout",this.hideToolTip.bind(this)).on("keyup",this.keyUpEvent.bind(this)):e.on("click",this.displayToolTip.bind(this)))},keyUpEvent:function(e){var t=l(e.currentTarget),s=this.selectors;13===e.which&&(t.is(s.elements.$pstoryBlockTooltipIcon)&&this.displayToolTip(e),t.is(s.elements.$persoBlockFilterToggle)&&t.click())},setToggleAccessibilityText:function(e){var t,s=this.selectors,s=this.el.find(s.elements.$persoBlockFilterToggle);s&&s.length&&(t=this.texts,e?s.attr("aria-label",t.accessibilityFilterToggleSelected+"."+t.accessibilityFilterDoubleTapToSelect):s.attr("aria-label",t.accessibilityFilterToggleNotSelected+"."+t.accessibilityFilterDoubleTapToSelect))},setTooltipAccessibilityText:function(e){var t,s=this.selectors,s=this.el.find(s.elements.$pstoryBlockTooltipIcon);s&&s.length&&(t=this.texts,e?(e=this.layoutInstructions.tooltipText,s.attr("aria-label",e+"."+t.accessibilityFilterDoubleTapToClose)):s.attr("aria-label",t.accessibilityToolTipIconText+". "+t.accessibilityFilterDoubleTapToSelect))},hideToolTip:function(e){e=l(e.currentTarget);e&&e.length&&e.hasClass("display-tooltip")&&(e.removeClass(this.selectors.classes.displayTooltip),this.setTooltipAccessibilityText(!1),a.utils.accessibility.putFocus(e))},displayToolTip:function(e){var t,s,o,n,r,i=this.selectors,e=l(e.currentTarget);e&&e.length&&(e.hasClass("display-tooltip")?(e.removeClass(i.classes.displayTooltip),this.setTooltipAccessibilityText(!1)):(t=e.find(i.elements.$pstoryBlockTooltipTextContainer))&&t.length&&(e.addClass(i.classes.displayTooltip),s=parseInt(getComputedStyle(t.get(0)).fontSize)*getComputedStyle(t.get(0)).getPropertyValue("--tooltipTriangleHeight")||0,o=e.offset().top,n=Math.max(t.outerHeight(!0),t.get(0).getBoundingClientRect().height),r=l(i.elements.$pstoryTitleOuterWrapper).outerHeight(!0),t.removeClass(i.classes.topTooltip).removeClass(i.classes.bottomTooltip),Math.floor(o-r)>Math.ceil(n+s)?t.addClass(i.classes.topTooltip):t.addClass(i.classes.bottomTooltip),this.setTooltipAccessibilityText(!0)),a.utils.accessibility.putFocus(e))},toggleStatus:function(e){var t,s,e=l(e.target);e&&e.length&&((s=e.siblings(this.selectors.elements.$persoBlockFilterCheckbox))&&s.length&&(t={},(s=s.get(0)).checked?(this.filterFacts(!1),t.value=0):(this.filterFacts(!0),t.value=1),this.reRender&&this.parent.notifyEvent(this,"partialRefresh"),t.type=this.filterConfig.sendEventsType,this.notifyReportEvent(t),this.setToggleAccessibilityText(!s.checked),a.utils.accessibility.putFocus(e)))},getColumnIndex:function(e,t){return e&&e.length?e.indexOf(t):-1},filterFacts:function(e){var t=this.model&&this.model.facts?this.model.facts:null;t&&(e?this.filterTables(t):this.undoFilteredTables())},searchFilterString:function(e){return"string"==typeof this||this instanceof String&&this.toLowerCase()===e.toLowerCase()},filterTables:function(t){var s,o=this,n=!1,e=this.layoutInstructions.filters,r=null;e&&e.length&&e.forEach(function(e){e.table&&Object.prototype.hasOwnProperty.call(t,e.table)?(s=t[e.table],e.colIndex=o.getColumnIndex(s.cols,e.attribute),-1!==e.colIndex?(Object.prototype.hasOwnProperty.call(s,"rowsBackup")?n=!0:s.rowsBackup=[],o.filterTableData(s,n,e)):(r=new Error("Filter Error: Required table column '"+e.attribute+"' is not supported"),a.error(r.message,!1,r))):(r=new Error("Filter Error: Required fact table '"+e.table+"' is not supported"),a.error(r.message,!1,r))})},filterTableData:function(e,t,s){for(var o=0,n=s.values;o<e.rows.length;){var r=e.rows[o];t||e.rowsBackup.push(r),r=n.some(this.searchFilterString.bind(r[s.colIndex])),"include"===s.operation&&!r||"exclude"===s.operation&&r?(e.rows.splice(o,1),this.reRender=!0):o++}},undoFilteredTables:function(t){var s,e=this.layoutInstructions.filters,o=this.model&&this.model.facts?this.model.facts:null;e&&e.length&&e.forEach(function(e){s=o[e.table],e.table&&Object.prototype.hasOwnProperty.call(o,e.table)&&Object.prototype.hasOwnProperty.call(s,"rowsBackup")&&(delete(s=o[e.table]).rows,s.rows=s.rowsBackup,delete s.rowsBackup,t||(this.reRender=!0))})},getTexts:function(){return{accessibilityToolTipIconText:a.dictionary.getText("filterLearnMore"),accessibilityFilterDoubleTapToSelect:a.dictionary.getText("filterDoubleTapToSelect"),accessibilityFilterDoubleTapToClose:a.dictionary.getText("filterDoubleTapToClose"),accessibilityFilterToggleSelected:a.dictionary.getText("filterToggleSelected"),accessibilityFilterToggleNotSelected:a.dictionary.getText("filterToggleNotSelected")}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.TextBoxesBX1=e.story.TextBoxes.extend({getHtmlTemplateId:function(){return"textboxes-bx1"},$selectors:function(){return{$pstoryDialogFrame:".pstory-dialog-frame",$pstoryDialogFrameTextBox:".pstory-dialog-frame-text-box",$pstoryButton:".pstory-button",$persoTextBoxEl:".perso-textbox-bx1, .perso-textbox-bx1-with-image",$persoLabel:".perso-label",$persoValue:".perso-value",$persoAmountEl:".perso-value .perso-amount",$persoTextBoxImage:".perso-textbox-bx1-image",$persoTextBoxBx1Separator:".perso-textbox-bx1-separator"}},afterRender:function(){this.setThemeClasses(),this.addRoleAndDataForAccessibility(),this.bindEvents(),this.el.closest(this.selectors.$pstoryDialogFrame).addClass(this.selectors.$pstoryDialogFrameTextBox)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,t){s.story=s.story||{},s.story.PieChartPC1=s.story.PieChartCatalogParent.extend({getHtmlTemplateId:function(){return"pie-chart-PC1"},$selectors:function(){var e=s.story.PieChartCatalogParent.prototype.$selectors.call();return t.extend(!0,e,{$pieCategoryIcon:""})},getPieChartConfigs:function(){var e=personetics.config.mappedColors;return{doAnimations:!0,pieDelay:0,pieDuration:300,pieSelectedDelay:450,pieTextDelay:600,pieTextDuration:300,center_text_total_font_size:10,center_text_total_max_width:70,center_text_amount_font_size:10,center_text_total_font_weight:800,center_text_amount_max_width:70,arcs:{filter:{grayFilter:!0},cornerRadius:{radiusCorner:0},padAngle:0},grayColorsPalette:["#ededed","#d5d6d7","#dfe0e2","#ededed","#dfe0e2","#d5d6d7","#dfe0e2"],inflowColorPalette:e&&e.inflowColor?[e.inflowColor]:["#0275be"],outflowColorPalette:e&&e.outflowColor?[e.outflowColor]:["#ff6c53"],basicColorPalette:e&&e.outflowColor?[e.outflowColor]:["#ff6c53"]}},beforeRender:function(e,t){s.story.PieChartCatalogParent.prototype.beforeRender.call(this,e,t)},afterRender:function(e){this.frameEl&&s.story.PieChartCatalogParent.prototype.afterRender.call(this,e)},render:function(e,t){s.story.PieChartCatalogParent.prototype.render.call(this,e,t)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(o){o.story=o.story||{},o.story.TransactionListBlockTL1=o.story.TransactionsListBlock.extend({getHtmlTemplateId:function(e,t,s){return"tl1-"+s},$selectors:function(){var e={$persoTxName:".perso-tx-name",$persoTxContainer:".perso-tx-container",$persoTxWithoutIcons:"perso-tx-without-icon",$persoTxIcon:".perso-tx-icon",$persoTxWithNoIcons:"perso-tx-col-with-no-icons",$persoTxDate:".perso-tx-date",$persoTxSeparator:".perso-separator",$persoTxAccountName:".perso-tx-account-name",$persoTxAmount:".perso-tx-amount",$persoTxDateComment:".perso-tx-date-comment",$persoTxAmountComment:".perso-tx-amount-comment",$persoTxInfoContainer:".perso-tx-info-container",$persoTxTag:".perso-tx-tag",$persoTxRowWrapper:".perso-table-row-wrapper",$persoTxColEnrichment:".perso-tx-col-enrichment",$persoTxEnrichmentBtn:".perso-tx-enrichment-btn",$persoTableRowWrapper:".perso-table-row-wrapper",$persoTxInstallmentComment:".perso-tx-installment-comment"};return e.$persoThemeHeaderColor=e.$persoTxDate+" , "+e.$persoTxSeparator+" , "+e.$persoTxAccountName+" , "+e.$persoTxAmount+" , "+e.$persoTxDateComment+" , "+e.$persoTxAmountComment+" , "+e.$persoTxInstallmentComment,e.$persoThemeBrandColor=e.$persoTxName,e},initialize:function(e,t,s){o.story.TransactionsListBlock.prototype.initialize.call(this,e,t,s)},beforeRender:function(e,t){o.story.TransactionsListBlock.prototype.beforeRender.call(this,e,t)},afterRender:function(e){this.frameEl&&o.story.TransactionsListBlock.prototype.afterRender.call(this,e)},render:function(e,t){o.story.TransactionsListBlock.prototype.render.call(this,e,t)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.DotsLineChartBlockLC1=e.story.DotsLineChartBlock.extend({getHtmlTemplateId:function(){return"line-chart-lc1"},$selectors:function(){return{$persoCatalogVersion:"-lc1",$pstoryFrame:".pstory-frame",$pstoryContainer:".pstory-container",$pstoryDialogFrame:".pstory-dialog-frame",$pstoryBlockLineChart:".pstory-block-line-chart-lc1",$pstoryBlockContainer:".pstory-block-container",$pstoryLineChart:".pstory-line-chart",$persoSvgChartContainer:".perso-svg-chart-container",$persoTooltipLineChartAmount:".perso-line-chart-amount",$persoTooltipLineChartDate:".perso-line-chart-month"}},getLineChartCatalogConfigs:function(){return{areaConfig:{},skinCtrlConfig:{svgHeight:200,svgWidth:290,marginTop:20,line_left:36,line_top:60,line_width:218,line_height:65,area_display:!1,lineStyle_interpolate:"basis",lineStyle_thickness:2,xAxis_line_y:20,xAxis_line_height:120,xAxis_text_y:156,xAxis_display:!0,yAxis_x:0,yAxis_y:0,yAxis_display:!1,dots_radius:4,dots_radius_selected:4,labels_x:0,labels_y:14.3,labels_display:!0,horizonalLine_x:0,horizonalLine_length:308,horizonalLine_y:100,horizonalLine_display:!1,highlightBy:"last",doAnimations:!0,lineDuration:1e3,lineDelay:200,dotsDelay:700,dotsLabelDelay:800,dotsDuration:500,areaDelay:1200,areaDuration:500},dotAsImgConfig:{},bubbleTooltipMode:!1,LineGraphThemeColor:!1}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.EntitySelectorBlockES1Icons=e.story.EntitySelectorIconsBlock.extend({getEntityListCatalogConfig:function(){return{catalogNumber:1}},getPercentageShape:function(){return"circle"}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.EntitySelectorBlockES1Cards=e.story.EntitySelectorCardsBlock.extend({getEntityListCatalogConfig:function(){return{catalogNumber:1}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.TriviaBlockTRV1=e.story.TriviaBlock.extend({getHtmlTemplateId:function(){return"trivia-trv1"}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.CounterBlockSCR1=e.story.CounterBlock.extend({getHtmlTemplateId:function(){return"counter-scr1"},getCounterBlockDefaultConfig:function(){return{scoringBar:this.selectors.$longRectangle,timeoutsDuration:{barsDuration:e.utils.projectConf.verifyConfig("counterBarsDuration",500),answersDuration:e.utils.projectConf.verifyConfig("counterAnswersDuration",1500)}}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.CalendarBlockCL1=e.story.CalendarBlock.extend({getDayTemplate:function(){return"calendarDayCL1"}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.TabsTB1=e.story.TabsCatalogParent.extend({getHtmlTemplateId:function(){return"tb1"}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s){s.story=s.story||{},s.story.FilterFL1=s.story.FilterParentCatalog.extend({getHtmlTemplateId:function(){return"filter-fl1"},beforeRender:function(e,t){s.story.FilterParentCatalog.prototype.beforeRender.call(this,e,t)},afterRender:function(e){s.story.FilterParentCatalog.prototype.afterRender.call(this,e)},render:function(e,t){s.story.FilterParentCatalog.prototype.render.call(this,e,t)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(t,s){t.story=t.story||{},t.story.EntityListEL1=t.story.EntityListParentCatalog.extend({getHtmlTemplateId:function(){return"entity-sub-transactions"},$selectors:function(){var e=t.story.EntityListParentCatalog.prototype.$selectors.call();return s.extend(!0,e,{})},getEntityListConfigs:function(){return{blockHeight:96,defaultAssetName:t.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-list/defaultAssetName","logo-default"),defaultAssetDirectory:t.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-list/defaultAssetDirectory","logos"),defaultAssetExtension:t.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-list/defaultIconExtension","svg"),isEntityListAmountOnBottom:t.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-list/isEntityListAmountOnBottom",!1)}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.RadioButtonRB4=e.story.RadioButton.extend({getHtmlTemplateId:function(){return"radio-button-rb4"}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.BarChartBlockBC2=e.story.BarChartBlock.extend({getHtmlTemplateId:function(){return"pure-bar-chart-bc2"},getBarChartConfigs:function(){return{monthPickerHeight:51,addBarsWrapperHeightForNegative:!0,addMonthAmountMarginsCalc:!1,addIndicatorTopPosition:!1,isBarClickable:e.utils.projectConf.verifyConfig("isBarClickable",!0),indicatorType:e.utils.projectConf.verifyConfig("indicatorType","mtd-5"),options:{height:.07746,marginBetweenBars:4.6,amountAnimationDuration:1500,minBarHeight:.00625,defaultBarHeight:568}}},$selectors:function(){return{$persoBarChartContainer:".pstory-bar-chart-bc2 .perso-bar-chart-container",$persoBarChartWrapper:".pstory-bar-chart-bc2 .perso-bar-chart-wrapper",$persoBarsWrapper:".pstory-bar-chart-bc2 .perso-bars-wrapper",$persoComparableChart:".pstory-block-container .pstory-block-content .pstory-bar-chart-bc2 .perso-comparable-chart",$persoLegentIndicatorHeight:".perso-legend-wrapper .perso-bar-chart-legend",$persoLegendText:".perso-bar-chart-legend-txt",$pstoryBarChart:".pstory-bar-chart",$persoSelectedMonthPickerTab:".pstory-month-picker-selected-tab",$persoMonthPickerContainer:".perso-month-picker-container",$persoMonthAmount:".perso-month-amount",$persoMonthPickerWrapper:".perso-month-picker-wrapper"}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.ComparableChartCC3=e.story.ComparableChartBlock.extend({getHtmlTemplateId:function(){return"comparable-chart-cc3"},getBarChartConfigs:function(){return{monthPickerHeight:51,addBarsWrapperHeightForNegative:!1,addMonthAmountMarginsCalc:!1,addIndicatorTopPosition:!1,animateTooltipWidth:!0,isBarClickable:!0,staticToolTip:!0,indicatorType:"mtd-1",options:{height:.10564,heightWithStaticToolTip:.10564,marginBetweenBars:4.8,tooltipJMarginBottom:15,amountAnimationDuration:1500,minBarHeight:.00625,defaultBarHeight:568}}},updateBarChartConfigsFromProject:function(){e.story.ComparableChartBlock.prototype.updateBarChartConfigsFromProject.call(this),"boolean"==typeof e.projectConfiguration.getConfig("animateTooltipWidth")&&(this.barChartConfig.animateTooltipWidth=e.projectConfiguration.getConfig("animateTooltipWidth"))},$selectors:function(){return{$persoBarChartContainer:".pstory-bar-chart-cc3 .perso-bar-chart-container",$persoBarChartWrapper:".pstory-bar-chart-cc3 .perso-bar-chart-wrapper",$persoBarsWrapper:".pstory-bar-chart-cc3 .perso-bars-wrapper",$persoComparableChart:".pstory-block-container .pstory-block-content .pstory-bar-chart-cc3 .perso-comparable-chart",$persoComparableChartContainer:".pstory-bar-chart-cc3 .perso-bar-chart-container",$persoLegentIndicatorHeight:".perso-legend-wrapper .perso-bar-chart-legend",$persoTooltipInflowText:".perso-static-tooltip-text.perso-in",$persoTooltipOutflowText:".perso-static-tooltip-text.perso-out",$persoTooltipAmountIn:".perso-col-mode-in .perso-static-tooltip-amount",$persoTooltipAmountOut:".perso-col-mode-out .perso-static-tooltip-amount",$persoMonthPickerContainer:".perso-month-picker-container",$persoSelectedMonthPickerTab:".pstory-month-picker-selected-tab",$persoLegendText:".perso-bar-chart-legend-txt",$persoMonthPickerWrapper:".perso-month-picker-wrapper",$persoTooltipAmount:".perso-tooltip-container .perso-static-tooltip-amount",$persoTooltipWrappingEl:".perso-tooltip-container .perso-tooltip-wrapping-el"}},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.inflowColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTooltipAmountIn),"perso-theme-inflowColor-color"),personetics.config.theme.outflowColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTooltipAmountOut),"perso-theme-outflowColor-color"),personetics.config.theme.brandColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBarChartWrapper),"perso-theme-brandColor-mtd"),personetics.config.theme.pickerColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoMonthPickerContainer),"perso-theme-pickerColor-selected-month-item-color"),personetics.config.theme.headerColor&&(e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTooltipWrappingEl),"perso-theme-headerColor-border-color"),e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoLegendText+", "+this.selectors.$persoTooltipAmount+", "+this.selectors.$persoTooltipInflowText+", "+this.selectors.$persoTooltipOutflowText),"perso-theme-headerColor-color"),e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoComparableChartContainer),"perso-theme-headerColor-comparable-bar-in-background")),personetics.config.theme.backgroundColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoMonthPickerWrapper+","+this.selectors.$persoMonthPickerContainer+","+this.selectors.$persoSelectedMonthPickerTab),"perso-theme-backgroundColor-background"),personetics.config.theme.greyLightColor&&(e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBarChartWrapper),"perso-theme-greyLightColor-bars-series-background"),e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoMonthPickerWrapper),"perso-theme-greyLightColor-month-picker-background"),e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTooltipContainer),"perso-theme-greyLightColor-line-between-border-color")))},updateTooltipWidth:function(e){var t=document.querySelector(".perso-tooltip-wrapping-el").cloneNode(!0),s=(t.id="perso-tooltip-helper",document.querySelector(".perso-tooltip-container")),o=(s.appendChild(t),this.frameEl.find("#perso-tooltip-helper").css("width",""),this.frameEl.find("#perso-tooltip-helper").width());s.removeChild(t),this.frameEl.find(".perso-tooltip-wrapping-el").css("width",e+"px"),this.frameEl.find(".perso-tooltip-wrapping-el").css("width",o+"px")},tabClickListener:function(t){var e,s;this.changeSelectedElm(t),this.isSeries?(s=this.frameEl.find(".perso-bar.perso-selected").parents(".perso-series-wrapper"),s=this.layoutInstructions.series[s.index()],e=this.frameEl.find(".perso-tooltip-wrapping-el").width(),this.setStaticTooltipLabel(s),this.barChartConfig.animateTooltipWidth&&this.updateTooltipWidth(e)):(s=this.series.filter(function(e){return e.category==t})[0],this.setMonthAmount(s.label))}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.DotsLineChartBlockLC3=e.story.DotsLineChartBlock.extend({getHtmlTemplateId:function(){return"line-chart-lc3"},$selectors:function(){return{$persoCatalogVersion:"-lc3",$pstoryFrame:".pstory-frame",$pstoryContainer:".pstory-container",$pstoryDialogFrame:".pstory-dialog-frame",$pstoryBlockLineChart:".pstory-block-line-chart-lc3",$pstoryBlockContainer:".pstory-block-container",$pstoryLineChart:".pstory-line-chart",$persoSvgChartContainer:".perso-svg-chart-container",$persoTooltipLineChartAmount:".perso-line-chart-amount",$persoTooltipLineChartDate:".perso-line-chart-month",$persoAreaContainer:".perso-area-container"}},getLineChartCatalogConfigs:function(){return{areaConfig:{area_display:!0,displayAsGradient:!1},skinCtrlConfig:{svgHeight:184,svgWidth:290,marginTop:4,line_left:37,line_top:61,line_width:215,line_height:53,lineStyle_interpolate:"basis",lineStyle_thickness:2,xAxis_line_y:20,xAxis_line_height:120,xAxis_text_y:154,xAxis_display:!0,yAxis_x:0,yAxis_y:0,yAxis_display:!1,dots_radius:4.5,dots_radius_selected:4,labels_x:0,labels_y:14.3,labels_display:!0,horizonalLine_x:0,horizonalLine_length:308,horizonalLine_y:100,horizonalLine_display:!1,highlightBy:"last",doAnimations:!0,lineDuration:1e3,lineDelay:200,dotsDelay:700,dotsLabelDelay:800,dotsDuration:500,areaDelay:1200,areaDuration:500},dotAsImgConfig:{showDotAsImg:!0,imgSrc:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='13px' height='13px' viewBox='0 0 13 13' version='1.1'%3E%3Ctitle%3EEllipse 2 copy 4%3C/title%3E%3Cg id='Page-1' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='LC-3' transform='translate(-168.000000, -78.000000)' fill='%23FFFFFF' stroke='%232C375F' stroke-width='3'%3E%3Cpath d='M174.637985,79.880495 C175.864783,79.880495 176.975297,80.3780639 177.77919,81.1822081 C178.583431,81.9867008 179.08085,83.0980354 179.08085,84.32522 C179.08085,85.5525795 178.583613,86.6637249 177.779523,87.4680021 C176.975583,88.2721282 175.864917,88.769465 174.637985,88.769465 C173.41138,88.769465 172.300661,88.2719528 171.496602,87.4677071 C170.692548,86.6634664 170.19512,85.5524575 170.19512,84.32522 C170.19512,83.0981574 170.692731,81.9869593 171.496935,81.1825032 C172.300947,80.3782394 173.411514,79.880495 174.637985,79.880495 Z' id='Ellipse-2-copy-4'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E",dotImgWidth:13,dotImgHeight:13},bubbleTooltipMode:!1,LineGraphThemeColor:!0}},setThemeClasses:function(){e.story.DotsLineChartBlock.prototype.setThemeClasses.call(this),personetics.config.theme&&(personetics.config.theme.backgroundColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$pstoryLineChart),"perso-theme-backgroundColor-area-container-fill"),personetics.config.theme.backgroundDarkColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$pstoryLineChart),"perso-theme-backgroundDarkColor-svg-container-background"))}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.NewButtonsBlockBTN3=e.story.NewButtonsBlock.extend({getHtmlTemplateId:function(e){return"perso-trivia"==e?"trivia-buttons":"buttons-btn3"},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&!this.frameEl.hasClass("perso-secondary")&&(e.utils.persoTheming.addClassToElement(this.frameEl.find(this.btnselectors.$pstoryBasicButton),"perso-theme-brandColor-border-color"),e.utils.persoTheming.addClassToElement(this.frameEl.find(this.btnselectors.$pstoryBasicButton),"perso-theme-brandColor-color")),personetics.config.theme.headerColor&&this.frameEl.hasClass("perso-secondary")&&(e.utils.persoTheming.addClassToElement(this.frameEl.find(this.btnselectors.$pstoryBasicButton),"perso-theme-headerColor-border-color"),e.utils.persoTheming.addClassToElement(this.frameEl.find(this.btnselectors.$pstoryBasicButton),"perso-theme-headerColor-color")),personetics.config.theme.backgroundColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.btnselectors.$pstoryBasicButton),"perso-theme-backgroundColor-background"))}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(r,s){r.story=r.story||{},r.story.PieChartPC4=r.story.PieChartCatalogParent.extend({getHtmlTemplateId:function(){return"pie-chart-pc4"},$selectors:function(){var e=r.story.PieChartCatalogParent.prototype.$selectors.call();return s.extend(!0,e,{$pieCategoryIcon:".perso-pie-icon"})},getPieChartConfigs:function(){var e=personetics.config.mappedColors;return{doAnimations:!0,pieDelay:0,pieDuration:300,pieSelectedDelay:450,pieIconDelay:525,pieIconDuration:200,arcs:{filter:{grayFilter:!0},cornerRadius:{radiusCorner:0},padAngle:0},iconExtension:"svg",iconAssetsFolder:"category_icons",defaultIcon:"cg0",grayColorsPalette:["#ededed","#d5d6d7","#dfe0e2","#ededed","#dfe0e2","#d5d6d7","#dfe0e2"],inflowColorPalette:e&&e.inflowColor?[e.inflowColor]:["#0275be"],outflowColorPalette:e&&e.outflowColor?[e.outflowColor]:["#ff6c53"],basicColorPalette:e&&e.outflowColor?[e.outflowColor]:["#ff6c53"],loaderUrlPath:"/navigation/loading.gif",enablePieRTL:!0}},setImageIcon:function(e,t){e.length&&e[0].href&&"string"==typeof e[0].href.baseVal&&"string"==typeof e[0].href.animVal&&(e[0].href.baseVal=t,e[0].href.animVal=t)},setPieIcon:function(e){var t=this.frameEl.find(this.selectors.$pieCategoryIcon),s=(this.setImageIcon(t,r.projectConfiguration.getConfig("localBaseUrl")+this.options.loaderUrlPath),this.options.defaultIcon),e=(e&&"string"==typeof e&&(s=e.toLowerCase()),this.layoutInstructions.baseUrl+"/"+this.options.iconAssetsFolder+"/"+s+"."+this.options.iconExtension);this.setImageIcon(t,e)},updatePieInfoValues:function(e){var t,s,o,n;e&&(t='<div class="pstory-pie-amount perso-accessibility-no-read"><span>'+e.label+"</span></div>",n='<div class="pstory-pie-category perso-accessibility-no-read"><span>'+e.category+"</span></div>",s='<div class="pstory-pie-total-text perso-accessibility-no-read">'+this.totalText+" "+this.totalAmount+"</div>",(o=this.frameEl.find(this.selectors.$pstoryPieInfo)).empty(),o.append(n),o.append(t),this.totalAmount&&this.totalText&&"perso_empty"!==this.layoutInstructions.slices[0].class&&o.append(s),this.addInfoTextForAccessibility(o,e),this.setAmountColor(this.colorArcs(e.category)),"perso_empty"!==e.class&&(n=this.layoutInstructions.icon)&&this.setPieIcon(e[n="category"===n?"categoryId":n]))},renderPie:function(e,t){this.renderArcs(t),1===t.slices.length&&"perso_empty"===t.slices[0].class?(this.el.find(this.selectors.$pstoryBlockPieChart).addClass("perso-empty"),this.renderPieIconElement(),this.setPieIcon("no_transactions")):(this.renderPieIconElement(),1==this.options.drawCenterLine&&this.renderLine())},createDataString:function(){var e=s("<span></span>"),t=(0,r.utils.persoValidator.isValidSelector)(this.totalAmount)?s(this.totalAmount).attr("aria-label"):"";return e.append(this.totalText+": "+t+"."),e.text()},setPieSize:function(e){this.margin={top:0,right:20,bottom:0,left:20},this.width=e,this.height=.6*this.width,this.radius=Math.min(this.width,this.height)/2,this.innerRadius=this.radius-20,this.outerRadius=this.radius-26,this.innerRadiusOver=this.radius-16,this.outerRadiusOver=this.radius-30,-1!==this.el.find(this.selectors.$pstoryBlockPieChart).get(0).className.indexOf("perso-empty")&&(this.innerRadiusOver=this.innerRadius,this.outerRadiusOver=this.outerRadius)},renderPieIconElement:function(){var e,t,s=this.options.defaultIcon||"",o=this,n=(this.svg.append("image").attr("class","perso-pie-icon"),this.frameEl.find(this.selectors.$pieCategoryIcon));n&&n.length&&(e=n.width(),t=n.height(),n.get(0).setAttribute("width",e||"2em"),n.get(0).setAttribute("height",t||"2em"),e=n.get(0).getBBox().width/2*-1,t=n.get(0).getBBox().height/2*-1,n.get(0).setAttribute("x",e),n.get(0).setAttribute("y",t),this.setImageIcon(n,r.projectConfiguration.getConfig("localBaseUrl")+this.options.loaderUrlPath),n.on("error",function(){o.setPieIcon(s)}))},textTransition:function(){var e=this.svg.select(this.selectors.$pieCategoryIcon);e.style("transform","scale(0)"),void 0!==e&&e.transition().duration(this.options.pieIconDuration).delay(this.options.pieIconDelay).style("transform","scale(1)")}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(t,s){t.story=t.story||{},t.story.EntityListEL3=t.story.EntityListParentCatalog.extend({getHtmlTemplateId:function(){return"entity-sub-transactions-el3"},getEntityListConfigs:function(){return{defaultAssetName:t.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-list/defaultAssetName","logo-default"),defaultAssetDirectory:t.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-list/defaultAssetDirectory","logos"),defaultAssetExtension:t.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-list/defaultIconExtension","svg"),isEntityListAmountOnBottom:t.utils.projectConf.verifyConfig("storyBlocksConfigurations/entity-list/isEntityListAmountOnBottom",!1)}},$selectors:function(){var e=t.story.EntityListParentCatalog.prototype.$selectors.call();return s.extend(!0,e,{$persoButton:".perso-button-wrapper",$persoTextBox:".perso-entity-textbox",$persoTextBoxTopContainer:".perso-entity-textbox-top-container",$persoTextBoxImg:".perso-entity-textbox-image"})}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(t){t.story=t.story||{},t.story.TransactionListBlockTL2=t.story.TransactionsListBlock.extend({getHtmlTemplateId:function(e,t,s){return"tl2-"+s},$selectors:function(){var e=t.story.TransactionsListBlock.prototype.$selectors.call(this);return e.$persoTxInfoContainer=".perso-tx-info-container",e.$persoThemeHeaderColor=e.$persoTxAccountName+" , "+e.$persoTxAmount+" , "+e.$persoTxAmountComment+" , "+e.$persoTxDate+" , "+e.$persoTxDateComment+" , "+e.$persoTxInstallmentComment,e.$persoTxColEnrichment=".perso-tx-col-enrichment",e.$persoTxEnrichmentBtn=".perso-tx-enrichment-btn",e.$persoThemeBrandColor=e.$persoTxName,e}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(i,a){i.story=i.story||{},i.story.TriviaBlockTRV4=i.story.TriviaBlock.extend({getHtmlTemplateId:function(){return"trivia-trv4"},getTriviaConfigs:function(){return{showPaginationAsIndicators:!0}},$selectors:function(){return{$persoTriviaFrameContainer:".pstory-container.perso-trivia-frame-container",$persoTriviaFrame:".pstory-dialog-frame",$persoTriviaId:"#perso-"+this.layoutInstructions.id,$persoAnswerWrappers:".perso-trivia-container-trv4 .perso-answers-wrapper",$persoAnswer:".perso-answer",$persoTriviaPageIndex:".perso-trivia-container-trv4 .perso-trivia-page-index",$persoAanswerIcon:".perso-answer-icon",$persoAnswerText:".perso-answer-text",$persoTriviaQuestion:".perso-trivia-container-trv4 .perso-trivia-question",$persoTriviaQuestionText:".perso-trivia-container-trv4 .perso-question-text",$persoAnswerCorrect:"perso-answer-correct",$persoAnswerIncorrect:"perso-answer-incorrect",$persoAnswerTextIncorrect:"perso-answer-text-incorrect",$persoTriviaAnimateOut:"perso-trivia-animate-out",$persoTriviaAnimateIn:"perso-trivia-animate-in",$persoAnswerTransparentIcon:"perso-answer-transparent-icon",$persoSelected:"perso-selected",$persoTrivia:"perso-trivia",$persoSelectedAnswer:".perso-trivia-container-trv4 .perso-answer.perso-selected",$persoTriviaFrameContainerAnimated:"perso-trivia-frame-container-animated",$persoTriviaButton:".perso-trivia-button .pstory-button",$persoTriviaButtonContainer:".perso-trivia-button",$persoResultPageFrame:".perso-result-page-frame",$persoResultPageH2Text:".perso-result-page-frame .pstory-block-text .pstory-block-content",$persoAnswersContainer:".perso-answers-container"}},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&i.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoAnswerText),"perso-theme-brandColor-color"),personetics.config.theme.headerColor&&i.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoAnswersContainer),"perso-theme-headerColor-incorrect-answer-color"),personetics.config.theme.backgroundColor&&i.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoAnswersContainer),"perso-theme-backgroundColor-background"),personetics.config.theme.greyLightColor&&i.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoAnswersContainer),"perso-theme-greyLightColor-answer-bottom-border-color"),personetics.config.theme.backgroundDarkColor&&i.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoAnswerWrappers),"perso-theme-backgroundDarkColor-selected-answer-background"))},moveDialog:function(){var t=this,e=a(this.el),s=e.parents(this.selectors.$persoTriviaFrame),e=e.parents(this.selectors.$persoTriviaFrameContainer),o=e.find(this.selectors.$persoTriviaFrame).last(),n=e.length?o.outerWidth(!0):0,r=this.getNextDlgIndex();n&&(s.removeClass(this.selectors.$persoTriviaAnimateIn).addClass(this.selectors.$persoTriviaAnimateOut),this.isTriviaRTLMode?e.css("transform","translate("+n*r+"px)"):e.css("transform","translate(-"+n*r+"px)"),o.addClass(this.selectors.$persoTriviaAnimateIn),setTimeout(function(){var e;o.hasClass(t.selectors.$persoTrivia)?i.utils.accessibility.putFocus(t.selectors.$persoTriviaQuestionText):o.hasClass("perso-result-page-frame")&&(e=a(t.selectors.$persoResultPageH2Text).first(),i.utils.accessibility.putFocus(e)),t.setAriaHiddenOnElement(s)},this.triviaConfig.timeOuts.moveFocusToQuestions))}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.triviaButtonsLNK2=e.story.triviaButtons.extend({getHtmlTemplateId:function(){return"trivia-buttons-lnk2"},$selectors:function(){return{$persoTriviaFrameContainer:".pstory-container.perso-trivia-frame-container",$persoTriviaButton:".pstory-block-trivia-buttons-lnk2 .perso-trivia-button .pstory-button",$persoTriviaButtonContainer:".pstory-block-trivia-buttons-lnk2 .perso-trivia-button",$persoResultPageFrame:".perso-result-page-frame",$persoTriviaButtonTitle:".perso-trivia-button-title",$persoTriviaButtonDescription:".perso-trivia-button-description",$persoTriviaButtonDescriptionSpan:".perso-trivia-button-description span"}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,t){s.story=s.story||{},s.story.PinGraphChartBlocPCV2=s.story.PinChartCatalogParent.extend({getHtmlTemplateId:function(){return"pin-chart-pcv2"},$selectors:function(){var e=s.story.PinChartCatalogParent.prototype.$selectors.call();return t.extend(!0,e,{$persoSelectedPin:".perso-pin-item-wrapper:first-child",$persoUnSelectedPins:".perso-pin-item-wrapper:not(:first-child)",$pstoryPinGraphContainer:".perso-pin-graph-container",$persoPinGraphContainer:".perso-pin-graph-container",$persoGraphBar:".perso-pin-bar",$persoNegativeGraph:".perso-pin-graph-container.perso-negative",$persoPositiveGraph:".perso-pin-graph-container:not(.perso-negative)",$persoInfoRow:".perso-pin-item-wrapper",$persoPinGrapItemWrapper:".perso-pin-item-wrapper",$persoDateText:".perso-date-txt",$persoAmount:".perso-pin-amount"})},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.headerColor&&(s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoAmount),"perso-theme-headerColor-background perso-theme-headerColor-pin-amount-tooltip-borde-color"),s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoDateText),"perso-theme-headerColor-color")),personetics.config.theme.greyLightColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoUnSelectedPins+" "+this.selectors.$persoGraphBar),"perso-theme-greyLightColor-background"),personetics.config.theme.backgroundDarkColor&&(s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoPinGraphContainer),"perso-theme-backgroundDarkColor-background"),s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoAmount),"perso-theme-backgroundDarkColor-color")))},getPinChartConfig:function(){return{isHorizontal:!1}},setAccessibilityText:function(){var e=s.dictionary.getText("accessibilityPinGraph"),e=(s.utils.accessibility.addAltTextToElement(this.frameEl,e),this.frameEl.find(this.selectors.$persoSelectedPin)),t=e.find(this.selectors.$persoDateText).text()+e.find(this.selectors.$persoAmount+" .perso-amount").attr("aria-label");e.attr("aria-label",t),e.attr("role","text")}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.story=e.story||{},e.story.CalendarBlockCL6=e.story.CalendarBlock.extend({getHtmlTemplateId:function(){return"calendar-cl6"},getCalendarCatalogConfigs:function(){return{setCalendarTransactionType:!0}},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.inflowColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTypeInDot),"perso-theme-inflowColor-background"),personetics.config.theme.outflowColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoTypeOutDot),"perso-theme-outflowColor-background"),personetics.config.theme.brandColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBottomText),"perso-theme-brandColor-border-color"),personetics.config.theme.headerColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBottomText),"perso-theme-headerColor-color"),personetics.config.theme.datesColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoWeekDay+","+this.selectors.$persoCircleTextNotBold),"perso-theme-datesColor-color"),personetics.config.theme.backgroundColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCalendarContainer+","+this.selectors.$persoCalendarInnerContainer),"perso-theme-backgroundColor-background"),personetics.config.theme.backgroundDarkColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCalendarMonths),"perso-theme-backgroundDarkColor-background"),personetics.config.theme.pickerColor&&e.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoCircleTextBold),"perso-theme-pickerColor-color"))}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){this.Personetics=this.Personetics||{},this.Personetics.UI=this.Personetics.UI||{},this.Personetics.UI.Handlebars=this.Personetics.UI.Handlebars||{},this.Personetics.UI.Handlebars.templates=this.Personetics.UI.Handlebars.templates||{},this.Personetics.UI.Handlebars.templates.disclaimerButton=e.template({1:function(e,t,s,o,n){return' aria-label="'+(null!=(e=e.lambda(null!=(e=null!=t?t.texts:t)?e.aboutTxt:e,t))?e:"")+'" type="button" role="button" tabindex="0"'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r;return'<div class="perso-disclaimer-button">\n    <div class="perso-disclaimer-button-text" aria-hidden="true">'+(null!=(r=e.lambda(null!=(r=null!=t?t.texts:t)?r.aboutTxt:r,t))?r:"")+'</div>\n    <div class="perso-disclaimer-button-icon" '+(null!=(r=s.if.call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t.texts:t)?r.aboutTxt:r,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+"></div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates.disclaimerModal=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,e=e.lambda;return'<div id="perso-disclaimer-modal" class="perso-disclaimer-modal perso-modal">\n    <div class="perso-disclaimer-modal-content perso-modal-element-content">\n        <div class="perso-disclaimer-title">\n            <input type="button" class="perso-disclaimer-close perso-close-modal" />\n            <div class="perso-disclaimer-title-text" tabindex="0" role="text">'+(null!=(r=e(null!=(r=null!=t?t.texts:t)?r.disclaimerTitle:r,t))?r:"")+'</div>\n        </div>\n        <div class="perso-disclaimer-modal-text perso-modal-text">\n            <div class="perso-disclaimer-header" role="text" aria-label="'+(null!=(r=e(null!=(r=null!=t?t.texts:t)?r.disclaimerHeader:r,t))?r:"")+'">'+(null!=(r=e(null!=(r=null!=t?t.texts:t)?r.disclaimerHeader:r,t))?r:"")+'</div>\n            <div class="perso-disclaimer-first perso-disclaimer-item" role="text" aria-label="1- '+(null!=(r=e(null!=(r=null!=t?t.texts:t)?r.disclaimerText1:r,t))?r:"")+'">\n                <span class="perso-disclaimer-first-number perso-disclaimer-number" aria-hidden="true">1</span>\n                <span class="perso-disclaimer-first-text perso-disclaimer-text">'+(null!=(r=e(null!=(r=null!=t?t.texts:t)?r.disclaimerText1:r,t))?r:"")+'</span>\n            </div>\n            <div class="perso-disclaimer-second perso-disclaimer-item" role="text" aria-label="2- '+(null!=(r=e(null!=(r=null!=t?t.texts:t)?r.disclaimerText2:r,t))?r:"")+'">\n                <span class="perso-disclaimer-second-number perso-disclaimer-number" aria-hidden="true">2</span>\n                <span class="perso-disclaimer-second-text perso-disclaimer-text">'+(null!=(r=e(null!=(r=null!=t?t.texts:t)?r.disclaimerText2:r,t))?r:"")+'</span>\n            </div>\n            <input type="button" class="perso-disclaimer-finish-button perso-close-modal" role="button"\n                   value="'+(null!=(r=e(null!=(r=null!=t?t.texts:t)?r.disclaimerButton:r,t))?r:"")+'" />\n        </div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["error-msg"]=e.template({1:function(e,t,s,o,n){return"perso-mobile-err"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing,a="function",l=e.escapeExpression;return'<div id="personetics-error-container" class="perso-error-container '+(null!=(e=s.if.call(r,null!=t?t.isMobileDevice:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?e:"")+'">\n    <div class="personetics-error-img '+l(_typeof(e=null!=(e=s.imgClass||(null!=t?t.imgClass:t))?e:i)===a?e.call(r,{name:"imgClass",hash:{},data:n}):e)+'"></div>\n    <div class="personetics-error-larg">'+l(_typeof(e=null!=(e=s.textLarge||(null!=t?t.textLarge:t))?e:i)===a?e.call(r,{name:"textLarge",hash:{},data:n}):e)+'</div>\n    <div class="personetics-error-small">'+l(_typeof(e=null!=(e=s.textSmall||(null!=t?t.textSmall:t))?e:i)===a?e.call(r,{name:"textSmall",hash:{},data:n}):e)+'</div>\n    <div class="personetics-no-insights-btn"><span class="personetics-btn-text">'+l(_typeof(e=null!=(e=s.btnText||(null!=t?t.btnText:t))?e:i)===a?e.call(r,{name:"btnText",hash:{},data:n}):e)+"</span></div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["no-filtered-insights-msg"]=e.template({1:function(e,t,s,o,n){return"perso-mobile-msg"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'<div id="personetics-no-insights-filter-container" class="perso-no-insights-filter-container '+(null!=(r=s.if.call(i,null!=t?t.isMobileDevice:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'">\n    <div class="personetics-nothing-toshow-img"></div>\n    <div class="personetics-nothing-toshow-msg">'+e.escapeExpression("function"==typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:s.helperMissing)?r.call(i,{name:"text",hash:{},data:n}):r)+"</div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["no-insights-message"]=e.template({1:function(e,t,s,o,n){return"perso-mobile-err"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing,a="function",l=e.escapeExpression;return'<div id="personetics-no-insights-container" class="perso-no-insights-container '+(null!=(e=s.if.call(r,null!=t?t.isMobileDevice:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?e:"")+'">\n    <div class="personetics-no-insights-img '+l(_typeof(e=null!=(e=s.imgClass||(null!=t?t.imgClass:t))?e:i)===a?e.call(r,{name:"imgClass",hash:{},data:n}):e)+'"></div>\n    <div class="personetics-no-insights-small">'+l(_typeof(e=null!=(e=s.textSmall||(null!=t?t.textSmall:t))?e:i)===a?e.call(r,{name:"textSmall",hash:{},data:n}):e)+'</div>\n    <div class="personetics-no-insights-larg">'+l(_typeof(e=null!=(e=s.textLarge||(null!=t?t.textLarge:t))?e:i)===a?e.call(r,{name:"textLarge",hash:{},data:n}):e)+"</div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-bar-chart-collapse"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,e=e.escapeExpression;return'<div class="pstory-block-frame pstory-block-bar-chart-collapse pstory-inner-'+e("function"===_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)?r.call(i,{name:"class",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-button-collapse">\n            \t<div class="pstory-inner-title">\n            \t\t'+e("function"===_typeof(r=null!=(r=s.txt||(null!=t?t.txt:t))?r:a)?r.call(i,{name:"txt",hash:{},data:n}):r)+'\n        \t\t</div>\n        \t\t<div class="pstory-button-collapse-icon"></div>\n        \t</div>\n            <div class="pstory-bar-chart-collapse-content">\n           \t\t<div class="perso-image"></div>\n       \t\t</div>\n        </div>\n    </div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-buttons"]=e.template({1:function(e,t,s,o,n,r,i){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.navigateTarget:t,{name:"if",hash:{},fn:e.program(2,n,0,r,i),inverse:e.program(4,n,0,r,i),data:n}))?s:""},2:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'                    <a id="'+e(_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)===l?r.call(i,{name:"id",hash:{},data:n}):r)+'" class="pstory-link-navigateTo pstory-button perso-ripple-closed" action-id="'+e(_typeof(r=null!=(r=s.action||(null!=t?t.action:t))?r:a)===l?r.call(i,{name:"action",hash:{},data:n}):r)+'" pnavigate-id="'+e(_typeof(r=null!=(r=s.navigateTarget||(null!=t?t.navigateTarget:t))?r:a)===l?r.call(i,{name:"navigateTarget",hash:{},data:n}):r)+'" >'+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)===l?r.call(i,{name:"text",hash:{},data:n}):r)?e:"")+"</a>\n"},4:function(e,t,s,o,n,r,i){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.toggleState:t,{name:"if",hash:{},fn:e.program(5,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n}))?s:""},5:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",c=e.escapeExpression;return'                        <input type="button" class="pstory-button pstory-toggle-button '+c(_typeof(r=null!=(r=s.toggleState||(null!=t?t.toggleState:t))?r:a)===l?r.call(i,{name:"toggleState",hash:{},data:n}):r)+" "+(null!=(e=s.if.call(i,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?e:"")+'" action-id="'+c(_typeof(r=null!=(r=s.action||(null!=t?t.action:t))?r:a)===l?r.call(i,{name:"action",hash:{},data:n}):r)+'" value="'+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)===l?r.call(i,{name:"text",hash:{},data:n}):r)?e:"")+'" pstory-type-text="Toggle '+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)===l?r.call(i,{name:"text",hash:{},data:n}):r)?e:"")+'" pstory-id="'+c(_typeof(r=null!=(r=s.toggleState||(null!=t?t.toggleState:t))?r:a)===l?r.call(i,{name:"toggleState",hash:{},data:n}):r)+'"/>\n'},6:function(e,t,s,o,n){return"perso-selected"},8:function(e,t,s,o,n,r,i){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=i[1]?i[1].typeRadio:i[1],{name:"if",hash:{},fn:e.program(9,n,0,r,i),inverse:e.program(12,n,0,r,i),data:n}))?s:""},9:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression;return'                            <div class="pstory-button pstory-radio-button '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'  perso-ripple-closed"  tabindex="0" action-id="'+u(_typeof(l=null!=(l=s.action||(null!=t?t.action:t))?l:p)===d?l.call(c,{name:"action",hash:{},data:n}):l)+'" pstory-id="'+u(_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)+'"  pstory-event="'+u(_typeof(l=null!=(l=s.event||(null!=t?t.event:t))?l:p)===d?l.call(c,{name:"event",hash:{},data:n}):l)+'">\n                                <input id="pstory-radio-'+u(_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)+'" name="radio-'+u(e.lambda(null!=i[1]?i[1].id:i[1],t))+'" type="radio" action-id="'+u(_typeof(l=null!=(l=s.action||(null!=t?t.action:t))?l:p)===d?l.call(c,{name:"action",hash:{},data:n}):l)+'" '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'/>\n                                <label for="pstory-radio-'+u(_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)+'" role="text">'+(null!=(a=_typeof(l=null!=(l=s.text||(null!=t?t.text:t))?l:p)===d?l.call(c,{name:"text",hash:{},data:n}):l)?a:"")+"</label>\n                            </div>\n"},10:function(e,t,s,o,n){return"checked"},12:function(e,t,s,o,n){var r,i=e.escapeExpression,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function";return'                            <button id="pop-'+i(e.lambda(t,t))+'" class="pstory-button pstory-regular-button '+(null!=(e=s.if.call(a,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?e:"")+' perso-ripple-closed" action-id="'+i(_typeof(r=null!=(r=s.action||(null!=t?t.action:t))?r:l)===c?r.call(a,{name:"action",hash:{},data:n}):r)+'" pstory-type-text="Button '+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:l)===c?r.call(a,{name:"text",hash:{},data:n}):r)?e:"")+'" pstory-id="'+i(_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:l)===c?r.call(a,{name:"id",hash:{},data:n}):r)+'" pstory-event="'+i(_typeof(r=null!=(r=s.event||(null!=t?t.event:t))?r:l)===c?r.call(a,{name:"event",hash:{},data:n}):r)+'">\n                                '+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:l)===c?r.call(a,{name:"text",hash:{},data:n}):r)?e:"")+"\n                            </button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{},c=s.helperMissing,p=e.escapeExpression;return'<div id="pstory-block-buttons_'+p("function"===_typeof(a=null!=(a=s.id||(null!=t?t.id:t))?a:c)?a.call(l,{name:"id",hash:{},data:n}):a)+'" class="pstory-block-frame pstory-block-buttons '+p("function"===_typeof(a=null!=(a=s.class||(null!=t?t.class:t))?a:c)?a.call(l,{name:"class",hash:{},data:n}):a)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(p=s.each.call(l,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?p:"")+"        </div>\n    </div>\n</div>"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-date-box"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'<div class="pstory-block-frame pstory-block-date-box '+e(_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)===l?r.call(i,{name:"class",hash:{},data:n}):r)+'">\n    <div class="pstory-block-contanier">\n        <div class="pstory-block-content" tabindex="0">\n            <div class="pstory-block-date-month">'+e(_typeof(r=null!=(r=s.month||(null!=t?t.month:t))?r:a)===l?r.call(i,{name:"month",hash:{},data:n}):r)+'</div>\n            <div class="pstory-block-date-day">'+e(_typeof(r=null!=(r=s.day||(null!=t?t.day:t))?r:a)===l?r.call(i,{name:"day",hash:{},data:n}):r)+"</div>\n        </div>\n    </div>\n</div>\n\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-entity-selector-cards"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,e=e.escapeExpression;return'<div class="pstory-block-frame pstory-block-entity-selector '+e("function"===_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)?r.call(i,{name:"class",hash:{},data:n}):r)+" "+e("function"===_typeof(r=null!=(r=s.catalogClass||(null!=t?t.catalogClass:t))?r:a)?r.call(i,{name:"catalogClass",hash:{},data:n}):r)+' perso-carousel-animate pstory-block-container pstory-block-content">\n    <div class="perso-carousel-inner-wrapper">\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-entity-selector-goals"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,e=e.escapeExpression;return'<div class="pstory-block-frame pstory-block-entity-selector '+e("function"===_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)?r.call(i,{name:"class",hash:{},data:n}):r)+" "+e("function"===_typeof(r=null!=(r=s.catalogClass||(null!=t?t.catalogClass:t))?r:a)?r.call(i,{name:"catalogClass",hash:{},data:n}):r)+' perso-carousel-animate pstory-block-container pstory-block-content">\n    <div class="perso-carousel-inner-wrapper">\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-entity-selector-icons"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,e=e.escapeExpression;return'<div class="pstory-block-frame pstory-block-entity-selector '+e("function"===_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)?r.call(i,{name:"class",hash:{},data:n}):r)+" "+e("function"===_typeof(r=null!=(r=s.catalogClass||(null!=t?t.catalogClass:t))?r:a)?r.call(i,{name:"catalogClass",hash:{},data:n}):r)+' perso-carousel-animate pstory-block-container pstory-block-content">\n    <div class="perso-carousel-inner-wrapper perso-icons">\n        <div class="pstory-entity-details"></div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-entity-selector"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r;return'<div class="pstory-block-frame pstory-block-entity-selector '+e.escapeExpression("function"==typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"class",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="perso-options-container perso-carousel-animate perso-carousel-wrapper">\n                <div class="perso-carousel-outer-wrapper">\n                    <div class="perso-carousel-inner-wrapper">\n\n                    </div>\n                </div>\n                <div class="pstory-entity-text"></div>\n            </div>\n        </div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-feedback-undo-button"]=e.template({1:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'    <div class="pstory-block-frame perso-feedback-undo-bubble perso-bubble" data-action-id="'+(null!=(r="function"===_typeof(i=null!=(i=s.action||(null!=t?t.action:t))?i:a)?i.call(e,{name:"action",hash:{},data:n}):i)?r:"")+'">\n        <div class="perso-feedback-undo-icon"></div>\n        <div class="perso-feedback-undo-text">'+(null!=(r="function"===_typeof(i=null!=(i=s.text||(null!=t?t.text:t))?i:a)?i.call(e,{name:"text",hash:{},data:n}):i)?r:"")+"</div>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:""},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-image"]=e.template({1:function(e,t,s,o,n){var r;return'                src="'+(null!=(s="function"==typeof(r=null!=(r=s.url||(null!=t?t.url:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"url",hash:{},data:n}):r)?s:"")+'"\n'},3:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function";return'                src="'+(null!=(r=_typeof(i=null!=(i=s.baseUrl||(null!=t?t.baseUrl:t))?i:a)===l?i.call(e,{name:"baseUrl",hash:{},data:n}):i)?r:"")+"/"+(null!=(r=_typeof(i=null!=(i=s.assetDirectory||(null!=t?t.assetDirectory:t))?i:a)===l?i.call(e,{name:"assetDirectory",hash:{},data:n}):i)?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||a).call(e,null!=t?t.url:t,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=_typeof(i=null!=(i=s.assetExtension||(null!=t?t.assetExtension:t))?i:a)===l?i.call(e,{name:"assetExtension",hash:{},data:n}):i)?r:"")+'"\n'},5:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,e=e.escapeExpression;return' title="'+e("function"===_typeof(r=null!=(r=s.alt||(null!=t?t.alt:t))?r:a)?r.call(i,{name:"alt",hash:{},data:n}):r)+'" role="text" aria-label="'+e("function"===_typeof(r=null!=(r=s.alt||(null!=t?t.alt:t))?r:a)?r.call(i,{name:"alt",hash:{},data:n}):r)+'" tabindex="0" '},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c=e.escapeExpression;return'<div class="pstory-block-frame pstory-block-image '+c("function"===_typeof(i=null!=(i=s.class||(null!=t?t.class:t))?i:l)?i.call(a,{name:"class",hash:{},data:n}):i)+'">\n    <div class="pstory-block-container">\n        <div class="perso-asset-large-loader"></div>\n        <img class="pstory-block-content perso-image"\n'+(null!=(r=s.if.call(a,null!=t?t.isAbsoluteURL:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.program(3,n,0),data:n}))?r:"")+"            "+(null!=(r=s.if.call(a,null!=t?t.alt:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?r:"")+' id="'+c("function"===_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)?i.call(a,{name:"id",hash:{},data:n}):i)+'">\n    </div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-line-chart"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r;return'<div class="pstory-block-frame pstory-block-line-chart pstory-block-line-chart '+e.escapeExpression("function"==typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"class",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" tabindex="-1">\n            <div class="pstory-line-chart">\n                <div class="perso-fixed-tooltip">\n                    <span class="perso-tooltip-text perso-line-chart-amount"></span>\n                    <span class="perso-tooltip-text perso-line-chart-month"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-modal"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="pstory-block-modal" >\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-month-picker"]=e.template({1:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'            <li class="perso-month-picker-item" pstory-category="'+e(_typeof(r=null!=(r=s.category||(null!=t?t.category:t))?r:a)===l?r.call(i,{name:"category",hash:{},data:n}):r)+'" role="text" aria-label="'+e(_typeof(r=null!=(r=s.accLabel||(null!=t?t.accLabel:t))?r:a)===l?r.call(i,{name:"accLabel",hash:{},data:n}):r)+'" tabindex="-1">'+e(_typeof(r=null!=(r=s.displayLabel||(null!=t?t.displayLabel:t))?r:a)===l?r.call(i,{name:"displayLabel",hash:{},data:n}):r)+"</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="perso-month-picker-outer-wrapper">\n    <div class="perso-month-picker-wrapper">\n        <ul class="perso-month-picker-container">\n            <div class="pstory-month-picker-selected-tab"></div>\n'+(null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.series:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:"")+"        </ul>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-pure-pinGraph-chart"]=e.template({1:function(e,t,s,o,n){return'                        <div class="perso-pinGraph-raw" role="text">\n                            <div class="perso-raw-wrapper" aria-hidden="true">\n                                <div class="perso-info-row">\n                                    <span class="perso-raw-item perso-date-txt"></span>\n                                    <span class="perso-raw-item perso-pinGraph-amount"></span>\n                                </div>\n                                <div class="perso-raw-item perso-bar-wrapper">\n                                    <div class="perso-pinGraph-bar"></div>\n                                </div>\n                            </div>\n                        </div>\n                        <div aria-hidden="true"></div>\x3c!--it\'s required for accessibility--\x3e\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l=e.escapeExpression;return'<div class="pstory-block-frame pstory-block-pinGraph-chart_'+l("function"===_typeof(r=null!=(r=s.index||(null!=t?t.index:t))?r:a)?r.call(i,{name:"index",hash:{},data:n}):r)+" pstory-block-pinGraph-chart "+l("function"===_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)?r.call(i,{name:"class",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-pinGraph-chart">\n                <div class="perso-pinGraph-container">\n'+(null!=(l=s.each.call(i,null!=t?t.series:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?l:"")+"                </div>\n            </div>\n        </div>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-quick-reply-buttons"]=e.template({1:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'        <button class="perso-quick-reply-button" data-action-id="'+(null!=(r="function"===_typeof(i=null!=(i=s.action||(null!=t?t.action:t))?i:a)?i.call(e,{name:"action",hash:{},data:n}):i)?r:"")+'">'+(null!=(r="function"===_typeof(i=null!=(i=s.text||(null!=t?t.text:t))?i:a)?i.call(e,{name:"text",hash:{},data:n}):i)?r:"")+"</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="pstory-block-frame perso-quick-reply-buttons-container">\n'+(null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:"")+'    <div class="perso-quick-reply-answers-spacer-last"></div>\n    <div class="perso-quick-reply-answers-spacer-rubber"></div>\n</div>\n<div class="perso-feedback-scroll-button perso-left-btn"></div>\n<div class="perso-feedback-scroll-button perso-right-btn"></div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-radio-button"]=e.template({1:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression;return'                <div class="pstory-radio-button-wrapper">\n                    <div class="pstory-button perso-button-animation pstory-radio-button '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(2,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'" tabindex="0" pstory-id="'+u(_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)+'" action-id="'+u(_typeof(l=null!=(l=s.action||(null!=t?t.action:t))?l:p)===d?l.call(c,{name:"action",hash:{},data:n}):l)+'" pstory-event="'+u(_typeof(l=null!=(l=s.event||(null!=t?t.event:t))?l:p)===d?l.call(c,{name:"event",hash:{},data:n}):l)+'">\n                        <input id="pstory-radio-'+u(_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)+'" name="radio-'+u(e.lambda(null!=i[1]?i[1].id:i[1],t))+'" type="radio" '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'/>\n                        <label for="pstory-radio-'+u(_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)+'" role="text">'+(null!=(a=_typeof(l=null!=(l=s.text||(null!=t?t.text:t))?l:p)===d?l.call(c,{name:"text",hash:{},data:n}):l)?a:"")+"</label>\n                    </div>\n                </div>\n"},2:function(e,t,s,o,n){return"perso-selected"},4:function(e,t,s,o,n){return"checked"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{},c=s.helperMissing,p=e.escapeExpression;return'<div id="pstory-block-buttons_'+p("function"===_typeof(a=null!=(a=s.id||(null!=t?t.id:t))?a:c)?a.call(l,{name:"id",hash:{},data:n}):a)+'" class="pstory-block-frame pstory-block-buttons '+p("function"===_typeof(a=null!=(a=s.class||(null!=t?t.class:t))?a:c)?a.call(l,{name:"class",hash:{},data:n}):a)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(p=s.each.call(l,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?p:"")+"        </div>\n    </div>\n</div>\n"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-table"]=e.template({1:function(e,t,s,o,n){var r;return'                    <tr>\n                        <td class="perso-loading-table">'+e.escapeExpression("function"==typeof(r=null!=(r=s.loadingText||(null!=t?t.loadingText:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"loadingText",hash:{},data:n}):r)+"</td>\n                    </tr>\n"},3:function(e,t,s,o,n,r,i){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.twoCols:t,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.program(10,n,0,r,i),data:n}))?s:""},4:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return(null!=(r=s.if.call(i,null!=t?t.showHeaders:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?r:"")+(null!=(r=s.each.call(i,null!=t?t.rows:t,{name:"each",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?r:"")},5:function(e,t,s,o,n){return"                            <tr>\n"+(null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.displayedCols:t,{name:"each",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?s:"")+"                            </tr>\n"},6:function(e,t,s,o,n){return'                                    <th role="cell">'+(null!=(e=e.lambda(t,t))?e:"")+"</th>\n"},8:function(e,t,s,o,n){var r,e=e.lambda;return'                            <tr>\n                                <td class="perso-td-first" role="cell">'+(null!=(r=e(null!=t?t[0]:t,t))?r:"")+'</td>\n                                <td align="right">\n                                    <span class="perso-td-second" role="cell">\n                                        '+(null!=(r=e(null!=t?t[1]:t,t))?r:"")+"\n                                    </span>\n                                </td>\n                            </tr>\n"},10:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return(null!=(a=s.if.call(l,null!=t?t.showHeaders:t,{name:"if",hash:{},fn:e.program(11,n,0,r,i),inverse:e.noop,data:n}))?a:"")+(null!=(a=s.each.call(l,null!=t?t.rows:t,{name:"each",hash:{},fn:e.program(16,n,0,r,i),inverse:e.noop,data:n}))?a:"")},11:function(e,t,s,o,n){var r;return'                            <tr>\n                                <th role="cell">'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.displayedCols:t)?r[1]:r,t))+"</th>                           \n"+(null!=(r=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.fourCols:t,{name:"if",hash:{},fn:e.program(12,n,0),inverse:e.program(14,n,0),data:n}))?r:"")+"                            </tr>\n"},12:function(e,t,s,o,n){return'                                <th align="right" role="cell">'+e.escapeExpression(e.lambda(null!=(e=null!=t?t.displayedCols:t)?e[3]:e,t))+"</th>\n"},14:function(e,t,s,o,n){return'                                    <th align="right" role="cell">'+e.escapeExpression(e.lambda(null!=(e=null!=t?t.displayedCols:t)?e[2]:e,t))+"</th>\n"},16:function(e,t,s,o,n,r,i){var a,l=e.lambda,c=null!=t?t:e.nullContext||{};return'                            <tr>\n                                <td>\n                                    <span class="perso-td-date" role="cell">\n                                        '+(null!=(a=l(null!=t?t[0]:t,t))?a:"")+'\n                                        </span>\n                                    <span class="perso-td-first" role="cell">\n                                        '+(null!=(a=l(null!=t?t[1]:t,t))?a:"")+'\n                                    </span>\n                                </td>\n                                <td align="right">\n                                    <span class="perso-td-second" role="cell">\n                                        '+(null!=(a=l(null!=t?t[2]:t,t))?a:"")+"\n                                    </span>\n"+(null!=(a=s.if.call(c,null!=i[1]?i[1].fourCols:i[1],{name:"if",hash:{},fn:e.program(17,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                                </td>\n"+(null!=(a=s.if.call(c,null!=i[1]?i[1].fourCols:i[1],{name:"if",hash:{},fn:e.program(19,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                            </tr>\n"},17:function(e,t,s,o,n){return'                                        <span class="perso-td-last" role="cell">\n                                            '+(null!=(e=e.lambda(null!=t?t[3]:t,t))?e:"")+"\n                                        </span>\n"},19:function(e,t,s,o,n){return'                                    \x3c!--<td align="right">\n                                        <span class="perso-td-last" role="cell">\n                                            '+(null!=(e=e.lambda(null!=t?t[3]:t,t))?e:"")+"\n                                        </span>\n                                    </td>--\x3e\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){return'<div class="pstory-block-frame pstory-block-table">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" tabindex="-1">\n            <table class="pstory-table">\n'+(null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.future:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.program(3,n,0,r,i),data:n}))?s:"")+"            </table>\n        </div>\n    </div>\n</div>"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-tabs"]=e.template({1:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",c=e.escapeExpression;return'                            <li  class="pstory-tab '+(null!=(r=s.if.call(i,null!=t?t.isDesktopMode:t,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.program(4,n,0),data:n}))?r:"")+" "+(null!=(r=s.if.call(i,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?r:"")+'" aria-selected="'+c(_typeof(e=null!=(e=s.selected||(null!=t?t.selected:t))?e:a)===l?e.call(i,{name:"selected",hash:{},data:n}):e)+'" role="tab" tabindex="'+c(_typeof(e=null!=(e=s.index||n&&n.index)?e:a)===l?e.call(i,{name:"index",hash:{},data:n}):e)+'" pstory-id="'+c(_typeof(e=null!=(e=s.id||(null!=t?t.id:t))?e:a)===l?e.call(i,{name:"id",hash:{},data:n}):e)+'">'+(null!=(r=_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:a)===l?e.call(i,{name:"text",hash:{},data:n}):e)?r:"")+"</li>\n"},2:function(e,t,s,o,n){return"pstory-button"},4:function(e,t,s,o,n){return"pstory-button pstory-header-button"},6:function(e,t,s,o,n){return"perso-selected"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l=e.escapeExpression;return'<div id="pstory-block-tabs_'+l("function"===_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)?r.call(i,{name:"id",hash:{},data:n}):r)+'" class="pstory-block-frame pstory-block-tabs '+l("function"===_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)?r.call(i,{name:"class",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" tabindex="-1">\n                <div class="perso-header-container">\n                    <div class="pstory-tab-animated-border-bottom"></div>\n                    <ul class="perso-tablist" role="tablist">\n'+(null!=(l=s.each.call(i,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?l:"")+"                    </ul>\n                </div>\n        </div>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-textboxes"]=e.template({1:function(e,t,s,o,n){return"perso-with-image"},3:function(e,t,s,o,n,r,i){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=(s=null!=i[1]?i[1].config:i[1])?s.renderBoxIcons:s,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.program(7,n,0,r,i),data:n}))?s:""},4:function(e,t,s,o,n,r,i){var a,l=e.lambda,c=null!=t?t:e.nullContext||{},p=s.helperMissing;return'                        <div class="perso-textbox perso-textbox-with-image" role="text">\n                            <div class="perso-textbox-top-container" role="text">\n                                <img class="perso-textbox-image perso-asset-loading"\n                                     src="'+e.escapeExpression(l(null!=i[1]?i[1].baseUrl:i[1],t))+"/"+(null!=(a=l(null!=i[1]?i[1].assetDirectory:i[1],t))?a:"")+"/"+(null!=(a=(s.toLowerCase||t&&t.toLowerCase||p).call(c,null!=t?t.image:t,{name:"toLowerCase",hash:{},data:n}))?a:"")+"."+(null!=(a=l(null!=i[1]?i[1].assetExtension:i[1],t))?a:"")+'">\n                                <div class="perso-label">'+(null!=(a="function"===_typeof(l=null!=(l=s.label||(null!=t?t.label:t))?l:p)?l.call(c,{name:"label",hash:{},data:n}):l)?a:"")+'</div>\n                                <div class="perso-value">'+(null!=(a="function"===_typeof(l=null!=(l=s.value||(null!=t?t.value:t))?l:p)?l.call(c,{name:"value",hash:{},data:n}):l)?a:"")+"</div>\n                            </div>\n"+(null!=(a=s.if.call(c,null!=t?t.action:t,{name:"if",hash:{},fn:e.program(5,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                        </div>\n"},5:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function";return'                                <div class="perso-button-wrapper">\n                                    <a id="'+(null!=(a=_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)?a:"")+'" class="pstory-link-navigateTo pstory-button perso-ripple-closed"\n                                       action-id="'+(null!=(a=_typeof(l=null!=(l=s.action||(null!=t?t.action:t))?l:p)===d?l.call(c,{name:"action",hash:{},data:n}):l)?a:"")+'"\n                                       pnavigate-id="'+(null!=(a=_typeof(l=null!=(l=s.navigateTarget||(null!=t?t.navigateTarget:t))?l:p)===d?l.call(c,{name:"navigateTarget",hash:{},data:n}):l)?a:"")+'" role="button" tabindex="0" aria-label="'+e.escapeExpression(e.lambda(null!=(a=null!=i[1]?i[1].texts:i[1])?a.doubleTabButton:a,t))+'">'+(null!=(a=_typeof(l=null!=(l=s.buttonLabel||(null!=t?t.buttonLabel:t))?l:p)===d?l.call(c,{name:"buttonLabel",hash:{},data:n}):l)?a:"")+"</a>\n                                </div>\n"},7:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing;return'                        <div class="perso-textbox">\n                            <div class="perso-textbox-top-container" role="text">\n                                <div class="perso-value">'+(null!=(a="function"===_typeof(l=null!=(l=s.value||(null!=t?t.value:t))?l:p)?l.call(c,{name:"value",hash:{},data:n}):l)?a:"")+'</div>\n                                <div class="perso-label">'+(null!=(a="function"===_typeof(l=null!=(l=s.label||(null!=t?t.label:t))?l:p)?l.call(c,{name:"label",hash:{},data:n}):l)?a:"")+"</div>\n                            </div>\n"+(null!=(a=s.if.call(c,null!=t?t.action:t,{name:"if",hash:{},fn:e.program(8,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                        </div>\n"},8:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function";return'                                <div class="perso-button-wrapper">\n                                    <a id="'+(null!=(a=_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)?a:"")+'" class="pstory-link-navigateTo pstory-button perso-ripple-closed" role="button"\n                                       action-id="'+(null!=(a=_typeof(l=null!=(l=s.action||(null!=t?t.action:t))?l:p)===d?l.call(c,{name:"action",hash:{},data:n}):l)?a:"")+'"\n                                       pnavigate-id="'+(null!=(a=_typeof(l=null!=(l=s.navigateTarget||(null!=t?t.navigateTarget:t))?l:p)===d?l.call(c,{name:"navigateTarget",hash:{},data:n}):l)?a:"")+'" tabindex="0" aria-label="'+e.escapeExpression(e.lambda(null!=(a=null!=i[1]?i[1].texts:i[1])?a.doubleTabButton:a,t))+'">'+(null!=(a=_typeof(l=null!=(l=s.buttonLabel||(null!=t?t.buttonLabel:t))?l:p)===d?l.call(c,{name:"buttonLabel",hash:{},data:n}):l)?a:"")+"</a>\n                                </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-textboxes '+e.escapeExpression("function"==typeof(a=null!=(a=s.class||(null!=t?t.class:t))?a:s.helperMissing)?a.call(l,{name:"class",hash:{},data:n}):a)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="perso-textboxes-wrapper '+(null!=(a=s.if.call(l,null!=(a=null!=t?t.config:t)?a.renderBoxIcons:a,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'"\n                 role="presentation">\n'+(null!=(a=s.each.call(l,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(3,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"            </div>\n        </div>\n    </div>\n</div>\n"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-transaction-modal"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="pstory-block-transaction-modal">\n    <div class="pstory-main-block-container perso-sub-modal-show">\n        <div class="pstory-block-top-container"></div>\n        <div class="pstory-block-middle-container"></div>\n        <div class="pstory-block-bottom-container"></div>\n    </div>\n    <div class="pstory-warning-block-container">\n        <div class="pstory-block-top-container"></div>\n        <div class="pstory-block-middle-container"></div>\n        <div class="pstory-block-bottom-container"></div>\n    </div>\n</div>\n\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-trivia-buttons"]=e.template({1:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function",e=e.escapeExpression;return'                <div class="perso-trivia-button" role="button">\n                    <div class="perso-trivia-button-col perso-col1">\n                        <div class="perso-trivia-button-title"><span>'+(null!=(r=_typeof(i=null!=(i=s.txt1||(null!=t?t.txt1:t))?i:l)===c?i.call(a,{name:"txt1",hash:{},data:n}):i)?r:"")+'</span></div>\n                        <div class="perso-trivia-button-description"><span>'+(null!=(r=_typeof(i=null!=(i=s.txt2||(null!=t?t.txt2:t))?i:l)===c?i.call(a,{name:"txt2",hash:{},data:n}):i)?r:"")+'</span></div>\n                    </div>\n                    <div class="perso-trivia-button-col perso-col2">\n                        <a id="'+e(_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)+'" class="pstory-link-navigateTo pstory-button perso-ripple-closed" action-id="'+e(_typeof(i=null!=(i=s.action||(null!=t?t.action:t))?i:l)===c?i.call(a,{name:"action",hash:{},data:n}):i)+'" pnavigate-id="'+e(_typeof(i=null!=(i=s.navigateTarget||(null!=t?t.navigateTarget:t))?i:l)===c?i.call(a,{name:"navigateTarget",hash:{},data:n}):i)+'"></a></div>\n\n                </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l=e.escapeExpression;return'<div id="pstory-block-buttons_'+l("function"===_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)?r.call(i,{name:"id",hash:{},data:n}):r)+'" class="pstory-block-frame pstory-block-buttons '+l("function"===_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)?r.call(i,{name:"class",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(l=s.each.call(i,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?l:"")+"        </div>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-trivia"]=e.template({1:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'            <div class="perso-answers-wrapper">\n                <button class="perso-answer" role="text" data-val="'+(null!=(r="function"===_typeof(i=null!=(i=s.val||(null!=t?t.val:t))?i:a)?i.call(e,{name:"val",hash:{},data:n}):i)?r:"")+'">\n                    <span class="perso-answer-text">'+(null!=(r="function"===_typeof(i=null!=(i=s.txt||(null!=t?t.txt:t))?i:a)?i.call(e,{name:"txt",hash:{},data:n}):i)?r:"")+'</span>\n                    <div class="perso-answer-icon" role="text"></div>\n                </button>\n            </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function";return'<div id="perso-'+(null!=(r=_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)?r:"")+'" class="perso-trivia-container">\n    <div class="perso-trivia-question"><span class="perso-question-text" role="text" tabindex="0">'+(null!=(r=_typeof(i=null!=(i=s.questionText||(null!=t?t.questionText:t))?i:l)===c?i.call(a,{name:"questionText",hash:{},data:n}):i)?r:"")+'</span></div>\n    <div class="perso-answers-container">\n'+(null!=(r=s.each.call(a,null!=t?t.answers:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'    </div>\n    <div class="perso-trivia-page-index" role="text" ><span class="perso-trivia-page">'+(null!=(r=_typeof(i=null!=(i=s.pageNumber||(null!=t?t.pageNumber:t))?i:l)===c?i.call(a,{name:"pageNumber",hash:{},data:n}):i)?r:"")+"</span></div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-txt-note"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-frame pstory-block-text '+e.escapeExpression("function"===_typeof(e=null!=(e=s.class||(null!=t?t.class:t))?e:i)?e.call(r,{name:"class",hash:{},data:n}):e)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" tabindex="-1">\n            <div class="pstory-block-note-icon"></div>\n            <div class="pstory-block-note-txt" role="text">\n                '+(null!=(s="function"===_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:i)?e.call(r,{name:"text",hash:{},data:n}):e)?s:"")+"\n            </div>\n        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-txt"]=e.template({1:function(e,t,s,o,n){return'        <div class="pstory-block-content'+(null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.useExternalHeaderColor:t,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?s:"")+'" aria-level="2" role="heading">\n'},2:function(e,t,s,o,n){return" perso-theme-headerColor-color"},4:function(e,t,s,o,n){return'        <div class="pstory-block-content'+(null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.useExternalHeaderColor:t,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?s:"")+'" role="text">\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing;return'<div class="pstory-block-frame pstory-block-text '+e.escapeExpression("function"===_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)?r.call(i,{name:"class",hash:{},data:n}):r)+'" >\n    <div class="pstory-block-container">\n'+(null!=(e=s.if.call(i,null!=t?t.needAccessibility:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.program(4,n,0),data:n}))?e:"")+"            "+(null!=(e="function"===_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)?r.call(i,{name:"text",hash:{},data:n}):r)?e:"")+"\n        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-frame"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'<div class="pstory-frame story-'+e(_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)===l?r.call(i,{name:"class",hash:{},data:n}):r)+" "+e(_typeof(r=null!=(r=s.langClass||(null!=t?t.langClass:t))?r:a)===l?r.call(i,{name:"langClass",hash:{},data:n}):r)+" perso-"+e(_typeof(r=null!=(r=s.directionClass||(null!=t?t.directionClass:t))?r:a)===l?r.call(i,{name:"directionClass",hash:{},data:n}):r)+" "+e(_typeof(r=null!=(r=s.cssClass||(null!=t?t.cssClass:t))?r:a)===l?r.call(i,{name:"cssClass",hash:{},data:n}):r)+'" data-id="pstory-frame_'+e(_typeof(r=null!=(r=s.storyId||(null!=t?t.storyId:t))?r:a)===l?r.call(i,{name:"storyId",hash:{},data:n}):r)+'">\n    <div class="pstory-container '+(null!=(e=_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)===l?r.call(i,{name:"class",hash:{},data:n}):r)?e:"")+'"></div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-perso-carousel"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="perso-new-carousel-wrapper">\n    <div class="perso-carousel-button-wrapper">\n        <button id="left" class="perso-btn"></button>\n    </div>\n    <div class="perso-carousel-container-wrapper">\n        <ul id="carouselContainer" class="perso-carousel">\n        </ul>\n    </div>\n    <div class="perso-carousel-button-wrapper">\n        <button id="right" class="perso-btn"></button>\n    </div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-perso-rating"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,e=e.escapeExpression;return'<div class="perso-ratings-wrapper">\n   <div class=\'perso-ratings-text\' role="text" tabindex="-1" aria-label="'+e("function"===_typeof(r=null!=(r=s.ratingTitle||(null!=t?t.ratingTitle:t))?r:a)?r.call(i,{name:"ratingTitle",hash:{},data:n}):r)+'">'+e("function"===_typeof(r=null!=(r=s.ratingTitle||(null!=t?t.ratingTitle:t))?r:a)?r.call(i,{name:"ratingTitle",hash:{},data:n}):r)+"</div>\n   <div class='perso-ratings-icons' data-rating-max='5'></div>\n</div>\n\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-perso-teasers"]=e.template({1:function(e,t,s,o,n){var r,i=e.escapeExpression;return'<div class="perso-teaser" id="'+i("function"==typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"id",hash:{},data:n}):r)+'">'+i(e.lambda(null!=(s=null!=t?t.teaser:t)?s.title:s,t))+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.posts:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:""},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-pstory-calendar"]=e.template({1:function(e,t,s,o,n,r,i){return"<div class='perso-calendar-row'>\n"+(null!=(s=(s.for||t&&t.for||s.helperMissing).call(null!=t?t:e.nullContext||{},0,7,1,"col",{name:"for",hash:{},fn:e.program(2,n,0,r,i),inverse:e.noop,data:n}))?s:"")+"</div>\n"},2:function(e,t,s,o,n,r,i){var a=null!=t?t:e.nullContext||{},l=s.helperMissing;return null!=(i=e.invokePartial((i[2]&&i[2].getDayTemplate||l).call(a,{name:"../../getDayTemplate",hash:{},data:n}),(s.getItemInArray||t&&t.getItemInArray||l).call(a,(s.math||t&&t.math||l).call(a,(s.math||t&&t.math||l).call(a,null!=i[1]?i[1].row:i[1],"*",7,{name:"math",hash:{},data:n}),"+",null!=t?t.col:t,{name:"math",hash:{},data:n}),null!=i[2]?i[2].allDays:i[2],{name:"getItemInArray",hash:{},data:n}),{hash:{isRightEdge:(s.math||t&&t.math||l).call(a,null!=t?t.col:t,"==",6,{name:"math",hash:{},data:n}),isLeftEdge:(s.math||t&&t.math||l).call(a,null!=t?t.col:t,"==",0,{name:"math",hash:{},data:n})},data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?i:""},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){return null!=(s=(s.for||t&&t.for||s.helperMissing).call(null!=t?t:e.nullContext||{},0,null!=t?t.numOfWeeks:t,1,"row",{name:"for",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?s:""},usePartial:!0,useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["tmpl-pstory-dialog-continue-btn"]=e.template({1:function(e,t,s,o,n){return"        \t\t"+(null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.showBtn:t,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?s:"")+"\n"},2:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,e=e.escapeExpression;return'<div class="pstory-dialog-btn" data-action="'+e("function"===_typeof(r=null!=(r=s.actionBtn||(null!=t?t.actionBtn:t))?r:a)?r.call(i,{name:"actionBtn",hash:{},data:n}):r)+'">'+e("function"===_typeof(r=null!=(r=s.diaogBtn||(null!=t?t.diaogBtn:t))?r:a)?r.call(i,{name:"diaogBtn",hash:{},data:n}):r)+"</div>"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",c=e.escapeExpression;return'<div class="pstory-dialog-frame perso-dialog-actions-btn '+c(_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)===l?r.call(i,{name:"class",hash:{},data:n}):r)+" "+c(_typeof(r=null!=(r=s.backgroundImage||(null!=t?t.backgroundImage:t))?r:a)===l?r.call(i,{name:"backgroundImage",hash:{},data:n}):r)+'" id="pdlg-'+c(_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)===l?r.call(i,{name:"id",hash:{},data:n}):r)+'">\n    <div class="pstory-dialog-container">\n        <div class="pstory-dialog-content" ></div>\n        <div class="pstory-dialog-buttons" data-numOfDialogBtn="'+c(e.lambda(null!=(a=null!=t?t.btn:t)?a.length:a,t))+'">\n'+(null!=(a=s.each.call(i,null!=t?t.btn:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?a:"")+"\t\t</div>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-pstory-dialog"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'<div class="pstory-dialog-frame '+e(_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)===l?r.call(i,{name:"class",hash:{},data:n}):r)+" "+e(_typeof(r=null!=(r=s.backgroundImage||(null!=t?t.backgroundImage:t))?r:a)===l?r.call(i,{name:"backgroundImage",hash:{},data:n}):r)+'" id="pdlg-'+e(_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)===l?r.call(i,{name:"id",hash:{},data:n}):r)+'">\n    <div class="pstory-dialog-container">\n        <div class="pstory-dialog-content" />\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-pstory-title-inside-story"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r;return'<div class="pstory-title-outer-wrapper">\n    <div class="pstory-fixed pstory-title-wrapper">\n        <div class="pstory-title">\n            <div class="pstory-title-text pstory-title-inside-story">'+(null!=(s="function"==typeof(r=null!=(r=s.title||(null!=t?t.title:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"title",hash:{},data:n}):r)?s:"")+"</div>\n        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-pstory-title"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r;return'<div class="pstory-title-outer-wrapper">\n    <div class="pstory-fixed pstory-title-wrapper">\n        <div class="pstory-title">\n            <div class="pstory-title-text">'+(null!=(s="function"==typeof(r=null!=(r=s.title||(null!=t?t.title:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"title",hash:{},data:n}):r)?s:"")+'</div>\n        </div>\n    </div>\n</div>\n<div id="story-frame-container" class="perso-story-frame-container"></div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-approval-text-future"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r;return'<div class="pstory-block-approval-text-future" data-perso-block-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.blockId||(null!=t?t.blockId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"blockId",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n\n    </div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-approval-text-updated"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r;return'<div class="pstory-block-approval-text-updated" data-perso-block-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.blockId||(null!=t?t.blockId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"blockId",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n\n    </div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-categories-list"]=e.template({1:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression,e=e.lambda;return'                                <div id="'+(null!=(a=_typeof(l=null!=(l=s.category||(null!=t?t.category:t))?l:p)===d?l.call(c,{name:"category",hash:{},data:n}):l)?a:"")+'" class="perso-category-container perso-'+(null!=(a=_typeof(l=null!=(l=s.category||(null!=t?t.category:t))?l:p)===d?l.call(c,{name:"category",hash:{},data:n}):l)?a:"")+'" role="text" value="'+(null!=(a=_typeof(l=null!=(l=s.text||(null!=t?t.text:t))?l:p)===d?l.call(c,{name:"text",hash:{},data:n}):l)?a:"")+'" aria-hidden="true" data-perso-block-id="'+u(_typeof(l=null!=(l=s.category||(null!=t?t.category:t))?l:p)===d?l.call(c,{name:"category",hash:{},data:n}):l)+'">\n                                    <img class="perso-category-icon perso-image perso-asset-loading" src="'+u(e(null!=(a=null!=i[1]?i[1].remoteAssetsConfig:i[1])?a.baseUrl:a,t))+"/"+(null!=(a=e(null!=(a=null!=i[1]?i[1].remoteAssetsConfig:i[1])?a.defaultAssetDirectory:a,t))?a:"")+"/"+u((s.toLowerCase||t&&t.toLowerCase||p).call(c,null!=t?t.icon:t,{name:"toLowerCase",hash:{},data:n}))+"."+(null!=(a=e(null!=(a=null!=i[1]?i[1].remoteAssetsConfig:i[1])?a.defaultAssetExtension:a,t))?a:"")+'">\n                                    <div class="perso-category-name" aria-hidden="true">'+(null!=(a=_typeof(l=null!=(l=s.text||(null!=t?t.text:t))?l:p)===d?l.call(c,{name:"text",hash:{},data:n}):l)?a:"")+"</div>\n                                </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-categories-list">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-categories-list-wrapper">\n                <div class="pstory-categories-list-container">\n                    <div class="pstory-categories-list">\n                        <div class="pstory-categories-container" data-perso-block-id="'+e.escapeExpression("function"==typeof(a=null!=(a=s.blockId||(null!=t?t.blockId:t))?a:s.helperMissing)?a.call(l,{name:"blockId",hash:{},data:n}):a)+'">\n'+(null!=(a=s.each.call(l,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-categorization-title"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-categorization-title" data-perso-block-id="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.blockId||(null!=t?t.blockId:t))?e:i)?e.call(r,{name:"blockId",hash:{},data:n}):e)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" role="text">'+(null!=(s="function"===_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:i)?e.call(r,{name:"text",hash:{},data:n}):e)?s:"")+"</div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-category-update-text"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-category-update-text" data-perso-block-id="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.blockId||(null!=t?t.blockId:t))?e:i)?e.call(r,{name:"blockId",hash:{},data:n}):e)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content category-update-text accessibility-read" tabindex="0" role="text">'+(null!=(s="function"===_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:i)?e.call(r,{name:"text",hash:{},data:n}):e)?s:"")+"</div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-close-page-buttons"]=e.template({1:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function";return'                <a class="perso-modal-button perso-warning-button accessibility-read perso-'+(null!=(r=_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)?r:"")+'" tabindex="0" data-id="'+(null!=(r=_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)?r:"")+'" role="button" data-perso-block-id="'+e.escapeExpression(_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)+'">'+(null!=(r=_typeof(i=null!=(i=s.text||(null!=t?t.text:t))?i:l)===c?i.call(a,{name:"text",hash:{},data:n}):i)?r:"")+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'<div class="pstory-block-warning-modal-buttons" data-perso-block-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.blockId||(null!=t?t.blockId:t))?r:s.helperMissing)?r.call(i,{name:"blockId",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(r=s.each.call(i,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+"        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-close-page-icon"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l=e.escapeExpression,e=e.lambda;return'<div class="pstory-block-close-page-icon" data-perso-block-id="'+l("function"==typeof(r=null!=(r=s.blockId||(null!=t?t.blockId:t))?r:a)?r.call(i,{name:"blockId",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <img class="pstory-block-content perso-image perso-asset-loading" src="'+l(e(null!=(r=null!=t?t.remoteAssetsConfig:t)?r.baseUrl:r,t))+"/"+(null!=(r=e(null!=(r=null!=t?t.remoteAssetsConfig:t)?r.defaultAssetDirectory:r,t))?r:"")+"/"+l((s.toLowerCase||t&&t.toLowerCase||a).call(i,null!=t?t.url:t,{name:"toLowerCase",hash:{},data:n}))+"."+(null!=(r=e(null!=(r=null!=t?t.remoteAssetsConfig:t)?r.defaultAssetExtension:r,t))?r:"")+'">\n    </div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-close-page-text"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-close-page-text" data-perso-block-id="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.blockId||(null!=t?t.blockId:t))?e:i)?e.call(r,{name:"blockId",hash:{},data:n}):e)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content close-page-text accessibility-read" tabindex="0" role="text">'+(null!=(s="function"===_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:i)?e.call(r,{name:"text",hash:{},data:n}):e)?s:"")+"</div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-close-page-title-text"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-close-page-title-text" data-perso-block-id="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.blockId||(null!=t?t.blockId:t))?e:i)?e.call(r,{name:"blockId",hash:{},data:n}):e)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content close-page-title-text accessibility-read" tabindex="0" role="text">'+(null!=(s="function"===_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:i)?e.call(r,{name:"text",hash:{},data:n}):e)?s:"")+"</div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-confirmation-text"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-confirmation-msg-container" data-perso-block-id="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.blockId||(null!=t?t.blockId:t))?e:i)?e.call(r,{name:"blockId",hash:{},data:n}):e)+'">\n    <div class="pstory-block-confirmation-msg-txt">'+(null!=(s="function"===_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:i)?e.call(r,{name:"text",hash:{},data:n}):e)?s:"")+'</div>\n    <div class="pstory-block-confirmation-msg-close"></div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-error-message"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-error-message" data-perso-block-id="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.blockId||(null!=t?t.blockId:t))?e:i)?e.call(r,{name:"blockId",hash:{},data:n}):e)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content perso-error-message accessibility-read" tabindex="0" role="text">'+(null!=(s="function"===_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:i)?e.call(r,{name:"text",hash:{},data:n}):e)?s:"")+"</div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-modal-buttons"]=e.template({1:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function";return'                <div class="perso-modal-button perso-main-button accessibility-read perso-'+(null!=(r=_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)?r:"")+'" tabindex="0" data-id="'+(null!=(r=_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)?r:"")+'" role="button" data-perso-block-id="'+e.escapeExpression(_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)+'">\n                    <a class="perso-modal-button-text">'+(null!=(r=_typeof(i=null!=(i=s.text||(null!=t?t.text:t))?i:l)===c?i.call(a,{name:"text",hash:{},data:n}):i)?r:"")+"</a>\n                </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'<div class="pstory-block-transaction-modal-buttons" data-perso-block-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.blockId||(null!=t?t.blockId:t))?r:s.helperMissing)?r.call(i,{name:"blockId",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(r=s.each.call(i,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+"        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-modal-title"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-modal-title" data-perso-block-id="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.blockId||(null!=t?t.blockId:t))?e:i)?e.call(r,{name:"blockId",hash:{},data:n}):e)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" role="text">'+(null!=(s="function"===_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:i)?e.call(r,{name:"text",hash:{},data:n}):e)?s:"")+"</div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-popup-buttons"]=e.template({1:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function";return'                <a class="perso-modal-button perso-tag-popup-button accessibility-read perso-'+(null!=(r=_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)?r:"")+'" tabindex="0" data-id="'+(null!=(r=_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)?r:"")+'" role="button" data-perso-block-id="'+e.escapeExpression(_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)+'">'+(null!=(r=_typeof(i=null!=(i=s.text||(null!=t?t.text:t))?i:l)===c?i.call(a,{name:"text",hash:{},data:n}):i)?r:"")+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'<div class="pstory-block-transaction-popup-buttons perso-hide" data-perso-block-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.blockId||(null!=t?t.blockId:t))?r:s.helperMissing)?r.call(i,{name:"blockId",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(r=s.each.call(i,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+"        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-tag-update-text"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-tag-update-text" data-perso-block-id="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.blockId||(null!=t?t.blockId:t))?e:i)?e.call(r,{name:"blockId",hash:{},data:n}):e)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content tag-update-text accessibility-read" tabindex="0" role="text">'+(null!=(s="function"===_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:i)?e.call(r,{name:"text",hash:{},data:n}):e)?s:"")+"</div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-tag-user-input"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-tag-user-input" data-perso-block-id="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.blockId||(null!=t?t.blockId:t))?e:i)?e.call(r,{name:"blockId",hash:{},data:n}):e)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="perso-col-first-container">\n                <div class="perso-col perso-input-col">\n                    <input class="perso-tag-user-input accessibility-read" tabindex="0" type="text" placeholder="'+(null!=(s="function"===_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:i)?e.call(r,{name:"text",hash:{},data:n}):e)?s:"")+'">\n                </div>\n                <div class="perso-col perso-button-col">\n                    <div class="perso-tag-edit-button" tabindex="0" role="button"></div>\n                </div>\n            </div>\n            <div class="perso-col-second-container">\n                <div class="perso-col perso-counter-col">\n                    <div class="perso-tag-character-counter accessibility-read" tabindex="0" role="textbox"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-text-validation"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-text-validation" data-perso-block-id="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.blockId||(null!=t?t.blockId:t))?e:i)?e.call(r,{name:"blockId",hash:{},data:n}):e)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="perso-text-validation" role="text">'+(null!=(s="function"===_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:i)?e.call(r,{name:"text",hash:{},data:n}):e)?s:"")+"</div>\n        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-transaction-details-title"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-transaction-details-title" data-perso-block-id="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.blockId||(null!=t?t.blockId:t))?e:i)?e.call(r,{name:"blockId",hash:{},data:n}):e)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content perso-details-title accessibility-read" tabindex="0" role="text">'+(null!=(s="function"===_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:i)?e.call(r,{name:"text",hash:{},data:n}):e)?s:"")+"</div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-transaction-details"]=e.template({1:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.displayBlock:t,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?s:""},2:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing;return'                            <div class="perso-details-container perso-'+(null!=(r="function"===_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)?i.call(a,{name:"id",hash:{},data:n}):i)?r:"")+'" data-perso-block-id="'+e.escapeExpression("function"===_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)?i.call(a,{name:"id",hash:{},data:n}):i)+'">\n'+(null!=(r=s.if.call(a,null!=t?t.entityTitle:t,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+(null!=(r=s.if.call(a,null!=t?t.buttonLabel:t,{name:"if",hash:{},fn:e.program(11,n,0),inverse:e.noop,data:n}))?r:"")+"                            </div>\n"},3:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'                                    <div class="perso-label-container">\n                                        <div class="perso-details-description accessibility-read" role="text">'+(null!=(r="function"==typeof(r=null!=(r=s.entityTitle||(null!=t?t.entityTitle:t))?r:s.helperMissing)?r.call(i,{name:"entityTitle",hash:{},data:n}):r)?r:"")+"</div>\n"+(null!=(r=s.if.call(i,null!=t?t.editable:t,{name:"if",hash:{},fn:e.program(4,n,0),inverse:e.program(9,n,0),data:n}))?r:"")+"\n                                    </div>\n"},4:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'                                            <div class="perso-details-wrapper perso-details-'+e.escapeExpression("function"==typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:s.helperMissing)?r.call(i,{name:"id",hash:{},data:n}):r)+' accessibility-read" role="text" >\n'+(null!=(r=s.if.call(i,null!=t?t.entityLabel1:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.program(7,n,0),data:n}))?r:"")+'                                                <div class="perso-details-edit-icon"></div>\n                                            </div>\n'},5:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'                                                    <div class="perso-details-value accessibility-read"  data-val="'+e(_typeof(r=null!=(r=s.entityLabel1||(null!=t?t.entityLabel1:t))?r:a)===l?r.call(i,{name:"entityLabel1",hash:{},data:n}):r)+'" data-val2="'+e(_typeof(r=null!=(r=s.entityLabel2||(null!=t?t.entityLabel2:t))?r:a)===l?r.call(i,{name:"entityLabel2",hash:{},data:n}):r)+'" role="text">'+(null!=(e=_typeof(r=null!=(r=s.entityLabel1||(null!=t?t.entityLabel1:t))?r:a)===l?r.call(i,{name:"entityLabel1",hash:{},data:n}):r)?e:"")+"</div>\n"},7:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'                                                    <div class="perso-details-value accessibility-read perso-no-tag" data-val="" data-val2="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.entityLabel2||(null!=t?t.entityLabel2:t))?e:i)?e.call(r,{name:"entityLabel2",hash:{},data:n}):e)+'"  role="text">'+(null!=(s="function"===_typeof(e=null!=(e=s.entityLabel2||(null!=t?t.entityLabel2:t))?e:i)?e.call(r,{name:"entityLabel2",hash:{},data:n}):e)?s:"")+"</div>\n"},9:function(e,t,s,o,n){var r;return'                                                <div class="perso-details-value" role="text">'+(null!=(s="function"==typeof(r=null!=(r=s.entityLabel1||(null!=t?t.entityLabel1:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"entityLabel1",hash:{},data:n}):r)?s:"")+"</div>\n"},11:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function",e=e.escapeExpression;return'                                    <div class="pstory-block-apply-all-'+e(_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)+'-checkbox">\n                                        <div class="pstory-block-container">\n                                            <div class="pstory-block-content">\n                                                <div class="perso-col">\n                                                    <div type="checkbox" class="perso-checkbox pstory-apply-all-'+e(_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)+'-checkbox perso-hide accessibility-read" tabindex="0" role="button" value="'+(null!=(r=_typeof(i=null!=(i=s.buttonLabel||(null!=t?t.buttonLabel:t))?i:l)===c?i.call(a,{name:"buttonLabel",hash:{},data:n}):i)?r:"")+'"></div>\n                                                    <div class="pstory-apply-all-'+e(_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)+'-text perso-hide" aria-hidden="true">'+(null!=(r=_typeof(i=null!=(i=s.buttonLabel||(null!=t?t.buttonLabel:t))?i:l)===c?i.call(a,{name:"buttonLabel",hash:{},data:n}):i)?r:"")+"</div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'<div class="pstory-block-transaction-details" data-perso-block-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.blockId||(null!=t?t.blockId:t))?r:s.helperMissing)?r.call(i,{name:"blockId",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-transaction-details-container">\n                <div class="pstory-transaction-details">\n'+(null!=(r=s.each.call(i,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+"                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-transaction-icon"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-transaction-icon" data-perso-block-id="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.blockId||(null!=t?t.blockId:t))?e:i)?e.call(r,{name:"blockId",hash:{},data:n}):e)+'">\n    <div class="pstory-block-container">\n        <img class="pstory-block-content perso-transaction-image perso-asset-loading" src="'+(null!=(s="function"===_typeof(e=null!=(e=s.url||(null!=t?t.url:t))?e:i)?e.call(r,{name:"url",hash:{},data:n}):e)?s:"")+'">\n    </div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-transaction-links"]=e.template({1:function(e,t,s,o,n,r,i){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.url:t,{name:"if",hash:{},fn:e.program(2,n,0,r,i),inverse:e.noop,data:n}))?s:""},2:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{},c=s.helperMissing,p="function",d=e.escapeExpression,e=e.lambda;return'                    <img class="perso-transaction-link-button perso-image accessibility-read perso-asset-loading" tabindex="0" role="button" data-index="'+d(_typeof(a=null!=(a=s.index||n&&n.index)?a:c)===p?a.call(l,{name:"index",hash:{},data:n}):a)+'" data-id="'+d(_typeof(a=null!=(a=s.id||(null!=t?t.id:t))?a:c)===p?a.call(l,{name:"id",hash:{},data:n}):a)+'" data-perso-block-id="'+d(_typeof(a=null!=(a=s.id||(null!=t?t.id:t))?a:c)===p?a.call(l,{name:"id",hash:{},data:n}):a)+'"\n                         src="'+d(e(null!=(p=null!=i[1]?i[1].remoteAssetsConfig:i[1])?p.baseUrl:p,t))+"/"+(null!=(p=e(null!=(p=null!=i[1]?i[1].remoteAssetsConfig:i[1])?p.defaultAssetDirectory:p,t))?p:"")+"/"+d((s.toLowerCase||t&&t.toLowerCase||c).call(l,null!=t?t.id:t,{name:"toLowerCase",hash:{},data:n}))+"."+(null!=(p=e(null!=(p=null!=i[1]?i[1].remoteAssetsConfig:i[1])?p.defaultAssetExtension:p,t))?p:"")+'">\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-transaction-links" data-perso-block-id="'+e.escapeExpression("function"==typeof(a=null!=(a=s.blockId||(null!=t?t.blockId:t))?a:s.helperMissing)?a.call(l,{name:"blockId",hash:{},data:n}):a)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" >\n'+(null!=(a=s.each.call(l,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"        </div>\n    </div>\n</div>\n"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-transaction-name"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div class="pstory-block-transaction-name" data-perso-block-id="'+e.escapeExpression("function"===_typeof(e=null!=(e=s.blockId||(null!=t?t.blockId:t))?e:i)?e.call(r,{name:"blockId",hash:{},data:n}):e)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content transaction-name accessibility-read" tabindex="0" role="text">'+(null!=(s="function"===_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:i)?e.call(r,{name:"text",hash:{},data:n}):e)?s:"")+"</div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-feedback-transaction"]=e.template({1:function(e,t,s,o,n){var r,i=e.lambda,e=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function";return'                    <div class="perso-feedback-transaction perso-bubble" role="text">\n                        <img class="perso-transaction-icon perso-asset-loading" src="'+(null!=(r=i((r=n&&n.root)&&r.baseUrl,t))?r:"")+"/"+(null!=(r=i((r=n&&n.root)&&r.assetDirectory,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||a).call(e,null!=t?t.txIcon:t,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=i((r=n&&n.root)&&r.assetExtension,t))?r:"")+'"/>\n                        <div class="perso-transaction-info">\n                            <div class="perso-transaction-date">'+(null!=(r=_typeof(i=null!=(i=s.txDate||(null!=t?t.txDate:t))?i:a)===l?i.call(e,{name:"txDate",hash:{},data:n}):i)?r:"")+'</div>\n                            <div class="perso-transaction-amount">'+(null!=(r=_typeof(i=null!=(i=s.txAmount||(null!=t?t.txAmount:t))?i:a)===l?i.call(e,{name:"txAmount",hash:{},data:n}):i)?r:"")+'</div>\n                            <div class="perso-transaction-description">'+(null!=(r=_typeof(i=null!=(i=s.txName||(null!=t?t.txName:t))?i:a)===l?i.call(e,{name:"txName",hash:{},data:n}):i)?r:"")+"</div>\n                        </div>\n                    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="pstory-block-frame pstory-block-table perso-feedback">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-table pstory-table-feedback">\n'+(null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.tableObject:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:"")+"            </div>\n        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["block-bar-chart"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,e=e.escapeExpression;return'<div class="pstory-block-frame pstory-block-bar-chart pstory-block-bar-chart '+e("function"===_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)?r.call(i,{name:"class",hash:{},data:n}):r)+" perso-"+e("function"===_typeof(r=null!=(r=s.direction||(null!=t?t.direction:t))?r:a)?r.call(i,{name:"direction",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-bar-chart"></div>\n        </div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["block-line-chart"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r;return'<div class="pstory-block-frame pstory-block-line-chart pstory-block-line-chart '+e.escapeExpression("function"==typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"class",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-line-chart"></div>\n        </div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["block-pie-chart"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="pstory-block-frame pstory-block-pie-chart" tabindex="-1">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-pie-chart"></div>\n            <div class="pstory-pie-data">\n                <div class="pstory-next-arrow"></div>\n                <div class="pstory-pie-info">\n                </div>\n                <div class="pstory-previous-arrow"></div>\n            </div>\n        </div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["block-pinGraph-chart"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r;return'<div class="pstory-block-frame pstory-block-pinGraph-chart_'+e.escapeExpression("function"==typeof(r=null!=(r=s.index||(null!=t?t.index:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"index",hash:{},data:n}):r)+' pstory-block-pinGraph-chart">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-pinGraph-chart"></div>\n        </div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["block-pure-bar-chart"]=e.template({1:function(e,t,s,o,n){return"perso-comparable-chart"},3:function(e,t,s,o,n){return""},5:function(e,t,s,o,n,r,i){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.series:t,{name:"each",hash:{},fn:e.program(6,n,0,r,i),inverse:e.noop,data:n}))?s:""},6:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{};return'                                <div class="perso-bar-wrapper perso-simple-bar">\n                                <div class="perso-bar '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(7,n,0,r,i),inverse:e.program(9,n,0,r,i),data:n}))?a:"")+' pstory-category="'+e.escapeExpression("function"==typeof(l=null!=(l=s.category||(null!=t?t.category:t))?l:s.helperMissing)?l.call(c,{name:"category",hash:{},data:n}):l)+'"></div>\n'+(null!=(a=s.if.call(c,null!=t?t.indicatorDisplay:t,{name:"if",hash:{},fn:e.program(11,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                            </div>\n"},7:function(e,t,s,o,n){return'perso-selected" aria-selected="true"'},9:function(e,t,s,o,n){return'"'},11:function(e,t,s,o,n,r,i){var a=e.escapeExpression;return'                                    <div class="perso-bar perso-indicator perso-indicator-type-'+a(e.lambda(null!=(i=null!=i[1]?i[1].config:i[1])?i.indicatorType:i,t))+'" pstory-category="'+a("function"==typeof(i=null!=(i=s.category||(null!=t?t.category:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"category",hash:{},data:n}):i)+'">\n                                    </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{},c=s.helperMissing,p=e.escapeExpression;return'<div class="pstory-block-frame pstory-block-bar-chart pstory-block-bar-chart '+p("function"===_typeof(a=null!=(a=s.class||(null!=t?t.class:t))?a:c)?a.call(l,{name:"class",hash:{},data:n}):a)+" perso-"+p("function"===_typeof(a=null!=(a=s.direction||(null!=t?t.direction:t))?a:c)?a.call(l,{name:"direction",hash:{},data:n}):a)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-bar-chart">\n                <div class="perso-bar-chart-wrapper perso-accessibility-wrapper '+(null!=(p=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?p:"")+'" role="text" >\n                    <span class="perso-accessibility-read perso-accessibility-bar-seleced-text"></span>\n                    <span class="perso-tooltip"></span>\n                    <div class="perso-bar-chart-container">\n                    <div class="perso-bars-wrapper">\n'+(null!=(p=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(3,n,0,r,i),inverse:e.program(5,n,0,r,i),data:n}))?p:"")+'                    </div>\n                    <div class="perso-month-amount"></div>\n                </div>\n            </div>\n            </div>\n        </div>\n    </div>\n</div>'},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["block-pure-pinGraph-chart"]=e.template({1:function(e,t,s,o,n){return'                        <div class="perso-pinGraph-raw" >\n                            <div class="perso-raw-wrapper" role="text">\n                                <span class="perso-raw-item perso-date-txt"></span>\n                                <div class="perso-raw-item perso-bar-wrapper">\n                                    <span class="perso-pinGraph-bar"></span>\n                                </div>\n                            </div>\n                        </div>\n                        <div aria-hidden="true"></div>\x3c!--it\'s required for accessibility--\x3e\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",c=e.escapeExpression;return'<div class="pstory-block-frame pstory-block-pinGraph-chart_'+c(_typeof(r=null!=(r=s.index||(null!=t?t.index:t))?r:a)===l?r.call(i,{name:"index",hash:{},data:n}):r)+" pstory-block-pinGraph-chart "+c(_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)===l?r.call(i,{name:"class",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-pure-pinGraph-chart '+c(_typeof(r=null!=(r=s.mode||(null!=t?t.mode:t))?r:a)===l?r.call(i,{name:"mode",hash:{},data:n}):r)+'">\n                <div class="perso-pinGraph-container">\n'+(null!=(c=s.each.call(i,null!=t?t.series:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?c:"")+"                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["block-tranList"]=e.template({1:function(e,t,s,o,n){return'                    <div class="perso-table-row">\n                        <div class="perso-loading-tbl">\n                            <span>'+e.escapeExpression(e.lambda(null!=(e=null!=t?t.texts:t)?e.loading:e,t))+"</span>\n                        </div>\n                    </div>\n"},3:function(e,t,s,o,n){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.rows:t,{name:"each",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?s:""},4:function(e,t,s,o,n){var r,i=e.lambda;return'                        <div class="perso-table-row">\n                            <div class="perso-col perso-left-col">\n                                <div class="perso-row perso-upper-row">'+(null!=(r=i(null!=t?t.transaction:t,t))?r:"")+"</div>\n"+(null!=(r=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.accountNumber:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.program(7,n,0),data:n}))?r:"")+'                            </div>\n                            <div class="perso-col perso-right-col">\n                                <div class="perso-amount-container"> '+(null!=(r=i(null!=t?t.amount:t,t))?r:"")+"</div>\n                            </div>\n                        </div>\n"},5:function(e,t,s,o,n){var r,e=e.lambda;return'                                    <div class="perso-row perso-lower-row">'+(null!=(r=e(null!=t?t.date:t,t))?r:"")+' <span class="perso-account-seperator">|</span> '+(null!=(r=e(null!=t?t.accountNumber:t,t))?r:"")+"</div>\n"},7:function(e,t,s,o,n){return'                                    <div class="perso-row perso-lower-row">'+(null!=(e=e.lambda(null!=t?t.date:t,t))?e:"")+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="pstory-block-frame pstory-block-table">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" tabindex="-1">\n            <div class="pstory-table pstory-table-new-txlist1">\n'+(null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.future:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.program(3,n,0),data:n}))?s:"")+"            </div>\n        </div>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-perso-loading-animation"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r;return"<div id='perso-loading-widget'>\n    <div class='perso-loading-text' >\n         "+(null!=(s="function"==typeof(r=null!=(r=s.loadingText||(null!=t?t.loadingText:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"loadingText",hash:{},data:n}):r)?s:"")+"\n    </div>\n    <div class='perso-loading'></div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-perso-widget-story-error"]=e.template({1:function(e,t,s,o,n){return"perso-mobile-err"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",c=e.escapeExpression;return'<div id="personetics-error-container" class="perso-error-container '+(null!=(e=s.if.call(i,null!=t?t.isMobileDevice:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?e:"")+'">\n    <div class="personetics-error-img '+c(_typeof(r=null!=(r=s.imgClass||(null!=t?t.imgClass:t))?r:a)===l?r.call(i,{name:"imgClass",hash:{},data:n}):r)+'"></div> \n    <div class="personetics-error-larg">'+(null!=(e=_typeof(r=null!=(r=s.textLarge||(null!=t?t.textLarge:t))?r:a)===l?r.call(i,{name:"textLarge",hash:{},data:n}):r)?e:"")+'</div>\n    <div class="personetics-error-small">'+(null!=(e=_typeof(r=null!=(r=s.textSmall||(null!=t?t.textSmall:t))?r:a)===l?r.call(i,{name:"textSmall",hash:{},data:n}):r)?e:"")+'</div>\n    <div class="personetics-no-story-btn"><span class="personetics-btn-text">'+c(_typeof(r=null!=(r=s.btnText||(null!=t?t.btnText:t))?r:a)===l?r.call(i,{name:"btnText",hash:{},data:n}):r)+"</span></div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-story-message"]=e.template({1:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing;return'<div id="story-frame-container" class="perso-story-frame-container">\n    <div  class="perso-story-message">\n        <div class="perso-message-img perso-'+e.escapeExpression("function"===_typeof(e=null!=(e=s.img||(null!=t?t.img:t))?e:i)?e.call(r,{name:"img",hash:{},data:n}):e)+'"></div>\n        <div class="perso-message-text">'+(null!=(s="function"===_typeof(e=null!=(e=s.storyTeaserText||(null!=t?t.storyTeaserText:t))?e:i)?e.call(r,{name:"storyTeaserText",hash:{},data:n}):e)?s:"")+"</div>\n    </div>\n</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.insightsNotEmpty:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:""},useData:!0}),this.Personetics.UI.Handlebars.templates["filter-inbox-template"]=e.template({1:function(e,t,s,o,n){var r=e.lambda,e=e.escapeExpression;return'\t\t\t<li role="tab" class ="perso-teaser-filter-tab" data-id="'+e(r(null!=t?t.id:t,t))+'" aria-selected="false" aria-label="'+e(r(null!=t?t.accText:t,t))+'" tabindex="0">'+e(r(null!=t?t.text:t,t))+" ("+e(r(null!=t?t.count:t,t))+")</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="perso-teaser-filter">\n\t<ul role="tablist">\n'+(null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.tabs:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:"")+'\t</ul>\n\t<div class="perso-filter-selected-tab"></div>\n</div>\n\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["inbox-template"]=e.template({1:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'<div class="pstory-title perso-teaser-title" aria-label="'+e(_typeof(r=null!=(r=s.inboxTitle||(null!=t?t.inboxTitle:t))?r:a)===l?r.call(i,{name:"inboxTitle",hash:{},data:n}):r)+'">\n    <div aria-live="assertive" role="text" class="pstory-title-text">'+e(_typeof(r=null!=(r=s.inboxTitle||(null!=t?t.inboxTitle:t))?r:a)===l?r.call(i,{name:"inboxTitle",hash:{},data:n}):r)+'</div>\n    <input aria-label="'+e(_typeof(r=null!=(r=s.closeInboxBtnlbl||(null!=t?t.closeInboxBtnlbl:t))?r:a)===l?r.call(i,{name:"closeInboxBtnlbl",hash:{},data:n}):r)+'" aria-role="text" type="button" class="pstory-title-close"/>\n</div>\n'},3:function(e,t,s,o,n){return"        <div class='perso-teaser-filter-wrapper'></div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return"\n"+(null!=(r=s.if.call(i,null!=t?t.filter:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+"<div class='perso-multi-teaser-wrapper'>\n"+(null!=(r=s.if.call(i,null!=t?t.inboxTitle:t,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+"    <div class='perso-multi-teaser-template'></div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-perso-teaser-carousel-desktop"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",c=e.escapeExpression;return'<div class=\'perso-multi-teaser-wrapper\'>\n    <div class="perso-carousel-animate perso-carousel-wrapper">\n        <div class="perso-carousel-outer-wrapper">\n            <div class=\'perso-multi-teaser-template perso-carousel-inner-wrapper\'></div>\n        </div>\n        <div class="perso-teaser-navigation">\n            <input type="button" class="pstory-carousel-arrow pstory-carousel-arrow-prev" aria-label="'+c(_typeof(r=null!=(r=s.prev||(null!=t?t.prev:t))?r:a)===l?r.call(i,{name:"prev",hash:{},data:n}):r)+'" tabindex="-1"/>\n            <input type="button" class="pstory-acc-carousel-selected" aria-label="'+c(_typeof(r=null!=(r=s.selected||(null!=t?t.selected:t))?r:a)===l?r.call(i,{name:"selected",hash:{},data:n}):r)+'"/>\n            <div class="perso-carousel-index-wrapper" aria-labelledby="perso-accessibility-read-'+c(e.lambda(null!=(e=null!=(e=null!=t?t.insights:t)?e[0]:e)?e.id:e,t))+'">\n                <div class="perso-carousel-index-container"></div>\n            </div>  \n            <input type="button" class="pstory-carousel-arrow pstory-carousel-arrow-next" aria-label="'+c(_typeof(r=null!=(r=s.next||(null!=t?t.next:t))?r:a)===l?r.call(i,{name:"next",hash:{},data:n}):r)+'" tabindex="-1"/>\n        </div>\n    </div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-perso-teaser-carousel-navigation"]=e.template({1:function(e,t,s,o,n){var r,i=e.lambda,e=e.escapeExpression;return'    <div class="perso-carousel-index-dot"><span class="perso-carousel-number-current">1</span>\n        <span class="perso-carousel-number-middle">'+e(i(null!=(r=null!=t?t.teaserConfig:t)?r.paginationMidSign:r,t))+'</span>\n        <span class="perso-carousel-number-all">'+e(i(null!=(r=null!=t?t.insights:t)?r.length:r,t))+"</span></div>\n"},3:function(e,t,s,o,n){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.insights:t,{name:"each",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?s:""},4:function(e,t,s,o,n){return'        <div class="perso-carousel-index-dot"><div class="perso-carousel-pagination"></div></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.paginationNumbers:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.program(3,n,0),data:n}))?s:""},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-perso-teaser-carousel"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return"<div class='perso-multi-teaser-wrapper perso-direction-"+e(_typeof(r=null!=(r=s.directionClass||(null!=t?t.directionClass:t))?r:a)===l?r.call(i,{name:"directionClass",hash:{},data:n}):r)+'\'>\n    <div class="perso-carousel-animate perso-carousel-wrapper">\n        <div class="perso-carousel-outer-wrapper">\n            <div class=\'perso-multi-teaser-template perso-carousel-inner-wrapper\'></div>\n        </div>\n    </div>\n    <div class="perso-teaser-navigation">\n        <input type="button" class="pstory-carousel-arrow pstory-carousel-arrow-prev pstory-carousel-arrow-hidden" aria-label="'+e(_typeof(r=null!=(r=s.prev||(null!=t?t.prev:t))?r:a)===l?r.call(i,{name:"prev",hash:{},data:n}):r)+'" tabindex="0" aria-hidden="true"/>\n        <div class="perso-carousel-index-wrapper" role="text" tabindex="0">\n            <div class="perso-carousel-index-container"></div>\n        </div>\n        <input type="button" class="pstory-carousel-arrow pstory-carousel-arrow-next pstory-carousel-arrow-hidden" aria-label="'+e(_typeof(r=null!=(r=s.next||(null!=t?t.next:t))?r:a)===l?r.call(i,{name:"next",hash:{},data:n}):r)+'" tabindex="0" aria-hidden="true"/>\n    </div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-perso-feedback"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function",e=e.escapeExpression;return'<div class="perso-feedback-wrapper">\n    <div class="perso-textarea-wrapper">\n        <div class="perso-textarea-container">\n            <div class="perso-accessibility-read perso-txt-feedback-box-label" id="txtFeedbackBoxLabel" aria-hidden="true">'+e(_typeof(i=null!=(i=s.lblAccessibilityfeedbackprompt||(null!=t?t.lblAccessibilityfeedbackprompt:t))?i:l)===c?i.call(a,{name:"lblAccessibilityfeedbackprompt",hash:{},data:n}):i)+'</div>\n            <textarea class="perso-feedback-text perso-direction-text-left" role="textbox" maxlength="500" placeholder="'+(null!=(r=_typeof(i=null!=(i=s.lblfeedbackprompt||(null!=t?t.lblfeedbackprompt:t))?i:l)===c?i.call(a,{name:"lblfeedbackprompt",hash:{},data:n}):i)?r:"")+'"></textarea>\n            <div class="perso-textarea-size" ></div>\n        </div>\n        <input class="perso-feedback-submit" type="button" value="'+(null!=(r=_typeof(i=null!=(i=s.btnsubmit||(null!=t?t.btnsubmit:t))?i:l)===c?i.call(a,{name:"btnsubmit",hash:{},data:n}):i)?r:"")+'" disabled="disabled"/>\n    </div>\n    <div class="perso-feedback-reaction" tabindex="0" role="text" aria-label="'+e(_typeof(i=null!=(i=s.lblreactionFeedback||(null!=t?t.lblreactionFeedback:t))?i:l)===c?i.call(a,{name:"lblreactionFeedback",hash:{},data:n}):i)+'">'+(null!=(r=_typeof(i=null!=(i=s.lblreactionFeedback||(null!=t?t.lblreactionFeedback:t))?i:l)===c?i.call(a,{name:"lblreactionFeedback",hash:{},data:n}):i)?r:"")+"</div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-perso-widget-teaser"]=e.template({1:function(e,t,s,o,n){var r=e.lambda,i=e.escapeExpression;return'                <input type="button" class="perso-teaser-filter-tab'+(null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?s:"")+'" data-id="'+i(r(null!=t?t.id:t,t))+'" value="'+i(r(null!=t?t.text:t,t))+'"/>\n'},2:function(e,t,s,o,n){return" perso-selected-tab"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r;return'<div class="perso-teaser-widget-container">\n    <div class="perso-teaser-header-wrapper">\n        <div class="perso-teaser-header-top"></div>\n        <div class="perso-teaser-header">\n            <div class="perso-teaser-header-close"></div>\n            <div class="perso-teaser-header-title">'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.texts:t)?r.insightsTitle:r,t))+'</div>\n        </div>\n        <div class="perso-teaser-filter-tabs">\n'+(null!=(r=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.tabs:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'            <div class="pstory-tab-animated-border-bottom"></div>\n        </div>\n   </div>\n    <div class="perso-insights-container">\n        <div class="perso-loading-wrapper">\n            <div class="perso-loading"></div>\n        </div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates.inboxContainer=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'<div class="perso-title-outer-wrapper">\n    <div class="perso-side-by-side-teaser-title">\n        <div aria-live="assertive" role="text" class="perso-title-text">'+e(_typeof(r=null!=(r=s.inboxTitle||(null!=t?t.inboxTitle:t))?r:a)===l?r.call(i,{name:"inboxTitle",hash:{},data:n}):r)+'</div>\n    </div>\n    <div class="perso-side-by-side-story-title">\n        <div role="text" aria-label="'+e(_typeof(r=null!=(r=s.storyTitle||(null!=t?t.storyTitle:t))?r:a)===l?r.call(i,{name:"storyTitle",hash:{},data:n}):r)+', heading level 1" class="perso-title-text">'+e(_typeof(r=null!=(r=s.storyTitle||(null!=t?t.storyTitle:t))?r:a)===l?r.call(i,{name:"storyTitle",hash:{},data:n}):r)+'</div>\n    </div>\n</div>\n<div class="perso-inbox-story-container">\n    <div id="personetics-teaser-widget" class="perso-teaser-widget"></div>\n    <div id="personetics-story-widget" class="perso-story-widget"></div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["manage-budgets-template"]=e.template({1:function(e,t,s,o,n,r,i){var a;return'        <div class="perso-recommended-categories">\n            <div class="perso-recommended-categories-title" role="text">'+(null!=(a=e.lambda(null!=(a=null!=t?t.texts:t)?a.recommendedTitle:a,t))?a:"")+"</div>\n"+(null!=(a=s.each.call(null!=t?t:e.nullContext||{},null!=(a=null!=t?t.categories:t)?a.recommended:a,{name:"each",hash:{},fn:e.program(2,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"        </div>\n"},2:function(e,t,s,o,n,r,i){return null!=(t=e.invokePartial(o.innerCategory,t,{name:"innerCategory",hash:{recommendedPayload:null!=i[1]?i[1].recommendedPayload:i[1],recommended:!0,confirmButtons:null!=i[1]?i[1].confirmButtons:i[1],assetConfig:null!=i[1]?i[1].assetConfig:i[1],texts:null!=i[1]?i[1].texts:i[1]},data:n,indent:"            ",helpers:s,partials:o,decorators:e.decorators}))?t:""},4:function(e,t,s,o,n,r,i){var a;return'        <div class="perso-subscribed-categories">\n            <div class="perso-subscribed-categories-title" role="text">'+(null!=(a=e.lambda(null!=(a=null!=t?t.texts:t)?a.yourBudgetsTitle:a,t))?a:"")+"</div>\n"+(null!=(a=s.each.call(null!=t?t:e.nullContext||{},null!=(a=null!=t?t.categories:t)?a.subscribed:a,{name:"each",hash:{},fn:e.program(5,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"        </div>\n"},5:function(e,t,s,o,n,r,i){return null!=(t=e.invokePartial(o.innerCategory,t,{name:"innerCategory",hash:{subscribedPayload:null!=i[1]?i[1].subscribedPayload:i[1],subscribed:!0,confirmButtons:null!=i[1]?i[1].confirmButtons:i[1],assetConfig:null!=i[1]?i[1].assetConfig:i[1],texts:null!=i[1]?i[1].texts:i[1]},data:n,indent:"            ",helpers:s,partials:o,decorators:e.decorators}))?t:""},7:function(e,t,s,o,n,r,i){var a;return'        <div class="perso-available-categories">\n            <div class="perso-available-categories-title">'+(null!=(a=e.lambda(null!=(a=null!=t?t.texts:t)?a.moreBudgetsTitle:a,t))?a:"")+"</div>\n"+(null!=(a=s.each.call(null!=t?t:e.nullContext||{},null!=(a=null!=t?t.categories:t)?a.available:a,{name:"each",hash:{},fn:e.program(8,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"        </div>\n"},8:function(e,t,s,o,n,r,i){return null!=(t=e.invokePartial(o.innerCategory,t,{name:"innerCategory",hash:{confirmButtons:null!=i[1]?i[1].confirmButtons:i[1],assetConfig:null!=i[1]?i[1].assetConfig:i[1],texts:null!=i[1]?i[1].texts:i[1]},data:n,indent:"            ",helpers:s,partials:o,decorators:e.decorators}))?t:""},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{},c=e.lambda;return"<div class='perso-manage-budgets-wrapper'>\n    <div class='perso-manage-budgets-conatiner'>\n"+(null!=(a=e.invokePartial(o.disclaimerButton,t,{name:"disclaimerButton",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?a:"")+"    <div class='perso-manage-budgets-template'>\n"+(null!=(a=s.if.call(l,null!=(a=null!=t?t.categories:t)?a.recommended:a,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+(null!=(a=s.if.call(l,null!=(a=null!=t?t.categories:t)?a.subscribed:a,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?a:"")+(null!=(a=s.if.call(l,null!=(a=null!=t?t.categories:t)?a.available:a,{name:"if",hash:{},fn:e.program(7,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"    </div>\n\n"+(null!=(a=e.invokePartial(o.disclaimerModal,t,{name:"disclaimerModal",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?a:"")+'\n    <div id="perso-stop-modal" class="perso-stop-modal perso-modal">\n        <div class="perso-stop-modal-content perso-modal-element-content">\n            <div class="perso-stop-title">\n                <input type="button" class="perso-stop-close perso-close-modal" />\n                <div class="perso-stop-title-text" tabindex="0" role="text" aria-label="'+(null!=(a=c(null!=(a=null!=t?t.texts:t)?a.stopBudgetTitle:a,t))?a:"")+'">'+(null!=(a=c(null!=(a=null!=t?t.texts:t)?a.stopBudgetTitle:a,t))?a:"")+'</div>\n            </div>\n            <div class="perso-stop-modal-text perso-modal-text">\n                <div class="perso-stop-text-wrapper" role="text">\n                    <span class="perso-stop-text" aria-hidden="true">'+(null!=(a=c(null!=(a=null!=t?t.texts:t)?a.stopBudgetText1:a,t))?a:"")+'</span>\n                    <span class="perso-stop-text-category" aria-hidden="true"></span>\n                    <span class="perso-stop-text" aria-hidden="true">'+(null!=(a=c(null!=(a=null!=t?t.texts:t)?a.stopBudgetText2:a,t))?a:"")+'</span>\n                </div>\n                <input type="button" class="perso-stop-button perso-stop-button-yes" role="button"\n                    value="'+(null!=(a=c(null!=(a=null!=t?t.texts:t)?a.stopBudgetbutton1:a,t))?a:"")+'" />\n                <input type="button" class="perso-stop-button perso-stop-button-no perso-close-modal" role="button"\n                    value="'+(null!=(a=c(null!=(a=null!=t?t.texts:t)?a.stopBudgetbutton2:a,t))?a:"")+'" />\n            </div>\n        </div>\n    </div>\n    </div>\n</div>'},usePartial:!0,useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["single-budget-category-template"]=e.template({1:function(e,t,s,o,n){return'                        <input type="button" class="perso-stop-budget-button" role="button"/>\n'},3:function(e,t,s,o,n){var r;return'                                data-value="'+(null!=(r=e.lambda(null!=(r=null!=t?t.recommendedPayload:t)?r.recommendedBudgetAmount:r,t))?r:"")+'" '+(null!=(r=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.confirmButtons:t,{name:"if",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?r:"")+"\n"},4:function(e,t,s,o,n){return'data-src-value="'+(null!=(e=e.lambda(null!=(e=null!=t?t.recommendedPayload:t)?e.recommendedBudgetAmount:e,t))?e:"")+'"'},6:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'                                data-value="'+(null!=(r="function"==typeof(r=null!=(r=s.budgetAmount||(null!=t?t.budgetAmount:t))?r:s.helperMissing)?r.call(i,{name:"budgetAmount",hash:{},data:n}):r)?r:"")+'" '+(null!=(r=s.if.call(i,null!=t?t.confirmButtons:t,{name:"if",hash:{},fn:e.program(7,n,0),inverse:e.noop,data:n}))?r:"")+"\n                                "},7:function(e,t,s,o,n){var r;return'data-src-value="'+(null!=(s="function"==typeof(r=null!=(r=s.budgetAmount||(null!=t?t.budgetAmount:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"budgetAmount",hash:{},data:n}):r)?s:"")+'"'},9:function(e,t,s,o,n){var r;return'                                <span class="perso-placeholder-amount perso-accessibility-no-read" aria-hidden="true">'+(null!=(s="function"==typeof(r=null!=(r=s.recommendedBudgetAmountFormatted||(null!=t?t.recommendedBudgetAmountFormatted:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"recommendedBudgetAmountFormatted",hash:{},data:n}):r)?s:"")+'</span>\n                                <span class="perso-placeholder-text perso-accessibility-no-read" aria-hidden="true">'+(null!=(s=e.lambda(null!=(s=null!=t?t.texts:t)?s.recommendedPlaceHolder:s,t))?s:"")+"</span>\n"},11:function(e,t,s,o,n){var r;return'                                <span class="perso-placeholder-amount perso-accessibility-no-read" aria-hidden="true">'+(null!=(s="function"==typeof(r=null!=(r=s.budgetAmountFormatted||(null!=t?t.budgetAmountFormatted:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"budgetAmountFormatted",hash:{},data:n}):r)?s:"")+"</span>\n"},13:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'                <div class="perso-category-recommend-information">\n                    <div class="perso-category-recommend-information-icon"></div>\n                    <div class="perso-category-recommend-information-text" aria-hidden="true">\n                        '+(null!=(r=s.unless.call(i,null!=(r=null!=t?t.recommendedPayload:t)?r.majorTrend:r,{name:"unless",hash:{},fn:e.program(14,n,0),inverse:e.noop,data:n}))?r:"")+"\n                        "+(null!=(r=e.lambda(null!=(r=null!=t?t.recommendedPayload:t)?r.trend:r,t))?r:"")+"</div>\n                </div>\n"+(null!=(r=s.if.call(i,null!=t?t.confirmButtons:t,{name:"if",hash:{},fn:e.program(16,n,0),inverse:e.noop,data:n}))?r:"")},14:function(e,t,s,o,n){return(null!=(e=e.lambda(null!=(e=null!=t?t.recommendedPayload:t)?e.percentage:e,t))?e:"")+"% "},16:function(e,t,s,o,n){var r,e=e.lambda;return'                <div class="perso-add-budget">\n                    <input type="button" class="perso-add-budget-button perso-accessibility-no-read" role="button" aria-label="'+(null!=(r=e(null!=(r=null!=t?t.texts:t)?r.submitButton:r,t))?r:"")+'"\n                    value="'+(null!=(r=e(null!=(r=null!=t?t.texts:t)?r.submitButton:r,t))?r:"")+'" />\n                </div>\n'},18:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{};return null!=(s=s.if.call(r,(s.math||t&&t.math||s.helperMissing).call(r,null!=t?t.budgetKey:t,"==",null!=(s=null!=t?t.subscribedPayload:t)?s.subscribedBudgetKey:s,{name:"math",hash:{},data:n}),{name:"if",hash:{},fn:e.program(19,n,0),inverse:e.noop,data:n}))?s:""},19:function(e,t,s,o,n){var r,e=e.lambda;return'                <div class="perso-category-subscribed-information">\n                    <div class="perso-category-subscribed-information-icon"></div>\n                    <div class="perso-category-subscribed-information-text" aria-hidden="true">\n                        '+(null!=(r=e(null!=(r=null!=t?t.texts:t)?r.submittedBudgetRecommended:r,t))?r:"")+" "+(null!=(r=e(null!=(r=null!=t?t.subscribedPayload:t)?r.subscribedBudgetRecommendedAmount:r,t))?r:"")+"\n                    </div>\n                </div>\n"},21:function(e,t,s,o,n){var r,e=e.lambda;return'                <div class="perso-submit-buttons-wrapper">\n                    <input type="button" class="perso-submit-button perso-submit-button-cancel"\n                    value="'+(null!=(r=e(null!=(r=null!=t?t.texts:t)?r.cancelButton:r,t))?r:"")+'" />\n                    <input type="button" class="perso-submit-button perso-submit-button-confirm"\n                    value="'+(null!=(r=e(null!=(r=null!=t?t.texts:t)?r.confirmButton:r,t))?r:"")+'" />\n                </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function",p=e.lambda;return'<div class="pstory-block-frame pstory-block-category">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="perso-category-wrapper" data-category-id="'+(null!=(r=_typeof(i=null!=(i=s.budgetKey||(null!=t?t.budgetKey:t))?i:l)===c?i.call(a,{name:"budgetKey",hash:{},data:n}):i)?r:"")+'">\n                <div class="perso-category-data-wrapper">\n                    <div class="perso-image-category-wrapper">\n                        <img class="perso-image-category perso-asset-loading" aria-hidden="true"\n                            src="'+e.escapeExpression(p(null!=(r=null!=t?t.assetConfig:t)?r.baseUrl:r,t))+"/"+(null!=(r=p(null!=(r=null!=t?t.assetConfig:t)?r.assetDirectory:r,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||l).call(a,null!=t?t.budgetKey:t,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=p(null!=(r=null!=t?t.assetConfig:t)?r.assetExtension:r,t))?r:"")+'">\n                    </div>\n                    <div class="perso-category-data">\n                        <div class="perso-category-name" aria-hidden="true">'+(null!=(r=_typeof(i=null!=(i=s.budgetKeyDisplayName||(null!=t?t.budgetKeyDisplayName:t))?i:l)===c?i.call(a,{name:"budgetKeyDisplayName",hash:{},data:n}):i)?r:"")+'</div>\n                        <div class="perso-category-avg" aria-hidden="true">\n                            <span class="perso-category-avg-amount">'+(null!=(r=_typeof(i=null!=(i=s.budgetAvgMonthlySpendingFormatted||(null!=t?t.budgetAvgMonthlySpendingFormatted:t))?i:l)===c?i.call(a,{name:"budgetAvgMonthlySpendingFormatted",hash:{},data:n}):i)?r:"")+'</span>\n                            <span class="perso-category-avg-text">'+(null!=(r=p(null!=(r=null!=t?t.texts:t)?r.monthlyAvg:r,t))?r:"")+"</span>\n                        </div>\n"+(null!=(r=s.if.call(a,null!=t?t.subscribed:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'                        <div class="perso-budget-amount-wrapper">\n                            <input class="perso-budget-amount perso-budget-amount-click" type="text" inputmode="decimal" tabindex="0"\n                                maxlength="8" role="textbox"\n'+(null!=(r=s.if.call(a,null!=t?t.recommended:t,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.program(6,n,0),data:n}))?r:"")+' />                                \n                            <span class="perso-placeholder">\n'+(null!=(r=s.if.call(a,null!=t?t.recommended:t,{name:"if",hash:{},fn:e.program(9,n,0),inverse:e.program(11,n,0),data:n}))?r:"")+'                            </span>\n                            <input type="button" class="perso-budget-amount-click perso-budget-amount-button" aria-hidden="true"/>\n                        </div>\n                        <div class="peso-budget-amount-validation perso-accessibility-no-read">'+(null!=(r=p(null!=(r=null!=t?t.texts:t)?r.validationText:r,t))?r:"")+"</div>\n                    </div>\n                </div>\n"+(null!=(r=s.if.call(a,null!=t?t.recommended:t,{name:"if",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?r:"")+(null!=(r=s.if.call(a,null!=t?t.subscribedPayload:t,{name:"if",hash:{},fn:e.program(18,n,0),inverse:e.noop,data:n}))?r:"")+(null!=(r=s.if.call(a,null!=t?t.confirmButtons:t,{name:"if",hash:{},fn:e.program(21,n,0),inverse:e.noop,data:n}))?r:"")+"            </div>\n        </div>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates.Calendar=e.template({1:function(e,t,s,o,n){var r,i=e.escapeExpression,a=e.lambda;return(null!=(o=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'\n    <div class="teaser-body pstory-calendar" aria-hidden="true" id="'+i("function"==typeof(r=null!=(r=s.insightId||(null!=t?t.insightId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"insightId",hash:{},data:n}):r)+"_"+i(a(null!=(o=null!=t?t.calendar1:t)?o.blockId:o,t))+'">\n        <div class="perso-calendar-body-main">\n            <div class="perso-calendar-container" data-perso-block-id="'+i(a(null!=(o=null!=t?t.calendar1:t)?o.blockId:o,t))+'">\n                <div class="perso-calendar-inner-container">\n                    <div class="perso-calendar perso-calendar-inlined">\n                        <div class="perso-calendar-inner">\n                            <div class="perso-calendar-months">\n                                <div class="perso-calendar-month">\n                                    <div class="perso-calendar-days">\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n            <div class="perso-calendar-data-container">\n                <div class="outgoing-container">\n                    <div class="outgoing-label" data-perso-block-id="'+i(a(null!=(o=null!=t?t.outGoingLabel:t)?o.blockId:o,t))+'">'+i(a(null!=(o=null!=t?t.outGoingLabel:t)?o.text:o,t))+'</div>\n                    <div class="outgoing-amount" data-perso-block-id="'+i(a(null!=(o=null!=t?t.outGoingValue:t)?o.blockId:o,t))+'">'+(null!=(o=a(null!=(o=null!=t?t.outGoingValue:t)?o.text:o,t))?o:"")+'</div>\n                </div>\n                <div class="ingoing-container">\n                    <div class="ingoing-label" data-perso-block-id="'+i(a(null!=(o=null!=t?t.incomingLabel:t)?o.blockId:o,t))+'">'+i(a(null!=(o=null!=t?t.incomingLabel:t)?o.text:o,t))+'</div>\n                    <div class="ingoing-amount" data-perso-block-id="'+i(a(null!=(o=null!=t?t.incomingValue:t)?o.blockId:o,t))+'">'+(null!=(o=a(null!=(o=null!=t?t.incomingValue:t)?o.text:o,t))?o:"")+"</div>\n                </div>\n            </div>\n        </div>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return(null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:"")+"\n\n\n\n\n"},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates["block-dateInput"]=e.template({1:function(e,t,s,o,n){var r;return'        <input class="perso-user-input perso-date-input" type="text" placeholder="'+e.escapeExpression("function"==typeof(r=null!=(r=s.txt||(null!=t?t.txt:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txt",hash:{},data:n}):r)+'"  inputmode="date" required="required">\n'},3:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'        <input class="perso-user-input perso-date-input" type="date" placeholder="'+e(_typeof(r=null!=(r=s.txt||(null!=t?t.txt:t))?r:a)===l?r.call(i,{name:"txt",hash:{},data:n}):r)+'" min="'+e(_typeof(r=null!=(r=s.minDate||(null!=t?t.minDate:t))?r:a)===l?r.call(i,{name:"minDate",hash:{},data:n}):r)+'" max="'+e(_typeof(r=null!=(r=s.maxDate||(null!=t?t.maxDate:t))?r:a)===l?r.call(i,{name:"maxDate",hash:{},data:n}):r)+'" inputmode="date" required="required">\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing;return'<div class="perso-input-title-wrapper">\n    <div class="perso-input-title" role="text">\n        '+e.escapeExpression("function"===_typeof(r=null!=(r=s.title||(null!=t?t.title:t))?r:a)?r.call(i,{name:"title",hash:{},data:n}):r)+'\n    </div>\n</div>\n<div class="perso-input-wrapper">\n'+(null!=(e=s.if.call(i,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.program(3,n,0),data:n}))?e:"")+'    <div class="perso-submit-button" role="button" aria-hidden="true" data-action-id="'+(null!=(e="function"===_typeof(r=null!=(r=s.submitAction||(null!=t?t.submitAction:t))?r:a)?r.call(i,{name:"submitAction",hash:{},data:n}):r)?e:"")+'"></div>\n</div>\n<div class="perso-input-warning-message-wrapper">\n    <div class="perso-input-warning-message"></div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["block-numberInput"]=e.template({1:function(e,t,s,o,n){var r;return'        <input class="perso-user-input perso-number-input" type="text" min="0" placeholder="'+e.escapeExpression("function"==typeof(r=null!=(r=s.promptText||(null!=t?t.promptText:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"promptText",hash:{},data:n}):r)+'" inputmode="decimal">\n'},3:function(e,t,s,o,n){var r;return'        <input class="perso-user-input perso-number-input" type="number" pattern="^[0-9]*$" min="0" placeholder="'+e.escapeExpression("function"==typeof(r=null!=(r=s.promptText||(null!=t?t.promptText:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"promptText",hash:{},data:n}):r)+'" inputmode="decimal">\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing;return'<div class="perso-input-title-wrapper">\n    <div class="perso-input-title" role="text">\n        '+e.escapeExpression("function"===_typeof(r=null!=(r=s.title||(null!=t?t.title:t))?r:a)?r.call(i,{name:"title",hash:{},data:n}):r)+'\n    </div>\n</div>\n<div class="perso-input-wrapper">\n'+(null!=(e=s.if.call(i,null!=t?t.isDesktop:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.program(3,n,0),data:n}))?e:"")+'    <div class="perso-clear-input perso-hide" role="button" aria-hidden="true"></div>\n    <div class="perso-submit-button" role="button" aria-hidden="true" data-action-id="'+(null!=(e="function"===_typeof(r=null!=(r=s.submitAction||(null!=t?t.submitAction:t))?r:a)?r.call(i,{name:"submitAction",hash:{},data:n}):r)?e:"")+'"></div>\n</div>\n<div class="perso-input-warning-message-wrapper">\n    <div class="perso-input-warning-message"></div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["block-quickReply"]=e.template({1:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'        <button class="perso-quick-reply-button perso-accessibility-item" data-action-id="'+(null!=(r="function"===_typeof(i=null!=(i=s.action||(null!=t?t.action:t))?i:a)?i.call(e,{name:"action",hash:{},data:n}):i)?r:"")+'">'+(null!=(r="function"===_typeof(i=null!=(i=s.text||(null!=t?t.text:t))?i:a)?i.call(e,{name:"text",hash:{},data:n}):i)?r:"")+"</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'<div class="perso-quick-reply-buttons-container" data-perso-block-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.blockId||(null!=t?t.blockId:t))?r:s.helperMissing)?r.call(i,{name:"blockId",hash:{},data:n}):r)+'">\n'+(null!=(r=s.each.call(i,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+"</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates.doubleBox=e.template({1:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=e.lambda,a=e.escapeExpression;return(null!=(o=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'\n    <div class="pstory-block-hbox-columns-frame teaser-body perso-double-box" aria-hidden="true">\n        <div class="pstory-hbox-column-frame" data-width="6">\n\n            <div class="pstory-hbox-column-frame perso-double-box perso-double-box-left" data-width="12">\n                <div class="perso-double-box-container">\n'+(null!=(o=s.if.call(r,null!=(o=null!=t?t["box-icon1"]:t)?o.url:o,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?o:"")+'                    <div class="pstory-block-frame pstory-block-text" data-perso-block-id="'+a(i(null!=(o=null!=t?t["box-value1"]:t)?o.blockId:o,t))+'">\n                        <div class="pstory-block-content perso-double-box-value '+(null!=(o=s.if.call(r,null!=(o=null!=t?t["box-value1"]:t)?o.isDate:o,{name:"if",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?o:"")+'">\n                            '+(null!=(o=i(null!=(o=null!=t?t["box-value1"]:t)?o.text:o,t))?o:"")+'\n                        </div>\n                    </div>\n                    <div class="pstory-block-frame pstory-block-text" data-perso-block-id="'+a(i(null!=(o=null!=t?t["box-label1"]:t)?o.blockId:o,t))+'">\n                        <div class="pstory-block-content perso-double-box-text">\n                            '+(null!=(o=i(null!=(o=null!=t?t["box-label1"]:t)?o.text:o,t))?o:"")+'\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n        <div class="pstory-hbox-column-frame" data-width="6">\n\n            <div class="pstory-hbox-column-frame perso-double-box perso-double-box-right"  data-width="12">\n                <div class="perso-double-box-container">\n'+(null!=(o=s.if.call(r,null!=(o=null!=t?t["box-icon2"]:t)?o.url:o,{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?o:"")+'                    <div class="pstory-block-frame pstory-block-text" data-perso-block-id="'+a(i(null!=(o=null!=t?t["box-value2"]:t)?o.blockId:o,t))+'">\n                        <div class="pstory-block-content perso-double-box-value '+(null!=(o=s.if.call(r,null!=(o=null!=t?t["box-value2"]:t)?o.isDate:o,{name:"if",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?o:"")+'">\n                            '+(null!=(o=i(null!=(o=null!=t?t["box-value2"]:t)?o.text:o,t))?o:"")+'\n                        </div>\n                    </div>\n                    <div class="pstory-block-frame pstory-block-text" data-perso-block-id="'+a(i(null!=(o=null!=t?t["box-label2"]:t)?o.blockId:o,t))+'">\n                        <div class="pstory-block-content perso-double-box-text">\n                            '+(null!=(o=i(null!=(o=null!=t?t["box-label2"]:t)?o.text:o,t))?o:"")+"\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n"},2:function(e,t,s,o,n){var r,i=e.lambda,a=e.escapeExpression;return'                        <img class="perso-icon-box perso-asset-loading"\n                             src="'+(null!=(r=i(null!=(r=null!=t?t["box-icon1"]:t)?r.baseUrl:r,t))?r:"")+"/"+(null!=(r=i(null!=(r=null!=t?t["box-icon1"]:t)?r.assetDirectory:r,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||s.helperMissing).call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t["box-icon1"]:t)?r.url:r,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=i(null!=(r=null!=t?t["box-icon1"]:t)?r.extension:r,t))?r:"")+'"\n                             title="'+a(i(null!=(r=null!=t?t["box-icon1"]:t)?r.alt:r,t))+'" data-block-id="'+(null!=(r=i(null!=(r=null!=t?t["box-icon1"]:t)?r.blockId:r,t))?r:"")+'"\n                             alt="'+a(i(null!=(r=null!=t?t["box-icon1"]:t)?r.alt:r,t))+'"/>\n'},4:function(e,t,s,o,n){return"perso-double-box-value-date"},6:function(e,t,s,o,n){var r,i=e.lambda,a=e.escapeExpression;return'                        <img class="perso-icon-box perso-asset-loading"\n                             src="'+(null!=(r=i(null!=(r=null!=t?t["box-icon2"]:t)?r.baseUrl:r,t))?r:"")+"/"+(null!=(r=i(null!=(r=null!=t?t["box-icon2"]:t)?r.assetDirectory:r,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||s.helperMissing).call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t["box-icon2"]:t)?r.url:r,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=i(null!=(r=null!=t?t["box-icon2"]:t)?r.extension:r,t))?r:"")+'"\n                             title="'+a(i(null!=(r=null!=t?t["box-icon2"]:t)?r.alt:r,t))+'" data-block-id="'+(null!=(r=i(null!=(r=null!=t?t["box-icon2"]:t)?r.blockId:r,t))?r:"")+'"\n                             alt="'+a(i(null!=(r=null!=t?t["box-icon2"]:t)?r.alt:r,t))+'" />\n'},8:function(e,t,s,o,n){return" perso-double-box-value-date "},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.doubleBox2=e.template({1:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=e.lambda;return'    <div class="perso-teaser-template-inner">\n'+(null!=(o=e.invokePartial(o.teaserHeader2,t,{name:"teaserHeader2",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'\n    <div class="pstory-block-hbox-columns-frame teaser-body perso-double-box-2" aria-hidden="true">\n        <div class="pstory-hbox-column-frame" data-width="6">\n\n            <div class="pstory-hbox-column-frame perso-double-box perso-double-box-left" data-v-align="middle" data-width="12">\n                <div class="perso-double-box-container">\n                    <div class="perso-icon-box perso-left-icon"></div>\n                    <div class="pstory-block-frame pstory-block-text">\n                        <div class="pstory-block-content perso-double-box-value '+(null!=(o=s.if.call(r,null!=(o=null!=t?t["box-value1"]:t)?o.isDate:o,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?o:"")+'">\n                            '+(null!=(o=i(null!=(o=null!=t?t["box-value1"]:t)?o.text:o,t))?o:"")+'\n                        </div>\n                    </div>\n                    <div class="pstory-block-frame pstory-block-text">\n                        <div class="pstory-block-content perso-double-box-text">\n                            '+(null!=(o=i(null!=(o=null!=t?t["box-label1"]:t)?o.text:o,t))?o:"")+'\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n        <div class="pstory-hbox-column-frame" data-width="6">\n\n            <div class="pstory-hbox-column-frame perso-double-box perso-double-box-right" data-v-align="middle" data-width="12">\n                <div class="perso-double-box-container">\n                    <div class="perso-icon-box perso-right-icon"></div>\n                    <div class="pstory-block-frame pstory-block-text">\n                        <div class="pstory-block-content perso-double-box-value '+(null!=(o=s.if.call(r,null!=(o=null!=t?t["box-value2"]:t)?o.isDate:o,{name:"if",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?o:"")+'">\n                            '+(null!=(o=i(null!=(o=null!=t?t["box-value2"]:t)?o.text:o,t))?o:"")+'\n                        </div>\n                    </div>\n                    <div class="pstory-block-frame pstory-block-text">\n                        <div class="pstory-block-content perso-double-box-text">\n                            '+(null!=(o=i(null!=(o=null!=t?t["box-label2"]:t)?o.text:o,t))?o:"")+"\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n  </div>\n"},2:function(e,t,s,o,n){return"perso-double-box-value-date"},4:function(e,t,s,o,n){return" perso-double-box-value-date "},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial2,t,{name:"teaserWrapperPartial2",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.doubleBoxWithIcons=e.template({1:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=e.lambda,a=e.escapeExpression;return(null!=(o=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'\n    <div class="pstory-block-hbox-columns-frame teaser-body perso-double-box perso-double-box-with-icons" aria-hidden="true">\n        <div class="pstory-hbox-column-frame" data-width="6">\n\n            <div class="pstory-hbox-column-frame perso-double-box perso-double-box-left" data-width="12">\n                <div class="perso-double-box-container">\n'+(null!=(o=s.if.call(r,null!=(o=null!=t?t["box-icon1"]:t)?o.url:o,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?o:"")+'                    <div class="pstory-block-frame pstory-block-text" data-perso-block-id="'+a(i(null!=(o=null!=t?t["box-value1"]:t)?o.blockId:o,t))+'">\n                        <div class="pstory-block-content perso-double-box-value '+(null!=(o=s.if.call(r,null!=(o=null!=t?t["box-value1"]:t)?o.isDate:o,{name:"if",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?o:"")+'">\n                            '+(null!=(o=i(null!=(o=null!=t?t["box-value1"]:t)?o.text:o,t))?o:"")+'\n                        </div>\n                    </div>\n                    <div class="pstory-block-frame pstory-block-text" data-perso-block-id="'+a(i(null!=(o=null!=t?t["box-label1"]:t)?o.blockId:o,t))+'">\n                        <div class="pstory-block-content perso-double-box-text">\n                            '+(null!=(o=i(null!=(o=null!=t?t["box-label1"]:t)?o.text:o,t))?o:"")+'\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n        <div class="pstory-hbox-column-frame" data-width="6">\n\n            <div class="pstory-hbox-column-frame perso-double-box perso-double-box-right"  data-width="12">\n                <div class="perso-double-box-container">\n'+(null!=(o=s.if.call(r,null!=(o=null!=t?t["box-icon2"]:t)?o.url:o,{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?o:"")+'                    <div class="pstory-block-frame pstory-block-text" data-perso-block-id="'+a(i(null!=(o=null!=t?t["box-value2"]:t)?o.blockId:o,t))+'">\n                        <div class="pstory-block-content perso-double-box-value '+(null!=(o=s.if.call(r,null!=(o=null!=t?t["box-value2"]:t)?o.isDate:o,{name:"if",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?o:"")+'">\n                            '+(null!=(o=i(null!=(o=null!=t?t["box-value2"]:t)?o.text:o,t))?o:"")+'\n                        </div>\n                    </div>\n                    <div class="pstory-block-frame pstory-block-text" data-perso-block-id="'+a(i(null!=(o=null!=t?t["box-label2"]:t)?o.blockId:o,t))+'">\n                        <div class="pstory-block-content perso-double-box-text">\n                            '+(null!=(o=i(null!=(o=null!=t?t["box-label2"]:t)?o.text:o,t))?o:"")+"\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n"},2:function(e,t,s,o,n){var r,i=e.lambda,a=e.escapeExpression;return'                        <img class="perso-icon-box perso-asset-loading"\n                             src="'+(null!=(r=i(null!=(r=null!=t?t["box-icon1"]:t)?r.baseUrl:r,t))?r:"")+"/"+(null!=(r=i(null!=(r=null!=t?t["box-icon1"]:t)?r.assetDirectory:r,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||s.helperMissing).call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t["box-icon1"]:t)?r.url:r,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=i(null!=(r=null!=t?t["box-icon1"]:t)?r.extension:r,t))?r:"")+'"\n                             title="'+a(i(null!=(r=null!=t?t["box-icon1"]:t)?r.alt:r,t))+'" data-block-id="'+(null!=(r=i(null!=(r=null!=t?t["box-icon1"]:t)?r.blockId:r,t))?r:"")+'"\n                             alt="'+a(i(null!=(r=null!=t?t["box-icon1"]:t)?r.alt:r,t))+'"/>\n'},4:function(e,t,s,o,n){return"perso-double-box-value-date"},6:function(e,t,s,o,n){var r,i=e.lambda,a=e.escapeExpression;return'                        <img class="perso-icon-box perso-asset-loading"\n                             src="'+(null!=(r=i(null!=(r=null!=t?t["box-icon2"]:t)?r.baseUrl:r,t))?r:"")+"/"+(null!=(r=i(null!=(r=null!=t?t["box-icon2"]:t)?r.assetDirectory:r,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||s.helperMissing).call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t["box-icon2"]:t)?r.url:r,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=i(null!=(r=null!=t?t["box-icon2"]:t)?r.extension:r,t))?r:"")+'"\n                             title="'+a(i(null!=(r=null!=t?t["box-icon2"]:t)?r.alt:r,t))+'" data-block-id="'+(null!=(r=i(null!=(r=null!=t?t["box-icon2"]:t)?r.blockId:r,t))?r:"")+'"\n                             alt="'+a(i(null!=(r=null!=t?t["box-icon2"]:t)?r.alt:r,t))+'" />\n'},8:function(e,t,s,o,n){return" perso-double-box-value-date "},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.entitySelector=e.template({1:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'    <div class="perso-entity-selector-template '+(null!=(r=s.unless.call(i,null!=(r=null!=t?t["entity-selector1"]:t)?r.options:r,{name:"unless",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?r:"")+'">\n'+(null!=(r=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"        ",helpers:s,partials:o,decorators:e.decorators}))?r:"")+(null!=(r=s.if.call(i,null!=t?t["entity-selector1"]:t,{name:"if",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?r:"")+(null!=(r=s.if.call(i,null!=t?t.buttons:t,{name:"if",hash:{},fn:e.program(7,n,0),inverse:e.noop,data:n}))?r:"")+"  </div>\n"},2:function(e,t,s,o,n){return"perso-empty-entity-selector"},4:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=e.escapeExpression;return'            <div class="teaser-body perso-entity-container" id="'+a("function"==typeof(r=null!=(r=s.insightId||(null!=t?t.insightId:t))?r:s.helperMissing)?r.call(i,{name:"insightId",hash:{},data:n}):r)+"_"+a(e.lambda(null!=(r=null!=t?t["entity-selector1"]:t)?r.blockId:r,t))+'">\n'+(null!=(r=s.each.call(i,null!=(r=null!=t?t["entity-selector1"]:t)?r.displayedOptions:r,{name:"each",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?r:"")+"            </div>\n"},5:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function",p=e.escapeExpression,e=e.lambda;return'                    <li class="perso-item perso-entity-selector-item perso-accessibility-item" role="button" aria-label="'+p(_typeof(i=null!=(i=s.text||(null!=t?t.text:t))?i:l)===c?i.call(a,{name:"text",hash:{},data:n}):i)+", "+p(_typeof(i=null!=(i=s.text2||(null!=t?t.text2:t))?i:l)===c?i.call(a,{name:"text2",hash:{},data:n}):i)+'">\n                        <div class="perso-entity-wrapper">\n                            <div class="perso-entity pstory-button" action-id="'+p(_typeof(i=null!=(i=s.action||(null!=t?t.action:t))?i:l)===c?i.call(a,{name:"action",hash:{},data:n}):i)+'" pstory-id="'+p(_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)+'" >\n                                <img class="entity-img perso-asset-loading" src="'+(null!=(r=e((r=(r=n&&n.root)&&r["entity-selector1"])&&r.baseUrl,t))?r:"")+"/"+(null!=(r=e((r=(r=n&&n.root)&&r["entity-selector1"])&&r.assetDirectory,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||l).call(a,null!=t?t.icon:t,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=e((r=(r=n&&n.root)&&r["entity-selector1"])&&r.extension,t))?r:"")+'">\n                            </div>\n                        </div>\n\n                        <div class="perso-entity-details">\n                            <div class="entity-text">'+(null!=(r=_typeof(i=null!=(i=s.text||(null!=t?t.text:t))?i:l)===c?i.call(a,{name:"text",hash:{},data:n}):i)?r:"")+'</div>\n                            <div class="entity-text2">'+p(_typeof(i=null!=(i=s.text2||(null!=t?t.text2:t))?i:l)===c?i.call(a,{name:"text2",hash:{},data:n}):i)+"</div>\n                        </div>\n                    </li>\n"},7:function(e,t,s,o,n){var r,i=e.lambda,a=e.escapeExpression;return'            <div id="pstory-block-buttons_'+a(i(null!=(r=null!=t?t.buttons:t)?r.blockId:r,t))+'" data-perso-block-id="'+a(i(null!=(r=null!=t?t.buttons:t)?r.blockId:r,t))+'" class="pstory-block-frame pstory-block-buttons">\n                <div class="pstory-block-content">\n'+(null!=(r=s.each.call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t.buttons:t)?r.options:r,{name:"each",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?r:"")+"                </div>\n            </div>\n"},8:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.active:t,{name:"if",hash:{},fn:e.program(9,n,0),inverse:e.noop,data:n}))?s:""},9:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'                            <a id="'+e(_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)===l?r.call(i,{name:"id",hash:{},data:n}):r)+'"\n                               class="pstory-link-navigateTo perso-button-animation pstory-button perso-ripple-closed perso-accessibility-item"\n                               action-id="'+e(_typeof(r=null!=(r=s.action||(null!=t?t.action:t))?r:a)===l?r.call(i,{name:"action",hash:{},data:n}):r)+'" pnavigate-id="'+e(_typeof(r=null!=(r=s.navigateTarget||(null!=t?t.navigateTarget:t))?r:a)===l?r.call(i,{name:"navigateTarget",hash:{},data:n}):r)+'" role="button">'+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)===l?r.call(i,{name:"text",hash:{},data:n}):r)?e:"")+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartialNoButtons,t,{name:"teaserWrapperPartialNoButtons",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.feedbackChosenAnswer=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="perso-feedback-chosen-answer-container">\n    <div class="perso-feedback-chosen-answer-bubble">\n        <button class="perso-feedback-cancel-chosen-answer perso-accessibility-item" role="button"></button>\n        <div class="perso-feedback-chosen-answer perso-accessibility-item" role="text"></div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates.feedbackTransaction=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=e.lambda,a=e.escapeExpression;return'<div class="perso-feedback-transaction perso-bubble perso-bottom-bubble perso-accessibility-item" data-perso-block-id="'+a(i(null!=(r=null!=t?t.transactionDisplay:t)?r.blockId:r,t))+'" role="text">\n    <img class="perso-transaction-icon perso-asset-loading" data-block-id="'+a(i(null!=(r=null!=t?t.transactionDisplay:t)?r.blockId:r,t))+'" src="'+(null!=(r=i(null!=(r=null!=t?t.transactionDisplay:t)?r.baseUrl:r,t))?r:"")+"/"+(null!=(r=i(null!=(r=null!=t?t.transactionDisplay:t)?r.assetDirectory:r,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||s.helperMissing).call(null!=t?t:e.nullContext||{},null!=(r=null!=(r=null!=t?t.transactionDisplay:t)?r.transactionData:r)?r.category:r,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=i(null!=(r=null!=t?t.transactionDisplay:t)?r.extension:r,t))?r:"")+'" />\n    <div class="perso-transaction-info">\n        <div class="perso-transaction-date">'+(null!=(r=i(null!=(r=null!=(r=null!=t?t.transactionDisplay:t)?r.transactionData:r)?r.date:r,t))?r:"")+'</div>\n        <div class="perso-transaction-amount" role="text">'+(null!=(r=i(null!=(r=null!=(r=null!=t?t.transactionDisplay:t)?r.transactionData:r)?r.amount:r,t))?r:"")+'</div>\n        <div class="perso-transaction-description" role="text">'+(null!=(r=i(null!=(r=null!=(r=null!=t?t.transactionDisplay:t)?r.transactionData:r)?r.description:r,t))?r:"")+"</div>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates.horizontalBar=e.template({1:function(e,t,s,o,n){var r,i=e.lambda,a=e.escapeExpression;return(null!=(o=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'\n    <div class="pstory-block-hbox-columns-frame teaser-body" data-perso-block-id="'+a(i(null!=(o=null!=t?t.chart:t)?o.blockId:o,t))+'" aria-hidden="true">\n        <div class="pstory-hbox-column-frame" data-width="12" id="'+a("function"==typeof(r=null!=(r=s.insightId||(null!=t?t.insightId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"insightId",hash:{},data:n}):r)+"_"+a(i(null!=(o=null!=t?t.chart:t)?o.blockId:o,t))+'"></div>\n    </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.horizontalBarAndBox=e.template({1:function(e,t,s,o,n){var r,i=e.lambda,a=e.escapeExpression;return(null!=(o=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'\n    <div class="pstory-block-hbox-columns-frame teaser-body" aria-hidden="true">\n        <div class="pstory-hbox-column-frame" data-width="8" data-perso-block-id="'+a(i(null!=(o=null!=t?t.chart:t)?o.blockId:o,t))+'">\n            <div id="'+a("function"==typeof(r=null!=(r=s.insightId||(null!=t?t.insightId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"insightId",hash:{},data:n}):r)+"_"+a(i(null!=(o=null!=t?t.chart:t)?o.blockId:o,t))+'"></div>\n        </div>\n\n        <div class="pstory-hbox-column-frame perso-left-separator" data-width="4" data-v-align="middle">\n            <div class="pstory-block-hbox-columns-frame">\n                <div class="pstory-block-frame pstory-block-text" data-perso-block-id="'+a(i(null!=(o=null!=t?t["box-label"]:t)?o.blockId:o,t))+'">\n                    <div class="pstory-block-content">\n                        '+(null!=(o=i(null!=(o=null!=t?t["box-label"]:t)?o.text:o,t))?o:"")+'\n                    </div>\n                </div>\n                <div class="pstory-block-frame pstory-block-text perso-percent-small" data-perso-block-id="'+a(i(null!=(o=null!=t?t["box-value"]:t)?o.blockId:o,t))+'">\n                    <div class="pstory-block-content">\n                            '+(null!=(o=i(null!=(o=null!=t?t["box-value"]:t)?o.text:o,t))?o:"")+"\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.image=e.template({1:function(e,t,s,o,n){var r=e.lambda,i=e.escapeExpression;return(null!=(o=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'    <div class="teaser-body" aria-hidden="true" data-perso-block-id="'+i(r(null!=(o=null!=t?t["main-image"]:t)?o.blockId:o,t))+'">\n        <div class="perso-asset-large-loader"></div>\n        <img class="perso-image"\n'+(null!=(o=s.if.call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t["main-image"]:t)?o.isAbsoluteURL:o,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.program(4,n,0),data:n}))?o:"")+'             title="'+i(r(null!=(o=null!=t?t["main-image"]:t)?o.alt:o,t))+'" data-block-id="'+i(r(null!=(o=null!=t?t["main-image"]:t)?o.blockId:o,t))+'"\n             alt="'+i(r(null!=(o=null!=t?t["main-image"]:t)?o.alt:o,t))+'"/>\n    </div>\n'},2:function(e,t,s,o,n){return'             src="'+(null!=(e=e.lambda(null!=(e=null!=t?t["main-image"]:t)?e.url:e,t))?e:"")+'"\n'},4:function(e,t,s,o,n){var r,i=e.lambda;return'             src="'+(null!=(r=i(null!=(r=null!=t?t["main-image"]:t)?r.baseUrl:r,t))?r:"")+"/"+(null!=(r=i(null!=(r=null!=t?t["main-image"]:t)?r.assetDirectory:r,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||s.helperMissing).call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t["main-image"]:t)?r.url:r,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=i(null!=(r=null!=t?t["main-image"]:t)?r.extension:r,t))?r:"")+'"\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.imageAndBox=e.template({1:function(e,t,s,o,n){var r=e.lambda,i=e.escapeExpression;return(null!=(o=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'\n    <div class="pstory-block-hbox-columns-frame teaser-body" aria-hidden="true">\n        <div class="pstory-hbox-column-frame" data-width="6" data-perso-block-id="'+i(r(null!=(o=null!=t?t["main-image"]:t)?o.blockId:o,t))+'">\n            <img class="perso-image"\n'+(null!=(o=s.if.call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t["main-image"]:t)?o.isAbsoluteURL:o,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.program(4,n,0),data:n}))?o:"")+'                 title="'+i(r(null!=(o=null!=t?t["main-image"]:t)?o.alt:o,t))+'" data-block-id="'+i(r(null!=(o=null!=t?t["main-image"]:t)?o.blockId:o,t))+'"\n                 alt="'+i(r(null!=(o=null!=t?t["main-image"]:t)?o.alt:o,t))+'" style="max-height: 100%; max-width: 100%" />\n        </div>\n        <div class="pstory-hbox-column-frame" data-v-align="middle" data-width="6">\n\n            <div class="pstory-block-hbox-columns-frame">\n\n                <div class="pstory-block-frame pstory-block-text" data-perso-block-id="'+i(r(null!=(o=null!=t?t["box-label"]:t)?o.blockId:o,t))+'">\n                    <div class="pstory-block-content">\n                        '+(null!=(o=r(null!=(o=null!=t?t["box-label"]:t)?o.text:o,t))?o:"")+'\n                    </div>\n                </div>\n                <div class="pstory-block-frame pstory-block-text perso-percent-large" data-perso-block-id="'+i(r(null!=(o=null!=t?t["box-value"]:t)?o.blockId:o,t))+'">\n                    <div class="pstory-block-content">\n                        '+(null!=(o=r(null!=(o=null!=t?t["box-value"]:t)?o.text:o,t))?o:"")+"\n                    </div>\n                </div>\n\n            </div>\n        </div>\n    </div>\n"},2:function(e,t,s,o,n){return'                 src="'+(null!=(e=e.lambda(null!=(e=null!=t?t["main-image"]:t)?e.url:e,t))?e:"")+'"\n'},4:function(e,t,s,o,n){var r,i=e.lambda;return'                 src="'+(null!=(r=i(null!=(r=null!=t?t["main-image"]:t)?r.baseUrl:r,t))?r:"")+"/"+(null!=(r=i(null!=(r=null!=t?t["main-image"]:t)?r.assetDirectory:r,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||s.helperMissing).call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t["main-image"]:t)?r.url:r,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=i(null!=(r=null!=t?t["main-image"]:t)?r.extension:r,t))?r:"")+'"\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.imageAndText=e.template({1:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=e.escapeExpression,l=e.lambda;return'    <div class="perso-image-and-text-template perso-'+a("function"==typeof(r=null!=(r=s.teaserDirection||(null!=t?t.teaserDirection:t))?r:s.helperMissing)?r.call(i,{name:"teaserDirection",hash:{},data:n}):r)+(null!=(r=s.if.call(i,null!=(r=null!=t?t["main-icon"]:t)?r.hideImage:r,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?r:"")+'">\n        <div class="perso-col perso-text-section">\n'+(null!=(r=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"            ",helpers:s,partials:o,decorators:e.decorators}))?r:"")+'            <div id="pstory-block-buttons_'+a(l(null!=(r=null!=t?t.buttons:t)?r.blockId:r,t))+'" data-perso-block-id="'+a(l(null!=(r=null!=t?t.buttons:t)?r.blockId:r,t))+'" class="pstory-block-frame pstory-block-buttons">\n                <div class="pstory-block-content">\n'+(null!=(r=s.each.call(i,null!=(r=null!=t?t.buttons:t)?r.options:r,{name:"each",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?r:"")+"                </div>\n            </div>\n        </div>\n"+(null!=(r=s.unless.call(i,null!=(r=null!=t?t["main-icon"]:t)?r.hideImage:r,{name:"unless",hash:{},fn:e.program(7,n,0),inverse:e.noop,data:n}))?r:"")+"    </div>\n"},2:function(e,t,s,o,n){return" perso-no-image"},4:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.active:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?s:""},5:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'                            <a id="'+e(_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)===l?r.call(i,{name:"id",hash:{},data:n}):r)+'"\n                               class="pstory-link-navigateTo perso-button-animation pstory-button perso-ripple-closed perso-accessibility-item"\n                               action-id="'+e(_typeof(r=null!=(r=s.action||(null!=t?t.action:t))?r:a)===l?r.call(i,{name:"action",hash:{},data:n}):r)+'" pnavigate-id="'+e(_typeof(r=null!=(r=s.navigateTarget||(null!=t?t.navigateTarget:t))?r:a)===l?r.call(i,{name:"navigateTarget",hash:{},data:n}):r)+'">'+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)===l?r.call(i,{name:"text",hash:{},data:n}):r)?e:"")+"</a>\n"},7:function(e,t,s,o,n){var r,i=e.lambda,a=e.escapeExpression;return'            <div class="perso-col perso-image-section">\n                <div class="teaser-body" aria-hidden="true" data-perso-block-id="'+a(i(null!=(r=null!=t?t["main-icon"]:t)?r.blockId:r,t))+'">\n                    <div class="perso-asset-large-loader"></div>\n                    <img class="perso-image"\n'+(null!=(r=s.if.call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t["main-icon"]:t)?r.isAbsoluteURL:r,{name:"if",hash:{},fn:e.program(8,n,0),inverse:e.program(10,n,0),data:n}))?r:"")+'                         title="'+a(i(null!=(r=null!=t?t["main-icon"]:t)?r.alt:r,t))+'" data-block-id="'+a(i(null!=(r=null!=t?t["main-icon"]:t)?r.blockId:r,t))+'"\n                         alt="'+a(i(null!=(r=null!=t?t["main-icon"]:t)?r.alt:r,t))+'"/>\n                </div>\n            </div>\n'},8:function(e,t,s,o,n){return'                         src="'+(null!=(e=e.lambda(null!=(e=null!=t?t["main-icon"]:t)?e.url:e,t))?e:"")+'"\n'},10:function(e,t,s,o,n){var r,i=e.lambda;return'                         src="'+(null!=(r=i(null!=(r=null!=t?t["main-icon"]:t)?r.baseUrl:r,t))?r:"")+"/"+(null!=(r=i(null!=(r=null!=t?t["main-icon"]:t)?r.assetDirectory:r,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||s.helperMissing).call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t["main-icon"]:t)?r.url:r,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=i(null!=(r=null!=t?t["main-icon"]:t)?r.extension:r,t))?r:"")+'"\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartialNoButtons,t,{name:"teaserWrapperPartialNoButtons",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.lineChart=e.template({1:function(e,t,s,o,n){var r,i=e.lambda,a=e.escapeExpression;return(null!=(o=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'\n    <div class="pstory-block-hbox-columns-frame teaser-body" aria-hidden="true" data-perso-block-id="'+a(i(null!=(o=null!=t?t.chart:t)?o.blockId:o,t))+'">\n        <div class="pstory-hbox-column-frame" data-width="12" id="'+a("function"==typeof(r=null!=(r=s.insightId||(null!=t?t.insightId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"insightId",hash:{},data:n}):r)+"_"+a(i(null!=(o=null!=t?t.chart:t)?o.blockId:o,t))+'"></div>\n    </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.pie=e.template({1:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing,a="function",l=e.escapeExpression,c=e.lambda;return(null!=(o=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'\n    <div class="pstory-block-hbox-columns-frame teaser-body" aria-hidden="true">\n        <div class="pstory-hbox-column-frame" data-width="4">\n            <div id="'+l(_typeof(e=null!=(e=s.insightId||(null!=t?t.insightId:t))?e:i)===a?e.call(r,{name:"insightId",hash:{},data:n}):e)+"_"+l(c(null!=(o=null!=t?t.chart1:t)?o.blockId:o,t))+'" data-perso-block-id="'+l(c(null!=(o=null!=t?t.chart1:t)?o.blockId:o,t))+'"></div>\n\n            <div class="pstory-block-frame pstory-block-text perso-pie-text perso-block-title" data-perso-block-id="'+l(c(null!=(o=null!=t?t.label1:t)?o.blockId:o,t))+'">\n                <div class="pstory-block-content">\n                    '+(null!=(o=c(null!=(o=null!=t?t.label1:t)?o.text:o,t))?o:"")+'\n                </div>\n            </div>\n\n        </div>\n        <div class="pstory-hbox-column-frame" data-width="4">\n            <div id="'+l(_typeof(e=null!=(e=s.insightId||(null!=t?t.insightId:t))?e:i)===a?e.call(r,{name:"insightId",hash:{},data:n}):e)+"_"+l(c(null!=(o=null!=t?t.chart2:t)?o.blockId:o,t))+'" data-perso-block-id="'+l(c(null!=(o=null!=t?t.chart2:t)?o.blockId:o,t))+'"></div>\n\n            <div class="pstory-block-frame pstory-block-text perso-pie-text perso-block-title" data-perso-block-id="'+l(c(null!=(o=null!=t?t.label2:t)?o.blockId:o,t))+'">\n                <div class="pstory-block-content">\n                    '+(null!=(o=c(null!=(o=null!=t?t.label2:t)?o.text:o,t))?o:"")+'\n                </div>\n            </div>\n        </div>\n        <div class="pstory-hbox-column-frame" data-width="4">\n            <div id="'+l(_typeof(e=null!=(e=s.insightId||(null!=t?t.insightId:t))?e:i)===a?e.call(r,{name:"insightId",hash:{},data:n}):e)+"_"+l(c(null!=(o=null!=t?t.chart3:t)?o.blockId:o,t))+'" data-perso-block-id="'+l(c(null!=(o=null!=t?t.chart3:t)?o.blockId:o,t))+'"></div>\n\n            <div class="pstory-block-frame pstory-block-text perso-pie-text perso-block-title"  data-perso-block-id="'+l(c(null!=(o=null!=t?t.label3:t)?o.blockId:o,t))+'">\n                <div class="pstory-block-content">\n                    '+(null!=(o=c(null!=(o=null!=t?t.label3:t)?o.text:o,t))?o:"")+"\n                </div>\n            </div>\n        </div>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.pinChart=e.template({1:function(e,t,s,o,n){var r,i=e.escapeExpression,a=e.lambda;return(null!=(o=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'\n    <div class="teaser-body" id="'+i("function"==typeof(r=null!=(r=s.insightId||(null!=t?t.insightId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"insightId",hash:{},data:n}):r)+"_"+i(a(null!=(o=null!=t?t.chart:t)?o.blockId:o,t))+'"  aria-hidden="true" data-perso-block-id="'+i(a(null!=(o=null!=t?t.chart:t)?o.blockId:o,t))+'"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.simpleText=e.template({1:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?t:""},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.teaserHeader=e.template({1:function(e,t,s,o,n){return"not "},3:function(e,t,s,o,n){return"perso-config-teaser"},5:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=(s=null!=t?t["config-buttons"]:t)?s.options:s,{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?s:""},6:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=(s=null!=(s=null!=(s=null!=t?t["config-buttons"]:t)?s.options:s)?s[0]:s)?s.active:s,{name:"if",hash:{},fn:e.program(7,n,0),inverse:e.noop,data:n}))?s:""},7:function(e,t,s,o,n){return'                <div class="pstory-block-content">\n                    <div class="perso-teaser-config-buttons pstory-button perso-accessibility-item" role="button" action-id="'+e.escapeExpression(e.lambda(null!=(e=null!=(e=null!=(e=null!=t?t["config-buttons"]:t)?e.options:e)?e[0]:e)?e.action:e,t))+'"></div>\n                </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=e.lambda,l=e.escapeExpression,c=null!=t?t:e.nullContext||{};return'<div class="perso-teaser-header" role="button" aria-label="'+l(a(null!=(r=null!=t?t.date:t)?r.month:r,t))+" "+l(a(null!=(r=null!=t?t.date:t)?r.day:r,t))+", "+l("function"==typeof(i=null!=(i=s.status||(null!=t?t.status:t))?i:s.helperMissing)?i.call(c,{name:"status",hash:{},data:n}):i)+". "+(null!=(r=s.unless.call(c,null!=t?t.highlighted:t,{name:"unless",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+"highlighted. "+l(a(null!=(r=null!=t?t.title:t)?r.text:r,t))+". "+l(a(null!=(r=null!=t?t["teaser-text"]:t)?r.text:r,t))+'">\n    <div class="perso-teaser-top">\n        <div class="pstory-block-frame pstory-block-date-box" data-perso-block-id="'+l(a(null!=(r=null!=t?t.date:t)?r.blockId:r,t))+'">\n            <div class="pstory-block-content">\n                <div class="perso-teaser-date pstory-block-date-month">'+l(a(null!=(r=null!=t?t.date:t)?r.month:r,t))+'</div>\n                <div class="perso-teaser-date pstory-block-date-day">'+l(a(null!=(r=null!=t?t.date:t)?r.day:r,t))+'</div>\n            </div>\n        </div>\n        <div class="pstory-block-frame pstory-block-text perso-insight-title-text perso-block-title" data-perso-block-id="'+l(a(null!=(r=null!=t?t.title:t)?r.blockId:r,t))+'">\n            <div class="pstory-block-content">\n                '+(null!=(r=a(null!=(r=null!=t?t.title:t)?r.text:r,t))?r:"")+'\n            </div>\n        </div>\n    </div>\n\n    <div class="pstory-block-frame pstory-block-text perso-teaser-text" data-perso-block-id="'+l(a(null!=(r=null!=t?t["teaser-text"]:t)?r.blockId:r,t))+'">\n        <div class="pstory-block-content">\n           '+(null!=(r=a(null!=(r=null!=t?t["teaser-text"]:t)?r.text:r,t))?r:"")+'\n        </div>\n    </div>\n</div>\n<div class="'+(null!=(r=s.if.call(c,null!=t?t["config-buttons"]:t,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+'">\n'+(null!=(r=s.if.call(c,null!=t?t["config-buttons"]:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?r:"")+"</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates.teaserHeader2=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,e=e.lambda;return'<div class="perso-teaser-header perso-teaser-header-2" aria-hidden="true">\n    <div class="perso-teaser-top">\n        <div class="pstory-block-frame pstory-block-text perso-insight-title-text perso-block-title">\n            <div class="pstory-block-content">\n                '+(null!=(r=e(null!=(r=null!=t?t.title:t)?r.text:r,t))?r:"")+'\n            </div>\n        </div>\n    </div>\n\n    <div class="pstory-block-frame pstory-block-text perso-teaser-text">\n        <div class="pstory-block-content">\n           '+(null!=(r=e(null!=(r=null!=t?t["teaser-text"]:t)?r.text:r,t))?r:"")+"\n        </div>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates.teaserWrapperPartial=e.template({1:function(e,t,s,o,n){return"perso-highlighted"},3:function(e,t,s,o,n){var r,i=e.lambda,a=e.escapeExpression;return'            <div id="pstory-block-buttons_'+a(i(null!=(r=null!=t?t.buttons:t)?r.blockId:r,t))+'" data-perso-block-id="'+a(i(null!=(r=null!=t?t.buttons:t)?r.blockId:r,t))+'" class="pstory-block-frame pstory-block-buttons">\n                <div class="pstory-block-content">\n'+(null!=(r=s.each.call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t.buttons:t)?r.options:r,{name:"each",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?r:"")+"                </div>\n            </div>\n"},4:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.active:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?s:""},5:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'                            <a id="'+e(_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)===l?r.call(i,{name:"id",hash:{},data:n}):r)+'"\n                           class="pstory-link-navigateTo perso-button-animation pstory-button perso-ripple-closed perso-accessibility-item"\n                           action-id="'+e(_typeof(r=null!=(r=s.action||(null!=t?t.action:t))?r:a)===l?r.call(i,{name:"action",hash:{},data:n}):r)+'" pnavigate-id="'+e(_typeof(r=null!=(r=s.navigateTarget||(null!=t?t.navigateTarget:t))?r:a)===l?r.call(i,{name:"navigateTarget",hash:{},data:n}):r)+'">'+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)===l?r.call(i,{name:"text",hash:{},data:n}):r)?e:"")+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function",p=e.escapeExpression;return'<div class="perso-teaser-template perso-teaser-template-bar-box perso-'+p(_typeof(i=null!=(i=s.status||(null!=t?t.status:t))?i:l)===c?i.call(a,{name:"status",hash:{},data:n}):i)+"  "+(null!=(r=s.if.call(a,null!=t?t.highlighted:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'" id="perso-teaser-template_'+p(_typeof(i=null!=(i=s.insightId||(null!=t?t.insightId:t))?i:l)===c?i.call(a,{name:"insightId",hash:{},data:n}):i)+'" data-id="'+p(_typeof(i=null!=(i=s.insightId||(null!=t?t.insightId:t))?i:l)===c?i.call(a,{name:"insightId",hash:{},data:n}):i)+'">\n    <div class="perso-teaser-template-inner" >\n'+(null!=(r=e.invokePartial(o["@partial-block"],t,{name:"@partial-block",data:n,indent:"        ",helpers:s,partials:o,decorators:e.decorators}))?r:"")+(null!=(r=s.if.call(a,null!=(r=null!=t?t.buttons:t)?r.options:r,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+"    </div>\n</div>\n"},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.teaserWrapperPartial2=e.template({1:function(e,t,s,o,n){return"perso-highlighted"},3:function(e,t,s,o,n){return"not "},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function",p=e.escapeExpression,d=e.lambda;return'<div class="perso-teaser-template perso-teaser-template2 perso-teaser-template-bar-box perso-'+p(_typeof(i=null!=(i=s.status||(null!=t?t.status:t))?i:l)===c?i.call(a,{name:"status",hash:{},data:n}):i)+"  "+(null!=(r=s.if.call(a,null!=t?t.highlighted:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'" id="perso-teaser-template_'+p(_typeof(i=null!=(i=s.insightId||(null!=t?t.insightId:t))?i:l)===c?i.call(a,{name:"insightId",hash:{},data:n}):i)+'" data-id="'+p(_typeof(i=null!=(i=s.insightId||(null!=t?t.insightId:t))?i:l)===c?i.call(a,{name:"insightId",hash:{},data:n}):i)+'"\n role="button" aria-label="'+p(d(null!=(r=null!=t?t.date:t)?r.month:r,t))+" "+p(d(null!=(r=null!=t?t.date:t)?r.day:r,t))+". "+p(d(null!=(r=null!=t?t.title:t)?r.text:r,t))+". "+p(_typeof(i=null!=(i=s.status||(null!=t?t.status:t))?i:l)===c?i.call(a,{name:"status",hash:{},data:n}):i)+". "+(null!=(r=s.unless.call(a,null!=t?t.highlighted:t,{name:"unless",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+"highlighted. "+(null!=(r=d(null!=(r=null!=t?t["teaser-text"]:t)?r.text:r,t))?r:"")+'">\n'+(null!=(r=e.invokePartial(o["@partial-block"],t,{name:"@partial-block",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?r:"")+"</div>"},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.teaserWrapperPartialNoButtons=e.template({1:function(e,t,s,o,n){return"perso-highlighted"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function",p=e.escapeExpression;return'<div class="perso-teaser-template perso-teaser-template-bar-box perso-'+p(_typeof(i=null!=(i=s.status||(null!=t?t.status:t))?i:l)===c?i.call(a,{name:"status",hash:{},data:n}):i)+"  "+(null!=(r=s.if.call(a,null!=t?t.highlighted:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'" id="perso-teaser-template_'+p(_typeof(i=null!=(i=s.insightId||(null!=t?t.insightId:t))?i:l)===c?i.call(a,{name:"insightId",hash:{},data:n}):i)+'" data-id="'+p(_typeof(i=null!=(i=s.insightId||(null!=t?t.insightId:t))?i:l)===c?i.call(a,{name:"insightId",hash:{},data:n}):i)+'">\n    <div class="perso-teaser-template-inner">\n'+(null!=(r=e.invokePartial(o["@partial-block"],t,{name:"@partial-block",data:n,indent:"        ",helpers:s,partials:o,decorators:e.decorators}))?r:"")+"    </div>\n</div>\n"},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.textAndButton=e.template({1:function(e,t,s,o,n){return(null!=(t=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?t:"")+'    <div class="teaser-body" aria-hidden="true"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.transactionFeedback=e.template({1:function(e,t,s,o,n){return"perso-teaser-date-input"},3:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.isNumberInput:t,{name:"if",hash:{},fn:e.program(4,n,0),inverse:e.program(6,n,0),data:n}))?s:""},4:function(e,t,s,o,n){return"perso-teaser-number-input"},6:function(e,t,s,o,n){return"perso-teaser-transaction-feedback"},8:function(e,t,s,o,n){return"not "},10:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing,a=e.lambda,l=e.escapeExpression;return(null!=(o=e.invokePartial(o.feedbackChosenAnswer,t,{name:"feedbackChosenAnswer",data:n,indent:"                        ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'                        <div id="'+(null!=(o="function"===_typeof(e=null!=(e=s.insightId||(null!=t?t.insightId:t))?e:i)?e.call(r,{name:"insightId",hash:{},data:n}):e)?o:"")+"_"+(null!=(o=a(null!=(o=null!=t?t["date-input"]:t)?o.blockId:o,t))?o:"")+'"  class="perso-user-input-container perso-feedback-date" data-id="'+l("function"===_typeof(e=null!=(e=s.insightId||(null!=t?t.insightId:t))?e:i)?e.call(r,{name:"insightId",hash:{},data:n}):e)+'" data-perso-block-id="'+(null!=(o=a(null!=(o=null!=t?t["date-input"]:t)?o.blockId:o,t))?o:"")+'">\n                        </div>\n                        <div class="perso-feedback-thanks-text perso-bubble" role="text" data-perso-block-id="'+l(a(null!=(o=null!=t?t.thankYouText:t)?o.blockId:o,t))+'">'+(null!=(o=a(null!=(o=null!=t?t.thankYouText:t)?o.text:o,t))?o:"")+"</div>\n"},12:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.isNumberInput:t,{name:"if",hash:{},fn:e.program(13,n,0),inverse:e.program(15,n,0),data:n}))?s:""},13:function(e,t,s,o,n){var r=null!=t?t:e.nullContext||{},i=s.helperMissing,a=e.lambda,l=e.escapeExpression;return(null!=(o=e.invokePartial(o.feedbackChosenAnswer,t,{name:"feedbackChosenAnswer",data:n,indent:"                            ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'                            <div id="'+(null!=(o="function"===_typeof(e=null!=(e=s.insightId||(null!=t?t.insightId:t))?e:i)?e.call(r,{name:"insightId",hash:{},data:n}):e)?o:"")+"_"+(null!=(o=a(null!=(o=null!=t?t["number-input"]:t)?o.blockId:o,t))?o:"")+'"  class="perso-user-input-container  perso-feedback-number" data-id="'+l("function"===_typeof(e=null!=(e=s.insightId||(null!=t?t.insightId:t))?e:i)?e.call(r,{name:"insightId",hash:{},data:n}):e)+'" data-perso-block-id="'+(null!=(o=a(null!=(o=null!=t?t["number-input"]:t)?o.blockId:o,t))?o:"")+'">\n                            </div>\n                            <div class="perso-feedback-thanks-text perso-bubble" role="text" data-perso-block-id="'+l(a(null!=(o=null!=t?t.thankYouText:t)?o.blockId:o,t))+'">'+(null!=(o=a(null!=(o=null!=t?t.thankYouText:t)?o.text:o,t))?o:"")+"</div>\n"},15:function(e,t,s,o,n){var r;return(null!=(r=e.invokePartial(o.feedbackTransaction,t,{name:"feedbackTransaction",data:n,indent:"                            ",helpers:s,partials:o,decorators:e.decorators}))?r:"")+(null!=(r=e.invokePartial(o.feedbackChosenAnswer,t,{name:"feedbackChosenAnswer",data:n,indent:"                            ",helpers:s,partials:o,decorators:e.decorators}))?r:"")},17:function(e,t,s,o,n){var r,i=e.lambda;return'                <div id="'+(null!=(s="function"==typeof(r=null!=(r=s.insightId||(null!=t?t.insightId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"insightId",hash:{},data:n}):r)?s:"")+"_"+(null!=(s=i(null!=(s=null!=t?t.answersButton:t)?s.blockId:s,t))?s:"")+'" class="perso-feedback-answers-wrapper">\n                    \x3c!--Quick Reply Buttons--\x3e\n                    <div class="perso-feedback-scroll-button-left"></div>\n                    <div class="perso-feedback-scroll-button-right"></div>\n                    <div class="perso-feedback-thanks-text perso-bubble perso-top-bubble" role="text" data-perso-block-id="'+e.escapeExpression(i(null!=(s=null!=t?t.thankYouText:t)?s.blockId:s,t))+'">'+(null!=(s=i(null!=(s=null!=t?t.thankYouText:t)?s.text:s,t))?s:"")+"</div>\n                </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function",p=e.escapeExpression,d=e.lambda;return'<div class="perso-feedback-teaser perso-teaser-template '+(null!=(r=s.if.call(a,null!=t?t.isDateInput:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.program(3,n,0),data:n}))?r:"")+'" id="perso-teaser-template_'+p(_typeof(i=null!=(i=s.insightId||(null!=t?t.insightId:t))?i:l)===c?i.call(a,{name:"insightId",hash:{},data:n}):i)+'" data-id="'+p(_typeof(i=null!=(i=s.insightId||(null!=t?t.insightId:t))?i:l)===c?i.call(a,{name:"insightId",hash:{},data:n}):i)+'" pstory-id="perso-teaser-template_'+p(_typeof(i=null!=(i=s.insightId||(null!=t?t.insightId:t))?i:l)===c?i.call(a,{name:"insightId",hash:{},data:n}):i)+'">\n    <div class="perso-feedback-teaser-container perso-teaser-template-inner perso-non-story-teaser">\n        <div class="perso-feedback-teaser-title perso-accessibility-item" data-perso-block-id="'+p(d(null!=(r=null!=t?t.title:t)?r.blockId:r,t))+'" aria-label="'+p(d(null!=(r=null!=t?t.date:t)?r.month:r,t))+" "+p(d(null!=(r=null!=t?t.date:t)?r.day:r,t))+", "+p(_typeof(i=null!=(i=s.status||(null!=t?t.status:t))?i:l)===c?i.call(a,{name:"status",hash:{},data:n}):i)+". "+(null!=(r=s.unless.call(a,null!=t?t.highlighted:t,{name:"unless",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?r:"")+"highlighted. "+p(d(null!=(r=null!=t?t.title:t)?r.text:r,t))+'.">'+(null!=(r=d(null!=(r=null!=t?t.title:t)?r.text:r,t))?r:"")+'</div>\n        <div class="perso-feedback-teaser-body">\n            <div class="perso-feedback-teaser-content" >\n                <div class="perso-feedback-teaser-image-container">\n                    <img class="perso-feedback-teaser-image perso-image perso-asset-loading" data-block-id="'+p(d(null!=(r=null!=t?t["feedback-icon"]:t)?r.blockId:r,t))+'" src="'+(null!=(r=d(null!=(r=null!=t?t["feedback-icon"]:t)?r.baseUrl:r,t))?r:"")+"/"+(null!=(r=d(null!=(r=null!=t?t["feedback-icon"]:t)?r.assetDirectory:r,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||l).call(a,null!=(r=null!=t?t["feedback-icon"]:t)?r.url:r,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=d(null!=(r=null!=t?t["feedback-icon"]:t)?r.extension:r,t))?r:"")+'" data-perso-block-id="'+p(d(null!=(r=null!=t?t["feedback-icon"]:t)?r.blockId:r,t))+'">\n                </div>\n                <div class="perso-feedback-bubbles-container">\n                    <div class="perso-feedback-question perso-bubble perso-top-bubble" data-perso-block-id="'+p(d(null!=(r=null!=t?t.questionText:t)?r.blockId:r,t))+'">\n                        <div class="perso-feedback-question-text perso-accessibility-item" role="text"  aria-label="'+(null!=(r=d(null!=(r=null!=t?t.questionText:t)?r.text:r,t))?r:"")+'">'+(null!=(r=d(null!=(r=null!=t?t.questionText:t)?r.text:r,t))?r:"")+"</div>\n                    </div>\n\n"+(null!=(r=s.if.call(a,null!=t?t.isDateInput:t,{name:"if",hash:{},fn:e.program(10,n,0),inverse:e.program(12,n,0),data:n}))?r:"")+"\n                </div>\n            </div>\n"+(null!=(r=s.if.call(a,null!=t?t.answersButton:t,{name:"if",hash:{},fn:e.program(17,n,0),inverse:e.noop,data:n}))?r:"")+"        </div>\n    </div>\n</div>\n"},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.txList=e.template({1:function(e,t,s,o,n){var r,i=e.escapeExpression,a=e.lambda;return(null!=(o=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'\n    <div class="teaser-body" id="'+i("function"==typeof(r=null!=(r=s.insightId||(null!=t?t.insightId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"insightId",hash:{},data:n}):r)+"_"+i(a(null!=(o=null!=t?t.txList:t)?o.blockId:o,t))+'"  aria-hidden="true" data-perso-block-id="'+i(a(null!=(o=null!=t?t.txList:t)?o.blockId:o,t))+'"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.verticalBar=e.template({1:function(e,t,s,o,n){var r,i=e.escapeExpression,a=e.lambda;return(null!=(o=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'\n    <div class="teaser-body" id="'+i("function"==typeof(r=null!=(r=s.insightId||(null!=t?t.insightId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"insightId",hash:{},data:n}):r)+"_"+i(a(null!=(o=null!=t?t.chart:t)?o.blockId:o,t))+'"  aria-hidden="true" data-perso-block-id="'+i(a(null!=(o=null!=t?t.chart:t)?o.blockId:o,t))+'"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates.verticalBarAndBox=e.template({1:function(e,t,s,o,n){var r,i=e.lambda,a=e.escapeExpression;return(null!=(o=e.invokePartial(o.teaserHeader,t,{name:"teaserHeader",data:n,indent:"    ",helpers:s,partials:o,decorators:e.decorators}))?o:"")+'\n    <div class="pstory-block-hbox-columns-frame teaser-body" aria-hidden="true">\n        <div class="pstory-hbox-column-frame" data-width="6" data-perso-block-id="'+a(i(null!=(o=null!=t?t.chart:t)?o.blockId:o,t))+'">\n            <div id="'+a("function"==typeof(r=null!=(r=s.insightId||(null!=t?t.insightId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"insightId",hash:{},data:n}):r)+"_"+a(i(null!=(o=null!=t?t.chart:t)?o.blockId:o,t))+'"></div>\n        </div>\n        <div class="pstory-hbox-column-frame" data-width="6">\n            \x3c!--<div class="pstory-block-hbox-columns-frame">--\x3e\n\n            <div class="pstory-hbox-column-frame perso-left-separator" data-v-align="middle" data-width="12">\n                <div class="pstory-block-frame pstory-block-text perso-upper-text" data-perso-block-id="'+a(i(null!=(o=null!=t?t["box-label"]:t)?o.blockId:o,t))+'">\n                    <div class="pstory-block-content">\n                        '+(null!=(o=i(null!=(o=null!=t?t["box-label"]:t)?o.text:o,t))?o:"")+'\n                    </div>\n                </div>\n                <div class="pstory-block-frame pstory-block-text perso-down-text" data-perso-block-id="'+a(i(null!=(o=null!=t?t["box-value"]:t)?o.blockId:o,t))+'">\n                    <div class="pstory-block-content">\n                        '+(null!=(o=i(null!=(o=null!=t?t["box-value"]:t)?o.text:o,t))?o:"")+"\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(t=e.invokePartial(o.teaserWrapperPartial,t,{name:"teaserWrapperPartial",fn:e.program(1,n,0),inverse:e.noop,data:n,helpers:s,partials:o,decorators:e.decorators}))?t:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-account-selector-inner-card"]=e.template({1:function(e,t,s,o,n){var r;return'            <span class="pstory-button-txt perso-bold">'+(null!=(s="function"==typeof(r=null!=(r=s.text2||(null!=t?t.text2:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"text2",hash:{},data:n}):r)?s:"")+"</span>\n"},3:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'        <span class="perso-account-number" aria-label="'+e(_typeof(r=null!=(r=s.numberPrefAccessibility||(null!=t?t.numberPrefAccessibility:t))?r:a)===l?r.call(i,{name:"numberPrefAccessibility",hash:{},data:n}):r)+" "+e(_typeof(r=null!=(r=s.number||(null!=t?t.number:t))?r:a)===l?r.call(i,{name:"number",hash:{},data:n}):r)+'.">*'+e(_typeof(r=null!=(r=s.number||(null!=t?t.number:t))?r:a)===l?r.call(i,{name:"number",hash:{},data:n}):r)+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function",p=e.escapeExpression;return'<div class="perso-card perso-card_'+p(_typeof(i=null!=(i=s.typeImage||(null!=t?t.typeImage:t))?i:l)===c?i.call(a,{name:"typeImage",hash:{},data:n}):i)+" perso-cards"+p(_typeof(i=null!=(i=s.numCards||(null!=t?t.numCards:t))?i:l)===c?i.call(a,{name:"numCards",hash:{},data:n}):i)+'" pstory-id="'+p(_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)+'">\n    <div class="perso-card-image">\n        <div class="perso-image"></div>\n    </div>\n    <div class="perso-card-container">\n        <div id="pop-'+p(e.lambda(t,t))+'" class="pstory-button-txt-wrapper" pstory-id="'+p(_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)+'">\n'+(null!=(r=s.if.call(a,null!=t?t.text2:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'        </div>\n        <div>\n            <span class="pstory-button-txt">'+(null!=(r=_typeof(i=null!=(i=s.text||(null!=t?t.text:t))?i:l)===c?i.call(a,{name:"text",hash:{},data:n}):i)?r:"")+'</span>\n        </div>\n        <span class="perso-account-name" aria-label="'+p(_typeof(i=null!=(i=s.name||(null!=t?t.name:t))?i:l)===c?i.call(a,{name:"name",hash:{},data:n}):i)+'.">'+p(_typeof(i=null!=(i=s.name||(null!=t?t.name:t))?i:l)===c?i.call(a,{name:"name",hash:{},data:n}):i)+"</span>\n"+(null!=(r=s.if.call(a,null!=t?t.number:t,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+"    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-account-selector-new"]=e.template({1:function(e,t,s,o,n){return"pstory-tabs"},3:function(e,t,s,o,n){return'                <div class="perso-overlay perso-overlay-all"></div>\n                <div class="perso-overlay perso-overlay-choose"></div>\n                <div class="perso-header-container">\n\n                    <ul class="perso-tablist" role="tablist">\n'+(null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.headersArray:t,{name:"each",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?s:"")+'                    </ul>\n                </div>\n            <div class="perso-carousel-outer-wrapper perso-collapse">\n            <div class="perso-carousel-animate perso-options-container perso-carousel-wrapper pstory-show-header-tabs">\n'},4:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function";return'                            <li class="pstory-header-button"  tabindex="0" aria-label="'+(null!=(r=_typeof(i=null!=(i=s.text||(null!=t?t.text:t))?i:l)===c?i.call(a,{name:"text",hash:{},data:n}):i)?r:"")+'"  role="tab" data-all="'+e.escapeExpression(_typeof(i=null!=(i=s.isAll||(null!=t?t.isAll:t))?i:l)===c?i.call(a,{name:"isAll",hash:{},data:n}):i)+'"\n                                '+(null!=(r=s.if.call(a,null!=t?t.isAll:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?r:"")+">"+(null!=(r=_typeof(i=null!=(i=s.text||(null!=t?t.text:t))?i:l)===c?i.call(a,{name:"text",hash:{},data:n}):i)?r:"")+"</li>\n"},5:function(e,t,s,o,n){return'pstory-id="all" '},7:function(e,t,s,o,n){return'            <div class="perso-carousel-outer-wrapper perso-collapse">\n            <div class="perso-carousel-animate perso-options-container perso-carousel-wrapper">\n'},9:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d=e.escapeExpression;return'                    <div class="perso-carousel-item pstory-button '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'" aria-hidden="true" pstory-id="'+d("function"===_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)?l.call(c,{name:"id",hash:{},data:n}):l)+'" pstory-event="'+d("function"===_typeof(l=null!=(l=s.event||(null!=t?t.event:t))?l:p)?l.call(c,{name:"event",hash:{},data:n}):l)+'"\n                         role="'+d(e.lambda(null!=i[1]?i[1].role:i[1],t))+'">\n                        '+(null!=(a=s.if.call(c,null!=i[1]?i[1].isDesktopMode:i[1],{name:"if",hash:{},fn:e.program(12,n,0,r,i),inverse:e.program(14,n,0,r,i),data:n}))?a:"")+"\n                    </div>\n"},10:function(e,t,s,o,n){return"perso-selected"},12:function(e,t,s,o,n,r,i){return" "+(null!=(t=e.invokePartial(o.innerCardDesktop,t,{name:"innerCardDesktop",hash:{numberPrefAccessibility:null!=i[1]?i[1].numberPrefAccessibility:i[1],numberPref:null!=i[1]?i[1].numberPref:i[1]},data:n,helpers:s,partials:o,decorators:e.decorators}))?t:"")+"\n                        "},14:function(e,t,s,o,n,r,i){return" "+(null!=(t=e.invokePartial(o.innerCard,t,{name:"innerCard",hash:{numberPrefAccessibility:null!=i[1]?i[1].numberPrefAccessibility:i[1],numberPref:null!=i[1]?i[1].numberPref:i[1]},data:n,helpers:s,partials:o,decorators:e.decorators}))?t:"")+" "},16:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'                <div class="perso-carousel-index-wrapper" '+(null!=(r=s.if.call(i,null!=t?t.isDesktopMode:t,{name:"if",hash:{},fn:e.program(17,n,0),inverse:e.noop,data:n}))?r:"")+'>\n                    <div class="perso-carousel-index-container">\n'+(null!=(r=s.each.call(i,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(19,n,0),inverse:e.noop,data:n}))?r:"")+"                    </div>\n                </div>\n"},17:function(e,t,s,o,n){return' role="application" aria-labelledby="perso-accessibility-read-'+e.escapeExpression(e.lambda(null!=(e=null!=(e=null!=t?t.options:t)?e[0]:e)?e.id:e,t))+'"\n                '},19:function(e,t,s,o,n){return'                            <div class="perso-carousel-index-dot">\n                                <div class="perso-carousel-index-dot-circle"></div>\n                            </div>\n'},21:function(e,t,s,o,n){var r,i=e.escapeExpression,a=null!=t?t:e.nullContext||{},l=s.helperMissing;return'                <div class="pstory-all-accounts-txt" role="text">\n                    <span class="perso-bold">'+i(e.lambda(null!=(r=null!=t?t.options:t)?r.length:r,t))+" "+i("function"===_typeof(i=null!=(i=s.lblaccSelectAccounts||(null!=t?t.lblaccSelectAccounts:t))?i:l)?i.call(a,{name:"lblaccSelectAccounts",hash:{},data:n}):i)+'</span>\n                    <span class="perso-amount-wrapper">'+(null!=(r=s.if.call(a,null!=t?t.allAccountsTxt2:t,{name:"if",hash:{},fn:e.program(22,n,0),inverse:e.noop,data:n}))?r:"")+(null!=(r="function"===_typeof(i=null!=(i=s.allAccountsTxt||(null!=t?t.allAccountsTxt:t))?i:l)?i.call(a,{name:"allAccountsTxt",hash:{},data:n}):i)?r:"")+"</span>\n                </div>\n"},22:function(e,t,s,o,n){var r;return(null!=(s="function"==typeof(r=null!=(r=s.allAccountsTxt2||(null!=t?t.allAccountsTxt2:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"allAccountsTxt2",hash:{},data:n}):r)?s:"")+": "},24:function(e,t,s,o,n){return'\n                   tabindex="-1" '},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression;return'\n<div id="pstory-block-account-selector_'+u(_typeof(l=null!=(l=s.index||(null!=t?t.index:t))?l:p)===d?l.call(c,{name:"index",hash:{},data:n}):l)+'" class="pstory-block-frame pstory-block-account-selector '+u(_typeof(l=null!=(l=s.class||(null!=t?t.class:t))?l:p)===d?l.call(c,{name:"class",hash:{},data:n}):l)+'" data-show-header-tabs='+u(_typeof(l=null!=(l=s.showHeaderTabs||(null!=t?t.showHeaderTabs:t))?l:p)===d?l.call(c,{name:"showHeaderTabs",hash:{},data:n}):l)+'>\n    <div class="pstory-block-container '+(null!=(a=s.if.call(c,null!=t?t.showHeaderTabs:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'">\n        <div class="pstory-block-content" tabindex="0">\n            <div class="perso-accessibility-wrapper perso-accessibility-account-selector" role="text">\n                <span class="perso-accessibility-read">'+u(_typeof(l=null!=(l=s.accountSelectorText||(null!=t?t.accountSelectorText:t))?l:p)===d?l.call(c,{name:"accountSelectorText",hash:{},data:n}):l)+"</span>\n            </div>\n"+(null!=(a=s.if.call(c,null!=t?t.showHeaderTabs:t,{name:"if",hash:{},fn:e.program(3,n,0,r,i),inverse:e.program(7,n,0,r,i),data:n}))?a:"")+'            <div class="perso-carousel-inner-wrapper perso-cards-wrapper" aria-hidden="true">\n'+(null!=(a=s.each.call(c,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(9,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'            </div>\n\n            <div class="perso-accessibility-wrapper pstory-account-button perso-selected" role="text">\n                <span class="perso-accessibility-read">'+u(_typeof(l=null!=(l=s.accountName||(null!=t?t.accountName:t))?l:p)===d?l.call(c,{name:"accountName",hash:{},data:n}):l)+". "+u(_typeof(l=null!=(l=s.numberPrefAccessibility||(null!=t?t.numberPrefAccessibility:t))?l:p)===d?l.call(c,{name:"numberPrefAccessibility",hash:{},data:n}):l)+" "+u(_typeof(l=null!=(l=s.accountNumber||(null!=t?t.accountNumber:t))?l:p)===d?l.call(c,{name:"accountNumber",hash:{},data:n}):l)+"</span>\n            </div>\n\n"+(null!=(a=s.if.call(c,null!=t?t.showIndexDots:t,{name:"if",hash:{},fn:e.program(16,n,0,r,i),inverse:e.noop,data:n}))?a:"")+(null!=(a=s.if.call(c,null!=t?t.showHeaderTabs:t,{name:"if",hash:{},fn:e.program(21,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'        </div>\n            <input type="button" class="pstory-account-button pstory-prev-account-button" aria-label="'+u(_typeof(l=null!=(l=s.next||(null!=t?t.next:t))?l:p)===d?l.call(c,{name:"next",hash:{},data:n}):l)+'" '+(null!=(a=s.if.call(c,null!=t?t.isDesktopMode:t,{name:"if",hash:{},fn:e.program(24,n,0,r,i),inverse:e.noop,data:n}))?a:"")+' />\n            <input type="button" class="pstory-account-button pstory-next-account-button" aria-label="'+u(_typeof(l=null!=(l=s.next||(null!=t?t.next:t))?l:p)===d?l.call(c,{name:"next",hash:{},data:n}):l)+'" '+(null!=(a=s.if.call(c,null!=t?t.isDesktopMode:t,{name:"if",hash:{},fn:e.program(24,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'/>\n        </div>\n            <div class="pstory-comment">'+(null!=(a=_typeof(l=null!=(l=s.comment||(null!=t?t.comment:t))?l:p)===d?l.call(c,{name:"comment",hash:{},data:n}):l)?a:"")+"</div>\n        </div>\n        </div>\n        </div>\n"},usePartial:!0,useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-pie-chart"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="pstory-block-frame pstory-block-pie-chart" >\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-pie-chart"></div>\n            <div class="pstory-pie-data">\n                <input type="button" class="pstory-arrow pstory-next-arrow"/>\n                <div class="pstory-pie-info perso-accessibility-wrapper">\n                </div>\n                <input type="button" class="pstory-arrow pstory-previous-arrow"/>\n            </div>\n        </div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-table-minimal"]=e.template({1:function(e,t,s,o,n){return'                    <tr>\n                        <td class="perso-loading-table">'+e.escapeExpression(e.lambda(null!=(e=null!=t?t.texts:t)?e.loading:e,t))+"</td>\n                    </tr>\n"},3:function(e,t,s,o,n,r,i){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.rows:t,{name:"each",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?s:""},4:function(e,t,s,o,n,r,i){var a=e.lambda;return'                            <tr class="'+e.escapeExpression(a(null!=i[1]?i[1].class:i[1],t))+'">\n                                <td role="cell" class="perso-td-date">'+(null!=(e=a(null!=t?t.date:t,t))?e:"")+'</td>\n                                <td  align="right" role="cell" class="perso-td-amount-balance">'+(null!=(e=a(null!=t?t.amount:t,t))?e:"")+' </td>                                \n                                <td  align="right" class="perso-td-amount-balance  " role="cell"> '+(null!=(e=a(null!=t?t.account:t,t))?e:"")+"</td>\n\n                            </tr>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){return'<div class="pstory-block-frame pstory-block-table">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" tabindex="-1">\n            <table class="pstory-table">\n'+(null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.future:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.program(3,n,0,r,i),data:n}))?s:"")+"            </table>\n        </div>\n    </div>\n</div>"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-table-perso-feedback"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,e=e.lambda;return'<div class="pstory-block-frame pstory-block-table perso-feedback">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-table pstory-table-feedback">\n                <div class="perso-feedback-transaction perso-bubble" role="text">\n                    <div class="perso-transaction-icon '+(null!=(r=e(null!=(r=null!=t?t.transactionData:t)?r.category:r,t))?r:"")+'"></div>\n                    <div class="perso-transaction-info">\n                        <div class="perso-transaction-date">'+(null!=(r=e(null!=(r=null!=t?t.transactionData:t)?r.date:r,t))?r:"")+'</div>\n                        <div class="perso-transaction-amount">'+(null!=(r=e(null!=(r=null!=t?t.transactionData:t)?r.amount:r,t))?r:"")+'</div>\n                        <div class="perso-transaction-description">'+(null!=(r=e(null!=(r=null!=t?t.transactionData:t)?r.description:r,t))?r:"")+"</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-table-perso-subscriptions"]=e.template({1:function(e,t,s,o,n){var r,i=e.escapeExpression,a=e.lambda;return'                    <div class="perso-table-row">\n                        <div class="perso-col perso-left-icon">\n                            <div class="perso-col-icon '+i("function"==typeof(r=null!=(r=s.icon||(null!=t?t.icon:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"icon",hash:{},data:n}):r)+'"></div>\n                        </div>\n                        <div class="perso-col perso-left-col">\n                            <div class="perso-row perso-upper-row">'+(null!=(s=a(null!=t?t.device:t,t))?s:"")+'</div>\n                            <div class="perso-row perso-lower-row"><span\n                                    class="perso-last-payment">'+i(a((s=(s=n&&n.root)&&s.subscriptionTexts)&&s.lblLastPayment,t))+"</span> "+(null!=(s=a(null!=t?t.date:t,t))?s:"")+'\n                            </div>\n                        </div>\n                        <div class="perso-col perso-right-col">\n                            <div class="perso-amount-container"> '+(null!=(s=a(null!=t?t.amount:t,t))?s:"")+'\n                                <span class="perso-account-seperator">/</span> '+(null!=(s=a(null!=t?t.cycle:t,t))?s:"")+"\n                            </div>\n                        </div>\n                    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="pstory-block-frame pstory-block-table">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" tabindex="-1">\n            <div class="pstory-table pstory-table-subscriptions">\n'+(null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.rows:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:"")+"            </div>\n        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-pstory-benchmark"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'<div class="perso-bar-benchmark-container" data-val="'+(null!=(r="function"===_typeof(i=null!=(i=s.numOfBars||(null!=t?t.numOfBars:t))?i:a)?i.call(e,{name:"numOfBars",hash:{},data:n}):i)?r:"")+'">\n    <div class="perso-bar-benchmark-line">\n        <div class="perso-benchmark-line"></div>\n        <div class="perso-benchmark-label">'+(null!=(r="function"===_typeof(i=null!=(i=s.label||(null!=t?t.label:t))?i:a)?i.call(e,{name:"label",hash:{},data:n}):i)?r:"")+'</div>\n        <div class="perso-benchmark-line"></div>\n    </div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-pstory-title"]=e.template({1:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing;return'<div class="pstory-title-outer-wrapper">\n    <div class="pstory-title-wrapper pstory-fixed">\n        <div class="pstory-title  '+(null!=(r=s.if.call(a,null!=t?t.useExternalBackgroundColor:t,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?r:"")+'">\n            '+(null!=(r=s.if.call(a,null!=t?t.showBackButton:t,{name:"if",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?r:"")+'\n            <div role="text" aria-label="'+e.escapeExpression("function"===_typeof(i=null!=(i=s.title||(null!=t?t.title:t))?i:l)?i.call(a,{name:"title",hash:{},data:n}):i)+', heading level 1" class="pstory-title-text'+(null!=(r=s.unless.call(a,null!=t?t.showBackButton:t,{name:"unless",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?r:"")+(null!=(r=s.if.call(a,null!=t?t.useExternalBrandColor:t,{name:"if",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?r:"")+'">'+(null!=(r="function"===_typeof(i=null!=(i=s.title||(null!=t?t.title:t))?i:l)?i.call(a,{name:"title",hash:{},data:n}):i)?r:"")+"</div>\n        </div>\n    </div>\n</div>\n"},2:function(e,t,s,o,n){return" perso-theme-backgroundColor-background"},4:function(e,t,s,o,n){var r;return'<input aria-label="'+e.escapeExpression("function"==typeof(r=null!=(r=s.backButtonText||(null!=t?t.backButtonText:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"backButtonText",hash:{},data:n}):r)+'" type="button" class="pstory-title-close"/>'},6:function(e,t,s,o,n){return" perso-no-back-button"},8:function(e,t,s,o,n){return" perso-theme-brandColor-color"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return(null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.showStoryTitle:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:"")+'<div id="story-frame-container" class="perso-story-frame-container"></div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-account-selector-card-v2"]=e.template({1:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.isAllCard:t,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.program(4,n,0),data:n}))?s:""},2:function(e,t,s,o,n){return'        <li class="perso-item">'+(null!=(t=e.invokePartial(o.allCard,t,{name:"allCard",data:n,helpers:s,partials:o,decorators:e.decorators}))?t:"")+"</li>\n"},4:function(e,t,s,o,n){return'        <li class="perso-item">'+(null!=(t=e.invokePartial(o.singleCard,t,{name:"singleCard",data:n,helpers:s,partials:o,decorators:e.decorators}))?t:"")+"</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:""},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-account-selector-v2"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div id="perso-account-selector-carousel-wrapper"\n         class="perso-account-selector-carousel-wrapper pstory-block-container pstory-block-frame pstory-block-content">\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-pstory-all-card"]=e.template({1:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l=e.lambda;return'    <div class="perso-info-container-col">\n        <div class="perso-info-container-row">\n            <div class="perso-image-wrapper">\n                <img class="perso-image-all perso-asset-loading" data-perso-card-type="'+(null!=(r="function"==typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)?r.call(i,{name:"id",hash:{},data:n}):r)?r:"")+'" src="'+e.escapeExpression(l((r=n&&n.root)&&r.baseUrl,t))+"/"+(null!=(r=l((r=n&&n.root)&&r.assetDirectory,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||a).call(i,null!=t?t.image:t,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=l((r=n&&n.root)&&r.assetExtension,t))?r:"")+'">\n            </div>\n        </div>\n    </div>\n'},3:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'            <div class="perso-info-container-row">\n                <span class="perso-cards-number-text"> '+(null!=(r="function"===_typeof(i=null!=(i=s.numberOfAccounts||(null!=t?t.numberOfAccounts:t))?i:a)?i.call(e,{name:"numberOfAccounts",hash:{},data:n}):i)?r:"")+" "+(null!=(r="function"===_typeof(i=null!=(i=s.lblAccounts||(null!=t?t.lblAccounts:t))?i:a)?i.call(e,{name:"lblAccounts",hash:{},data:n}):i)?r:"")+"</span>\n            </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing;return'<div id="perso-all-cards-info-container" class="perso-all-cards-container perso-accessibility-item" role="text">\n'+(null!=(r=s.if.call(i,(r=n&&n.root)&&r.showIcon,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'    <div class="perso-info-container-col">\n'+(null!=(r=s.if.call(i,(r=n&&n.root)&&r.showAllAccountCountText,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+'        <div class="perso-info-container-row">\n            <span class="perso-card-total-txt">'+(null!=(r="function"===_typeof(e=null!=(e=s.lblTotal||(null!=t?t.lblTotal:t))?e:a)?e.call(i,{name:"lblTotal",hash:{},data:n}):e)?r:"")+'</span>\n            <span class="perso-card-amount-txt">'+(null!=(r="function"===_typeof(e=null!=(e=s.lblAmount||(null!=t?t.lblAmount:t))?e:a)?e.call(i,{name:"lblAmount",hash:{},data:n}):e)?r:"")+"</span>\n        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-pstory-single-card"]=e.template({1:function(e,t,s,o,n){var r,i=e.lambda;return'       <div class="perso-image-wrapper">\n           <img class="perso-image-single perso-asset-loading" src="'+(null!=(r=i((r=n&&n.root)&&r.baseUrl,t))?r:"")+"/"+(null!=(r=i((r=n&&n.root)&&r.assetDirectory,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||s.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.image:t,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=i((r=n&&n.root)&&r.assetExtension,t))?r:"")+'">\n       </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function";return'<div class="perso-card-info-container perso-accessibility-item" role="text">\n   <div class="perso-info-container-row">\n'+(null!=(r=s.if.call(i,(r=n&&n.root)&&r.showIcon,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'       <div class="perso-account-info">\n           <span class="perso-account-name">'+(null!=(r=_typeof(e=null!=(e=s.name||(null!=t?t.name:t))?e:a)===l?e.call(i,{name:"name",hash:{},data:n}):e)?r:"")+'</span>\n           <span class="perso-account-number">'+(null!=(r=_typeof(e=null!=(e=s.accountNumber||(null!=t?t.accountNumber:t))?e:a)===l?e.call(i,{name:"accountNumber",hash:{},data:n}):e)?r:"")+'</span>\n       </div>\n   </div>\n   <div class="perso-info-container-row">\n       <span class="perso-card-total-txt">'+(null!=(r=_typeof(e=null!=(e=s.text2||(null!=t?t.text2:t))?e:a)===l?e.call(i,{name:"text2",hash:{},data:n}):e)?r:"")+'</span>\n       <span class="perso-card-amount-txt">'+(null!=(r=_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:a)===l?e.call(i,{name:"text",hash:{},data:n}):e)?r:"")+"</span>\n   </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-pure-bar-chart"]=e.template({1:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.indicatorLegend:t,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?s:""},2:function(e,t,s,o,n){var r,i;return'                        <div class="perso-legend-wrapper">\n                            <div class="perso-bar-chart-legend perso-indicator-type-'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.config:t)?r.indicatorType:r,t))+'"></div>\n                            <div class="perso-bar-chart-legend-txt">'+(null!=(r="function"==typeof(i=null!=(i=s.indicatorLegend||(null!=t?t.indicatorLegend:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"indicatorLegend",hash:{},data:n}):i)?r:"")+"</div>\n                        </div>\n"},4:function(e,t,s,o,n){return'perso-comparable-chart" aria-hidden="true" '},6:function(e,t,s,o,n){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.series:t,{name:"each",hash:{},fn:e.program(7,n,0),inverse:e.noop,data:n}))?s:""},7:function(e,t,s,o,n){return'                                <div class="perso-series-wrapper">\n                                    <span class="perso-tooltip"></span>\n                                    <div class="perso-series">\n'+(null!=(s=s.each.call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?s:"")+"                                    </div>\n                                </div>\n"},8:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{};return'                                            <div class="perso-bar-wrapper">\n                                                <div class="perso-bar'+(null!=(r=s.if.call(a,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(9,n,0),inverse:e.noop,data:n}))?r:"")+'"\n                                                     pstory-category="'+e.escapeExpression("function"==typeof(i=null!=(i=s.category||(null!=t?t.category:t))?i:s.helperMissing)?i.call(a,{name:"category",hash:{},data:n}):i)+'">\n                                                </div>\n'+(null!=(r=s.if.call(a,null!=t?t.indicatorDisplay:t,{name:"if",hash:{},fn:e.program(11,n,0),inverse:e.noop,data:n}))?r:"")+"                                            </div>\n"},9:function(e,t,s,o,n){return" perso-selected"},11:function(e,t,s,o,n){var r;return'                                                    <div class="perso-bar perso-indicator"\n                                                         pstory-category="'+e.escapeExpression("function"==typeof(r=null!=(r=s.category||(null!=t?t.category:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"category",hash:{},data:n}):r)+'">\n                                                    </div>\n'},13:function(e,t,s,o,n,r,i){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.series:t,{name:"each",hash:{},fn:e.program(14,n,0,r,i),inverse:e.noop,data:n}))?s:""},14:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{};return'                                <div class="perso-bar-wrapper perso-simple-bar">\n                                    <div class="perso-bar '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(15,n,0,r,i),inverse:e.program(17,n,0,r,i),data:n}))?a:"")+' pstory-category="'+e.escapeExpression("function"==typeof(l=null!=(l=s.category||(null!=t?t.category:t))?l:s.helperMissing)?l.call(c,{name:"category",hash:{},data:n}):l)+'">\n                                    </div>\n'+(null!=(a=s.if.call(c,null!=t?t.indicatorDisplay:t,{name:"if",hash:{},fn:e.program(19,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                                </div>\n"},15:function(e,t,s,o,n){return'perso-selected" aria-selected="true"'},17:function(e,t,s,o,n){return'\n                                        "'},19:function(e,t,s,o,n,r,i){var a=e.escapeExpression;return'                                        <div class="perso-bar perso-indicator perso-indicator-type-'+a(e.lambda(null!=(i=null!=i[1]?i[1].config:i[1])?i.indicatorType:i,t))+'" pstory-category="'+a("function"==typeof(i=null!=(i=s.category||(null!=t?t.category:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"category",hash:{},data:n}):i)+'">\n                                        </div>\n'},21:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.indicatorLegend:t,{name:"if",hash:{},fn:e.program(22,n,0),inverse:e.noop,data:n}))?s:""},22:function(e,t,s,o,n){var r,i;return'                            <div class="perso-legend-wrapper perso-series-legend">\n                                <div class="perso-bar-chart-legend perso-indicator-type-'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.config:t)?r.indicatorType:r,t))+'"></div>\n                                <div class="perso-bar-chart-legend-txt">'+(null!=(r="function"==typeof(i=null!=(i=s.indicatorLegend||(null!=t?t.indicatorLegend:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"indicatorLegend",hash:{},data:n}):i)?r:"")+"</div>\n                            </div>\n"},24:function(e,t,s,o,n){return'                <div class="perso-month-amount is-series"></div>\n'},26:function(e,t,s,o,n){return'                <div class="perso-month-amount" ></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{},c=s.helperMissing,p=e.escapeExpression;return'<div class="pstory-block-frame pstory-block-bar-chart perso-pure-bar-chart '+p("function"===_typeof(a=null!=(a=s.class||(null!=t?t.class:t))?a:c)?a.call(l,{name:"class",hash:{},data:n}):a)+" perso-"+p("function"===_typeof(a=null!=(a=s.direction||(null!=t?t.direction:t))?a:c)?a.call(l,{name:"direction",hash:{},data:n}):a)+'" >\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-bar-chart">\n'+(null!=(p=e.invokePartial(o.monthPicker,t,{name:"monthPicker",data:n,indent:"                ",helpers:s,partials:o,decorators:e.decorators}))?p:"")+(null!=(p=s.unless.call(l,null!=t?t.isSeries:t,{name:"unless",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?p:"")+'                <div class="perso-bar-chart-wrapper perso-accessibility-wrapper '+(null!=(p=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?p:"")+' role="text">\n                    <span class="perso-accessibility-read perso-accessibility-bar-seleced-text"></span>\n                    <div class="perso-bar-chart-container">\n                    <div class="perso-bars-wrapper">\n'+(null!=(p=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(13,n,0,r,i),data:n}))?p:"")+"                    </div>\n"+(null!=(p=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(21,n,0,r,i),inverse:e.noop,data:n}))?p:"")+"                </div>\n            </div>\n"+(null!=(p=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(24,n,0,r,i),inverse:e.program(26,n,0,r,i),data:n}))?p:"")+"        </div>\n    </div>\n</div>\n</div>"},usePartial:!0,useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-buttons-new"]=e.template({1:function(e,t,s,o,n,r,i){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.navigateTarget:t,{name:"if",hash:{},fn:e.program(2,n,0,r,i),inverse:e.program(4,n,0,r,i),data:n}))?s:""},2:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'                    <a role="text" aria-label="'+e(_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)===l?r.call(i,{name:"text",hash:{},data:n}):r)+'" id="'+e(_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)===l?r.call(i,{name:"id",hash:{},data:n}):r)+'" class="pstory-link-navigateTo perso-button-animation pstory-button perso-ripple-closed" action-id="'+e(_typeof(r=null!=(r=s.action||(null!=t?t.action:t))?r:a)===l?r.call(i,{name:"action",hash:{},data:n}):r)+'" tabindex="0" pnavigate-id="'+e(_typeof(r=null!=(r=s.navigateTarget||(null!=t?t.navigateTarget:t))?r:a)===l?r.call(i,{name:"navigateTarget",hash:{},data:n}):r)+'" >'+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)===l?r.call(i,{name:"text",hash:{},data:n}):r)?e:"")+"</a>\n"},4:function(e,t,s,o,n,r,i){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.toggleState:t,{name:"if",hash:{},fn:e.program(5,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n}))?s:""},5:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",c=e.escapeExpression;return'                        <input type="button" role="text"  aria-label="'+c(_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)===l?r.call(i,{name:"text",hash:{},data:n}):r)+', button" class="pstory-button pstory-toggle-button '+c(_typeof(r=null!=(r=s.toggleState||(null!=t?t.toggleState:t))?r:a)===l?r.call(i,{name:"toggleState",hash:{},data:n}):r)+" "+(null!=(e=s.if.call(i,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?e:"")+'" value="'+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)===l?r.call(i,{name:"text",hash:{},data:n}):r)?e:"")+'" action-id="'+c(_typeof(r=null!=(r=s.action||(null!=t?t.action:t))?r:a)===l?r.call(i,{name:"action",hash:{},data:n}):r)+'" pstory-type-text="Toggle '+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)===l?r.call(i,{name:"text",hash:{},data:n}):r)?e:"")+'" pstory-id="'+c(_typeof(r=null!=(r=s.toggleState||(null!=t?t.toggleState:t))?r:a)===l?r.call(i,{name:"toggleState",hash:{},data:n}):r)+'"/>\n'},6:function(e,t,s,o,n){return"perso-selected"},8:function(e,t,s,o,n,r,i){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=i[1]?i[1].typeRadio:i[1],{name:"if",hash:{},fn:e.program(9,n,0,r,i),inverse:e.program(12,n,0,r,i),data:n}))?s:""},9:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression;return'                            <div class="pstory-radio-button-wrapper">\n                                <div class="pstory-button perso-button-animation pstory-radio-button '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'  perso-ripple-closed" tabindex="0" pstory-id="'+u(_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)+'" action-id="'+u(_typeof(l=null!=(l=s.action||(null!=t?t.action:t))?l:p)===d?l.call(c,{name:"action",hash:{},data:n}):l)+'" pstory-event="'+u(_typeof(l=null!=(l=s.event||(null!=t?t.event:t))?l:p)===d?l.call(c,{name:"event",hash:{},data:n}):l)+'">\n                                    <input id="pstory-radio-'+u(_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)+'" name="radio-'+u(e.lambda(null!=i[1]?i[1].id:i[1],t))+'" type="radio" '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'/>\n                                    <label for="pstory-radio-'+u(_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)+'" role="text">'+(null!=(a=_typeof(l=null!=(l=s.text||(null!=t?t.text:t))?l:p)===d?l.call(c,{name:"text",hash:{},data:n}):l)?a:"")+"</label>\n                                </div>\n                            </div>\n"},10:function(e,t,s,o,n){return"checked"},12:function(e,t,s,o,n){var r,i=e.escapeExpression,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function";return'                            <button id="pop-'+i(e.lambda(t,t))+'" role="text" aria-label="'+i(_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:l)===c?r.call(a,{name:"text",hash:{},data:n}):r)+', button"  class="pstory-button pstory-regular-button '+(null!=(e=s.if.call(a,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?e:"")+' perso-ripple-closed" action-id="'+i(_typeof(r=null!=(r=s.action||(null!=t?t.action:t))?r:l)===c?r.call(a,{name:"action",hash:{},data:n}):r)+'" pstory-type-text="Button '+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:l)===c?r.call(a,{name:"text",hash:{},data:n}):r)?e:"")+'" pstory-id="'+i(_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:l)===c?r.call(a,{name:"id",hash:{},data:n}):r)+'" pstory-event="'+i(_typeof(r=null!=(r=s.event||(null!=t?t.event:t))?r:l)===c?r.call(a,{name:"event",hash:{},data:n}):r)+'">\n                                '+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:l)===c?r.call(a,{name:"text",hash:{},data:n}):r)?e:"")+"\n                            </button>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{},c=s.helperMissing,p="function",d=e.escapeExpression;return'<div id="pstory-block-buttons_'+d(_typeof(a=null!=(a=s.id||(null!=t?t.id:t))?a:c)===p?a.call(l,{name:"id",hash:{},data:n}):a)+'" class="pstory-block-frame pstory-block-buttons '+d(_typeof(a=null!=(a=s.class||(null!=t?t.class:t))?a:c)===p?a.call(l,{name:"class",hash:{},data:n}):a)+" pstory-block-buttons-"+d(_typeof(a=null!=(a=s.buttonType||(null!=t?t.buttonType:t))?a:c)===p?a.call(l,{name:"buttonType",hash:{},data:n}):a)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" tabindex="-1">\n'+(null!=(d=s.each.call(l,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?d:"")+"        </div>\n    </div>\n</div>"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-calendar"]=e.template({1:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,e=e.escapeExpression;return'                                    <div class="perso-calendar-week-day" aria-hidden="true" title="'+e("function"===_typeof(r=null!=(r=s.dayName||(null!=t?t.dayName:t))?r:a)?r.call(i,{name:"dayName",hash:{},data:n}):r)+'">'+e("function"===_typeof(r=null!=(r=s.shortDayName||(null!=t?t.shortDayName:t))?r:a)?r.call(i,{name:"shortDayName",hash:{},data:n}):r)+"</div>\n"},3:function(e,t,s,o,n){return'                            <div id="perso-calendar-bottom-text" class="perso-calendar-bottom-text" aria-hidden="true"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c=e.escapeExpression;return'<div class="pstory-block-frame pstory-block-calendar '+c("function"===_typeof(i=null!=(i=s.class||(null!=t?t.class:t))?i:l)?i.call(a,{name:"class",hash:{},data:n}):i)+'">\n    <div class="perso-accessibility-wrapper perso-accessibility-calendar">\n        <span class="perso-accessibility-read" role="text">'+c(e.lambda(null!=(r=null!=t?t.accessibilityTexts:t)?r.accessibilityCalendarTitle:r,t))+'</span>\n    </div>\n    <div class="pstory-block-container">\n            <div class="pstory-block-content" id="'+c("function"===_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)?i.call(a,{name:"id",hash:{},data:n}):i)+'" tabindex="-1">\n                <section class="perso-calendar perso-calendar-inlined">\n                    <div class="perso-calendar-inner">\n                        <div class="perso-calendar-inner-container">\n                           <div class="perso-calendar-months">\n                            <div class="perso-calendar-month">\n                                <div class="perso-calendar-week-days" aria-hidden="true">\n'+(null!=(r=s.each.call(a,null!=t?t.weekDays:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'                                </div>\n                                <div class="perso-calendar-days">\n'+(null!=(r=e.invokePartial(o.persoCalendarBlock,t,{name:"persoCalendarBlock",data:n,indent:"                                    ",helpers:s,partials:o,decorators:e.decorators}))?r:"")+"                                </div>\n                            </div>\n                        </div>\n                        </div>\n"+(null!=(r=s.if.call(a,null!=t?t.bottomText:t,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+"                    </div>\n                </section>\n            </div>\n    </div>\n</div>\n"},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-pstory-calendar-day-CL1"]=e.template({1:function(e,t,s,o,n){return e.escapeExpression(e.lambda(t,t))+" "},3:function(e,t,s,o,n){return"perso-left-edge"},5:function(e,t,s,o,n){return" perso-right-edge"},7:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,e=e.escapeExpression;return e("function"===_typeof(r=null!=(r=s.attrName||(null!=t?t.attrName:t))?r:a)?r.call(i,{name:"attrName",hash:{},data:n}):r)+'="'+e("function"===_typeof(r=null!=(r=s.attrVal||(null!=t?t.attrVal:t))?r:a)?r.call(i,{name:"attrVal",hash:{},data:n}):r)+'" '},9:function(e,t,s,o,n){var r;return"    <div class='perso-calendar-item-day'></div>\n    <div class='perso-dot'></div>\n    <span class='circleText'>"+e.escapeExpression("function"==typeof(r=null!=(r=s.dayItem||(null!=t?t.dayItem:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"dayItem",hash:{},data:n}):r)+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing;return'<div\n    class="perso-calendar-day\n    '+(null!=(r=s.each.call(a,null!=t?t.class:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+"\n    "+(null!=(r=s.if.call(a,(s.math||t&&t.math||l).call(a,null!=t?t.isLeftEdge:t,"||",null!=t?t.isFirstDay:t,{name:"math",hash:{},data:n}),{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+"\n    "+(null!=(r=s.if.call(a,(s.math||t&&t.math||l).call(a,null!=t?t.isRightEdge:t,"||",null!=t?t.isLastDay:t,{name:"math",hash:{},data:n}),{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?r:"")+'"\n    id="'+e.escapeExpression("function"==typeof(i=null!=(i=s.time||(null!=t?t.time:t))?i:l)?i.call(a,{name:"time",hash:{},data:n}):i)+'" \n    '+(null!=(r=s.each.call(a,null!=t?t.attributes:t,{name:"each",hash:{},fn:e.program(7,n,0),inverse:e.noop,data:n}))?r:"")+'\n    aria-hidden="true">\n'+(null!=(r=s.unless.call(a,null!=t?t.isEmptyDay:t,{name:"unless",hash:{},fn:e.program(9,n,0),inverse:e.noop,data:n}))?r:"")+"</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-multi-bar-chart-static-tooltip"]=e.template({1:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.indicatorLegend:t,{name:"if",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?s:""},2:function(e,t,s,o,n){var r,i;return'                        <div class="perso-legend-wrapper">\n                            <div class="perso-bar-chart-legend perso-indicator-type-'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.config:t)?r.indicatorType:r,t))+'"></div>\n                            <div class="perso-bar-chart-legend-txt">'+(null!=(r="function"==typeof(i=null!=(i=s.indicatorLegend||(null!=t?t.indicatorLegend:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"indicatorLegend",hash:{},data:n}):i)?r:"")+"</div>\n                        </div>\n"},4:function(e,t,s,o,n){return"perso-comparable-chart"},6:function(e,t,s,o,n,r,i){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.series:t,{name:"each",hash:{},fn:e.program(7,n,0,r,i),inverse:e.noop,data:n}))?s:""},7:function(e,t,s,o,n,r,i){return'                                <div class="perso-series-wrapper">\n                                    <div class="perso-series">\n'+(null!=(s=s.each.call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(8,n,0,r,i),inverse:e.noop,data:n}))?s:"")+"                                    </div>\n                                </div>\n"},8:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{};return'                                            <div class="perso-bar-wrapper">\n                                                <div class="perso-bar'+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(9,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'"\n                                                     pstory-category="'+e.escapeExpression("function"==typeof(l=null!=(l=s.category||(null!=t?t.category:t))?l:s.helperMissing)?l.call(c,{name:"category",hash:{},data:n}):l)+'">\n                                                </div>\n'+(null!=(a=s.if.call(c,null!=t?t.indicatorDisplay:t,{name:"if",hash:{},fn:e.program(11,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                                            </div>\n"},9:function(e,t,s,o,n){return" perso-selected"},11:function(e,t,s,o,n,r,i){var a=e.escapeExpression;return'                                                    <div class="perso-bar perso-indicator perso-indicator-type-'+a(e.lambda(null!=(i=null!=i[2]?i[2].config:i[2])?i.indicatorType:i,t))+'"\n                                                         pstory-category="'+a("function"==typeof(i=null!=(i=s.category||(null!=t?t.category:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"category",hash:{},data:n}):i)+'">\n                                                    </div>\n'},13:function(e,t,s,o,n,r,i){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.series:t,{name:"each",hash:{},fn:e.program(14,n,0,r,i),inverse:e.noop,data:n}))?s:""},14:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{};return'                                <div class="perso-bar-wrapper perso-simple-bar">\n                                <div class="perso-bar '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(15,n,0,r,i),inverse:e.program(17,n,0,r,i),data:n}))?a:"")+' pstory-category="'+e.escapeExpression("function"==typeof(l=null!=(l=s.category||(null!=t?t.category:t))?l:s.helperMissing)?l.call(c,{name:"category",hash:{},data:n}):l)+'">\n                                </div>\n'+(null!=(a=s.if.call(c,null!=t?t.indicatorDisplay:t,{name:"if",hash:{},fn:e.program(19,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                            </div>\n"},15:function(e,t,s,o,n){return'perso-selected" aria-selected="true"'},17:function(e,t,s,o,n){return'\n                                    "'},19:function(e,t,s,o,n,r,i){var a=e.escapeExpression;return'                                    <div class="perso-bar perso-indicator perso-indicator-type-'+a(e.lambda(null!=(i=null!=i[2]?i[2].config:i[2])?i.indicatorType:i,t))+'" pstory-category="'+a("function"==typeof(i=null!=(i=s.category||(null!=t?t.category:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"category",hash:{},data:n}):i)+'">\n                                    </div>\n'},21:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.indicatorLegend:t,{name:"if",hash:{},fn:e.program(22,n,0),inverse:e.noop,data:n}))?s:""},22:function(e,t,s,o,n){var r,i;return'                            <div class="perso-legend-wrapper perso-series-legend">\n                                <div class="perso-bar-chart-legend perso-indicator-type-'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.config:t)?r.indicatorType:r,t))+'"></div>\n                                <div class="perso-bar-chart-legend-txt">'+(null!=(r="function"==typeof(i=null!=(i=s.indicatorLegend||(null!=t?t.indicatorLegend:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"indicatorLegend",hash:{},data:n}):i)?r:"")+"</div>\n                            </div>\n"},24:function(e,t,s,o,n){return'                <div class="perso-month-amount is-series"></div>\n'},26:function(e,t,s,o,n){return'                <div class="perso-month-amount"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{},c=s.helperMissing,p=e.escapeExpression,d=e.lambda;return'<div class="pstory-block-frame pstory-block-bar-chart perso-pure-bar-chart '+p("function"===_typeof(a=null!=(a=s.class||(null!=t?t.class:t))?a:c)?a.call(l,{name:"class",hash:{},data:n}):a)+" perso-"+p("function"===_typeof(a=null!=(a=s.direction||(null!=t?t.direction:t))?a:c)?a.call(l,{name:"direction",hash:{},data:n}):a)+'" >\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-bar-chart">\n'+(null!=(c=e.invokePartial(o.monthPicker,t,{name:"monthPicker",data:n,indent:"                ",helpers:s,partials:o,decorators:e.decorators}))?c:"")+(null!=(c=s.unless.call(l,null!=t?t.isSeries:t,{name:"unless",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?c:"")+'                <div class="perso-tooltip-container">\n                    <div class="perso-static-tooltip perso-left-col">\n                        <div class="perso-static-tooltip-text perso-'+p(d(null!=(c=null!=t?t.staticTexts:t)?c.text1Mode:c,t))+'">'+(null!=(c=d(null!=(c=null!=t?t.staticTexts:t)?c.text1:c,t))?c:"")+'</div>\n                        <div class="perso-static-tooltip-amount"></div>\n                    </div>\n                    <div class="perso-static-tooltip perso-right-col">\n                        <div class="perso-static-tooltip-text perso-'+p(d(null!=(c=null!=t?t.staticTexts:t)?c.text2Mode:c,t))+'">'+(null!=(c=d(null!=(c=null!=t?t.staticTexts:t)?c.text2:c,t))?c:"")+'</div>\n                        <div class="perso-static-tooltip-amount"></div>\n                    </div>\n                </div>\n\n                <div class="perso-bar-chart-wrapper perso-accessibility-wrapper '+(null!=(c=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?c:"")+'" role="text">\n                    <span class="perso-accessibility-read perso-accessibility-bar-seleced-text"></span>\n                    <div class="perso-bar-chart-container">\n                    <div class="perso-bars-wrapper">\n'+(null!=(c=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(13,n,0,r,i),data:n}))?c:"")+"                    </div>\n"+(null!=(c=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(21,n,0,r,i),inverse:e.noop,data:n}))?c:"")+"                </div>\n            </div>\n"+(null!=(c=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(24,n,0,r,i),inverse:e.program(26,n,0,r,i),data:n}))?c:"")+"        </div>\n    </div>\n</div>\n</div>\n"},usePartial:!0,useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-counter-scr1"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function";return'<div id="perso-'+(null!=(r=_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:a)===l?i.call(e,{name:"id",hash:{},data:n}):i)?r:"")+'" class="pstory-block-frame perso-counter-scr1" role="text" >\n    <div class="perso-counter-container">\n        <div class="perso-counter-icon perso-'+(null!=(r=_typeof(i=null!=(i=s.iconURL||(null!=t?t.iconURL:t))?i:a)===l?i.call(e,{name:"iconURL",hash:{},data:n}):i)?r:"")+'"></div>\n        <div class="perso-counter-bar perso-'+(null!=(r=_typeof(i=null!=(i=s.class||(null!=t?t.class:t))?i:a)===l?i.call(e,{name:"class",hash:{},data:n}):i)?r:"")+'-background"></div>\n        <div class="perso-correct-answer perso-'+(null!=(r=_typeof(i=null!=(i=s.class||(null!=t?t.class:t))?i:a)===l?i.call(e,{name:"class",hash:{},data:n}):i)?r:"")+'-text">'+(null!=(r=_typeof(i=null!=(i=s.sumCounter||(null!=t?t.sumCounter:t))?i:a)===l?i.call(e,{name:"sumCounter",hash:{},data:n}):i)?r:"")+"</div>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-entity-sub-transactions"]=e.template({1:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function";return'                <div class="perso-entity-textbox'+(null!=(a=s.unless.call(c,null!=t?t.icon:t,{name:"unless",hash:{},fn:e.program(2,n,0,r,i),inverse:e.noop,data:n}))?a:"")+(null!=(a=s.unless.call(c,null!=t?t.buttonLink:t,{name:"unless",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'"\n                    data-entity-index="'+e.escapeExpression(_typeof(l=null!=(l=s.index||n&&n.index)?l:p)===d?l.call(c,{name:"index",hash:{},data:n}):l)+'">\n                    <div class="perso-entity-textbox-top-container" role="text">\n'+(null!=(a=s.if.call(c,null!=t?t.icon:t,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'                        <div class="perso-label">'+(null!=(a=_typeof(l=null!=(l=s.entityTitle||(null!=t?t.entityTitle:t))?l:p)===d?l.call(c,{name:"entityTitle",hash:{},data:n}):l)?a:"")+'</div>\n                        <div class="perso-last-payment">'+(null!=(a=_typeof(l=null!=(l=s.entityLabel1||(null!=t?t.entityLabel1:t))?l:p)===d?l.call(c,{name:"entityLabel1",hash:{},data:n}):l)?a:"")+'</div>\n                        <div class="perso-value">'+(null!=(a=_typeof(l=null!=(l=s.entityLabel2||(null!=t?t.entityLabel2:t))?l:p)===d?l.call(c,{name:"entityLabel2",hash:{},data:n}):l)?a:"")+"</div>\n                    </div>\n"+(null!=(a=s.if.call(c,null!=t?t.buttonLink:t,{name:"if",hash:{},fn:e.program(8,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                </div>\n"},2:function(e,t,s,o,n){return" perso-entity-textbox-without-image"},4:function(e,t,s,o,n){return" perso-without-button"},6:function(e,t,s,o,n){var r,i=e.lambda;return'                        <img class="perso-entity-textbox-image perso-asset-loading" src="'+(null!=(r=i((r=n&&n.root)&&r.baseUrl,t))?r:"")+"/"+(null!=(r=i((r=n&&n.root)&&r.assetDirectory,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||s.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.icon:t,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=i((r=n&&n.root)&&r.assetExtension,t))?r:"")+'">\n'},8:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function";return'                    <div class="perso-button-wrapper">\n                        <a id="'+(null!=(a=_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)?a:"")+'" class="pstory-link-navigateTo pstory-button perso-ripple-closed" action-id="'+(null!=(a=_typeof(l=null!=(l=s.action||(null!=t?t.action:t))?l:p)===d?l.call(c,{name:"action",hash:{},data:n}):l)?a:"")+'"\n                            role="button" tabindex="0" aria-label="'+e.escapeExpression(e.lambda(null!=(a=null!=i[1]?i[1].texts:i[1])?a.doubleTabButton:a,t))+'">'+(null!=(a=_typeof(l=null!=(l=s.buttonLabel||(null!=t?t.buttonLabel:t))?l:p)===d?l.call(c,{name:"buttonLabel",hash:{},data:n}):l)?a:"")+"</a>\n                    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-entity-sub-transactions pstory-block-entity-sub-transactions-el1">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="perso-entity-textboxes-wrapper '+e.escapeExpression("function"==typeof(a=null!=(a=s.class||(null!=t?t.class:t))?a:s.helperMissing)?a.call(l,{name:"class",hash:{},data:n}):a)+'">\n'+(null!=(a=s.each.call(l,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"            </div>\n        </div>\n    </div>\n</div>"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-entity-selector-icons-es1"]=e.template({1:function(e,t,s,o,n,r,i){var a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function",p=e.escapeExpression,d=e.lambda;return'<li class="perso-item perso-ES1-icon pstory-button perso-carousel-item pstory-entity-selector-item '+(null!=(r=s.if.call(a,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(2,n,0,r,i),inverse:e.noop,data:n}))?r:"")+" pstory-entity-"+p(_typeof(e=null!=(e=s.icon||(null!=t?t.icon:t))?e:l)===c?e.call(a,{name:"icon",hash:{},data:n}):e)+'"\n    action-id="'+p(_typeof(e=null!=(e=s.action||(null!=t?t.action:t))?e:l)===c?e.call(a,{name:"action",hash:{},data:n}):e)+'" pstory-id="'+p(_typeof(e=null!=(e=s.id||(null!=t?t.id:t))?e:l)===c?e.call(a,{name:"id",hash:{},data:n}):e)+'">\n    <div class="pstory-entity-icon perso-accessibility-item">\n        <img class="entity-img perso-asset-loading" src="'+p(d(null!=i[1]?i[1].baseUrl:i[1],t))+"/"+(null!=(r=d(null!=i[1]?i[1].assetDirectory:i[1],t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||l).call(a,null!=t?t.icon:t,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=d(null!=i[1]?i[1].assetExtension:i[1],t))?r:"")+'">\n    </div>\n</li>\n'},2:function(e,t,s,o,n){return"perso-selected"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?s:""},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-entity-selector-cards-es1"]=e.template({1:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression,h=e.lambda;return'<li class="perso-item perso-card perso-ES1-card pstory-button perso-carousel-item pstory-entity-selector-item '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(2,n,0,r,i),inverse:e.noop,data:n}))?a:"")+" pstory-entity-"+u(_typeof(l=null!=(l=s.icon||(null!=t?t.icon:t))?l:p)===d?l.call(c,{name:"icon",hash:{},data:n}):l)+'"\n    action-id="'+u(_typeof(l=null!=(l=s.action||(null!=t?t.action:t))?l:p)===d?l.call(c,{name:"action",hash:{},data:n}):l)+'" pstory-id="'+u(_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)+'">\n    <div class="entity-container perso-accessibility-item">\n        <div class="pstory-entity-icon">\n            <img class="entity-img perso-asset-loading" src="'+u(h(null!=i[1]?i[1].baseUrl:i[1],t))+"/"+(null!=(a=h(null!=i[1]?i[1].assetDirectory:i[1],t))?a:"")+"/"+(null!=(a=(s.toLowerCase||t&&t.toLowerCase||p).call(c,null!=t?t.icon:t,{name:"toLowerCase",hash:{},data:n}))?a:"")+"."+(null!=(a=h(null!=i[1]?i[1].assetExtension:i[1],t))?a:"")+'">\n        </div>\n        <div class="entity-card-details">\n            '+(null!=(a=s.if.call(c,null!=t?t.text2:t,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n            <div class="entity-center-text">\n                '+(null!=(a=s.if.call(c,null!=t?t.text:t,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"\n                "+(null!=(a=s.if.call(c,null!=t?t.text3:t,{name:"if",hash:{},fn:e.program(8,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"\n            </div>\n            "+(null!=(a=s.if.call(c,null!=t?t.text4:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n        </div>\n    </div>\n    <div class="entity-spending-percentage">\n        <div class="spending-percentage-filler"></div>\n    </div>\n</li>\n'},2:function(e,t,s,o,n){return"perso-selected"},4:function(e,t,s,o,n){var r;return'<div class="entity-text2">'+(null!=(s="function"==typeof(r=null!=(r=s.text2||(null!=t?t.text2:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"text2",hash:{},data:n}):r)?s:"")+"</div>"},6:function(e,t,s,o,n){var r;return'<div class="entity-text">'+(null!=(s="function"==typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"text",hash:{},data:n}):r)?s:"")+"</div>"},8:function(e,t,s,o,n){var r;return'<div class="entity-text3">'+(null!=(s="function"==typeof(r=null!=(r=s.text3||(null!=t?t.text3:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"text3",hash:{},data:n}):r)?s:"")+"</div>"},10:function(e,t,s,o,n){var r;return'<div class="entity-text4">'+(null!=(s="function"==typeof(r=null!=(r=s.text4||(null!=t?t.text4:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"text4",hash:{},data:n}):r)?s:"")+"</div>"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?s:""},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-filter-fl1"]=e.template({1:function(e,t,s,o,n){var r;return'                <div class="pstory-block-tooltip-container">\n                    <div class="pstory-block-tooltip-icon" role="button" tabindex="0">\n                        <div class="pstory-block-tooltip-text-container">\n                            <div class="pstory-block-tooltip-text">\n                                '+(null!=(s="function"==typeof(r=null!=(r=s.tooltipText||(null!=t?t.tooltipText:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"tooltipText",hash:{},data:n}):r)?s:"")+"\n                            </div>\n                        </div>\n                    </div>\n                </div>\n"},3:function(e,t,s,o,n){return'                <div class="perso-block-filter-toggle-container">\n                    <label class="perso-block-filter-switch">\n                        <input type="checkbox" class="perso-block-filter-checkbox" '+(null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.toggleDefault:t,{name:"if",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?s:"")+'>\n                        <div class="perso-block-filter-toggle" tabindex="0" role="button"></div>\n                    </label>\n                </div>\n'},4:function(e,t,s,o,n){return"checked"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-filter pstory-block-filter-fl1" >\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(r=s.if.call(a,null!=t?t.tooltipText:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'            <div class="pstory-block-filter-text" role="text">'+(null!=(r="function"==typeof(i=null!=(i=s.text||(null!=t?t.text:t))?i:s.helperMissing)?i.call(a,{name:"text",hash:{},data:n}):i)?r:"")+"</div>\n"+(null!=(r=s.if.call(a,null!=t?t.showToggle:t,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+"        </div>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-line-chart-lc1"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="pstory-block-frame pstory-block-line-chart pstory-block-line-chart-lc1">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" tabindex="-1">\n            <div class="pstory-line-chart">\n                <div class="perso-fixed-tooltip">\n                    <span class="perso-tooltip-text perso-line-chart-amount"></span>\n                    <span class="perso-tooltip-text perso-line-chart-month"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-pie-chart-PC1"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="pstory-block-frame pstory-block-pie-chart" >\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-pie-chart"></div>\n            <div class="pstory-pie-data">\n                <input type="button" class="pstory-arrow pstory-next-arrow"/>\n                <div class="pstory-pie-info perso-accessibility-wrapper">\n                </div>\n                <input type="button" class="pstory-arrow pstory-previous-arrow"/>\n            </div>\n        </div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-tb1"]=e.template({1:function(e,t,s,o,n){return"perso-triple"},3:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",c=e.escapeExpression;return'                        <li  class="pstory-tab '+(null!=(r=s.if.call(i,null!=t?t.isDesktopMode:t,{name:"if",hash:{},fn:e.program(4,n,0),inverse:e.program(6,n,0),data:n}))?r:"")+" "+(null!=(r=s.if.call(i,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?r:"")+'" aria-selected="'+c(_typeof(e=null!=(e=s.selected||(null!=t?t.selected:t))?e:a)===l?e.call(i,{name:"selected",hash:{},data:n}):e)+'" role="tab" tabindex="'+c(_typeof(e=null!=(e=s.index||n&&n.index)?e:a)===l?e.call(i,{name:"index",hash:{},data:n}):e)+'" pstory-id="'+c(_typeof(e=null!=(e=s.id||(null!=t?t.id:t))?e:a)===l?e.call(i,{name:"id",hash:{},data:n}):e)+'">'+(null!=(r=_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:a)===l?e.call(i,{name:"text",hash:{},data:n}):e)?r:"")+"</li>\n"},4:function(e,t,s,o,n){return"pstory-button"},6:function(e,t,s,o,n){return"pstory-button pstory-header-button"},8:function(e,t,s,o,n){return"perso-selected"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l=e.escapeExpression;return'<div id="pstory-block-tabs_'+l("function"===_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)?r.call(i,{name:"id",hash:{},data:n}):r)+'" class="pstory-block-frame pstory-block-tabs perso-tb1 '+l("function"===_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)?r.call(i,{name:"class",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" tabindex="-1">\n            <div class="perso-header-container '+(null!=(l=s.if.call(i,(s.math||t&&t.math||a).call(i,null!=(l=null!=t?t.options:t)?l.length:l,"==",3,{name:"math",hash:{},data:n}),{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?l:"")+'">\n                <div class="pstory-tab-animated-border-bottom"></div>\n                <ul class="perso-tablist" role="tablist">\n'+(null!=(l=s.each.call(i,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?l:"")+"                </ul>\n            </div>\n        </div>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-textboxes-bx1"]=e.template({1:function(e,t,s,o,n){return"perso-with-image"},3:function(e,t,s,o,n,r,i){var a,t=null!=t?t:e.nullContext||{};return(null!=(a=s.if.call(t,null!=(a=null!=i[1]?i[1].config:i[1])?a.renderBoxIcons:a,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.program(6,n,0,r,i),data:n}))?a:"")+(null!=(a=s.unless.call(t,n&&n.last,{name:"unless",hash:{},fn:e.program(8,n,0,r,i),inverse:e.noop,data:n}))?a:"")},4:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.lambda;return'                        <div class="perso-textbox-bx1 perso-textbox-bx1-with-image perso-box-'+(null!=(a=_typeof(l=null!=(l=s.index||n&&n.index)?l:p)===d?l.call(c,{name:"index",hash:{},data:n}):l)?a:"")+'" role="text">\n                            <img class="perso-textbox-bx1-image perso-asset-loading" src="'+e.escapeExpression(u(null!=i[1]?i[1].baseUrl:i[1],t))+"/"+(null!=(a=u(null!=i[1]?i[1].assetDirectory:i[1],t))?a:"")+"/"+(null!=(a=(s.toLowerCase||t&&t.toLowerCase||p).call(c,null!=t?t.image:t,{name:"toLowerCase",hash:{},data:n}))?a:"")+"."+(null!=(a=u(null!=i[1]?i[1].assetExtension:i[1],t))?a:"")+'">\n                            <div class="perso-value">'+(null!=(a=_typeof(l=null!=(l=s.value||(null!=t?t.value:t))?l:p)===d?l.call(c,{name:"value",hash:{},data:n}):l)?a:"")+'</div>\n                            <div class="perso-label">'+(null!=(a=_typeof(l=null!=(l=s.label||(null!=t?t.label:t))?l:p)===d?l.call(c,{name:"label",hash:{},data:n}):l)?a:"")+"</div>\n                        </div>\n"},6:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function";return'                        <div class="perso-textbox-bx1 perso-box-'+(null!=(r=_typeof(i=null!=(i=s.index||n&&n.index)?i:a)===l?i.call(e,{name:"index",hash:{},data:n}):i)?r:"")+'" role="text">\n                            <div class="perso-value">'+(null!=(r=_typeof(i=null!=(i=s.value||(null!=t?t.value:t))?i:a)===l?i.call(e,{name:"value",hash:{},data:n}):i)?r:"")+'</div>\n                            <div class="perso-label">'+(null!=(r=_typeof(i=null!=(i=s.label||(null!=t?t.label:t))?i:a)===l?i.call(e,{name:"label",hash:{},data:n}):i)?r:"")+"</div>\n                        </div>\n"},8:function(e,t,s,o,n){return'                        <div class="perso-textbox-bx1-separator"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-textboxes-bx1 '+e.escapeExpression("function"==typeof(a=null!=(a=s.class||(null!=t?t.class:t))?a:s.helperMissing)?a.call(l,{name:"class",hash:{},data:n}):a)+'" >\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="perso-textboxes-bx1-wrapper '+(null!=(a=s.if.call(l,null!=(a=null!=t?t.config:t)?a.renderBoxIcons:a,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'" role="presentation">\n'+(null!=(a=s.each.call(l,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(3,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"            </div>\n        </div>\n    </div>\n</div>\n"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-tl1-amountComment"]=e.template({1:function(e,t,s,o,n){return"perso-transaction-enrichment"},3:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression;return'                <div class="perso-table-row-wrapper" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'>\n                    <div id="perso-table-row-'+u(_typeof(l=null!=(l=s.txId||(null!=t?t.txId:t))?l:p)===d?l.call(c,{name:"txId",hash:{},data:n}):l)+'" class="perso-tx-container" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n}))?a:"")+'>\n                        <div class="perso-tx-col perso-tx-col-icon perso-tx-col-with-'+(null!=(a=_typeof(l=null!=(l=s.txIcon||(null!=t?t.txIcon:t))?l:p)===d?l.call(c,{name:"txIcon",hash:{},data:n}):l)?a:"")+'">\n                            <img class="perso-tx-icon perso-asset-loading" src="'+u(e.lambda(null!=i[1]?i[1].baseUrl:i[1],t))+"/"+(null!=(a=_typeof(l=null!=(l=s.txAssetType||(null!=t?t.txAssetType:t))?l:p)===d?l.call(c,{name:"txAssetType",hash:{},data:n}):l)?a:"")+"/"+u((s.toLowerCase||t&&t.toLowerCase||p).call(c,null!=t?t.txIcon:t,{name:"toLowerCase",hash:{},data:n}))+"."+(null!=(a=_typeof(l=null!=(l=s.txIconExtension||(null!=t?t.txIconExtension:t))?l:p)===d?l.call(c,{name:"txIconExtension",hash:{},data:n}):l)?a:"")+'" data-asset-index="'+(null!=(a=_typeof(l=null!=(l=s.index||n&&n.index)?l:p)===d?l.call(c,{name:"index",hash:{},data:n}):l)?a:"")+'"/>\n                        </div>\n                        <div class="perso-tx-info-container">\n                            <div class="perso-tx-col perso-tx-col-description">\n                                <div class="perso-tx-top-row">\n                                    <div class="perso-tx-name">'+(null!=(a=_typeof(l=null!=(l=s.txName||(null!=t?t.txName:t))?l:p)===d?l.call(c,{name:"txName",hash:{},data:n}):l)?a:"")+'</div>\n                                </div>\n                                <div class="perso-tx-middle-row">\n                                    <div class="perso-tx-date">'+(null!=(a=_typeof(l=null!=(l=s.txDate||(null!=t?t.txDate:t))?l:p)===d?l.call(c,{name:"txDate",hash:{},data:n}):l)?a:"")+"</div>\n"+(null!=(a=s.if.call(c,null!=t?t.txShowAccount:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                                </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.displayUserTag:a,{name:"if",hash:{},fn:e.program(12,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'                            </div>\n                            <div class="perso-tx-col perso-tx-amount-col">\n                                <span  '+(null!=(a=s.if.call(c,null!=t?t.txShowAmountColors:t,{name:"if",hash:{},fn:e.program(15,n,0,r,i),inverse:e.program(17,n,0,r,i),data:n}))?a:"")+">"+(null!=(a=_typeof(l=null!=(l=s.txAmount||(null!=t?t.txAmount:t))?l:p)===d?l.call(c,{name:"txAmount",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=t?t.displayInstallment:t,{name:"if",hash:{},fn:e.program(19,n,0,r,i),inverse:e.program(24,n,0,r,i),data:n}))?a:"")+"                            </div>\n                        </div>\n                    </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(26,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                </div>\n"},4:function(e,t,s,o,n){var r;return'data-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.txId||(null!=t?t.txId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txId",hash:{},data:n}):r)+'"'},6:function(e,t,s,o,n){return' tabindex="0" role="button"'},8:function(e,t,s,o,n){return'role="text"'},10:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'                                        <span class="perso-separator">'+(null!=(r="function"===_typeof(i=null!=(i=s.txSeparator||(null!=t?t.txSeparator:t))?i:a)?i.call(e,{name:"txSeparator",hash:{},data:n}):i)?r:"")+'</span><span class="perso-tx-account-name">'+(null!=(r="function"===_typeof(i=null!=(i=s.txAccountName||(null!=t?t.txAccountName:t))?i:a)?i.call(e,{name:"txAccountName",hash:{},data:n}):i)?r:"")+"</span>\n"},12:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.txTag:t,{name:"if",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?s:""},13:function(e,t,s,o,n){var r;return'                                        <div class="perso-tx-bottom-row">\n                                            <div class="perso-tx-tag-container">\n                                                <div class="perso-tx-tag-icon"></div>\n                                                <div class="perso-tx-tag perso-accessibility-no-read">'+(null!=(s="function"==typeof(r=null!=(r=s.txTag||(null!=t?t.txTag:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txTag",hash:{},data:n}):r)?s:"")+"</div>\n                                            </div>\n                                        </div>\n"},15:function(e,t,s,o,n){var r;return' class="perso-tx-amount perso-'+e.escapeExpression("function"==typeof(r=null!=(r=s.txMode||(null!=t?t.txMode:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txMode",hash:{},data:n}):r)+'"'},17:function(e,t,s,o,n){return' class="perso-tx-amount"'},19:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing;return'                                    <div class="perso-tx-installment-comment">\n'+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.paymentTxt:a,{name:"if",hash:{},fn:e.program(20,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                        <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txInstallmentNumber||(null!=t?t.txInstallmentNumber:t))?l:p)?l.call(c,{name:"txInstallmentNumber",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.outOfTxt:a,{name:"if",hash:{},fn:e.program(22,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                        <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txTotalInstallments||(null!=t?t.txTotalInstallments:t))?l:p)?l.call(c,{name:"txTotalInstallments",hash:{},data:n}):l)?a:"")+"</span>\n                                    </div>\n                                "},20:function(e,t,s,o,n,r,i){return'                                            <span class="perso-payment-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.paymentTxt:e,t))?e:"")+"</span>"},22:function(e,t,s,o,n,r,i){return'                                            <span class="perso-out-of-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.outOfTxt:e,t))?e:"")+"</span>"},24:function(e,t,s,o,n){var r;return'<span class="perso-tx-amount-comment">'+(null!=(s="function"==typeof(r=null!=(r=s.txAmountComment||(null!=t?t.txAmountComment:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txAmountComment",hash:{},data:n}):r)?s:"")+"</span>\n"},26:function(e,t,s,o,n){return'                        <div class="perso-tx-col perso-tx-col-enrichment">\n                            <div class="perso-tx-enrichment-btn"></div>\n                        </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-table perso-tl1 perso-tl1-'+(null!=(a="function"==typeof(a=null!=(a=s.subType||(null!=t?t.subType:t))?a:s.helperMissing)?a.call(l,{name:"subType",hash:{},data:n}):a)?a:"")+" "+(null!=(a=s.if.call(l,null!=t?t.transactionEnrichment:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(a=s.each.call(l,null!=t?t.tableObject:t,{name:"each",hash:{},fn:e.program(3,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"        </div>\n    </div>\n</div>"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-tl1-basic"]=e.template({1:function(e,t,s,o,n){return"perso-transaction-enrichment"},3:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression;return'                <div class="perso-table-row-wrapper" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'>\n                    <div id="perso-table-row-'+u(_typeof(l=null!=(l=s.txId||(null!=t?t.txId:t))?l:p)===d?l.call(c,{name:"txId",hash:{},data:n}):l)+'" class="perso-tx-container"  '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n}))?a:"")+'>\n                        <div class="perso-tx-col perso-tx-col-icon perso-tx-col-with-'+(null!=(a=_typeof(l=null!=(l=s.txIcon||(null!=t?t.txIcon:t))?l:p)===d?l.call(c,{name:"txIcon",hash:{},data:n}):l)?a:"")+'">\n                            <img class="perso-tx-icon perso-asset-loading" src="'+u(e.lambda(null!=i[1]?i[1].baseUrl:i[1],t))+"/"+(null!=(a=_typeof(l=null!=(l=s.txAssetType||(null!=t?t.txAssetType:t))?l:p)===d?l.call(c,{name:"txAssetType",hash:{},data:n}):l)?a:"")+"/"+u((s.toLowerCase||t&&t.toLowerCase||p).call(c,null!=t?t.txIcon:t,{name:"toLowerCase",hash:{},data:n}))+"."+(null!=(a=_typeof(l=null!=(l=s.txIconExtension||(null!=t?t.txIconExtension:t))?l:p)===d?l.call(c,{name:"txIconExtension",hash:{},data:n}):l)?a:"")+'" data-asset-index="'+(null!=(a=_typeof(l=null!=(l=s.index||n&&n.index)?l:p)===d?l.call(c,{name:"index",hash:{},data:n}):l)?a:"")+'"/>\n                        </div>\n                        <div class="perso-tx-info-container">\n                            <div class="perso-tx-col perso-tx-col-description">\n                                <div class="perso-tx-top-row">\n                                    <div class="perso-tx-name">'+(null!=(a=_typeof(l=null!=(l=s.txName||(null!=t?t.txName:t))?l:p)===d?l.call(c,{name:"txName",hash:{},data:n}):l)?a:"")+'</div>\n                                </div>\n                                <div class="perso-tx-middle-row">\n                                    <div class="perso-tx-date">'+(null!=(a=_typeof(l=null!=(l=s.txDate||(null!=t?t.txDate:t))?l:p)===d?l.call(c,{name:"txDate",hash:{},data:n}):l)?a:"")+"</div>\n"+(null!=(a=s.if.call(c,null!=t?t.txShowAccount:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                                </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.displayUserTag:a,{name:"if",hash:{},fn:e.program(12,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'                            </div>\n                            <div class="perso-tx-col perso-tx-col-amount">\n                                <span  '+(null!=(a=s.if.call(c,null!=t?t.txShowAmountColors:t,{name:"if",hash:{},fn:e.program(15,n,0,r,i),inverse:e.program(17,n,0,r,i),data:n}))?a:"")+">"+(null!=(a=_typeof(l=null!=(l=s.txAmount||(null!=t?t.txAmount:t))?l:p)===d?l.call(c,{name:"txAmount",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=t?t.displayInstallment:t,{name:"if",hash:{},fn:e.program(19,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                            </div>\n                        </div>\n                    </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(24,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                </div>\n"},4:function(e,t,s,o,n){var r;return'data-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.txId||(null!=t?t.txId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txId",hash:{},data:n}):r)+'"'},6:function(e,t,s,o,n){return' tabindex="0" role="button"'},8:function(e,t,s,o,n){return'role="text"'},10:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'                                        <span class="perso-separator">'+(null!=(r="function"===_typeof(i=null!=(i=s.txSeparator||(null!=t?t.txSeparator:t))?i:a)?i.call(e,{name:"txSeparator",hash:{},data:n}):i)?r:"")+'</span><span class="perso-tx-account-name">'+(null!=(r="function"===_typeof(i=null!=(i=s.txAccountName||(null!=t?t.txAccountName:t))?i:a)?i.call(e,{name:"txAccountName",hash:{},data:n}):i)?r:"")+"</span>\n"},12:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.txTag:t,{name:"if",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?s:""},13:function(e,t,s,o,n){var r;return'                                        <div class="perso-tx-bottom-row">\n                                            <div class="perso-tx-tag-container">\n                                                <div class="perso-tx-tag-icon"></div>\n                                                <div class="perso-tx-tag perso-accessibility-no-read">'+(null!=(s="function"==typeof(r=null!=(r=s.txTag||(null!=t?t.txTag:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txTag",hash:{},data:n}):r)?s:"")+"</div>\n                                            </div>\n                                        </div>\n"},15:function(e,t,s,o,n){var r;return' class="perso-tx-amount perso-'+e.escapeExpression("function"==typeof(r=null!=(r=s.txMode||(null!=t?t.txMode:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txMode",hash:{},data:n}):r)+'"'},17:function(e,t,s,o,n){return' class="perso-tx-amount"'},19:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing;return'                                    <div class="perso-tx-installment-comment">\n'+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.paymentTxt:a,{name:"if",hash:{},fn:e.program(20,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                        <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txInstallmentNumber||(null!=t?t.txInstallmentNumber:t))?l:p)?l.call(c,{name:"txInstallmentNumber",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.outOfTxt:a,{name:"if",hash:{},fn:e.program(22,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                        <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txTotalInstallments||(null!=t?t.txTotalInstallments:t))?l:p)?l.call(c,{name:"txTotalInstallments",hash:{},data:n}):l)?a:"")+"</span>\n                                    </div>\n"},20:function(e,t,s,o,n,r,i){return'                                            <span class="perso-payment-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.paymentTxt:e,t))?e:"")+"</span>"},22:function(e,t,s,o,n,r,i){return'                                            <span class="perso-out-of-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.outOfTxt:e,t))?e:"")+"</span>"},24:function(e,t,s,o,n){return'                        <div class="perso-tx-col perso-tx-col-enrichment">\n                            <div class="perso-tx-enrichment-btn"></div>\n                        </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-table perso-tl1 pero-tl1-'+(null!=(a="function"==typeof(a=null!=(a=s.subType||(null!=t?t.subType:t))?a:s.helperMissing)?a.call(l,{name:"subType",hash:{},data:n}):a)?a:"")+" "+(null!=(a=s.if.call(l,null!=t?t.transactionEnrichment:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(a=s.each.call(l,null!=t?t.tableObject:t,{name:"each",hash:{},fn:e.program(3,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"        </div>\n    </div>\n</div>"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-tl1-dateAndAmountComment"]=e.template({1:function(e,t,s,o,n){return"perso-transaction-enrichment"},3:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression;return'                <div class="perso-table-row-wrapper" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'>\n                    <div id="perso-table-row-'+u(_typeof(l=null!=(l=s.txId||(null!=t?t.txId:t))?l:p)===d?l.call(c,{name:"txId",hash:{},data:n}):l)+'" class="perso-tx-container" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n}))?a:"")+'>\n                        <div class="perso-tx-col perso-tx-col-icon perso-tx-col-with-'+(null!=(a=_typeof(l=null!=(l=s.txIcon||(null!=t?t.txIcon:t))?l:p)===d?l.call(c,{name:"txIcon",hash:{},data:n}):l)?a:"")+'">\n                            <img class="perso-tx-icon perso-asset-loading"\n                                 src="'+u(e.lambda(null!=i[1]?i[1].baseUrl:i[1],t))+"/"+(null!=(a=_typeof(l=null!=(l=s.txAssetType||(null!=t?t.txAssetType:t))?l:p)===d?l.call(c,{name:"txAssetType",hash:{},data:n}):l)?a:"")+"/"+u((s.toLowerCase||t&&t.toLowerCase||p).call(c,null!=t?t.txIcon:t,{name:"toLowerCase",hash:{},data:n}))+"."+(null!=(a=_typeof(l=null!=(l=s.txIconExtension||(null!=t?t.txIconExtension:t))?l:p)===d?l.call(c,{name:"txIconExtension",hash:{},data:n}):l)?a:"")+'"\n                                 data-asset-index="'+(null!=(a=_typeof(l=null!=(l=s.index||n&&n.index)?l:p)===d?l.call(c,{name:"index",hash:{},data:n}):l)?a:"")+'"/>\n                        </div>\n                        <div class="perso-tx-info-container">\n                            <div class="perso-tx-col perso-tx-col-description">\n                                <div class="perso-tx-top-row">\n                                    <div class="perso-tx-name">'+(null!=(a=_typeof(l=null!=(l=s.txName||(null!=t?t.txName:t))?l:p)===d?l.call(c,{name:"txName",hash:{},data:n}):l)?a:"")+'</div>\n                                </div>\n                                <div class="perso-tx-middle-row">\n                                    <div class="perso-tx-date">'+(null!=(a=_typeof(l=null!=(l=s.txDate||(null!=t?t.txDate:t))?l:p)===d?l.call(c,{name:"txDate",hash:{},data:n}):l)?a:"")+"</div>\n"+(null!=(a=s.if.call(c,null!=t?t.txShowAccount:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'                                </div>\n                                <div class="perso-tx-bottom-row">\n                                    <div class="perso-tx-date-comment">'+(null!=(a=_typeof(l=null!=(l=s.txDateComment||(null!=t?t.txDateComment:t))?l:p)===d?l.call(c,{name:"txDateComment",hash:{},data:n}):l)?a:"")+"</div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.displayUserTag:a,{name:"if",hash:{},fn:e.program(12,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'                                </div>\n                            </div>\n                            <div class="perso-tx-col perso-tx-amount-col">\n                                <span  '+(null!=(a=s.if.call(c,null!=t?t.txShowAmountColors:t,{name:"if",hash:{},fn:e.program(15,n,0,r,i),inverse:e.program(17,n,0,r,i),data:n}))?a:"")+">"+(null!=(a=_typeof(l=null!=(l=s.txAmount||(null!=t?t.txAmount:t))?l:p)===d?l.call(c,{name:"txAmount",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=t?t.displayInstallment:t,{name:"if",hash:{},fn:e.program(19,n,0,r,i),inverse:e.program(24,n,0,r,i),data:n}))?a:"")+"                            </div>\n                        </div>\n                    </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(26,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                </div>\n"},4:function(e,t,s,o,n){var r;return'data-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.txId||(null!=t?t.txId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txId",hash:{},data:n}):r)+'"'},6:function(e,t,s,o,n){return' tabindex="0" role="button"'},8:function(e,t,s,o,n){return'role="text"'},10:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'                                        <span class="perso-separator">'+(null!=(r="function"===_typeof(i=null!=(i=s.txSeparator||(null!=t?t.txSeparator:t))?i:a)?i.call(e,{name:"txSeparator",hash:{},data:n}):i)?r:"")+'</span><span\n                                            class="perso-tx-account-name">'+(null!=(r="function"===_typeof(i=null!=(i=s.txAccountName||(null!=t?t.txAccountName:t))?i:a)?i.call(e,{name:"txAccountName",hash:{},data:n}):i)?r:"")+"</span>\n"},12:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.txTag:t,{name:"if",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?s:""},13:function(e,t,s,o,n){var r;return'                                            <div class="perso-tx-bottom-row">\n                                                <div class="perso-tx-tag-container">\n                                                    <div class="perso-tx-tag-icon"></div>\n                                                    <div class="perso-tx-tag perso-accessibility-no-read">'+(null!=(s="function"==typeof(r=null!=(r=s.txTag||(null!=t?t.txTag:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txTag",hash:{},data:n}):r)?s:"")+"</div>\n                                                </div>\n                                            </div>\n"},15:function(e,t,s,o,n){var r;return'\n                                class="perso-tx-amount perso-'+e.escapeExpression("function"==typeof(r=null!=(r=s.txMode||(null!=t?t.txMode:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txMode",hash:{},data:n}):r)+'"'},17:function(e,t,s,o,n){return'\n                                class="perso-tx-amount"'},19:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing;return'                                    <div class="perso-tx-installment-comment">\n'+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.paymentTxt:a,{name:"if",hash:{},fn:e.program(20,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                        <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txInstallmentNumber||(null!=t?t.txInstallmentNumber:t))?l:p)?l.call(c,{name:"txInstallmentNumber",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.outOfTxt:a,{name:"if",hash:{},fn:e.program(22,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                        <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txTotalInstallments||(null!=t?t.txTotalInstallments:t))?l:p)?l.call(c,{name:"txTotalInstallments",hash:{},data:n}):l)?a:"")+"</span>\n                                    </div>\n                                "},20:function(e,t,s,o,n,r,i){return'                                            <span class="perso-payment-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.paymentTxt:e,t))?e:"")+"</span>"},22:function(e,t,s,o,n,r,i){return'                                            <span class="perso-out-of-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.outOfTxt:e,t))?e:"")+"</span>"},24:function(e,t,s,o,n){var r;return'<span class="perso-tx-amount-comment">'+(null!=(s="function"==typeof(r=null!=(r=s.txAmountComment||(null!=t?t.txAmountComment:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txAmountComment",hash:{},data:n}):r)?s:"")+"</span>\n"},26:function(e,t,s,o,n){return'                        <div class="perso-tx-col perso-tx-col-enrichment">\n                            <div class="perso-tx-enrichment-btn"></div>\n                        </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-table perso-tl1 perso-tl1-'+(null!=(a="function"==typeof(a=null!=(a=s.subType||(null!=t?t.subType:t))?a:s.helperMissing)?a.call(l,{name:"subType",hash:{},data:n}):a)?a:"")+" "+(null!=(a=s.if.call(l,null!=t?t.transactionEnrichment:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(a=s.each.call(l,null!=t?t.tableObject:t,{name:"each",hash:{},fn:e.program(3,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"        </div>\n    </div>\n</div>"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-tl1-dateComment"]=e.template({1:function(e,t,s,o,n){return"perso-transaction-enrichment"},3:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression;return'                <div class="perso-table-row-wrapper" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'>\n                    <div id="perso-table-row-'+u(_typeof(l=null!=(l=s.txId||(null!=t?t.txId:t))?l:p)===d?l.call(c,{name:"txId",hash:{},data:n}):l)+'" class="perso-tx-container" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n}))?a:"")+'>\n                        <div class="perso-tx-col perso-tx-col-icon perso-tx-col-with-'+(null!=(a=_typeof(l=null!=(l=s.txIcon||(null!=t?t.txIcon:t))?l:p)===d?l.call(c,{name:"txIcon",hash:{},data:n}):l)?a:"")+'">\n                            <img class="perso-tx-icon perso-asset-loading" src="'+u(e.lambda(null!=i[1]?i[1].baseUrl:i[1],t))+"/"+(null!=(a=_typeof(l=null!=(l=s.txAssetType||(null!=t?t.txAssetType:t))?l:p)===d?l.call(c,{name:"txAssetType",hash:{},data:n}):l)?a:"")+"/"+u((s.toLowerCase||t&&t.toLowerCase||p).call(c,null!=t?t.txIcon:t,{name:"toLowerCase",hash:{},data:n}))+"."+(null!=(a=_typeof(l=null!=(l=s.txIconExtension||(null!=t?t.txIconExtension:t))?l:p)===d?l.call(c,{name:"txIconExtension",hash:{},data:n}):l)?a:"")+'" data-asset-index="'+(null!=(a=_typeof(l=null!=(l=s.index||n&&n.index)?l:p)===d?l.call(c,{name:"index",hash:{},data:n}):l)?a:"")+'"/>\n                        </div>\n                        <div class="perso-tx-info-container">\n                            <div class="perso-tx-col perso-tx-col-description">\n                                <div class="perso-tx-top-row">\n                                    <div class="perso-tx-name">'+(null!=(a=_typeof(l=null!=(l=s.txName||(null!=t?t.txName:t))?l:p)===d?l.call(c,{name:"txName",hash:{},data:n}):l)?a:"")+'</div>\n                                </div>\n                                <div class="perso-tx-middle-row">\n                                    <div class="perso-tx-date">'+(null!=(a=_typeof(l=null!=(l=s.txDate||(null!=t?t.txDate:t))?l:p)===d?l.call(c,{name:"txDate",hash:{},data:n}):l)?a:"")+"</div>\n"+(null!=(a=s.if.call(c,null!=t?t.txShowAccount:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'                                </div>\n                                <div class="perso-tx-bottom-row">\n                                    <div class="perso-tx-date-comment">'+(null!=(a=_typeof(l=null!=(l=s.txDateComment||(null!=t?t.txDateComment:t))?l:p)===d?l.call(c,{name:"txDateComment",hash:{},data:n}):l)?a:"")+"</div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.displayUserTag:a,{name:"if",hash:{},fn:e.program(12,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'                                </div>\n                            </div>\n                            <div class="perso-tx-col perso-tx-col-amount">\n                                <span  '+(null!=(a=s.if.call(c,null!=t?t.txShowAmountColors:t,{name:"if",hash:{},fn:e.program(15,n,0,r,i),inverse:e.program(17,n,0,r,i),data:n}))?a:"")+">"+(null!=(a=_typeof(l=null!=(l=s.txAmount||(null!=t?t.txAmount:t))?l:p)===d?l.call(c,{name:"txAmount",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=t?t.displayInstallment:t,{name:"if",hash:{},fn:e.program(19,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                            </div>\n                        </div>\n                    </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(24,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                </div>\n"},4:function(e,t,s,o,n){var r;return'data-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.txId||(null!=t?t.txId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txId",hash:{},data:n}):r)+'"'},6:function(e,t,s,o,n){return' tabindex="0" role="button"'},8:function(e,t,s,o,n){return'role="text"'},10:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'                                        <span class="perso-separator">'+(null!=(r="function"===_typeof(i=null!=(i=s.txSeparator||(null!=t?t.txSeparator:t))?i:a)?i.call(e,{name:"txSeparator",hash:{},data:n}):i)?r:"")+'</span><span class="perso-tx-account-name">'+(null!=(r="function"===_typeof(i=null!=(i=s.txAccountName||(null!=t?t.txAccountName:t))?i:a)?i.call(e,{name:"txAccountName",hash:{},data:n}):i)?r:"")+"</span>\n"},12:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.txTag:t,{name:"if",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?s:""},13:function(e,t,s,o,n){var r;return'                                            <div class="perso-tx-bottom-row">\n                                                <div class="perso-tx-tag-container">\n                                                    <div class="perso-tx-tag-icon"></div>\n                                                    <div class="perso-tx-tag perso-accessibility-no-read">'+(null!=(s="function"==typeof(r=null!=(r=s.txTag||(null!=t?t.txTag:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txTag",hash:{},data:n}):r)?s:"")+"</div>\n                                                </div>\n                                            </div>\n"},15:function(e,t,s,o,n){var r;return' class="perso-tx-amount perso-'+e.escapeExpression("function"==typeof(r=null!=(r=s.txMode||(null!=t?t.txMode:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txMode",hash:{},data:n}):r)+'"'},17:function(e,t,s,o,n){return' class="perso-tx-amount"'},19:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing;return'                                    <div class="perso-tx-installment-comment">\n'+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.paymentTxt:a,{name:"if",hash:{},fn:e.program(20,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                        <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txInstallmentNumber||(null!=t?t.txInstallmentNumber:t))?l:p)?l.call(c,{name:"txInstallmentNumber",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.outOfTxt:a,{name:"if",hash:{},fn:e.program(22,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                        <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txTotalInstallments||(null!=t?t.txTotalInstallments:t))?l:p)?l.call(c,{name:"txTotalInstallments",hash:{},data:n}):l)?a:"")+"</span>\n                                    </div>\n"},20:function(e,t,s,o,n,r,i){return'                                            <span class="perso-payment-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.paymentTxt:e,t))?e:"")+"</span>"},22:function(e,t,s,o,n,r,i){return'                                            <span class="perso-out-of-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.outOfTxt:e,t))?e:"")+"</span>"},24:function(e,t,s,o,n){return'                        <div class="perso-tx-col perso-tx-col-enrichment">\n                            <div class="perso-tx-enrichment-btn"></div>\n                        </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-table perso-tl1 perso-tl1-'+(null!=(a="function"==typeof(a=null!=(a=s.subType||(null!=t?t.subType:t))?a:s.helperMissing)?a.call(l,{name:"subType",hash:{},data:n}):a)?a:"")+" "+(null!=(a=s.if.call(l,null!=t?t.transactionEnrichment:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(a=s.each.call(l,null!=t?t.tableObject:t,{name:"each",hash:{},fn:e.program(3,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"        </div>\n    </div>\n</div>"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-trivia-trv1"]=e.template({1:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'            <div class="perso-answers-wrapper">\n                <button class="perso-answer" role="text" data-val="'+(null!=(r="function"===_typeof(i=null!=(i=s.val||(null!=t?t.val:t))?i:a)?i.call(e,{name:"val",hash:{},data:n}):i)?r:"")+'">\n                    <span class="perso-answer-text">'+(null!=(r="function"===_typeof(i=null!=(i=s.txt||(null!=t?t.txt:t))?i:a)?i.call(e,{name:"txt",hash:{},data:n}):i)?r:"")+'</span>\n                    <div class="perso-answer-icon" role="text"></div>\n                </button>\n            </div>\n'},3:function(e,t,s,o,n){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.indicators:t,{name:"each",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?s:""},4:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'                <div class="perso-trivia-indicator-wrapper">\n                    <div class="perso-trivia-indicator '+(null!=(r=s.if.call(i,null!=t?t.isSelected:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?r:"")+" "+e.escapeExpression("function"==typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:s.helperMissing)?r.call(i,{name:"class",hash:{},data:n}):r)+'"></div>\n                </div>\n'},5:function(e,t,s,o,n){return"perso-selected"},7:function(e,t,s,o,n){var r;return'            <span class="perso-trivia-page">'+(null!=(s="function"==typeof(r=null!=(r=s.pageNumber||(null!=t?t.pageNumber:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"pageNumber",hash:{},data:n}):r)?s:"")+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing;return'<div id="perso-'+(null!=(r="function"===_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)?i.call(a,{name:"id",hash:{},data:n}):i)?r:"")+'" class="perso-trivia-container perso-trivia-trv1">\n    <div class="pstory-block-frame perso-trivia-question"><span class="perso-question-text" role="text" tabindex="0">'+(null!=(r="function"===_typeof(i=null!=(i=s.questionText||(null!=t?t.questionText:t))?i:l)?i.call(a,{name:"questionText",hash:{},data:n}):i)?r:"")+'</span></div>\n    <div class="pstory-block-frame perso-answers-container">\n'+(null!=(r=s.each.call(a,null!=t?t.answers:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'    </div>\n    <div class="pstory-block-frame perso-trivia-page-index" role="text" >\n'+(null!=(r=s.if.call(a,null!=t?t.showPagination:t,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.program(7,n,0),data:n}))?r:"")+"    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-radio-button-rb4"]=e.template({1:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression;return'                <div class="pstory-radio-button-wrapper">\n                    <div class="pstory-button perso-button-animation pstory-radio-button '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(2,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'" tabindex="0" pstory-id="'+u(_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)+'" action-id="'+u(_typeof(l=null!=(l=s.action||(null!=t?t.action:t))?l:p)===d?l.call(c,{name:"action",hash:{},data:n}):l)+'" pstory-event="'+u(_typeof(l=null!=(l=s.event||(null!=t?t.event:t))?l:p)===d?l.call(c,{name:"event",hash:{},data:n}):l)+'">\n                        <input id="pstory-radio-'+u(_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)+'" name="radio-'+u(e.lambda(null!=i[1]?i[1].id:i[1],t))+'" type="radio" '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'/>\n                        <label for="pstory-radio-'+u(_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)+'" role="text">'+(null!=(a=_typeof(l=null!=(l=s.text||(null!=t?t.text:t))?l:p)===d?l.call(c,{name:"text",hash:{},data:n}):l)?a:"")+"</label>\n                    </div>\n                </div>\n"},2:function(e,t,s,o,n){return"perso-selected"},4:function(e,t,s,o,n){return"checked"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div id="pstory-block-buttons_'+e.escapeExpression("function"==typeof(a=null!=(a=s.id||(null!=t?t.id:t))?a:s.helperMissing)?a.call(l,{name:"id",hash:{},data:n}):a)+'" class="pstory-block-frame pstory-block-buttons-rb4">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(a=s.each.call(l,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"        </div>\n    </div>\n</div>\n"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-pure-bar-chart-bc2"]=e.template({1:function(e,t,s,o,n){return'                    <div class="perso-month-amount is-series"></div>\n'},3:function(e,t,s,o,n){return'                    <div class="perso-month-amount"></div>\n'},5:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.indicatorLegend:t,{name:"if",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?s:""},6:function(e,t,s,o,n){var r,i;return'                        <div class="perso-legend-wrapper">\n                            <div class="perso-bar-chart-legend perso-indicator-type-'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.config:t)?r.indicatorType:r,t))+'"></div>\n                            <div class="perso-bar-chart-legend-txt">'+(null!=(r="function"==typeof(i=null!=(i=s.indicatorLegend||(null!=t?t.indicatorLegend:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"indicatorLegend",hash:{},data:n}):i)?r:"")+"</div>\n                        </div>\n"},8:function(e,t,s,o,n){return'perso-comparable-chart" aria-hidden="true" '},10:function(e,t,s,o,n){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.series:t,{name:"each",hash:{},fn:e.program(11,n,0),inverse:e.noop,data:n}))?s:""},11:function(e,t,s,o,n){return'                                <div class="perso-series-wrapper">\n                                    <span class="perso-tooltip"></span>\n                                    <div class="perso-series">\n'+(null!=(s=s.each.call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(12,n,0),inverse:e.noop,data:n}))?s:"")+"                                    </div>\n                                </div>\n"},12:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{};return'                                            <div class="perso-bar-wrapper">\n                                                <div class="perso-bar'+(null!=(r=s.if.call(a,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?r:"")+'"\n                                                     pstory-category="'+e.escapeExpression("function"==typeof(i=null!=(i=s.category||(null!=t?t.category:t))?i:s.helperMissing)?i.call(a,{name:"category",hash:{},data:n}):i)+'">\n                                                </div>\n'+(null!=(r=s.if.call(a,null!=t?t.indicatorDisplay:t,{name:"if",hash:{},fn:e.program(15,n,0),inverse:e.noop,data:n}))?r:"")+"                                            </div>\n"},13:function(e,t,s,o,n){return" perso-selected"},15:function(e,t,s,o,n){var r;return'                                                    <div class="perso-bar perso-indicator"\n                                                         pstory-category="'+e.escapeExpression("function"==typeof(r=null!=(r=s.category||(null!=t?t.category:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"category",hash:{},data:n}):r)+'">\n                                                    </div>\n'},17:function(e,t,s,o,n,r,i){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.series:t,{name:"each",hash:{},fn:e.program(18,n,0,r,i),inverse:e.noop,data:n}))?s:""},18:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{};return'                                <div class="perso-bar-wrapper perso-simple-bar">\n                                <div class="perso-bar '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(19,n,0,r,i),inverse:e.program(21,n,0,r,i),data:n}))?a:"")+' pstory-category="'+e.escapeExpression("function"==typeof(l=null!=(l=s.category||(null!=t?t.category:t))?l:s.helperMissing)?l.call(c,{name:"category",hash:{},data:n}):l)+'">\n                                </div>\n'+(null!=(a=s.if.call(c,null!=t?t.indicatorDisplay:t,{name:"if",hash:{},fn:e.program(23,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                            </div>\n"},19:function(e,t,s,o,n){return'perso-selected" aria-selected="true"'},21:function(e,t,s,o,n){return'\n                                    "'},23:function(e,t,s,o,n,r,i){var a=e.escapeExpression;return'                                    <div class="perso-bar perso-indicator perso-indicator-type-'+a(e.lambda(null!=(i=null!=i[1]?i[1].config:i[1])?i.indicatorType:i,t))+'" pstory-category="'+a("function"==typeof(i=null!=(i=s.category||(null!=t?t.category:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"category",hash:{},data:n}):i)+'">\n                                    </div>\n'},25:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.indicatorLegend:t,{name:"if",hash:{},fn:e.program(26,n,0),inverse:e.noop,data:n}))?s:""},26:function(e,t,s,o,n){var r,i;return'                            <div class="perso-legend-wrapper perso-series-legend">\n                                <div class="perso-bar-chart-legend perso-indicator-type-'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.config:t)?r.indicatorType:r,t))+'"></div>\n                                <div class="perso-bar-chart-legend-txt">'+(null!=(r="function"==typeof(i=null!=(i=s.indicatorLegend||(null!=t?t.indicatorLegend:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"indicatorLegend",hash:{},data:n}):i)?r:"")+"</div>\n                            </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{},c=s.helperMissing,p=e.escapeExpression;return'<div class="pstory-block-frame pstory-block-bar-chart perso-pure-bar-chart '+p("function"===_typeof(a=null!=(a=s.class||(null!=t?t.class:t))?a:c)?a.call(l,{name:"class",hash:{},data:n}):a)+" perso-"+p("function"===_typeof(a=null!=(a=s.direction||(null!=t?t.direction:t))?a:c)?a.call(l,{name:"direction",hash:{},data:n}):a)+'" >\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-bar-chart-bc2">\n'+(null!=(p=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.program(3,n,0,r,i),data:n}))?p:"")+(null!=(p=s.unless.call(l,null!=t?t.isSeries:t,{name:"unless",hash:{},fn:e.program(5,n,0,r,i),inverse:e.noop,data:n}))?p:"")+'                <div class="perso-bar-chart-wrapper perso-accessibility-wrapper '+(null!=(p=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(8,n,0,r,i),inverse:e.noop,data:n}))?p:"")+' role="text">\n                    <span class="perso-accessibility-read perso-accessibility-bar-seleced-text"></span>\n                    <div class="perso-bar-chart-container">\n                    <div class="perso-bars-wrapper">\n'+(null!=(p=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.program(17,n,0,r,i),data:n}))?p:"")+"                    </div>\n"+(null!=(p=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(25,n,0,r,i),inverse:e.noop,data:n}))?p:"")+"                </div>\n            </div>\n"+(null!=(p=e.invokePartial(o.monthPicker,t,{name:"monthPicker",data:n,indent:"            ",helpers:s,partials:o,decorators:e.decorators}))?p:"")+"        </div>\n    </div>\n</div>\n</div>\n"},usePartial:!0,useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-comparable-chart-cc3"]=e.template({1:function(e,t,s,o,n){var r,i;return'                    <div class="perso-legend-wrapper">\n                        <div class="perso-bar-chart-legend perso-indicator-type-'+e.escapeExpression(e.lambda(null!=(r=null!=t?t.config:t)?r.indicatorType:r,t))+'"></div>\n                        <div class="perso-bar-chart-legend-txt">'+(null!=(r="function"==typeof(i=null!=(i=s.indicatorLegend||(null!=t?t.indicatorLegend:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"indicatorLegend",hash:{},data:n}):i)?r:"")+"</div>\n                    </div>\n"},3:function(e,t,s,o,n){return"perso-comparable-chart"},5:function(e,t,s,o,n,r,i){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.series:t,{name:"each",hash:{},fn:e.program(6,n,0,r,i),inverse:e.noop,data:n}))?s:""},6:function(e,t,s,o,n,r,i){return'                                <div class="perso-series-wrapper">\n                                    <div class="perso-series">\n'+(null!=(s=s.each.call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(7,n,0,r,i),inverse:e.noop,data:n}))?s:"")+"                                    </div>\n                                </div>\n"},7:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{};return'                                            <div class="perso-bar-wrapper">\n                                                <div class="perso-bar'+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(8,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'"\n                                                     pstory-category="'+e.escapeExpression("function"==typeof(l=null!=(l=s.category||(null!=t?t.category:t))?l:s.helperMissing)?l.call(c,{name:"category",hash:{},data:n}):l)+'">\n                                                </div>\n'+(null!=(a=s.if.call(c,null!=t?t.indicatorDisplay:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                                            </div>\n"},8:function(e,t,s,o,n){return" perso-selected"},10:function(e,t,s,o,n,r,i){var a=e.escapeExpression;return'                                                    <div class="perso-bar perso-indicator perso-indicator-type-'+a(e.lambda(null!=(i=null!=i[2]?i[2].config:i[2])?i.indicatorType:i,t))+'"\n                                                         pstory-category="'+a("function"==typeof(i=null!=(i=s.category||(null!=t?t.category:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"category",hash:{},data:n}):i)+'">\n                                                    </div>\n'},12:function(e,t,s,o,n,r,i){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.series:t,{name:"each",hash:{},fn:e.program(13,n,0,r,i),inverse:e.noop,data:n}))?s:""},13:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{};return'                                <div class="perso-bar-wrapper perso-simple-bar">\n                                <div class="perso-bar '+(null!=(a=s.if.call(c,null!=t?t.selected:t,{name:"if",hash:{},fn:e.program(14,n,0,r,i),inverse:e.program(16,n,0,r,i),data:n}))?a:"")+' pstory-category="'+e.escapeExpression("function"==typeof(l=null!=(l=s.category||(null!=t?t.category:t))?l:s.helperMissing)?l.call(c,{name:"category",hash:{},data:n}):l)+'">\n                                </div>\n'+(null!=(a=s.if.call(c,null!=t?t.indicatorDisplay:t,{name:"if",hash:{},fn:e.program(18,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                            </div>\n"},14:function(e,t,s,o,n){return'perso-selected" aria-selected="true"'},16:function(e,t,s,o,n){return'\n                                    "'},18:function(e,t,s,o,n,r,i){var a=e.escapeExpression;return'                                    <div class="perso-bar perso-indicator perso-indicator-type-'+a(e.lambda(null!=(i=null!=i[2]?i[2].config:i[2])?i.indicatorType:i,t))+'" pstory-category="'+a("function"==typeof(i=null!=(i=s.category||(null!=t?t.category:t))?i:s.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"category",hash:{},data:n}):i)+'">\n                                    </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{},c=s.helperMissing,p=e.escapeExpression,d=e.lambda;return'<div class="pstory-block-frame pstory-block-bar-chart perso-pure-bar-chart '+p("function"===_typeof(a=null!=(a=s.class||(null!=t?t.class:t))?a:c)?a.call(l,{name:"class",hash:{},data:n}):a)+" perso-"+p("function"===_typeof(a=null!=(a=s.direction||(null!=t?t.direction:t))?a:c)?a.call(l,{name:"direction",hash:{},data:n}):a)+'" >\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-bar-chart-cc3">\n                <div class="perso-tooltip-container">\n                    <div class="perso-tooltip-wrapping-el">\n                        <div class="perso-static-tooltip perso-col-mode-'+(null!=(c=d(null!=(c=null!=t?t.staticTexts:t)?c.text1Mode:c,t))?c:"")+'">\n                            <div class="perso-static-tooltip-text perso-'+p(d(null!=(c=null!=t?t.staticTexts:t)?c.text1Mode:c,t))+'">'+(null!=(c=d(null!=(c=null!=t?t.staticTexts:t)?c.text1:c,t))?c:"")+'</div>\n                            <div class="perso-static-tooltip-amount"></div>\n                        </div>\n                        <div class="perso-static-tooltip perso-col-mode-'+(null!=(c=d(null!=(c=null!=t?t.staticTexts:t)?c.text2Mode:c,t))?c:"")+'">\n                            <div class="perso-static-tooltip-text perso-'+p(d(null!=(c=null!=t?t.staticTexts:t)?c.text2Mode:c,t))+'">'+(null!=(c=d(null!=(c=null!=t?t.staticTexts:t)?c.text2:c,t))?c:"")+'</div>\n                            <div class="perso-static-tooltip-amount"></div>\n                        </div>\n                    </div>\n                </div>\n'+(null!=(c=s.if.call(l,null!=t?t.indicatorLegend:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?c:"")+'                <div class="perso-bar-chart-wrapper perso-accessibility-wrapper '+(null!=(c=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(3,n,0,r,i),inverse:e.noop,data:n}))?c:"")+'" role="text">\n                    <span class="perso-accessibility-read perso-accessibility-bar-seleced-text"></span>\n                    <div class="perso-bar-chart-container">\n                    <div class="perso-bars-wrapper">\n'+(null!=(c=s.if.call(l,null!=t?t.isSeries:t,{name:"if",hash:{},fn:e.program(5,n,0,r,i),inverse:e.program(12,n,0,r,i),data:n}))?c:"")+"                    </div>\n                </div>\n            </div>\n"+(null!=(c=e.invokePartial(o.monthPicker,t,{name:"monthPicker",data:n,indent:"            ",helpers:s,partials:o,decorators:e.decorators}))?c:"")+"        </div>\n    </div>\n</div>\n</div>\n"},usePartial:!0,useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-line-chart-lc3"]=e.template({compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="pstory-block-frame pstory-block-line-chart-lc3">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-line-chart" tabindex="0">\n                <div class="perso-fixed-tooltip" aria-hidden="true">\n                    <span class="perso-tooltip-text perso-line-chart-month"></span>\n                    <span class="perso-tooltip-text perso-line-chart-amount"></span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-pie-chart-pc4"]=e.template({1:function(e,t,s,o,n){return"perso-pie-chart-pc4-rtl"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="pstory-block-frame pstory-block-pie-chart perso-pie-chart-pc4 '+(null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.isRTLMode:t,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:"")+'" >\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="pstory-pie-chart"></div>\n            <div class="pstory-pie-data">\n                <input type="button" class="pstory-arrow pstory-next-arrow"/>\n                <div class="pstory-pie-info perso-accessibility-wrapper" >\n                </div>\n                <input type="button" class="pstory-arrow pstory-previous-arrow"/>\n            </div>\n        </div>\n    </div>\n</div>'},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-entity-sub-transactions-el3"]=e.template({1:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing;return'                        <div class="perso-entity-textbox '+(null!=(a=s.if.call(c,null!=t?t.icon:t,{name:"if",hash:{},fn:e.program(2,n,0,r,i),inverse:e.program(4,n,0,r,i),data:n}))?a:"")+" "+(null!=(a=s.if.call(c,null!=t?t.buttonLink:t,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n}))?a:"")+'" data-entity-index="'+e.escapeExpression("function"===_typeof(l=null!=(l=s.index||n&&n.index)?l:p)?l.call(c,{name:"index",hash:{},data:n}):l)+'" role="text">\n'+(null!=(a=s.if.call(c,null!=t?t.icon:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'                            <div class="perso-entity-textbox-info-wrapper">\n                               <div class="perso-value">'+(null!=(a="function"===_typeof(l=null!=(l=s.entityTitle||(null!=t?t.entityTitle:t))?l:p)?l.call(c,{name:"entityTitle",hash:{},data:n}):l)?a:"")+"</div>\n"+(null!=(a=s.if.call(c,null!=i[1]?i[1].isEntityListAmountOnBottom:i[1],{name:"if",hash:{},fn:e.program(12,n,0,r,i),inverse:e.program(14,n,0,r,i),data:n}))?a:"")+(null!=(a=s.if.call(c,null!=t?t.buttonLink:t,{name:"if",hash:{},fn:e.program(16,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                            </div>                          \n                        </div>\n"},2:function(e,t,s,o,n){return" perso-entity-textbox-with-image"},4:function(e,t,s,o,n){return"perso-entity-textbox-without-image"},6:function(e,t,s,o,n){return"perso-with-button"},8:function(e,t,s,o,n){return"perso-without-button"},10:function(e,t,s,o,n){var r,i=e.lambda;return'                                <div class="perso-entity-textbox-image-wrapper">\n                                    <img class="perso-entity-textbox-image perso-asset-loading" src="'+(null!=(r=i((r=n&&n.root)&&r.baseUrl,t))?r:"")+"/"+(null!=(r=i((r=n&&n.root)&&r.assetDirectory,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||s.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.icon:t,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=i((r=n&&n.root)&&r.assetExtension,t))?r:"")+'">\n                                </div>\n'},12:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'                                    <div class="perso-last-payment">'+(null!=(r="function"===_typeof(i=null!=(i=s.entityLabel1||(null!=t?t.entityLabel1:t))?i:a)?i.call(e,{name:"entityLabel1",hash:{},data:n}):i)?r:"")+'</div>\n                                    <div class="perso-label">'+(null!=(r="function"===_typeof(i=null!=(i=s.entityLabel2||(null!=t?t.entityLabel2:t))?i:a)?i.call(e,{name:"entityLabel2",hash:{},data:n}):i)?r:"")+"</div>\n"},14:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'                                    <div class="perso-label">'+(null!=(r="function"===_typeof(i=null!=(i=s.entityLabel2||(null!=t?t.entityLabel2:t))?i:a)?i.call(e,{name:"entityLabel2",hash:{},data:n}):i)?r:"")+'</div>\n                                    <div class="perso-last-payment">'+(null!=(r="function"===_typeof(i=null!=(i=s.entityLabel1||(null!=t?t.entityLabel1:t))?i:a)?i.call(e,{name:"entityLabel1",hash:{},data:n}):i)?r:"")+"</div>\n"},16:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function";return'                                   <div class="perso-button-wrapper">\n                                       <a id="'+(null!=(a=_typeof(l=null!=(l=s.id||(null!=t?t.id:t))?l:p)===d?l.call(c,{name:"id",hash:{},data:n}):l)?a:"")+'" class="pstory-link-navigateTo pstory-button perso-ripple-closed"\n                                       action-id="'+(null!=(a=_typeof(l=null!=(l=s.action||(null!=t?t.action:t))?l:p)===d?l.call(c,{name:"action",hash:{},data:n}):l)?a:"")+'" role="button" tabindex="0" aria-label="'+e.escapeExpression(e.lambda(null!=(a=null!=i[1]?i[1].texts:i[1])?a.doubleTabButton:a,t))+'">'+(null!=(a=_typeof(l=null!=(l=s.buttonLabel||(null!=t?t.buttonLabel:t))?l:p)===d?l.call(c,{name:"buttonLabel",hash:{},data:n}):l)?a:"")+"</a>\n                                   </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-entity-sub-transactions pstory-block-entity-sub-transactions-el3">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="perso-entity-textboxes-wrapper '+e.escapeExpression("function"==typeof(a=null!=(a=s.class||(null!=t?t.class:t))?a:s.helperMissing)?a.call(l,{name:"class",hash:{},data:n}):a)+'">\n'+(null!=(a=s.each.call(l,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"            </div>\n        </div>\n    </div>\n</div>"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-buttons-btn3"]=e.template({1:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",e=e.escapeExpression;return'                    <a role="button" aria-label="'+e(_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)===l?r.call(i,{name:"text",hash:{},data:n}):r)+', button" id="'+e(_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)===l?r.call(i,{name:"id",hash:{},data:n}):r)+'" class="pstory-link-navigateTo perso-button-animation pstory-button perso-ripple-closed" tabindex="0" action-id="'+e(_typeof(r=null!=(r=s.action||(null!=t?t.action:t))?r:a)===l?r.call(i,{name:"action",hash:{},data:n}):r)+'" pnavigate-id="'+e(_typeof(r=null!=(r=s.navigateTarget||(null!=t?t.navigateTarget:t))?r:a)===l?r.call(i,{name:"navigateTarget",hash:{},data:n}):r)+'">'+(null!=(e=_typeof(r=null!=(r=s.text||(null!=t?t.text:t))?r:a)===l?r.call(i,{name:"text",hash:{},data:n}):r)?e:"")+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function",c=e.escapeExpression;return'<div id="pstory-block-buttons_'+c(_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)===l?r.call(i,{name:"id",hash:{},data:n}):r)+'"\n    class="pstory-block-frame pstory-block-buttons-btn3 '+c(_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)===l?r.call(i,{name:"class",hash:{},data:n}):r)+" pstory-block-buttons-"+c(_typeof(r=null!=(r=s.buttonType||(null!=t?t.buttonType:t))?r:a)===l?r.call(i,{name:"buttonType",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content" tabindex="-1">\n'+(null!=(c=s.each.call(i,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?c:"")+"        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-tl2-amountComment"]=e.template({1:function(e,t,s,o,n){return"perso-transaction-enrichment"},3:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression;return'                <div class="perso-table-row-wrapper" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'>\n                    <div id="perso-table-row-'+u(_typeof(l=null!=(l=s.txId||(null!=t?t.txId:t))?l:p)===d?l.call(c,{name:"txId",hash:{},data:n}):l)+'" class="perso-tx-container" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n}))?a:"")+'>\n                        <div class="perso-tx-col perso-tx-col-icon perso-tx-col-with-'+(null!=(a=_typeof(l=null!=(l=s.txIcon||(null!=t?t.txIcon:t))?l:p)===d?l.call(c,{name:"txIcon",hash:{},data:n}):l)?a:"")+'">\n                            <img class="perso-tx-icon perso-asset-loading" src="'+u(e.lambda(null!=i[1]?i[1].baseUrl:i[1],t))+"/"+(null!=(a=_typeof(l=null!=(l=s.txAssetType||(null!=t?t.txAssetType:t))?l:p)===d?l.call(c,{name:"txAssetType",hash:{},data:n}):l)?a:"")+"/"+u((s.toLowerCase||t&&t.toLowerCase||p).call(c,null!=t?t.txIcon:t,{name:"toLowerCase",hash:{},data:n}))+"."+(null!=(a=_typeof(l=null!=(l=s.txIconExtension||(null!=t?t.txIconExtension:t))?l:p)===d?l.call(c,{name:"txIconExtension",hash:{},data:n}):l)?a:"")+'" data-asset-index="'+(null!=(a=_typeof(l=null!=(l=s.index||n&&n.index)?l:p)===d?l.call(c,{name:"index",hash:{},data:n}):l)?a:"")+'"/>\n                        </div>\n                        <div class="perso-tx-info-container">\n                            <div class="perso-tx-col perso-tx-left-col">\n                                <div class="perso-tx-top-row">\n                                    <div class="perso-tx-name">'+(null!=(a=_typeof(l=null!=(l=s.txName||(null!=t?t.txName:t))?l:p)===d?l.call(c,{name:"txName",hash:{},data:n}):l)?a:"")+'</div>\n                                </div>\n                                <div class="perso-tx-bottom-row">\n'+(null!=(a=s.if.call(c,null!=t?t.txShowAccount:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                                </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.displayUserTag:a,{name:"if",hash:{},fn:e.program(12,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'                            </div>\n                            <div class="perso-tx-col perso-tx-right-col">\n                                <div class="perso-tx-amount-container">\n                                    <span '+(null!=(a=s.if.call(c,null!=t?t.txShowAmountColors:t,{name:"if",hash:{},fn:e.program(15,n,0,r,i),inverse:e.program(17,n,0,r,i),data:n}))?a:"")+">"+(null!=(a=_typeof(l=null!=(l=s.txAmount||(null!=t?t.txAmount:t))?l:p)===d?l.call(c,{name:"txAmount",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=t?t.displayInstallment:t,{name:"if",hash:{},fn:e.program(19,n,0,r,i),inverse:e.program(24,n,0,r,i),data:n}))?a:"")+'                                </div>\n                                <div class="perso-tx-date">'+(null!=(a=_typeof(l=null!=(l=s.txDate||(null!=t?t.txDate:t))?l:p)===d?l.call(c,{name:"txDate",hash:{},data:n}):l)?a:"")+"</div>\n                            </div>\n                        </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(26,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                    </div>\n                </div>\n"},4:function(e,t,s,o,n){var r;return'data-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.txId||(null!=t?t.txId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txId",hash:{},data:n}):r)+'"'},6:function(e,t,s,o,n){return' tabindex="0" role="button"'},8:function(e,t,s,o,n){return'role="text"'},10:function(e,t,s,o,n){var r;return'                                        <span class="perso-tx-account-name">'+(null!=(s="function"==typeof(r=null!=(r=s.txAccountName||(null!=t?t.txAccountName:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txAccountName",hash:{},data:n}):r)?s:"")+"</span>\n"},12:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.txTag:t,{name:"if",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?s:""},13:function(e,t,s,o,n){var r;return'                                        <div class="perso-tx-tag-row">\n                                            <div class="perso-tx-tag-container">\n                                                <div class="perso-tx-tag-icon"></div>\n                                                <div class="perso-tx-tag perso-accessibility-no-read">'+(null!=(s="function"==typeof(r=null!=(r=s.txTag||(null!=t?t.txTag:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txTag",hash:{},data:n}):r)?s:"")+"</div>\n                                            </div>\n                                        </div>\n"},15:function(e,t,s,o,n){var r;return' class="perso-tx-amount perso-'+e.escapeExpression("function"==typeof(r=null!=(r=s.txMode||(null!=t?t.txMode:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txMode",hash:{},data:n}):r)+'"'},17:function(e,t,s,o,n){return' class="perso-tx-amount"'},19:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing;return'                                        <div class="perso-tx-installment-comment">\n'+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.paymentTxt:a,{name:"if",hash:{},fn:e.program(20,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                            <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txInstallmentNumber||(null!=t?t.txInstallmentNumber:t))?l:p)?l.call(c,{name:"txInstallmentNumber",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.outOfTxt:a,{name:"if",hash:{},fn:e.program(22,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                            <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txTotalInstallments||(null!=t?t.txTotalInstallments:t))?l:p)?l.call(c,{name:"txTotalInstallments",hash:{},data:n}):l)?a:"")+"</span>\n                                        </div>\n                                    "},20:function(e,t,s,o,n,r,i){return'                                                <span class="perso-payment-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.paymentTxt:e,t))?e:"")+"</span>"},22:function(e,t,s,o,n,r,i){return'                                                <span class="perso-out-of-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.outOfTxt:e,t))?e:"")+"</span>"},24:function(e,t,s,o,n){var r;return'<span class="perso-tx-amount-comment">'+(null!=(s="function"==typeof(r=null!=(r=s.txAmountComment||(null!=t?t.txAmountComment:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txAmountComment",hash:{},data:n}):r)?s:"")+"</span>\n"},26:function(e,t,s,o,n){return'                            <div class="perso-tx-col perso-tx-col-enrichment">\n                                <div class="perso-tx-enrichment-btn"></div>\n                            </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-table perso-tl2 perso-tl2-'+(null!=(a="function"==typeof(a=null!=(a=s.subType||(null!=t?t.subType:t))?a:s.helperMissing)?a.call(l,{name:"subType",hash:{},data:n}):a)?a:"")+" "+(null!=(a=s.if.call(l,null!=t?t.transactionEnrichment:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(a=s.each.call(l,null!=t?t.tableObject:t,{name:"each",hash:{},fn:e.program(3,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"        </div>\n    </div>\n</div>\n"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-tl2-basic"]=e.template({1:function(e,t,s,o,n){return"perso-transaction-enrichment"},3:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression;return'                <div class="perso-table-row-wrapper" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'>\n                    <div id="perso-table-row-'+u(_typeof(l=null!=(l=s.txId||(null!=t?t.txId:t))?l:p)===d?l.call(c,{name:"txId",hash:{},data:n}):l)+'" class="perso-tx-container" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n}))?a:"")+'>\n                        <div class="perso-tx-col perso-tx-col-icon perso-tx-col-with-'+(null!=(a=_typeof(l=null!=(l=s.txIcon||(null!=t?t.txIcon:t))?l:p)===d?l.call(c,{name:"txIcon",hash:{},data:n}):l)?a:"")+'">\n                            <img class="perso-tx-icon perso-asset-loading" src="'+u(e.lambda(null!=i[1]?i[1].baseUrl:i[1],t))+"/"+(null!=(a=_typeof(l=null!=(l=s.txAssetType||(null!=t?t.txAssetType:t))?l:p)===d?l.call(c,{name:"txAssetType",hash:{},data:n}):l)?a:"")+"/"+u((s.toLowerCase||t&&t.toLowerCase||p).call(c,null!=t?t.txIcon:t,{name:"toLowerCase",hash:{},data:n}))+"."+(null!=(a=_typeof(l=null!=(l=s.txIconExtension||(null!=t?t.txIconExtension:t))?l:p)===d?l.call(c,{name:"txIconExtension",hash:{},data:n}):l)?a:"")+'" data-asset-index="'+(null!=(a=_typeof(l=null!=(l=s.index||n&&n.index)?l:p)===d?l.call(c,{name:"index",hash:{},data:n}):l)?a:"")+'"/>\n                        </div>\n                        <div class="perso-tx-info-container">\n                            <div class="perso-tx-col perso-tx-left-col">\n                                <div class="perso-tx-top-row">\n                                    <div class="perso-tx-name">'+(null!=(a=_typeof(l=null!=(l=s.txName||(null!=t?t.txName:t))?l:p)===d?l.call(c,{name:"txName",hash:{},data:n}):l)?a:"")+'</div>\n                                </div>\n                                <div class="perso-tx-bottom-row">\n'+(null!=(a=s.if.call(c,null!=t?t.txShowAccount:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                                </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.displayUserTag:a,{name:"if",hash:{},fn:e.program(12,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'                            </div>\n                            <div class="perso-tx-col perso-tx-right-col">\n                                <div class="perso-tx-amount-container">\n                                    <span '+(null!=(a=s.if.call(c,null!=t?t.txShowAmountColors:t,{name:"if",hash:{},fn:e.program(15,n,0,r,i),inverse:e.program(17,n,0,r,i),data:n}))?a:"")+">"+(null!=(a=_typeof(l=null!=(l=s.txAmount||(null!=t?t.txAmount:t))?l:p)===d?l.call(c,{name:"txAmount",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=t?t.displayInstallment:t,{name:"if",hash:{},fn:e.program(19,n,0,r,i),inverse:e.program(24,n,0,r,i),data:n}))?a:"")+'                                </div>\n                                <div class="perso-tx-date">'+(null!=(a=_typeof(l=null!=(l=s.txDate||(null!=t?t.txDate:t))?l:p)===d?l.call(c,{name:"txDate",hash:{},data:n}):l)?a:"")+"</div>\n                            </div>\n                        </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(26,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                    </div>\n                </div>\n"},4:function(e,t,s,o,n){var r;return'data-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.txId||(null!=t?t.txId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txId",hash:{},data:n}):r)+'"'},6:function(e,t,s,o,n){return' tabindex="0" role="button"'},8:function(e,t,s,o,n){return'role="text"'},10:function(e,t,s,o,n){var r;return'                                        <span class="perso-tx-account-name">'+(null!=(s="function"==typeof(r=null!=(r=s.txAccountName||(null!=t?t.txAccountName:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txAccountName",hash:{},data:n}):r)?s:"")+"</span>\n"},12:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.txTag:t,{name:"if",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?s:""},13:function(e,t,s,o,n){var r;return'                                        <div class="perso-tx-tag-row">\n                                            <div class="perso-tx-tag-container">\n                                                <div class="perso-tx-tag-icon"></div>\n                                                <div class="perso-tx-tag perso-accessibility-no-read">'+(null!=(s="function"==typeof(r=null!=(r=s.txTag||(null!=t?t.txTag:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txTag",hash:{},data:n}):r)?s:"")+"</div>\n                                            </div>\n                                        </div>\n"},15:function(e,t,s,o,n){var r;return' class="perso-tx-amount perso-'+e.escapeExpression("function"==typeof(r=null!=(r=s.txMode||(null!=t?t.txMode:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txMode",hash:{},data:n}):r)+'"'},17:function(e,t,s,o,n){return' class="perso-tx-amount"'},19:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing;return'                                        <div class="perso-tx-installment-comment">\n'+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.paymentTxt:a,{name:"if",hash:{},fn:e.program(20,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                            <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txInstallmentNumber||(null!=t?t.txInstallmentNumber:t))?l:p)?l.call(c,{name:"txInstallmentNumber",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.outOfTxt:a,{name:"if",hash:{},fn:e.program(22,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                            <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txTotalInstallments||(null!=t?t.txTotalInstallments:t))?l:p)?l.call(c,{name:"txTotalInstallments",hash:{},data:n}):l)?a:"")+"</span>\n                                        </div>\n                                    "},20:function(e,t,s,o,n,r,i){return'                                                <span class="perso-payment-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.paymentTxt:e,t))?e:"")+"</span>"},22:function(e,t,s,o,n,r,i){return'                                                <span class="perso-out-of-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.outOfTxt:e,t))?e:"")+"</span>"},24:function(e,t,s,o,n){var r;return'<span class="perso-tx-amount-comment">'+(null!=(s="function"==typeof(r=null!=(r=s.txAmountComment||(null!=t?t.txAmountComment:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txAmountComment",hash:{},data:n}):r)?s:"")+"</span>\n"},26:function(e,t,s,o,n){return'                            <div class="perso-tx-col perso-tx-col-enrichment">\n                                <div class="perso-tx-enrichment-btn"></div>\n                            </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-table perso-tl2 pero-tl2-'+(null!=(a="function"==typeof(a=null!=(a=s.subType||(null!=t?t.subType:t))?a:s.helperMissing)?a.call(l,{name:"subType",hash:{},data:n}):a)?a:"")+" "+(null!=(a=s.if.call(l,null!=t?t.transactionEnrichment:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(a=s.each.call(l,null!=t?t.tableObject:t,{name:"each",hash:{},fn:e.program(3,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"        </div>\n    </div>\n</div>\n"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-tl2-dateAndAmountComment"]=e.template({1:function(e,t,s,o,n){return"perso-transaction-enrichment"},3:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression;return'                <div class="perso-table-row-wrapper" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'>\n                    <div id="perso-table-row-'+u(_typeof(l=null!=(l=s.txId||(null!=t?t.txId:t))?l:p)===d?l.call(c,{name:"txId",hash:{},data:n}):l)+'" class="perso-tx-container" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n}))?a:"")+'>\n                        <div class="perso-tx-col perso-tx-col-icon perso-tx-col-with-'+(null!=(a=_typeof(l=null!=(l=s.txIcon||(null!=t?t.txIcon:t))?l:p)===d?l.call(c,{name:"txIcon",hash:{},data:n}):l)?a:"")+'">\n                            <img class="perso-tx-icon perso-asset-loading"\n                                 src="'+u(e.lambda(null!=i[1]?i[1].baseUrl:i[1],t))+"/"+(null!=(a=_typeof(l=null!=(l=s.txAssetType||(null!=t?t.txAssetType:t))?l:p)===d?l.call(c,{name:"txAssetType",hash:{},data:n}):l)?a:"")+"/"+u((s.toLowerCase||t&&t.toLowerCase||p).call(c,null!=t?t.txIcon:t,{name:"toLowerCase",hash:{},data:n}))+"."+(null!=(a=_typeof(l=null!=(l=s.txIconExtension||(null!=t?t.txIconExtension:t))?l:p)===d?l.call(c,{name:"txIconExtension",hash:{},data:n}):l)?a:"")+'"\n                                 data-asset-index="'+(null!=(a=_typeof(l=null!=(l=s.index||n&&n.index)?l:p)===d?l.call(c,{name:"index",hash:{},data:n}):l)?a:"")+'"/>\n                        </div>\n                        <div class="perso-tx-info-container">\n                            <div class="perso-tx-col perso-tx-left-col">\n                                <div class="perso-tx-top-row">\n                                    <div class="perso-tx-name">'+(null!=(a=_typeof(l=null!=(l=s.txName||(null!=t?t.txName:t))?l:p)===d?l.call(c,{name:"txName",hash:{},data:n}):l)?a:"")+'</div>\n                                </div>\n                                <div class="perso-tx-bottom-row">\n'+(null!=(a=s.if.call(c,null!=t?t.txShowAccount:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                                </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.displayUserTag:a,{name:"if",hash:{},fn:e.program(12,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'                            </div>\n                            <div class="perso-tx-col perso-tx-right-col">\n                                <div class="perso-tx-amount-container">\n                                    <span '+(null!=(a=s.if.call(c,null!=t?t.txShowAmountColors:t,{name:"if",hash:{},fn:e.program(15,n,0,r,i),inverse:e.program(17,n,0,r,i),data:n}))?a:"")+">"+(null!=(a=_typeof(l=null!=(l=s.txAmount||(null!=t?t.txAmount:t))?l:p)===d?l.call(c,{name:"txAmount",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=t?t.displayInstallment:t,{name:"if",hash:{},fn:e.program(19,n,0,r,i),inverse:e.program(24,n,0,r,i),data:n}))?a:"")+'                                </div>\n                                <div class="perso-tx-date-container">\n                                    <div class="perso-tx-date-comment">'+(null!=(a=_typeof(l=null!=(l=s.txDateComment||(null!=t?t.txDateComment:t))?l:p)===d?l.call(c,{name:"txDateComment",hash:{},data:n}):l)?a:"")+'</div>\n                                    <div class="perso-tx-date">'+(null!=(a=_typeof(l=null!=(l=s.txDate||(null!=t?t.txDate:t))?l:p)===d?l.call(c,{name:"txDate",hash:{},data:n}):l)?a:"")+"</div>\n                                </div>\n                            </div>\n                        </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(26,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                    </div>\n                </div>\n"},4:function(e,t,s,o,n){var r;return'data-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.txId||(null!=t?t.txId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txId",hash:{},data:n}):r)+'"'},6:function(e,t,s,o,n){return' tabindex="0" role="button"'},8:function(e,t,s,o,n){return'role="text"'},10:function(e,t,s,o,n){var r;return'                                        <span class="perso-tx-account-name">'+(null!=(s="function"==typeof(r=null!=(r=s.txAccountName||(null!=t?t.txAccountName:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txAccountName",hash:{},data:n}):r)?s:"")+"</span>\n"},12:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.txTag:t,{name:"if",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?s:""},13:function(e,t,s,o,n){var r;return'                                        <div class="perso-tx-tag-row">\n                                            <div class="perso-tx-tag-container">\n                                                <div class="perso-tx-tag-icon"></div>\n                                                <div class="perso-tx-tag perso-accessibility-no-read">'+(null!=(s="function"==typeof(r=null!=(r=s.txTag||(null!=t?t.txTag:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txTag",hash:{},data:n}):r)?s:"")+"</div>\n                                            </div>\n                                        </div>\n"},15:function(e,t,s,o,n){var r;return'\n                                    class="perso-tx-amount perso-'+e.escapeExpression("function"==typeof(r=null!=(r=s.txMode||(null!=t?t.txMode:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txMode",hash:{},data:n}):r)+'"'},17:function(e,t,s,o,n){return'\n                                    class="perso-tx-amount"'},19:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing;return'                                        <div class="perso-tx-installment-comment">\n'+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.paymentTxt:a,{name:"if",hash:{},fn:e.program(20,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                            <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txInstallmentNumber||(null!=t?t.txInstallmentNumber:t))?l:p)?l.call(c,{name:"txInstallmentNumber",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.outOfTxt:a,{name:"if",hash:{},fn:e.program(22,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                            <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txTotalInstallments||(null!=t?t.txTotalInstallments:t))?l:p)?l.call(c,{name:"txTotalInstallments",hash:{},data:n}):l)?a:"")+"</span>\n                                        </div>\n                                    "},20:function(e,t,s,o,n,r,i){return'                                                <span class="perso-payment-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.paymentTxt:e,t))?e:"")+"</span>"},22:function(e,t,s,o,n,r,i){return'                                                <span class="perso-out-of-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.outOfTxt:e,t))?e:"")+"</span>"},24:function(e,t,s,o,n){var r;return'<span class="perso-tx-amount-comment">'+(null!=(s="function"==typeof(r=null!=(r=s.txAmountComment||(null!=t?t.txAmountComment:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txAmountComment",hash:{},data:n}):r)?s:"")+"</span>\n"},26:function(e,t,s,o,n){return'                            <div class="perso-tx-col perso-tx-col-enrichment">\n                                <div class="perso-tx-enrichment-btn"></div>\n                            </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-table perso-tl2 perso-tl2-'+(null!=(a="function"==typeof(a=null!=(a=s.subType||(null!=t?t.subType:t))?a:s.helperMissing)?a.call(l,{name:"subType",hash:{},data:n}):a)?a:"")+" "+(null!=(a=s.if.call(l,null!=t?t.transactionEnrichment:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(a=s.each.call(l,null!=t?t.tableObject:t,{name:"each",hash:{},fn:e.program(3,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"        </div>\n    </div>\n</div>\n"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-tl2-dateComment"]=e.template({1:function(e,t,s,o,n){return"perso-transaction-enrichment"},3:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing,d="function",u=e.escapeExpression;return'                <div class="perso-table-row-wrapper" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(4,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'>\n                    <div id="perso-table-row-'+u(_typeof(l=null!=(l=s.txId||(null!=t?t.txId:t))?l:p)===d?l.call(c,{name:"txId",hash:{},data:n}):l)+'" class="perso-tx-container" '+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(6,n,0,r,i),inverse:e.program(8,n,0,r,i),data:n}))?a:"")+'>\n                        <div class="perso-tx-col perso-tx-col-icon perso-tx-col-with-'+(null!=(a=_typeof(l=null!=(l=s.txIcon||(null!=t?t.txIcon:t))?l:p)===d?l.call(c,{name:"txIcon",hash:{},data:n}):l)?a:"")+'">\n                            <img class="perso-tx-icon perso-asset-loading" src="'+u(e.lambda(null!=i[1]?i[1].baseUrl:i[1],t))+"/"+(null!=(a=_typeof(l=null!=(l=s.txAssetType||(null!=t?t.txAssetType:t))?l:p)===d?l.call(c,{name:"txAssetType",hash:{},data:n}):l)?a:"")+"/"+u((s.toLowerCase||t&&t.toLowerCase||p).call(c,null!=t?t.txIcon:t,{name:"toLowerCase",hash:{},data:n}))+"."+(null!=(a=_typeof(l=null!=(l=s.txIconExtension||(null!=t?t.txIconExtension:t))?l:p)===d?l.call(c,{name:"txIconExtension",hash:{},data:n}):l)?a:"")+'" data-asset-index="'+(null!=(a=_typeof(l=null!=(l=s.index||n&&n.index)?l:p)===d?l.call(c,{name:"index",hash:{},data:n}):l)?a:"")+'"/>\n                        </div>\n                        <div class="perso-tx-info-container">\n                            <div class="perso-tx-col perso-tx-left-col">\n                                <div class="perso-tx-top-row">\n                                    <div class="perso-tx-name">'+(null!=(a=_typeof(l=null!=(l=s.txName||(null!=t?t.txName:t))?l:p)===d?l.call(c,{name:"txName",hash:{},data:n}):l)?a:"")+'</div>\n                                </div>\n                                <div class="perso-tx-bottom-row">\n'+(null!=(a=s.if.call(c,null!=t?t.txShowAccount:t,{name:"if",hash:{},fn:e.program(10,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                                </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.displayUserTag:a,{name:"if",hash:{},fn:e.program(12,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'                            </div>\n                            <div class="perso-tx-col perso-tx-right-col">\n                                <div class="perso-tx-amount-container">\n                                    <span '+(null!=(a=s.if.call(c,null!=t?t.txShowAmountColors:t,{name:"if",hash:{},fn:e.program(15,n,0,r,i),inverse:e.program(17,n,0,r,i),data:n}))?a:"")+">"+(null!=(a=_typeof(l=null!=(l=s.txAmount||(null!=t?t.txAmount:t))?l:p)===d?l.call(c,{name:"txAmount",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=t?t.displayInstallment:t,{name:"if",hash:{},fn:e.program(19,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'                                </div>\n                                <div class="perso-tx-date-container">\n                                    <div class="perso-tx-date-comment">'+(null!=(a=_typeof(l=null!=(l=s.txDateComment||(null!=t?t.txDateComment:t))?l:p)===d?l.call(c,{name:"txDateComment",hash:{},data:n}):l)?a:"")+'</div>\n                                    <div class="perso-tx-date">'+(null!=(a=_typeof(l=null!=(l=s.txDate||(null!=t?t.txDate:t))?l:p)===d?l.call(c,{name:"txDate",hash:{},data:n}):l)?a:"")+"</div>\n                                </div>\n                            </div>\n                        </div>\n"+(null!=(a=s.if.call(c,null!=(a=null!=(a=null!=i[1]?i[1].configObject:i[1])?a.configOptions:a)?a.transactionEnrichmentModal:a,{name:"if",hash:{},fn:e.program(24,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"                    </div>\n                </div>\n"},4:function(e,t,s,o,n){var r;return'data-id="'+e.escapeExpression("function"==typeof(r=null!=(r=s.txId||(null!=t?t.txId:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txId",hash:{},data:n}):r)+'"'},6:function(e,t,s,o,n){return' tabindex="0" role="button"'},8:function(e,t,s,o,n){return'role="text"'},10:function(e,t,s,o,n){var r;return'                                        <span class="perso-tx-account-name">'+(null!=(s="function"==typeof(r=null!=(r=s.txAccountName||(null!=t?t.txAccountName:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txAccountName",hash:{},data:n}):r)?s:"")+"</span>\n"},12:function(e,t,s,o,n){return null!=(s=s.if.call(null!=t?t:e.nullContext||{},null!=t?t.txTag:t,{name:"if",hash:{},fn:e.program(13,n,0),inverse:e.noop,data:n}))?s:""},13:function(e,t,s,o,n){var r;return'                                        <div class="perso-tx-tag-row">\n                                            <div class="perso-tx-tag-container">\n                                                <div class="perso-tx-tag-icon"></div>\n                                                <div class="perso-tx-tag perso-accessibility-no-read">'+(null!=(s="function"==typeof(r=null!=(r=s.txTag||(null!=t?t.txTag:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txTag",hash:{},data:n}):r)?s:"")+"</div>\n                                            </div>\n                                        </div>\n"},15:function(e,t,s,o,n){var r;return' class="perso-tx-amount perso-'+e.escapeExpression("function"==typeof(r=null!=(r=s.txMode||(null!=t?t.txMode:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"txMode",hash:{},data:n}):r)+'"'},17:function(e,t,s,o,n){return' class="perso-tx-amount"'},19:function(e,t,s,o,n,r,i){var a,l,c=null!=t?t:e.nullContext||{},p=s.helperMissing;return'                                        <div class="perso-tx-installment-comment">\n'+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.paymentTxt:a,{name:"if",hash:{},fn:e.program(20,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                            <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txInstallmentNumber||(null!=t?t.txInstallmentNumber:t))?l:p)?l.call(c,{name:"txInstallmentNumber",hash:{},data:n}):l)?a:"")+"</span>\n"+(null!=(a=s.if.call(c,null!=(a=null!=i[1]?i[1].staticTexts:i[1])?a.outOfTxt:a,{name:"if",hash:{},fn:e.program(22,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'\n                                            <span class="perso-tx-installment-number">'+(null!=(a="function"===_typeof(l=null!=(l=s.txTotalInstallments||(null!=t?t.txTotalInstallments:t))?l:p)?l.call(c,{name:"txTotalInstallments",hash:{},data:n}):l)?a:"")+"</span>\n                                        </div>\n"},20:function(e,t,s,o,n,r,i){return'                                                <span class="perso-payment-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.paymentTxt:e,t))?e:"")+"</span>"},22:function(e,t,s,o,n,r,i){return'                                                <span class="perso-out-of-text">'+(null!=(e=e.lambda(null!=(e=null!=i[1]?i[1].staticTexts:i[1])?e.outOfTxt:e,t))?e:"")+"</span>"},24:function(e,t,s,o,n){return'                            <div class="perso-tx-col perso-tx-col-enrichment">\n                                <div class="perso-tx-enrichment-btn"></div>\n                            </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n,r,i){var a,l=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-table perso-tl2 perso-tl2-'+(null!=(a="function"==typeof(a=null!=(a=s.subType||(null!=t?t.subType:t))?a:s.helperMissing)?a.call(l,{name:"subType",hash:{},data:n}):a)?a:"")+" "+(null!=(a=s.if.call(l,null!=t?t.transactionEnrichment:t,{name:"if",hash:{},fn:e.program(1,n,0,r,i),inverse:e.noop,data:n}))?a:"")+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(a=s.each.call(l,null!=t?t.tableObject:t,{name:"each",hash:{},fn:e.program(3,n,0,r,i),inverse:e.noop,data:n}))?a:"")+"        </div>\n    </div>\n</div>\n"},useData:!0,useDepths:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-trivia-trv4"]=e.template({1:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'            <div class="perso-answers-wrapper">\n                <button class="perso-answer" role="text" data-val="'+(null!=(r="function"===_typeof(i=null!=(i=s.val||(null!=t?t.val:t))?i:a)?i.call(e,{name:"val",hash:{},data:n}):i)?r:"")+'">\n                    <div class="perso-answer-icon-wrapper" role="text">\n                        <div class="perso-answer-icon" role="text"></div>\n                    </div>\n                    <span class="perso-answer-text">'+(null!=(r="function"===_typeof(i=null!=(i=s.txt||(null!=t?t.txt:t))?i:a)?i.call(e,{name:"txt",hash:{},data:n}):i)?r:"")+"</span>\n                </button>\n            </div>\n"},3:function(e,t,s,o,n){return null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.indicators:t,{name:"each",hash:{},fn:e.program(4,n,0),inverse:e.noop,data:n}))?s:""},4:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{};return'                <div class="perso-trivia-indicator-wrapper">\n                    <div class="perso-trivia-indicator '+(null!=(r=s.if.call(i,null!=t?t.isSelected:t,{name:"if",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?r:"")+" "+e.escapeExpression("function"==typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:s.helperMissing)?r.call(i,{name:"class",hash:{},data:n}):r)+'"></div>\n                </div>\n'},5:function(e,t,s,o,n){return"perso-selected"},7:function(e,t,s,o,n){var r;return'            <span class="perso-trivia-page">'+(null!=(s="function"==typeof(r=null!=(r=s.pageNumber||(null!=t?t.pageNumber:t))?r:s.helperMissing)?r.call(null!=t?t:e.nullContext||{},{name:"pageNumber",hash:{},data:n}):r)?s:"")+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing;return'<div id="perso-'+(null!=(r="function"===_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)?i.call(a,{name:"id",hash:{},data:n}):i)?r:"")+'" class="perso-trivia-container-trv4 perso-trivia">\n    <div class="pstory-block-frame perso-trivia-question"><span class="perso-question-text" role="text" tabindex="0">'+(null!=(r="function"===_typeof(i=null!=(i=s.questionText||(null!=t?t.questionText:t))?i:l)?i.call(a,{name:"questionText",hash:{},data:n}):i)?r:"")+'</span></div>\n    <div class="pstory-block-frame perso-answers-container">\n'+(null!=(r=s.each.call(a,null!=t?t.answers:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'    </div>\n    <div class="pstory-block-frame perso-trivia-page-index" role="text" >\n'+(null!=(r=s.if.call(a,null!=t?t.showPagination:t,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.program(7,n,0),data:n}))?r:"")+"    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-trivia-buttons-lnk2"]=e.template({1:function(e,t,s,o,n){var r,i,a=null!=t?t:e.nullContext||{},l=s.helperMissing,c="function",e=e.escapeExpression;return'                <div class="perso-trivia-button" role="button">\n                    <div class="perso-trivia-button-col perso-col1">\n                        <div class="perso-trivia-button-title"><span>'+(null!=(r=_typeof(i=null!=(i=s.txt1||(null!=t?t.txt1:t))?i:l)===c?i.call(a,{name:"txt1",hash:{},data:n}):i)?r:"")+'</span></div>\n                        <div class="perso-trivia-button-description"><span>'+(null!=(r=_typeof(i=null!=(i=s.txt2||(null!=t?t.txt2:t))?i:l)===c?i.call(a,{name:"txt2",hash:{},data:n}):i)?r:"")+'</span></div>\n                    </div>\n                    <div class="perso-trivia-button-col perso-col2">\n                        <a id="'+e(_typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:l)===c?i.call(a,{name:"id",hash:{},data:n}):i)+'" class="pstory-link-navigateTo pstory-button perso-ripple-closed" action-id="'+e(_typeof(i=null!=(i=s.action||(null!=t?t.action:t))?i:l)===c?i.call(a,{name:"action",hash:{},data:n}):i)+'" pnavigate-id="'+e(_typeof(i=null!=(i=s.navigateTarget||(null!=t?t.navigateTarget:t))?i:l)===c?i.call(a,{name:"navigateTarget",hash:{},data:n}):i)+'"></a></div>\n                </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l=e.escapeExpression;return'<div id="pstory-block-buttons_'+l("function"===_typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)?r.call(i,{name:"id",hash:{},data:n}):r)+'" class="pstory-block-frame pstory-block-trivia-buttons-lnk2 '+l("function"===_typeof(r=null!=(r=s.class||(null!=t?t.class:t))?r:a)?r.call(i,{name:"class",hash:{},data:n}):r)+'">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n'+(null!=(l=s.each.call(i,null!=t?t.options:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?l:"")+"        </div>\n    </div>\n</div>\n"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-pin-chart-pcv2"]=e.template({1:function(e,t,s,o,n){return'                <div class="perso-pin-item-wrapper">\n                    <div class="perso-pin-bar-wrapper" aria-hidden="true">\n                        <span class="perso-pin-amount"></span>\n                        <div class="perso-pin-bar"></div>\n                    </div>\n                    <span class="perso-date-txt" aria-hidden="true"></span>\n\n                </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){return'<div class="pstory-block-frame pstory-block-pinGraph-chart-pcv2">\n    <div class="pstory-block-container">\n        <div class="pstory-block-content">\n            <div class="perso-pin-graph-container">\n'+(null!=(s=s.each.call(null!=t?t:e.nullContext||{},null!=t?t.series:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:"")+"            </div>\n        </div>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["pstory-block-calendar-cl6"]=e.template({1:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,e=e.escapeExpression;return'                                    <div class="perso-calendar-week-day" aria-hidden="true" title="'+e("function"===_typeof(r=null!=(r=s.dayName||(null!=t?t.dayName:t))?r:a)?r.call(i,{name:"dayName",hash:{},data:n}):r)+'">'+e("function"===_typeof(r=null!=(r=s.shortDayName||(null!=t?t.shortDayName:t))?r:a)?r.call(i,{name:"shortDayName",hash:{},data:n}):r)+"</div>\n"},3:function(e,t,s,o,n){return'                            <div id="perso-calendar-bottom-text" class="perso-calendar-bottom-text" aria-hidden="true"></div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=e.escapeExpression,a=null!=t?t:e.nullContext||{};return'<div class="pstory-block-frame pstory-block-calendar-cl6">\n    <div class="perso-accessibility-wrapper perso-accessibility-calendar">\n        <span class="perso-accessibility-read" role="text">'+i(e.lambda(null!=(r=null!=t?t.accessibilityTexts:t)?r.accessibilityCalendarTitle:r,t))+'</span>\n    </div>\n    <div class="pstory-block-container">\n            <div class="pstory-block-content" id="'+i("function"==typeof(i=null!=(i=s.id||(null!=t?t.id:t))?i:s.helperMissing)?i.call(a,{name:"id",hash:{},data:n}):i)+'" tabindex="-1">\n                <section class="perso-calendar perso-calendar-inlined">\n                    <div class="perso-calendar-inner">\n                        <div class="perso-calendar-inner-container">\n                           <div class="perso-calendar-months">\n                            <div class="perso-calendar-month">\n                                <div class="perso-calendar-week-days" aria-hidden="true">\n'+(null!=(r=s.each.call(a,null!=t?t.weekDays:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'                                </div>\n                                <div class="perso-calendar-days">\n'+(null!=(r=e.invokePartial(o.persoCalendarBlock,t,{name:"persoCalendarBlock",data:n,indent:"                                    ",helpers:s,partials:o,decorators:e.decorators}))?r:"")+"                                </div>\n                            </div>\n                        </div>\n                        </div>\n"+(null!=(r=s.if.call(a,null!=t?t.bottomText:t,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+"                    </div>\n                </section>\n            </div>\n    </div>\n</div>\n"},usePartial:!0,useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-pstory-all-card"]=e.template({1:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l=e.lambda;return'        <div class="perso-info-container-col">\n            <div class="perso-info-container-row">\n                <div class="perso-image-wrapper">\n                    <img class="perso-image-all perso-asset-loading" data-perso-card-type="'+(null!=(r="function"==typeof(r=null!=(r=s.id||(null!=t?t.id:t))?r:a)?r.call(i,{name:"id",hash:{},data:n}):r)?r:"")+'"\n                        src="'+e.escapeExpression(l((r=n&&n.root)&&r.baseUrl,t))+"/"+(null!=(r=l((r=n&&n.root)&&r.assetDirectory,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||a).call(i,null!=t?t.image:t,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=l((r=n&&n.root)&&r.assetExtension,t))?r:"")+'">\n                </div>\n            </div>\n        </div>\n'},3:function(e,t,s,o,n){var r,i,e=null!=t?t:e.nullContext||{},a=s.helperMissing;return'            <div class="perso-info-container-row">\n                <span class="perso-cards-number-text"> '+(null!=(r="function"===_typeof(i=null!=(i=s.numberOfAccounts||(null!=t?t.numberOfAccounts:t))?i:a)?i.call(e,{name:"numberOfAccounts",hash:{},data:n}):i)?r:"")+" "+(null!=(r="function"===_typeof(i=null!=(i=s.lblAccounts||(null!=t?t.lblAccounts:t))?i:a)?i.call(e,{name:"lblAccounts",hash:{},data:n}):i)?r:"")+"</span>\n            </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing;return'<div id="perso-all-cards-info-container" class="perso-all-cards-container perso-accessibility-item" role="text">\n    <div class="perso-info-container-row">\n'+(null!=(r=s.if.call(i,(r=n&&n.root)&&r.showIcon,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'        <div class="perso-info-container-col">\n'+(null!=(r=s.if.call(i,(r=n&&n.root)&&r.showAllAccountCountText,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?r:"")+'        </div>\n    </div>\n    <div class="perso-info-container-row perso-bottom-row">\n        <span class="perso-card-total-txt">'+(null!=(r="function"===_typeof(e=null!=(e=s.lblTotal||(null!=t?t.lblTotal:t))?e:a)?e.call(i,{name:"lblTotal",hash:{},data:n}):e)?r:"")+'</span>\n        <span class="perso-card-amount-txt">'+(null!=(r="function"===_typeof(e=null!=(e=s.lblAmount||(null!=t?t.lblAmount:t))?e:a)?e.call(i,{name:"lblAmount",hash:{},data:n}):e)?r:"")+"</span>\n    </div>\n</div>"},useData:!0}),this.Personetics.UI.Handlebars.templates["tmpl-pstory-single-card"]=e.template({1:function(e,t,s,o,n){var r,i=e.lambda;return'        <div class="perso-image-wrapper">\n            <img class="perso-image-single perso-asset-loading"\n                src="'+(null!=(r=i((r=n&&n.root)&&r.baseUrl,t))?r:"")+"/"+(null!=(r=i((r=n&&n.root)&&r.assetDirectory,t))?r:"")+"/"+(null!=(r=(s.toLowerCase||t&&t.toLowerCase||s.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?t.image:t,{name:"toLowerCase",hash:{},data:n}))?r:"")+"."+(null!=(r=i((r=n&&n.root)&&r.assetExtension,t))?r:"")+'">\n        </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,s,o,n){var r,i=null!=t?t:e.nullContext||{},a=s.helperMissing,l="function";return'<div class="perso-card-info-container perso-accessibility-item" role="text">\n    <div class="perso-info-container-row">\n'+(null!=(r=s.if.call(i,(r=n&&n.root)&&r.showIcon,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?r:"")+'        <div class="perso-account-info">\n            <span class="perso-account-name">'+(null!=(r=_typeof(e=null!=(e=s.name||(null!=t?t.name:t))?e:a)===l?e.call(i,{name:"name",hash:{},data:n}):e)?r:"")+'</span>\n        </div>\n    </div>\n    <div class="perso-info-container-row perso-bottom-row">\n        <span class="perso-card-total-txt">'+(null!=(r=_typeof(e=null!=(e=s.text2||(null!=t?t.text2:t))?e:a)===l?e.call(i,{name:"text2",hash:{},data:n}):e)?r:"")+'</span>\n        <span class="perso-card-amount-txt">'+(null!=(r=_typeof(e=null!=(e=s.text||(null!=t?t.text:t))?e:a)===l?e.call(i,{name:"text",hash:{},data:n}):e)?r:"")+"</span>\n    </div>\n</div>"},useData:!0})}((window,window.Personetics=window.Personetics||{},jQuery,window.Personetics.UI.Handlebars)),function(n){n.story=n.story||{},n.story.BlockChartFactory=new function(){this.chartHelperFactoryMap={},this.registerChartHelper=function(e,t){var s;Object.prototype.hasOwnProperty.call(t,"helperClass")?t.helperClass&&((s=this.chartHelperFactoryMap[e])||(this.chartHelperFactoryMap[e]=s={type:e,class:{},widthModes:{}}),t.class?s.class[t.class]=t.helperClass:t.widthMode?s.widthModes[t.widthMode]=t.helperClass:s.helperClass=t.helperClass):this.chartHelperFactoryMap[e]=t},this.generateHelperClazz=function(e,t){var s,o=null;return void 0!==e&&null!=e&&Object.prototype.hasOwnProperty.call(this.chartHelperFactoryMap,e)?(s=this.chartHelperFactoryMap[e].helperClass,o=new(s=Object.prototype.hasOwnProperty.call(t,"widthMode")&&void 0!==t.widthMode&&null!==t.widthMode&&0<t.widthMode.length&&void 0!==this.chartHelperFactoryMap[e].widthModes[t.widthMode]?this.chartHelperFactoryMap[e].widthModes[t.widthMode]:s)(t)):n.log("The helper"+e+"is not valid"),o}}}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,e,n){var i=s.d3;e.utils=e.utils||{},e.utils.d3Helpers=e.utils.d3Helpers||{},e.utils.d3Helpers.BlockHelperBase=Base.extend({prepareChart:function(e,t){this.options=t,this.width=this.getValueByScreenWidth(this.options.svgWidth)},renderSVGBase:function(e,t){return t=t||"",i.select(e.get(0)).append("svg").attr("class","perso-svg-chart-container "+t).attr("width",this.width).attr("height",this.getValueByScreenWidth(this.options.svgHeight)).append("g").attr("transform","translate(0,0)")},renderLabels:function(){var s=this;this.options.labels.drawLabels&&this.svg.append("g").selectAll().data(s.seriesData).enter().append("text").attr("class","perso-label").attr("class",function(e){var t="perso-label";return e.selected&&(t+=" perso-selected"),t}).attr("text-anchor","middle").attr("x",function(e,t){return s.xScale(s.categoriesData[t])+s.xScale.rangeBand()/2}).attr("y",function(e){var t=0<this.options.labels.marginBottom?this.options.labels.marginBottom:0;return s.yScale(e.value)-t}).html(function(e){return e.label})},renderXAxis:function(){var s=this;this.xAxis&&this.svg.append("g").attr("class","x axis").attr("transform",function(){var e=0,t=0;return s.options.axis.translation.x&&(e=s.options.axis.translation.x),"height"==s.options.axis.translation.y&&(t+=s.height+s.margin.bottom),"translate("+e+","+t+")"}).call(s.xAxis)},wrapLabelText:function(e){e.each(function(){var e,t=i.select(this),s=[],o=0,n=t.attr("y"),r=parseFloat(t.attr("dy"));for(null!=t.text().match(/\d+/g)&&(s[0]=t.text().match(/\d+/g)[0]),null!=t.text().match(/[a-zA-Z]+/)&&(s[1]=t.text().match(/[a-zA-Z]+/)[0]),t.text(null);e=s.pop();)t.append("tspan").attr("x",0).attr("y",n).attr("dy",.8*o*1.5+r+"em").text(e),o++})},renderYAxis:function(s){var o=this;this.options.yAxisLineDisplay&&this.svg.append("g").attr("class","y axis perso-grid").attr("transform",function(){var e=void 0!==o.options.yAxisTop?o.options.yAxisTop:0,t=("boolean"==typeof s&&s&&(e=o.negativeYAxisTop),void 0!==o.options.horizontalLineLeft?o.options.horizontalLineLeft:0);return"translate("+o.getValueByScreenWidth(t)+","+o.getValueByScreenWidth(e)+")"}).call(o.yAxis).selectAll(".tick line").attr("x2",function(){var e=void 0!==o.options.horizontalLineWidth?o.options.horizontalLineWidth:o.options.svgWidth||0;return o.getValueByScreenWidth(e)}),this.options.yAxisTextDisplay||(this.svg.selectAll(".y.perso-grid .tick text").remove(),this.svg.selectAll(".y.perso-grid path").remove())},renderVerticalLines:function(s){var e,o=this;o.options.drowVerticalLines&&(e=o.options.lineMarginLeft||-30,this.svg.append("g").attr("transform","translate("+o.getValueByScreenWidth(e)+","+o.getValueByScreenWidth(o.options.verticalLineTop)+")").selectAll("g").data(o.seriesData).enter().append("g").attr("class","perso-chart-line").attr("transform",function(){return"translate(0,0)"}).selectAll(".line").data(function(e){return e}).enter().append("line").attr("class","perso-chart-line").attr("y1","0").attr("y2",o.getValueByScreenWidth(o.options.lineHeight)).attr("x1",function(e,t){return s(t)+o.getValueByScreenWidth(o.options.rectangles.paddingBottom)}).attr("x2",function(e,t){return s(t)+o.getValueByScreenWidth(o.options.rectangles.paddingBottom)}))},renderGradient:function(){var e=this.options.rectangles.gradients,o=this.svg.append("defs");e&&n.each(e,function(e,s){s&&(o=o.append("linearGradient").attr("id",s.id).attr("x1","0").attr("x2","0").attr("y1","0").attr("y2","1"),n.each(s.stopColors,function(e,t){o.append("stop").attr("offset",s.offset[e]).attr("stop-color",t)}))})},renderFilter:function(){var e=this.options.rectangles.filter,o=this.svg.selectAll("defs");e&&n.each(e,function(e,t){var s;t&&((s=o.append("filter").attr("id",t.id)).append("feGaussianBlur").attr("in",t.in).attr("stdDeviation",t.stdDeviation),s.append("feOffset").attr("dx",t.dxOffset).attr("dy",t.dyOffset),(s=s.append("feMerge")).append("feMergeNode"),s.append("feMergeNode").attr("in",t.in))})},getValueByScreenWidth:function(e){var t=n(s).width();return t>=this.options.desktopScreenWidth||t<347?e:414<=t?e*this.options.screen.ratio_large:e*this.options.screen.ratio_medium}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e,n,r){var i=e.d3;n.utils=n.utils||{},n.utils.d3Helpers=n.utils.d3Helpers||{},n.utils.d3Helpers.MultiVerticalChartHelper=n.utils.d3Helpers.BlockHelperBase.extend({MIN_BAR_HEIGHT:20,prepareChart:function(e,t,s){n.utils.d3Helpers.BlockHelperBase.prototype.prepareChart.call(this,e,t);this.handleClick=s,this.seriesData=e.series,this.categoriesData=e.categories,this.seriesLabelsData=e.seriesLabels,this.series=e.series,this.rWidth=this.getValueByScreenWidth(t.rectangles.width),this.rPadding=this.getValueByScreenWidth(t.rectangles.paddingRight),this.rSpace=this.getValueByScreenWidth(t.rectangles.space),this.width=this.getValueByScreenWidth(t.svgWidth);var s=(this.width+this.rSpace)/(this.rWidth+this.rPadding+this.rSpace),o=(this.numOfBars=this.categoriesData.length>s?Math.floor(s):this.categoriesData.length,this.left=(this.width-(this.numOfBars*(this.rWidth+this.rPadding)+(this.numOfBars-1)*this.rSpace))/2,this.contentWidth=this.numOfBars*(this.rWidth+this.rPadding+this.rSpace),this.leftForScale=(this.width-this.numOfBars*(this.rWidth+this.rPadding)-(this.numOfBars-1)*this.rSpace-this.rSpace)/2,this.colorScale=i.scale.ordinal().rangeRoundBands([0,this.width],.1),this.colors=this.colorScale.range(this.options.palette),this.colorsLabels=i.scale.ordinal().rangeRoundBands([0,this.width],.1).range(this.options.paletteLabels),this.dispatch=i.dispatch("clickOnMonth"),0);this.seriesData.map(function(e){return o+=e.length,e}),this.dataLength=o,this.xScale=i.scale.ordinal().domain(e.categories).rangeBands([0,this.contentWidth]),this.xLineScale=i.scale.ordinal().domain(i.range(e.categories.length)).rangeBands([0,this.contentWidth],0),this.xAxis=i.svg.axis().scale(this.xScale).outerTickSize(0),this.yScale=i.scale.linear().range([this.getValueByScreenWidth(this.options.maxBarHeight)-this.MIN_BAR_HEIGHT,0],.1),this.yAxisScale=i.scale.linear().range([this.getValueByScreenWidth(this.options.yAxisHeight),0])},renderChart:function(e){this.yScale.domain([0,i.max(this.seriesData,function(e){return i.max(e,function(e){return e.value})})]),this.modifyData(),this.svg=this.renderSVGBase(e,"multiVertical"),this.renderGradient(),this.renderFilter(),this.renderMultiVerticalBars(),this.renderLabels(),this.options.doAnimations||(this.options.barDelay=this.options.barDuration=this.options.labelDelay=this.options.labelDuration=0,this.barAnimations()),this.renderHiddenRects(this.seriesData),this.renderXAxis(),this.renderVerticalLines(this.xLineScale)},renderMultiVerticalBars:function(){var s=this,e=[].concat.apply([],this.seriesData);this.minValue=i.min(e,function(e){return e.value||1/0}),this.maxValue=i.max(e,function(e){return e.value}),s.sortedData=s.sortData(),this.blockWithBars=this.svg.append("g").attr("transform",function(){return"translate("+s.left+","+s.getValueByScreenWidth(s.options.barTop)+")"}).selectAll("g").data(s.sortedData).enter().append("g").style("fill",function(e,t){return s.colors(t)}).attr("transform",function(e,t){return"translate("+s.getSeriesTranslateValue(t)+",0)"}).selectAll("rect").data(function(e){return e}),this.blockWithBars.enter().append("rect").attr("class",function(e){var t="perso-chart-rect "+e.mode;return e.selected&&(t+=" perso-selected"),t}).attr("y",this.getValueByScreenWidth(this.options.maxBarHeight)).attr("height",0).attr("x",function(e,t){return t*(s.rWidth+s.rPadding+s.rSpace)}).attr("width",function(){return s.rWidth}).attr("rx",function(){var e=s.options.rectangles.borderRadius.rx||"0";return s.getValueByScreenWidth(e)}).attr("ry",function(){var e=s.options.rectangles.borderRadius.ry||"0";return s.getValueByScreenWidth(e)}).on("click",function(e,t){"function"==typeof s.handleClick&&s.handleClick(e,t)})},MultiVerticalBarsTransition:function(e){var t=this;e.transition().duration(t.options.barDuration).delay(t.options.barDelay).attr("y",function(e){return t.getBarsY(e)}).attr("height",function(e){return t.getBarsHeight(e)})},getBarsHeight:function(e){var t=Math.abs(e.value),t=e.value?this.getValueByScreenWidth(this.options.maxBarHeight)-this.yScale(t):0;return e.barHeight=t},getBarsY:function(e){e=e.value<0?this.getValueByScreenWidth(this.options.maxBarHeight):this.yScale(e.value);return e},renderLabels:function(){var s,e,o=this;o.sortedData=o.sortData(),this.options.labels.drawLabels&&(s="perso-label perso-label-fadeIn",4<=this.categoriesData.length&&(s+=" minimize-font"),e=this.svg.append("g").attr("transform",function(){var e=o.getValueByScreenWidth(o.options.labelTop);return"translate("+o.leftForScale+","+e+")"}).selectAll("g").data(o.sortedData).enter().append("g").style("fill",function(e,t){return o.colorsLabels(t)}).attr("transform",function(e,t){return"translate(0,"+o.getValueByScreenWidth(o.options.nextLabelTop)*!t+")"}).selectAll("text").data(function(e){return e}),this.labels=e.enter().append("text").attr("text-anchor","middle").attr("class",function(e){var t=s+" "+e.mode;return e.selected&&(t+=" perso-selected"),t}).attr("x",function(e,t){return o.xScale(o.categoriesData[t])+o.contentWidth/o.dataLength}).attr("y",function(e,t){t=o.getMaxBarHeightInMonth(o.categoriesData[t]);return o.yScale(0)-t}).attr("dy","0.4em").html(function(e){return e.label}))},renderXAxis:function(){var o=this;this.xAxis&&this.svg.append("g").attr("class","x axis").attr("transform",function(){var e=o.getValueByScreenWidth(o.options.xAxiaTop);return"translate("+o.leftForScale+","+e+")"}).call(o.xAxis).selectAll(".tick text").attr("y","0").data(this.seriesData[0]).attr("class",function(e,t){var s="perso-xAxis-label";return e.selected&&(s+=" perso-selected"),0===o.seriesData[1][t].value&&0===o.seriesData[0][t].value&&o.seriesData[1][t].category===e.category&&o.seriesData[0][t].category===e.category&&(s+=" perso-unclickable"),s}).on("click",function(e,t){0===o.seriesData[1][t].value&&0===o.seriesData[0][t].value||o.seriesData[1][t].category!==e.category||o.seriesData[0][t].category!==e.category||"function"==typeof o.handleClick&&o.handleClick(e,t)})},renderHiddenRects:function(e){var o=this,t=o.getValueByScreenWidth(o.options.maxBarHeight);o.seriesData=e,this.svg.append("g").attr("class","perso-hidden-rects").attr("transform",function(){return"translate("+o.left+","+o.getValueByScreenWidth(o.options.barTop)+")"}).selectAll("g").data(this.seriesData[0]).enter().append("rect").attr("class",function(e,t){var s="hidden-rect";return 0===o.seriesData[1][t].value&&0===o.seriesData[0][t].value&&o.seriesData[1][t].category===e.category&&o.seriesData[0][t].category===e.category&&(s+=" perso-unclickable"),s}).attr("height",function(){return t}).attr("width",o.rWidth+o.rPadding).attr("x",function(e,t){return t*(o.rWidth+o.rPadding+o.rSpace)}).attr("fill-opacity",0).on("click",function(e,t){0===o.seriesData[1][t].value&&0===o.seriesData[0][t].value||o.seriesData[1][t].category!==e.category||o.seriesData[0][t].category!==e.category||"function"==typeof o.handleClick&&o.handleClick(e,t)})},getMaxBarHeightInMonth:function(s){var o=this,n=0;return this.series&&0<this.series.length&&r.each(o.seriesData,function(e,t){r.each(t,function(e,t){t=Math.abs(o.getBarsHeight(t));o.categoriesData[e]==s&&n<t&&(n=t)})}),n},sortData:function(){var s,o,n=this;return this.seriesData&&(s=this.seriesLabelsData.slice().reverse(),o=[],s.forEach(function(e,t){o[s.indexOf(n.seriesLabelsData[t])]=n.seriesData[t]})),o},modifyData:function(){var o,e=this;this.seriesData&&(o=this.seriesLabelsData,r.each(o,function(s){r.each(e.seriesData[s],function(e,t){t.mode=o[s]})}))},getSeriesTranslateValue:function(e){return this.rPadding*e},barAnimations:function(){this.barsDraw||(this.MultiVerticalBarsTransition(this.blockWithBars),this.labelsTransition(this.labels),this.barsDraw=!0)},labelsTransition:function(e){void 0!==e&&e.transition().duration(this.options.labelDuration).delay(this.options.labelDelay).style("opacity",1)}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e,o){var r=e.d3;o.utils=o.utils||{},o.utils.d3Helpers=o.utils.d3Helpers||{},o.utils.d3Helpers.VerticalChartHelper=o.utils.d3Helpers.BlockHelperBase.extend({MIN_BAR_HEIGHT:20,prepareChartData:function(e,t){this.options=t,this.width=this.getValueByScreenWidth(t.svgWidth);var t=t.rectangles,s=(this.width+this.getValueByScreenWidth(t.space))/this.getValueByScreenWidth(t.width+t.space);return this.numOfBars=e.categories.length>s?Math.floor(s):e.categories.length,this.calcLeft=(this.width-(this.numOfBars+1)*this.getValueByScreenWidth(t.width+t.space))/2,o.processor.PStoryConfig.isRtl()?(s=e.categories.length-(e.categories.length-this.numOfBars),e.categories=e.categories.slice(0,s),e.series=e.series.slice(0,s)):(t=e.categories.length,e.categories=e.categories.slice(t-this.numOfBars,t),e.series=e.series.slice(t-this.numOfBars,t)),e},prepareChart:function(e,t,s){o.utils.d3Helpers.BlockHelperBase.prototype.prepareChart.call(this,e,t),this.benchmarkLinesData=e.benchmarkLines||[],this.handleClick=s,this.seriesData=e.series,this.categoriesData=e.categories,this.negativeBarTop=this.options.negativeBarTop||this.options.svgHeight,this.negativeYAxisTop=this.options.negativeYAxisTop||this.options.svgHeight;s=t.rectangles;this.xScale=r.scale.ordinal().rangeRoundBands([0,(this.numOfBars+1)*this.getValueByScreenWidth(s.width+s.space)],1),this.yScale=r.scale.linear().range([this.getValueByScreenWidth(this.options.maxBarHeight)-this.MIN_BAR_HEIGHT,0]),this.xAxis=r.svg.axis().scale(this.xScale).outerTickSize(0),this.yAxisScale=r.scale.linear().range([this.getValueByScreenWidth(this.options.yAxisHeight),0]),this.yAxis=r.svg.axis().scale(this.yAxisScale).orient("left").innerTickSize(-this.width).outerTickSize(0).ticks(5)},renderChart:function(e){var t=this;this.minVal=0,this.seriesDataAndBenchmark=t.seriesData,t.benchmarkLinesData.forEach(function(e){t.seriesDataAndBenchmark=t.seriesDataAndBenchmark.concat(e.benchmarks)}),this.maxVal=r.max(t.seriesDataAndBenchmark,function(e){return Math.abs(parseFloat(e.value))}),this.xScale.domain(t.categoriesData.map(function(e){return e})),this.yScale.domain([this.minVal,this.maxVal]),this.hasMinVals=!1,this.seriesMinVal=r.min(t.seriesDataAndBenchmark,function(e){return parseFloat(e.value)}),this.seriesMinVal<0&&(this.hasMinVals=!0,this.maxPositiveVal=r.max(t.seriesDataAndBenchmark,function(e){return parseFloat(e.value)}),this.maxNegativeBarHeight=this.options.maxBarHeight-this.yScale(Math.abs(this.seriesMinVal)),this.maxPositiveBarHeight=this.options.maxBarHeight-this.yScale(this.maxPositiveVal)),this.svg=this.renderSVGBase(e),this.renderGradient(),this.renderFilter(),this.renderYAxis(),this.hasMinVals&&this.renderYAxis(!0),Object.prototype.hasOwnProperty.call(this.options,"isDesktop")&&this.options.isDesktop&&this.renderAccessibilityHiddenRects(),this.renderVerticalBars(),this.renderXAxis(),this.renderLabels(),this.options.doAnimations||(this.options.barDelay=this.options.barDuration=this.options.labelDelay=this.options.labelDuration=0,this.barAnimations()),this.renderBenchMarkLines(),this.renderBenchMarkOuterLabels()},renderBenchMarkLines:function(){var t=this;this.benchmark=this.svg.append("g").attr("class","benchmarkLines"),this.benchmarkLinesData.forEach(function(e){t.renderLine(e.benchmarks)})},renderLine:function(e){var s=this;this.line=r.svg.line().interpolate(s.options.lineStyle_interpolate||"linear").x(function(e,t){return s.xScale(s.categoriesData[t])}).y(function(e){return s.yScale(e.value)}),this.benchmark.append("g").attr("name","line").attr("transform","translate("+s.calcLeft+","+s.getValueByScreenWidth(s.options.barTop)+")").append("path").datum(e).attr("class","perso-line").attr("d",this.line)},renderBenchMarkOuterLabels:function(){var t=this,e=t.getValueByScreenWidth(t.options.rectangles.width);this.options.labels.drawBenchMarkOuterLabels&&this.svg.append("g").attr("transform",function(){var e=t.options.benchMarkOuterLabelsY?t.getValueByScreenWidth(t.options.benchMarkOuterLabelsY):0;return"translate("+(t.options.benchMarkOuterLabelsX?t.getValueByScreenWidth(t.options.benchMarkOuterLabelsX):0)+","+e+")"}).selectAll().data(this.benchmarkLinesData).enter().append("text").attr("text-anchor","end").attr("y",function(e){return t.yScale(e.benchmarks[0].value)}).attr("x",function(){return t.calcLeft+t.xScale(t.categoriesData[0])-e}).attr("dy",function(e){return e.value,"1em"}).html(function(e){return e.label})},renderSVGBase:function(e){var t=this.getValueByScreenWidth(this.options.svgHeight),s=0;return this.hasMinVals&&(t+=this.getValueByScreenWidth(this.maxNegativeBarHeight+this.options.barTop),s=this.getValueByScreenWidth(this.maxPositiveBarHeight-this.options.maxBarHeight)),r.select(e.get(0)).append("svg").attr("class","perso-svg-chart-container").attr("width",this.width).attr("height",t+s).append("g").attr("class","perso-svg-container-group").attr("transform",function(){return"translate(0,"+s+")"})},renderVerticalBars:function(){var s=this,o=(s.minAbsValue=r.min(s.seriesData,function(e){return Math.abs(e.value)||1/0}),s.maxValue=s.maxVal,s.minValue=s.minVal,s.getValueByScreenWidth(s.options.rectangles.space||30)),n=s.getValueByScreenWidth(s.options.rectangles.width),e=(s.width-(s.numOfBars*n+(s.numOfBars-1)*o))/2;this.bars=this.svg.append("g").attr("transform",function(){return"translate("+e+","+s.getValueByScreenWidth(s.options.barTop)+")"}).selectAll("rect").data(s.seriesData).enter().append("rect").attr("class",function(e){var t="perso-bar";return e.selected&&(t+=" perso-selected"),t}).attr("x",function(e,t){return t*(o+n)}).attr("width",function(){return n}).attr("y",function(e){return e.value<0?s.getValueByScreenWidth(s.negativeBarTop-s.options.barTop):s.getValueByScreenWidth(s.options.maxBarHeight)}).attr("height",0).attr("rx",function(){var e=s.options.rectangles.borderRadius.rx||"0";return s.getValueByScreenWidth(e)}).attr("ry",function(){var e=s.options.rectangles.borderRadius.ry||"0";return s.getValueByScreenWidth(e)}).on("click",function(e,t){"function"==typeof s.handleClick&&s.handleClick(e,t)})},getBarsHeight:function(e){var t=Math.abs(e.value),t=e.value?this.getValueByScreenWidth(this.options.maxBarHeight)-this.yScale(t):0;return e.barHeight=t},getBarsY:function(e){e=e.value<0?this.getValueByScreenWidth(this.negativeBarTop-this.options.barTop):this.yScale(e.value);return e},renderLabels:function(){var s="perso-label perso-label-fadeIn",o=this;6<=o.seriesData.length&&(s+=" minimize-font"),this.options.labels.drawLabels&&(this.label=this.svg.append("g").attr("transform",function(){var e=o.options.labelTop?o.getValueByScreenWidth(o.options.labelTop):0;return"translate("+o.calcLeft+","+e+")"}).selectAll().data(o.seriesData).enter().append("text").attr("class",function(e){var t=s;return e.selected&&(t+=" perso-selected"),t}).attr("text-anchor","middle").attr("x",function(e,t){return o.xScale(o.categoriesData[t])}).attr("y",function(e){return o.getLabelsY(e)}).attr("dy",function(e){return e.value<0?"1em":0}).html(function(e){return e.label}))},getLabelsY:function(e){e=e.value<0?this.getValueByScreenWidth(this.options.barTop-this.options.labelTop+this.negativeBarTop-this.options.labelTop)+this.getBarsHeight(e):this.yScale(0)-this.getBarsHeight(e)+this.MIN_BAR_HEIGHT;return e},renderXAxis:function(){var e=this;this.xAxis&&this.svg.append("g").attr("class","x axis").attr("transform",function(){return"translate("+e.calcLeft+","+e.getValueByScreenWidth(e.options.xAxisTop)+")"}).call(e.xAxis).selectAll(".tick text").data(e.seriesData).attr("y","0").attr("class",function(e){var t="perso-xAxis-label";return e.selected&&(t+=" perso-selected"),0===e.value&&(t+=" perso-unclickable"),t})},renderAccessibilityHiddenRects:function(){var s=this,o=s.getValueByScreenWidth(3*s.options.rectangles.width+(s.options.rectangles.paddingRight||0)),e=s.getValueByScreenWidth(s.options.svgHeight-(s.options.labelTop||0)),n=s.getValueByScreenWidth(s.options.rectangles.space||30),r=s.getValueByScreenWidth(s.options.rectangles.width),t=(s.width-(s.numOfBars*r+(s.numOfBars-1)*n))/2,i=this.seriesData.slice().reverse();this.svg.append("g").attr("class","perso-hidden-rects").attr("transform",function(){return"translate("+t+","+s.getValueByScreenWidth(s.options.barTop-s.options.yAxisTop)+")"}).selectAll("g").data(i).enter().append("rect").attr("class",function(e){var t="perso-access-hidden-rect";return 0===e.value&&(t+=" perso-unclickable"),t}).attr("height",function(){return e}).attr("width",o).attr("x",function(e,t){return(s.seriesData.length-1-t)*(n+r)-o/3}).attr("fill-opacity",0)},barAnimations:function(){this.barsDraw||(this.barsTransition(this.bars),this.labelTransition(this.label),this.barsDraw=!0)},barsTransition:function(e){var t=this;e.transition().duration(this.options.barDuration).delay(this.options.barDelay).attr("y",function(e){return t.getBarsY(e)}).attr("height",function(e){return t.getBarsHeight(e)})},labelTransition:function(e){void 0!==e&&e.transition().duration(this.options.labelDuration).delay(this.options.labelDelay).style("opacity",1)}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e){e.utils=e.utils||{},e.utils.d3Helpers=e.utils.d3Helpers||{},e.utils.d3Helpers.PinGraphChartHelper=e.utils.d3Helpers.VerticalChartHelper.extend({})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,e,n){var c=s.d3;e.utils=e.utils||{},e.utils.d3Helpers=e.utils.d3Helpers||{},e.utils.d3Helpers.LineChartHelper=Base.extend({prepareChart:function(e,t){this.options=t,this.seriesData=e.series.reverse(),this.categoriesData=e.categories,this.graphWidth=this.getValueByScreenWidth(this.options.line_width),this.graphHeight=this.getValueByScreenWidth(this.options.line_height),this.xScale=c.time.scale().range([0,this.graphWidth]),this.yScale=c.scale.linear().range([this.graphHeight,0]),this.setXscaleAndYscaleDomain(),this.initAxes()},setXscaleAndYscaleDomain:function(){var e=c.min(this.seriesData,function(e){return parseFloat(e.value)}),t=c.max(this.seriesData,function(e){return parseFloat(e.value)}),s=c.min(this.categoriesData,function(e){return new Date(e.value)}),o=c.max(this.categoriesData,function(e){return new Date(e.value)});this.xScale.domain([s,o]),this.yScale.domain([e,t])},initAxes:function(){var e=this,t=this.categoriesData.map(function(e){return new Date(e.value)});this.xAxis=c.svg.axis().scale(this.xScale).orient("bottom").innerTickSize(this.getValueByScreenWidth(this.options.xAxis_line_height+this.options.xAxis_line_y)).tickValues(t).tickFormat(function(t){var s=c.time.format("%m-/%d-/%Y");return e.categoriesData.forEach(function(e){new Date(e.value).getTime()==t.getTime()&&(s=e.label)}),s}),this.yAxis=c.svg.axis().scale(this.yScale).ticks(5).orient("left")},renderChart:function(e){this.svg=this.renderSVGBase(e),this.renderXAxis(),this.renderYAxis(),this.renderArea(),this.renderHorizonalLine(),this.graph=this.renderGraph(),this.renderLine(),this.renderLabels(),this.renderDots(),this.options.doAnimations||(this.options.lineDelay=this.options.lineDuration=this.options.dotsDelay=this.options.dotsDuration=this.options.areaDelay=this.options.areaDuration=0,this.lineAnimations())},renderSVGBase:function(e){var t=this.getValueByScreenWidth(this.options.svgWidth),s=this.getValueByScreenWidth(this.options.svgHeight);return c.select(e.get(0)).append("svg").attr("class","perso-svg-chart-container").attr("width",t).attr("height",s).append("g").attr("transform","translate(0,0)")},renderXAxis:function(){var e,s=this.getSelectedMonth();this.options.xAxis_display&&((e=this.svg.append("g").attr("name","x axis").attr("class","perso-line-x axis").call(this.xAxis)).selectAll(".perso-line-x.axis line").attr("x1",this.getValueByScreenWidth(this.options.xAxis_line_x)).attr("x2",this.getValueByScreenWidth(this.options.xAxis_line_x)).attr("y1",this.getValueByScreenWidth(this.options.xAxis_line_y)),e.selectAll(".perso-line-x.axis text").attr("y",this.getValueByScreenWidth(this.options.xAxis_text_y)).attr("x",this.getValueByScreenWidth(this.options.xAxis_text_x)).attr("class",function(e){var t="tick";return t=e.getTime()==s.getTime()?"perso-highlighted-text":t}))},renderYAxis:function(){this.options.yAxis_display&&this.svg.append("g").attr("name","y axis").attr("class","perso-line-y axis").attr("transform","translate("+this.getValueByScreenWidth(this.options.yAxis_x)+","+this.getValueByScreenWidth(this.options.yAxis_y)+")").call(this.yAxis).selectAll("text").style("text-anchor","end").attr("x","0")},renderGraph:function(){return this.svg.append("g").attr("name","graph").attr("transform","translate("+this.getValueByScreenWidth(this.options.line_left)+","+this.getValueByScreenWidth(this.options.line_top)+")").attr("width",this.graphWidth).attr("height",this.graphHeight)},renderLine:function(){var t=this;this.line=c.svg.line().interpolate(this.setInterpolate(this.options.lineStyle_interpolate)).x(function(e){return t.xScale(new Date(e.category))}).y(function(e){return t.yScale(e.value)});var e=4<(e=this.getValueByScreenWidth(this.options.lineStyle_thickness))?4:e;this.graph.append("g").attr("name","line").append("path").datum(this.seriesData).attr("class","perso-line").attr("stroke-width",e).attr("d",this.line)},renderDots:function(){var t=this;this.graph.append("g").attr("name","dots").selectAll("dot").data(this.seriesData).enter().append("circle").filter(function(e){return t.isDateInCategories(e.category)}).attr("cx",function(e){return t.xScale(new Date(e.category))}).attr("cy",function(e){return t.yScale(e.value)}).attr("class",function(e){var t="perso-dot";return t=e.highlight?"perso-dot-selected":t}).attr("r",0),this.graph.select("circle.perso-dot-selected").attr("r",0)},renderLabels:function(){var t=this,s=this.getSelectedMonth(),o=[];this.options.labels_display&&this.svg.append("g").attr("name","labels").attr("transform","translate("+this.getValueByScreenWidth(this.options.labels_x)+","+this.getValueByScreenWidth(this.options.line_top-(this.options.labels_y+this.options.dots_radius))+")").selectAll().data(t.seriesData).enter().append("text").filter(function(e){return t.isDateInCategories(e.category)&&o.push(e),t.isDateInCategories(e.category)}).attr("class",function(e){var t="perso-label";return new Date(e.category).getTime()==s.getTime()&&(t+=" perso-label-selected"),t}).attr("text-anchor","middle").attr("x",function(e){return t.xScale(new Date(e.category))}).attr("y",function(e){return t.yScale(e.value)}).attr("dy",function(e){return e.value<0?"1em":0}).html(function(e){return e.label}).attr("opacity",0).transition().delay(this.options.duration).attr("opacity",1)},renderArea:function(){var e,t=this;this.options.area_display&&(e=c.scale.linear().rangeRound([this.graphHeight,0]),this.area=c.svg.area().interpolate(this.setInterpolate(this.options.lineStyle_interpolate)).x(function(e){return t.xScale(new Date(e.category))}).y1(function(e){return t.yScale(e.value)}).y0(e(0)),this.svg.append("path").attr("transform","translate("+this.getValueByScreenWidth(this.options.line_left)+","+this.getValueByScreenWidth(this.options.line_top)+")").datum(this.seriesData).attr("d",this.area).attr("class","perso-line-area").attr("opacity",0))},renderHorizonalLine:function(){this.options.horizonalLine_display&&this.svg.append("line").attr("name","horizonal-line").attr("class","perso-horizonal-line").attr("x1",this.getValueByScreenWidth(this.options.horizonalLine_x)).attr("x2",this.getValueByScreenWidth(this.options.horizonalLine_x+this.options.horizonalLine_length)).attr("y1",this.getValueByScreenWidth(this.options.horizonalLine_y)).attr("y2",this.getValueByScreenWidth(this.options.horizonalLine_y))},lineAnimations:function(){this.lineDraw||(this.lineTransition(),this.dotsTransition(),this.areaAnimation(),this.lineDraw=!0)},lineTransition:function(){this.svg.select(".perso-line").style("stroke-opacity",1).transition().duration(this.options.lineDuration).attrTween("stroke-dasharray",function(){var t=this.getTotalLength();return function(e){return c.interpolateString("0,"+t,t+",0")(e)}})},dotsTransition:function(){this.graph.selectAll(".perso-dot").transition().delay(this.options.dotsDelay).duration(this.options.dotsDuration).attr("r",this.getValueByScreenWidth(this.options.dots_radius)),this.graph.select("circle.perso-dot-selected").transition().delay(this.options.dotsDelay).duration(this.options.dotsDuration).attr("r",this.getValueByScreenWidth(this.options.dots_radius_selected))},areaAnimation:function(){this.svg.select(".perso-line-area").transition().delay(this.options.areaDelay).duration(this.options.areaDuration).attr("opacity",1)},getSelectedMonth:function(){var e=new Date,t=this.setHighlightDot();return e=void 0!==t&&void 0!==this.seriesData[t]&&null!==this.seriesData[t]?new Date(this.seriesData[t].category):e},isDateInCategories:function(t){var e=this.categoriesData,s=!1;return null!=t&&e.forEach(function(e){e.value==t&&(s=!0)}),s},setHighlightDot:function(){var t=this,e="max",s="min",o="first",n=c.max(this.seriesData,function(e){if(t.isDateInCategories(e.category))return parseFloat(e.value)}),r=c.min(this.seriesData,function(e){if(t.isDateInCategories(e.category))return parseFloat(e.value)}),i=t.options.highlightBy,a=t.seriesData.length-1;switch(i){case e:var l=t.getObjIndexByValue(t.seriesData,n);t.seriesData[l].highlight=!0,a=l;break;case s:l=t.getObjIndexByValue(t.seriesData,r);t.seriesData[l].highlight=!0,a=l;break;case o:t.seriesData[0].highlight=!0,a=0;break;default:l=t.seriesData.length-1;t.seriesData[l].highlight=!0}return a},getObjIndexByValue:function(e,s){return n.map(e,function(e,t){if(e.value==s)return t})[0]},setInterpolate:function(e){var t="linear",s="monotone",o="cardinal";switch(e){case s:o=s;break;case t:o=t}return o},getValueByScreenWidth:function(e){var t=n(s).width();return 790<=t||t<347?e:414<=t?e*this.options.screen.ratio_large:e*this.options.screen.ratio_medium},renderAccessibilityData:function(e,t){this.texts=t;var t=e.parents(".pstory-dialog-frame").attr("id")+e.index(),s=this.getAccessibilityTitle()+". "+this.prepareAccessibilityText(),e=e.find(".perso-svg-chart-container")[0];c.select(e).append("title").attr("id",t+"_title").text(s),c.select(e).attr("role","presentation"),this.svg.attr("aria-labelledby",t+"_title"),this.svg.selectAll("*").attr("aria-hidden",!0)},filterSeriesByCategories:function(){for(var e=this.categoriesData,t=this.seriesData,s=[],o=0;o<e.length;o++)for(var n=0;n<t.length;n++)if(t[n].category===e[o].value){var r={label:e[o].label,value:t[n].value};t[n].highlight&&(r.highlight=!0),s.push(r);break}return s},prepareAccessibilityText:function(){var s=this,o="",e=this.filterSeriesByCategories().slice().reverse();return n.each(e,function(e,t){t.highlight&&(o=s.getAccessibilityHighlightedDotlbl()+", "+t.label+", "+Math.round(t.value)+",")}),n.each(e,function(e,t){t.highlight||(o+=" "+t.label+", "+Math.round(t.value)+",")}),o},getAccessibilityTitle:function(){return this.texts.accessibilityLineChartTitle},getAccessibilityHighlightedDotlbl:function(){return this.texts.accessibilityLineGraphHighlightedDot}})}(window,window.Personetics=window.Personetics||{},jQuery),function(u,i,h){var c=u.d3;i.utils=i.utils||{},i.utils.d3Helpers=i.utils.d3Helpers||{},i.utils.d3Helpers.NewLineChartHelper=Base.extend({prepareChart:function(e,t,s){this.selectors=s,this.options=t,this.seriesData=e.series,this.seriesData.forEach(function(e){isNaN(e.category)||(e.category=new Date(null,e.category-1))}),this.categoriesData=e.categories,this.categoriesData.forEach(function(e){isNaN(e.value)||(e.value=new Date(null,e.value-1))}),this.highlightedCategory=e.highlightedCategories[0],this.graphWidth=this.getValueByScreenWidth(this.options.line_width),this.graphHeight=this.getValueByScreenWidth(this.options.line_height),this.xScale=c.time.scale().range([0,this.graphWidth]),this.yScale=c.scale.linear().range([this.graphHeight,0]),this.setXscaleAndYscaleDomain(),this.initAxes()},normalizeSeries:function(e,s){var o=[],n=null,r=0;return e.forEach(function(e){n=(null==n||(r+=Math.abs(e.value-n.value)),e)}),r/=e.length,n=null,e.forEach(function(t){var e;null==n?(n=t,o.push(t)):(e=s.filter(function(e){return new Date(t.category).getTime()==new Date(e.value).getTime()}),(Math.abs(t.value-n.value)>r||e.length)&&(n=t,o.push(t)))}),o},setXscaleAndYscaleDomain:function(){var e=c.min(this.seriesData,function(e){return parseFloat(e.value)}),t=c.max(this.seriesData,function(e){return parseFloat(e.value)}),s=new Date(this.seriesData[0].category),o=new Date(this.seriesData[this.seriesData.length-1].category);this.xScale.domain([s,o]),this.yScale.domain([e,t])},initAxes:function(){var e=this,t=this.categoriesData.map(function(e){return new Date(e.value)});this.xAxis=c.svg.axis().scale(this.xScale).orient("bottom").innerTickSize(this.getValueByScreenWidth(this.options.xAxis_line_height+this.options.xAxis_line_y)).tickValues(t).tickFormat(function(t){var s="";return e.categoriesData.forEach(function(e){new Date(e.value).toDateString()==t.toDateString()&&(s=e.label)}),s}),this.yAxis=c.svg.axis().scale(this.yScale).ticks(5).orient("left")},renderChart:function(e,t){this.el=e;this.svg=this.renderSVGBase(e),Object.prototype.hasOwnProperty.call(this.options,"area_display")&&void 0!==this.options.area_display&&this.options.area_display&&(this.areaEl=this.renderElForArea()),this.renderXAxis(),this.renderYAxis(),this.renderArea(),this.renderHorizonalLine(),this.graph=this.renderGraph(),this.renderLine(t),this.renderLabels(),t.lineChartOptions&&!t.lineChartOptions.bubbleTooltipMode&&this.renderFixedTooltip(e,this.seriesData),this.renderDots(),t.lineChartOptions&&t.lineChartOptions.bubbleTooltipMode&&this.renderDotsLabel(),this.options.doAnimations||(this.options.lineDelay=this.options.lineDuration=this.options.dotsDelay=this.options.dotsDuration=this.options.areaDelay=this.options.areaDuration=0,this.lineAnimations())},renderSVGBase:function(e){var t=this.getValueByScreenWidth(this.options.svgWidth),s=this.getValueByScreenWidth(this.options.svgHeight);return c.select(e.get(0)).append("svg").attr("class","perso-svg-chart-container").attr("width",t).attr("height",s).append("g").attr("transform","translate("+this.getValueByScreenWidth(this.options.line_left)+","+this.getValueByScreenWidth(this.options.marginTop)+")")},renderXAxis:function(){var e,i=this,s=this.getSelectedMonth();this.options.xAxis_display&&((e=this.svg.append("g").attr("name","x axis").attr("class","perso-line-x axis").data(this.seriesData).call(this.xAxis)).selectAll(".perso-line-x.axis line").attr("x1",0).attr("x2",0).attr("y1",function(e){var t=[];h.extend(!0,t,i.seriesData);var s,o,t=(t=t.map(function(e){return e.category=new Date(e.category),e})).sort(function(e,t){return e.category-t.category}),n=(0,c.bisector(function(e){return e.category}).right)(t,e),r=0;return 0<n&&(s=t[n-1],r=i.yScale(s.value)),n<t.length&&(o=t[n],r=i.yScale(o.value)),(r=void 0!==o&&void 0!==s?(i.yScale(s.value)-i.yScale(o.value))/(i.xScale(new Date(s.category))-i.xScale(new Date(o.category)))*(i.xScale(e)-i.xScale(new Date(s.category)))+i.yScale(s.value):r)+i.getValueByScreenWidth(i.options.line_top)}),e.selectAll(".perso-line-x.axis text").attr("y",this.getValueByScreenWidth(this.options.xAxis_text_y)).attr("x",0).attr("class",function(e){var t="tick";return t=e.getTime()==s.getTime()?"perso-highlighted-text":t}))},renderYAxis:function(){this.options.yAxis_display&&this.svg.append("g").attr("name","y axis").attr("class","perso-line-y axis").attr("transform","translate("+this.getValueByScreenWidth(this.options.yAxis_x)+","+this.getValueByScreenWidth(this.options.yAxis_y)+")").call(this.yAxis).selectAll("text").style("text-anchor","end").attr("x","0")},renderGraph:function(){return this.svg.append("g").attr("name","graph").attr("transform","translate(0,"+this.getValueByScreenWidth(this.options.line_top)+")").attr("width",this.graphWidth).attr("height",this.graphHeight)},renderLine:function(e){var t=this,e=i.processor.PStoryConfig.isRtl()&&e.lineChartOptions&&e.lineChartOptions.enableChartsRTL;this.line=c.svg.line().interpolate(this.setInterpolate(this.options.lineStyle_interpolate)).x(function(e){return t.xScale(new Date(e.category))}).y(function(e){return t.yScale(e.value)});var s=4<(s=this.getValueByScreenWidth(this.options.lineStyle_thickness))?4:s;e&&this.seriesData.reverse(),this.graph.append("g").attr("name","line").append("path").datum(this.seriesData).attr("class","perso-line").attr("stroke-width",s).attr("d",this.line)},renderDots:function(){var t,s,o=this,e=this.graph.append("g").attr("name","dots").selectAll("dot").data(this.seriesData);Object.prototype.hasOwnProperty.call(o.options,"showDotAsImg")&&void 0!==o.options.showDotAsImg&&o.options.showDotAsImg?(t=o.getValueByScreenWidth(o.options.dotImgWidth),s=o.getValueByScreenWidth(o.options.dotImgHeight),e.enter().append("svg:image").filter(function(e){return e.highlight}).attr("href",function(){return o.options.imgSrc}).attr("x",function(e){return o.xScale(new Date(e.category))-t/2}).attr("y",function(e){return o.yScale(e.value)-s/2}).attr("class",function(){return"perso-dot"}).attr("opacity",0).attr("width",t).attr("height",s)):e.enter().append("circle").filter(function(e){return e.highlight}).attr("cx",function(e){return o.xScale(new Date(e.category))}).attr("cy",function(e){return o.yScale(e.value)}).attr("class",function(){return"perso-dot"}).attr("r",0)},renderLabels:function(){var t=this,s=this.getSelectedMonth(),o=[];this.options.labels_display&&this.svg.append("g").attr("name","labels").attr("transform","translate("+this.getValueByScreenWidth(this.options.labels_x)+","+this.getValueByScreenWidth(this.options.line_top-(this.options.labels_y+this.options.dots_radius))+")").selectAll().data(t.seriesData).enter().append("text").filter(function(e){return t.isDateInCategories(e.category)&&o.push(e),t.isDateInCategories(e.category)}).attr("class",function(e){var t="perso-label";return new Date(e.category).getTime()==s.getTime()&&(t+=" perso-label-selected"),t}).attr("text-anchor","middle").attr("x",function(e){return t.xScale(new Date(e.category))}).attr("y",function(e){return t.yScale(e.value)}).attr("dy",function(e){return e.value<0?"1em":0}).attr("opacity",0).html(function(e){return e.label}).transition().delay(this.options.duration).attr("opacity",1)},renderArea:function(){var t=this;if(this.options.area_display){this.area=c.svg.area().interpolate(this.setInterpolate(this.options.lineStyle_interpolate)).x(function(e){return t.xScale(new Date(e.category))}).y1(function(e){return t.yScale(e.value)}).y0(function(){var e=h(".perso-line-x.axis line");return e.length?+e.attr("y2")-t.getValueByScreenWidth(t.options.line_top):t.getValueByScreenWidth(t.graphHeight)});var e=this.areaEl.append("path").attr("transform","translate(0,"+this.getValueByScreenWidth(this.options.line_top)+")").datum(this.seriesData).attr("d",this.area).attr("class","perso-line-area").attr("opacity",0);if(Object.prototype.hasOwnProperty.call(t.options,"displayAsGradient")&&void 0!==this.options.displayAsGradient&&this.options.displayAsGradient){e.attr("class","perso-line-area perso-gradient-area"),e.attr("fill","url(#areaGradient)");var s=this.areaEl.append("defs").append("linearGradient").attr("id","areaGradient");"horizontal"===this.options.gradientDirection?s.attr({x1:"0%",x2:"100%",y1:"0%",y2:"0%"}):s.attr({x1:"0%",x2:"0%",y1:"0%",y2:"100%"});for(var o=0;o<this.options.gradientColorsCount;o++)s.append("stop").attr("class","stop"+(o+1)).attr("stop-color",this.options.gradientColorPalette[o]).attr("offset",100/(this.options.gradientColorsCount-1)*o+"%")}}},renderHorizonalLine:function(){this.options.horizonalLine_display&&this.svg.append("line").attr("name","horizonal-line").attr("class","perso-horizonal-line").attr("x1",this.getValueByScreenWidth(this.options.horizonalLine_x)).attr("x2",this.getValueByScreenWidth(this.options.horizonalLine_x+this.options.horizonalLine_length)).attr("y1",this.getValueByScreenWidth(this.options.horizonalLine_y)).attr("y2",this.getValueByScreenWidth(this.options.horizonalLine_y))},lineAnimations:function(){this.lineDraw||(this.lineTransition(),this.dotsTransition(),this.dotsLabelTransition(),this.areaAnimation(),this.lineDraw=!0)},lineTransition:function(){this.svg.select(".perso-line").style("stroke-opacity",1).transition().duration(this.options.lineDuration).attrTween("stroke-dasharray",function(){var t=this.getTotalLength();return function(e){return c.interpolateString("0,"+t,t+",0")(e)}})},dotsTransition:function(){this.graph.selectAll(".perso-dot").transition().delay(this.options.dotsDelay).duration(this.options.dotsDuration).attr("r",this.getValueByScreenWidth(this.options.dots_radius)).attr("opacity",1),this.graph.select("circle.perso-dot-selected").transition().delay(this.options.dotsDelay).duration(this.options.dotsDuration).attr("r",this.getValueByScreenWidth(this.options.dots_radius_selected))},dotsLabelTransition:function(){this.graph.select("rect.perso-dot-label").transition().delay(this.options.dotsLabelDelay).duration(this.options.dotsDuration).attr("rx",this.getValueByScreenWidth(this.options.dotRect.dot_label_radius)).attr("ry",this.getValueByScreenWidth(this.options.dotRect.dot_label_radius)).attr("opacity",1),this.graph.select("polygon.perso-dot-label-polygon").transition().delay(this.options.dotsLabelDelay).duration(this.options.dotsDuration).attr("opacity",1),this.graph.select("text.perso-dot-label-text").transition().delay(this.options.dotsLabelDelay).duration(this.options.dotsDuration).attr("opacity",1),this.graph.select("text.perso-dot-label2-text").transition().delay(this.options.dotsLabelDelay).duration(this.options.dotsDuration).attr("opacity",1)},areaAnimation:function(){this.svg.select(".perso-line-area").transition().delay(this.options.areaDelay).duration(this.options.areaDuration).attr("opacity",1)},getSelectedMonth:function(){var e=new Date,t=this.highlightedCategory?this.getHighlightedCategory():this.setHighlightDot();return e=void 0!==t&&void 0!==this.seriesData[t]&&null!==this.seriesData[t]?new Date(this.seriesData[t].category):e},getDataFilter:function(){var t=this,s=[];return this.seriesData.forEach(function(e){t.isDateInCategories(e.category)&&s.push(e)}),s},isDateInCategories:function(t){var e=this.categoriesData,s=!1;return null!=t&&e.forEach(function(e){e.value==t&&(s=!0)}),s},setHighlightDot:function(){var t=this,e="max",s="min",o="first",n=c.max(this.seriesData,function(e){if(t.isDateInCategories(e.category))return parseFloat(e.value)}),r=c.min(this.seriesData,function(e){if(t.isDateInCategories(e.category))return parseFloat(e.value)}),i=t.options.highlightBy,a=t.seriesData.length-1;switch(i){case e:var l=t.getObjIndexByValue(t.seriesData,n);t.seriesData[l].highlight=!0,a=l;break;case s:l=t.getObjIndexByValue(t.seriesData,r);t.seriesData[l].highlight=!0,a=l;break;case o:t.seriesData[0].highlight=!0,a=0;break;default:l=t.seriesData.length-1;t.seriesData[l].highlight=!0}return a},getHighlightedCategory:function(){var s=this,o=s.seriesData.length-1;return s.highlightedCategory&&h.each(s.seriesData,function(e,t){if(new Date(t.category).getTime()==new Date(s.highlightedCategory).getTime())return o=e,!1}),s.seriesData[o].highlight=!0,o},getObjIndexByValue:function(e,s){return h.map(e,function(e,t){if(e.value==s)return t})[0]},setInterpolate:function(e){var t="linear",s="monotone",o="cardinal";switch(e){case s:o=s;break;case t:o=t}return o},getValueByScreenWidth:function(e){var t=h("#perso-responsive-container").width(),s=i.utils.persoBrowserDetector.getBrowserData().deviceType;return"perso-tablet"==s||"perso-desktop"==s||t<347?e:396<=t?e*this.options.screen.ratio_large:e*this.options.screen.ratio_medium},renderDotsLabelRect:function(){var t,s=this;return this.graph.append("g").attr("name","dots-rect").selectAll("dot-rect").data(this.seriesData.filter(function(e){return!!e.highlight})).enter().append("rect").attr("x",function(e){return t=s.xScale(new Date(e.category))}).attr("y",function(e){return s.yScale(e.value)-s.getValueByScreenWidth(s.options.dotRect.yOffset)}).attr("height",s.getValueByScreenWidth(s.options.dotRect.height)).attr("rx",s.getValueByScreenWidth(s.options.dotRect.radiusX)).attr("ry",s.getValueByScreenWidth(s.options.dotRect.radiusY)).attr("opacity",0).attr("class",function(){return"perso-dot-label"}),t},setDotsLabelRectWidth:function(e,t,s){var o=this,e=e[0].getBBox().width,n=(0<t.length&&(t=t[0].getBBox().width,e=Math.max(e,t)),e+o.getValueByScreenWidth(o.options.dotText.paddingLeft)+o.getValueByScreenWidth(o.options.dotText.paddingRight)),r=s-(n=o.options.dotRect.maxWidth&&n>o.options.dotRect.maxWidth?o.options.dotRect.maxWidth:n)/2,i=h(u).width(),a=0,l=!0,c=(i-this.getValueByScreenWidth(o.options.svgWidth))/2,p=i-c,d=parseFloat(this.graph.selectAll("text.perso-dot-label-text").attr("x"));this.graph.selectAll("rect").attr("width",n).attr("x",function(){return n+r+o.getValueByScreenWidth(o.options.line_left)+(i-p)>p?(a=n+r-p+o.getValueByScreenWidth(o.options.line_left)+(i-p),r-=a):o.getValueByScreenWidth(o.options.line_left)+r+c<i-p?(a=c-(c+r+o.getValueByScreenWidth(o.options.line_left)),l=!1,r+=a):r}),this.graph.selectAll("text").attr("x",function(){return l?d-a:d+a})},renderDotsLabel:function(){this.renderDotsLabelPolygon();var e,n=this,t=[],s=[],o=this.renderDotsLabelRect(),r=this.graph.append("g").attr("name","dots-text");r.selectAll("dot-text").data(this.seriesData.filter(function(e){return!(!e.highlight||void 0===e.label)})).enter().append("text").attr("x",function(e){return t.push(this),n.xScale(new Date(e.category))}).attr("y",function(e){return n.yScale(e.value)-n.getValueByScreenWidth(n.options.dotText.yOffset)}).attr("opacity",0).attr("class",function(){return"perso-dot-label-text"}),0<t.length&&(e=t[0],e=c.select(e).append("tspan"),h.each(e[0],function(o,s){var e,t=n.seriesData.filter(function(e){return e.highlight});void 0!==t[o].label&&(i.processor.PStoryConfig.getConfig("supportHtmlTagInProcessor")?(e=h(t[o].label)[0].attributes,h.each(e,function(e,t){s.setAttribute(t.name,t.value)}),h(s).attr("perso-index",o),e=h(h(t[o].label)[0]).children(),h.each(e,function(e,t){var s=n.svg.select('[perso-index="'+o+'"]').append("tspan").text(h(t).text()),t=t.attributes;h.each(t,function(e,t){s.attr(t.name,t.value)})})):(h(s).addClass("perso-amount"),h(s).attr({"perso-index":o,"aria-label":t[o].label,role:"text","aria-hidden:":!0}).text(t[o].label)))})),r.selectAll("dot-text").data(this.seriesData.filter(function(e){return!(!e.highlight||void 0===e.label2)})).enter().append("text").attr("x",function(e){return s.push(this),n.xScale(new Date(e.category))}).attr("y",function(e){return n.yScale(e.value)-n.getValueByScreenWidth(n.options.dotText.yOffset)+n.getValueByScreenWidth(n.options.dotText.lineHeight)}).attr("opacity",0).text(function(e){return e.label2}).attr("class",function(){return"perso-dot-label2-text"}),0<t.length&&this.setDotsLabelRectWidth(t,s,o)},renderDotsLabelPolygon:function(){var t=this;this.graph.append("g").attr("name","dots-polygon").selectAll("dot-polygon").data(this.seriesData).enter().append("polygon").filter(function(e){return e.highlight}).attr("points",t.options.dotPolygon.points).attr("transform",function(e){return"translate("+(t.xScale(new Date(e.category))-t.options.dotPolygon.paddingLeft)+","+(t.yScale(e.value)-t.options.dotPolygon.yOffset)+")"}).attr("opacity",0).attr("class",function(){return"perso-dot-label-polygon"})},renderAccessibilityData:function(e,t){this.texts=t;var t=e.parents(this.selectors.$pstoryDialogFrame).attr("id")+e.index(),s=this.getAccessibilityTitle()+". "+this.prepareAccessibilityText(),e=e.find(this.selectors.$persoSvgChartContainer)[0];c.select(e).append("title").attr("id",t+"_title").text(s),c.select(e).attr("role","presentation"),this.svg.attr("aria-labelledby",t+"_title"),this.svg.selectAll("*").attr("aria-hidden",!0)},filterSeriesByCategories:function(){for(var e=this.categoriesData,t=this.seriesData,s=[],o=0;o<e.length;o++)for(var n,r=0;r<t.length;r++)t[r].category===this.highlightedCategory&&(this.highlightedDot={label:t[r].label2,value:t[r].value}),t[r].category===e[o].value&&(n={label:e[o].label,value:t[r].value},t[r].highlight&&(n.highlight=!0),s.push(n));return s},prepareAccessibilityText:function(){var s=this,o="",e=this.filterSeriesByCategories().slice().reverse();return h.each(e,function(e,t){t.highlight&&(o=s.getAccessibilityHighlightedDotlbl()+", "+t.label+", "+Math.round(t.value)+",")}),h.each(e,function(e,t){t.highlight||(o+=" "+t.label+", "+Math.round(t.value)+",")}),o+=" "+s.getAccessibilityHighlightedDotlbl()+", "+this.highlightedDot.label+", "+this.highlightedDot.value},getAccessibilityTitle:function(){return this.texts.accessibilityLineChartTitle},getAccessibilityHighlightedDotlbl:function(){return this.texts.accessibilityLineGraphHighlightedDot},appendElement:function(n,e){var r=this;h.each(e,function(e,t){var s,o;void 0===t.tagName?(s=c.select(n).append("tspan")).text(h(t).text()):(s=c.select(n).append(t.nodeName.toLowerCase()),o=t.attributes,h.each(o,function(e,t){s.attr(t.name,t.value)}),0<h(t).children().length?r.appendElement(s[0][0],h(t).get(0).childNodes):s.text(h(t).text()))})},getBullet:function(e){var t=32;switch(e){case"disc":t=9679;break;case"square":t=9632;break;case"circle":t=9675;break;case"check-mark":t=10003;break;case"arrow-right":t=10158;break;default:t=32}return"<tspan>"+String.fromCharCode(t)+"</tspan>"},renderFixedTooltip:function(e,t){var s;t&&(t=t[this.getHighlightedCategory()])&&t.label&&t.label2&&void 0!==this.selectors&&(s=h(e).find(this.selectors.$persoTooltipLineChartAmount),e=h(e).find(this.selectors.$persoTooltipLineChartDate),s.html(t.label),e.text(t.label2))},renderElForArea:function(){return this.svg.append("g").attr("class","perso-area-container")}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e,t){var n=e.d3;t.utils=t.utils||{},t.utils.d3Helpers=t.utils.d3Helpers||{},t.utils.d3Helpers.twoPointsLineChartHelper=t.utils.d3Helpers.NewLineChartHelper.extend({prepareChart:function(e,t){this.options=t,this.seriesData=e.series,this.graphWidth=this.getValueByScreenWidth(this.options.line_width),this.graphHeight=this.getValueByScreenWidth(this.options.line_height),this.xScale=n.time.scale().range([0,this.graphWidth]),this.yScale=n.scale.linear().range([this.graphHeight,0]),this.xScale.domain([this.options.startPoint,this.options.endPoind]),this.yScale.domain([this.options.area_first_point,this.options.area_last_point])},renderChart:function(e){this.el=e;this.svg=this.renderSVGBase(e),Object.prototype.hasOwnProperty.call(this.options,"area_display")&&void 0!==this.options.area_display&&this.options.area_display&&(this.areaEl=this.renderElForArea()),this.renderArea(),this.graph=this.renderGraph(),this.renderLine(),this.renderDots()},renderLine:function(){var t=this;this.line=n.svg.line().interpolate(this.setInterpolate(this.options.lineStyle_interpolate)).x(function(e){return t.xScale(e.startEndPoint)}).y(function(e){return t.yScale(e.value)});var e=4<(e=this.getValueByScreenWidth(this.options.lineStyle_thickness))?4:e;this.graph.append("g").attr("name","line").append("path").datum(this.seriesData).attr("class","perso-line").attr("stroke-width",e).attr("d",this.line)},renderDots:function(){var t,s,o=this,e=this.graph.append("g").attr("name","dots").selectAll("dot").data(this.seriesData);Object.prototype.hasOwnProperty.call(o.options,"showDotAsImg")&&void 0!==o.options.showDotAsImg&&o.options.showDotAsImg?(t=o.getValueByScreenWidth(o.options.dotImgWidth),s=o.getValueByScreenWidth(o.options.dotImgHeight),e.enter().append("svg:image").filter(function(e){return e.highlight}).attr("href",function(){return o.options.imgSrc}).attr("x",function(e){return o.xScale(e.startEndPoint)-t/2}).attr("y",function(e){return o.yScale(e.value)-s/2}).attr("class",function(){return"perso-dot"}).attr("opacity",0).attr("width",t).attr("height",s)):e.enter().append("circle").filter(function(e){return e.highlight}).attr("cx",function(e){return o.xScale(e.startEndPoint)}).attr("cy",function(e){return o.yScale(e.value)}).attr("class",function(){return"perso-dot"}).attr("r",0)},renderArea:function(){var s,o=this,e=t.processor.PStoryConfig.isRtl()&&this.options.enableChartsRTL?this.options.endPoind-this.options.areaEndPoint:0;this.options.area_display&&(s=n.scale.linear().rangeRound([this.graphHeight,0])(0),this.area=function(t){return n.svg.area().y0(s).y1(function(e){return t?o.getValueByScreenWidth(e.areaValue):s}).x(function(e){return t?o.getValueByScreenWidth(e.areaStartEndPoint):0})},this.areaEl.append("path").attr("transform","translate("+e+", "+this.getValueByScreenWidth(this.options.line_top)+")").datum(this.seriesData).attr("d",this.area(!1)).attr("class","perso-line-area"))},areaAnimation:function(){this.svg.select(".perso-line-area").transition().delay(this.options.areaDelay).duration(this.options.areaDuration).attr("d",this.area(!0))}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e){e.utils=e.utils||{},e.utils.d3Helpers=e.utils.d3Helpers||{},e.utils.d3Helpers.HorizontalChartHelper=e.utils.d3Helpers.BlockHelperBase.extend({prepareChart:function(){},renderChart:function(){}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,e,n){var p=s.d3;e.utils=e.utils||{},e.utils.d3Helpers=e.utils.d3Helpers||{},e.utils.d3Helpers.MultiHorizontalChartHelper=Base.extend({localConfigs:{barFillPercent:.6654,minBarWidth:2},getBarChartConfigs:function(){return{indicatorType:"mtd-5",indicatorMtd5Size:4}},prepareMultiHorizontalChart:function(e,t){this.prepareChart(e,t),this.maxDataArraLength=this.getMaxDataArray(e.layoutInstructions.series),this.height=e.options.chartHeight||this.maxDataArraLength*e.layoutInstructions.series.length*(this.getValueByScreenWidth(e.options.rectangles.height)+2*this.getValueByScreenWidth(this.options.rectangles.paddingBottom))+e.layoutInstructions.seriesLabels.length*this.options.rectangles.seriesPadding/2,this.localConfigs.barFillPercent=this.options.rectangles.barFillPercent||this.localConfigs.barFillPercent,this.barChartConfigs=this.getBarChartConfigs(),this.xScale=p.scale.linear().range([0,this.width*this.localConfigs.barFillPercent]),this.colorScale=p.scale.ordinal().rangeRoundBands([0,this.width],.1);var t="In"===e.layoutInstructions.seriesLabels[0]?e.defaultConfig.barGraphPalette:e.defaultConfig.barGraphPalette.reverse(),s=e.defaultConfig.barGraphLabelsPalette;this.colors=this.colorScale.range(t),this.colorsLabels=p.scale.ordinal().rangeRoundBands([0,this.width],.1).range(s),this.y0Scale=p.scale.ordinal().domain(p.range(e.layoutInstructions.categories.length)).rangeBands([this.height,0],.05),this.y1Scale=p.scale.ordinal().domain(p.range(e.layoutInstructions.series.length)).rangeBands([this.y0Scale.rangeBand(),0],.05),this.y2Scale=p.scale.ordinal().domain(e.layoutInstructions.categories).rangeBands([0,this.height]),this.xAxis=p.svg.axis().scale(this.xScale).orient("bottom"),this.yAxis=p.svg.axis().scale(this.y2Scale).orient("right")},renderMultiHorizontalChart:function(e,t,s){this.seriesData=s.series,this.seriesLabelsData=s.seriesLabels;var o=this.xScale,n=this.y0Scale,r=this.y1Scale;o.domain([0,p.max(s.series,function(e){return p.max(e,function(e){return e.value})})]),this.modifyData(),this.svg=this.renderSVGBase(t,"multiHorizontal"),this.renderGradient(),this.renderFilter(),this.renderMultiHorizontalBars(e,s,o,r,n),this.renderHorizontalLines(s,o,n,r),this.renderLabels(s,o,n,r),this.renderYAxis()},renderSVGBase:function(e,t){return t=t||"",p.select(e.get(0)).append("svg").attr("focusable",!1).attr("class","perso-svg-chart-container "+t).attr("width",this.width).attr("height",this.height).append("g").attr("transform","translate("+this.getValueByScreenWidth(this.margin.left)+","+this.getValueByScreenWidth(this.margin.top)+")")},renderMultiHorizontalBars:function(s,e,o,n,r){for(var i=this,t=(i.sortedData=i.sortData(),[].concat.apply([],e.series)),e=(i.minValue=p.min(t,function(e){return e.value||1/0}),i.maxValue=p.max(t,function(e){return e.value}),this.svg.append("g").attr("transform",function(){var e=i.getValueByScreenWidth(i.options.rectangles.paddingTop);return"translate("+i.getValueByScreenWidth(i.options.rectangles.paddingLeft)+","+e+")"}).attr("width",i.width).selectAll("g").data(i.sortedData).enter().append("g").style("fill",function(e,t){return i.colors(t)}).attr("transform",function(e,t){var s=i.options.rectangles.paddingBottom;return"translate(0,"+(n(t)*(t+1)+i.getValueByScreenWidth(s)*(t+1))+")"}).selectAll("rect").data(function(e){return e})),a=(e.enter().append("rect").attr("class",function(e){var t="perso-chart-rect "+e.mode;return e.selected&&(t+=" perso-selected"),t}).attr("height",function(){var e=i.options.rectangles.height;return i.getValueByScreenWidth(e)}).attr("y",function(e,t){return r(t)}).attr("width",1).attr("rx",function(){var e=i.options.rectangles.borderRadius.rx||"0";return i.getValueByScreenWidth(e)}).attr("ry",function(){var e=i.options.rectangles.borderRadius.ry||"0";return i.getValueByScreenWidth(e)}).on("click",function(e,t){s&&s.handleClick(e,t)}),e.transition().duration(1e3).delay(500).attr("width",function(e){var t=i.getValueByScreenWidth(i.localConfigs.minBarWidth),e=e.value,s=o(e),e=0!==e?s:t;return e}),!1),l=0;l<t.length;l++)Object.prototype.hasOwnProperty.call(t[l],"indicator")&&(a=!0,t[l].indicator>t[l].value&&(t[l].indicator=t[l].value));a&&(e=e,"mtd-5"===i.barChartConfigs.indicatorType?(e.enter().append("svg").attr("class",function(e){var t="perso-chart-rect perso-indicator "+e.mode+" "+i.barChartConfigs.indicatorType;return e.selected&&(t+=" perso-selected"),t}).attr("x",-1*i.barChartConfigs.indicatorMtd5Size/2).attr("y",function(e,t){return r(t)}).attr("rx",function(){var e=i.options.rectangles.borderRadius.rx||"0";return i.getValueByScreenWidth(e)}).attr("ry",function(){var e=i.options.rectangles.borderRadius.ry||"0";return i.getValueByScreenWidth(e)}).append("g").attr("id","Page-1").attr("stroke-width","1").attr("fill","none").attr("fill-rule","evenodd").append("g").attr("id","CC-Teaser--MTD-0-amount").attr("transform","translate(-58.000000, -11.000000)").attr("fill","#616266").append("g").attr("id","Group").attr("transform","translate(56.500000, 12.500000)").append("g").attr("id","Components/Pre-month/indicator3-Copy-3").attr("transform","translate(3.500000, 2.000000) rotate(-90.000000) translate(-3.500000, -2.000000) ").append("polygon").attr("id","Triangle").attr("points","0 -1.42108547e-14 7 2 0 4"),e.transition().duration(1e3).delay(500).attr("x",function(e){e=i.CalculateBarsRectWidth(e,o);return 0<e?e-i.barChartConfigs.indicatorMtd5Size/2:-i.barChartConfigs.indicatorMtd5Size/2})):(e.enter().append("rect").attr("class",function(e){var t="perso-chart-rect perso-indicator "+e.mode+" "+i.barChartConfigs.indicatorType;return e.selected&&(t+=" perso-selected"),t}).attr("height",function(){var e=i.options.rectangles.height;return i.getValueByScreenWidth(e)}).attr("y",function(e,t){return r(t)}).attr("width",1).attr("rx",function(){var e=i.options.rectangles.borderRadius.rx||"0";return i.getValueByScreenWidth(e)}).attr("ry",function(){var e=i.options.rectangles.borderRadius.ry||"0";return i.getValueByScreenWidth(e)}),e.transition().duration(1e3).delay(500).attr("width",function(e){return i.CalculateBarsRectWidth(e,o)})))},CalculateBarsRectWidth:function(e,t){var s=this.getValueByScreenWidth(this.localConfigs.minBarWidth),e=e.indicator||0,t=t(e),e=0!==e?t:s;return e},renderLabels:function(e,s,o,n){var r=this;this.options.drawLabels&&this.svg.append("g").attr("transform",function(){var e=r.getValueByScreenWidth(r.options.rectangles.paddingTop);return"translate("+r.getValueByScreenWidth(r.options.rectangles.paddingLeft)+","+e+")"}).attr("width",r.width).selectAll("g").data(e.series).enter().append("g").attr("transform",function(e,t){var s=r.options.rectangles.paddingBottom;return"translate(-7,"+(n(t)*(t+1)+r.getValueByScreenWidth(s)*(t+1))+")"}).selectAll("text").data(function(e){return e}).enter().append("text").attr("class",function(e){var t="perso-label perso-label-fadeIn";return e.selected&&(t+=" perso-selected"),t}).attr("text-anchor","start").style("fill",function(e,t,s){return r.colorsLabels(s)}).attr("x",function(e){var t=r.options.labels.paddingLeft||"0";return s(e.value)+r.getValueByScreenWidth(t)}).attr("y",function(e,t){return o(t)+r.options.rectangles.height/2}).attr("dy","0.4em").html(function(e){return e.label})},renderYAxis:function(){var e;this.yAxis&&(e=this.getValueByScreenWidth(this.options.axis.yAxis.transValue),this.svg.append("g").attr("transform","translate("+-1*this.options.axis.yAxis.paddingRight+","+e+")").attr("class","y axis").call(this.yAxis).selectAll(".tick text").call(this.wrapLabelText,.23*screen.width)),this.options.axis.yAxis.hide&&(this.svg.selectAll(".y .tick text").remove(),this.svg.selectAll(".y path").remove())},getMaxDataArray:function(e){var s=0;return e.length&&n.each(e,function(e,t){t.length>s&&(s=t.length)}),s},wrapLabelText:function(e,c){e.each(function(){for(var e,t=p.select(this),s=0,o=1,n=(this.getComputedTextLength()>c&&(o=2,s=-5),t.text().split(/\s+/).reverse()),r=[],i=0,a=parseFloat(t.attr("dy")),l=t.text(null).append("tspan").attr("x",9).attr("y",s*o).attr("dy",a+"em");e=n.pop();)r.push(e),l.text(r.join(" ")),l.node().getComputedTextLength()>c&&(r.pop(),l.text(r.join(" ")),r=[e],l=t.append("tspan").attr("x",9).attr("y",s*o).attr("dy",.95*++i*1.5+a+"em").text(e))})},prepareChart:function(e,t){this.options=e.options,this.totalWidth=t.width(),this.margin={top:this.getValueByScreenWidth(this.options.margin.top),right:this.getValueByScreenWidth(this.options.margin.right),bottom:this.getValueByScreenWidth(this.options.margin.bottom),left:this.getValueByScreenWidth(this.options.margin.left)},this.width=t.width()-this.margin.left-this.margin.right},renderHorizontalLines:function(e,t,s,o){this.options.drawLine&&this.svg.append("g").attr("transform","translate("+-1*this.margin.left+",0)").selectAll("g").data(e.series).enter().append("g").attr("class","perso-chart-line").attr("transform",function(e,t){return"translate(0,"+o(t)*(t+1)+")"}).selectAll(".line").data(function(e){return e}).enter().append("line").attr("class","perso-chart-line").attr("x1","0").attr("x2",this.totalWidth).attr("y1",function(e,t){return s(t)}).attr("y2",function(e,t){return s(t)})},renderGradient:function(){var e=this.options.rectangles.gradients,s=this.svg.append("defs");e&&n.each(e,function(e,t){t&&((s=s.append("linearGradient").attr("id",t.id).attr("x1","0").attr("x2","0").attr("y1","0").attr("y2","1")).append("stop").attr("offset",t.offset1).attr("stop-color",t.stopColor1),s.append("stop").attr("offset",t.offset2).attr("stop-color",t.stopColor2))}),0==p.selectAll("pattern#perso-indicator-stripe")[0].length&&p.select("defs").append("pattern").attr("id","perso-indicator-stripe").attr("patternUnits","userSpaceOnUse").attr("width","3").attr("height","6").attr("patternTransform","rotate(-135)").append("line").attr("x1","9").attr("y","0").attr("x2","9").attr("stroke","#898989").attr("stroke-width","15").attr("y1","8")},renderFilter:function(){var e=this.options.rectangles.filter,o=this.svg.selectAll("defs");e&&n.each(e,function(e,t){var s;t&&((s=o.append("filter").attr("id",t.id)).append("feGaussianBlur").attr("in",t.in).attr("stdDeviation",t.stdDeviation),s.append("feOffset").attr("dx",t.dxOffset).attr("dy",t.dyOffset),(s=s.append("feMerge")).append("feMergeNode"),s.append("feMergeNode").attr("in",t.in))})},getValueByScreenWidth:function(e){var t=n(s).width();return 790<=t||t<347?e:414<=t?e*this.options.screen.ratio_large:e*this.options.screen.ratio_medium},modifyData:function(){var o,e=this;this.seriesData&&(o=this.seriesLabelsData,n.each(o,function(s){n.each(e.seriesData[s],function(e,t){t.mode=o[s]})}))},sortData:function(){var s,o,n=this;return this.seriesData&&(s=this.seriesLabelsData.slice().reverse(),o=[],s.forEach(function(e,t){o[s.indexOf(n.seriesLabelsData[t])]=n.seriesData[t]})),o}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e){e.utils=e.utils||{},e.utils.d3Helpers=e.utils.d3Helpers||{},e.utils.d3Helpers.VerticalChartHelperProduct=e.utils.d3Helpers.VerticalChartHelper.extend({renderXAxis:function(){var s=this;this.xAxis&&this.svg.append("g").attr("class","x axis").attr("transform",function(){var e=s.getValueByScreenWidth(s.options.xAxisTop);return"translate("+s.calcLeft+","+e+")"}).call(s.xAxis).selectAll(".tick text").data(s.seriesData).attr("y","0").attr("class",function(e){var t="perso-xAxis-label";return e.selected&&(t+=" perso-selected"),t}).on("click",function(e,t){"function"==typeof s.handleClick&&s.handleClick(e,t)})}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.utils=e.utils||{},e.utils.d3Helpers=e.utils.d3Helpers||{},e.utils.d3Helpers.PinGraphChartHelperProduct=e.utils.d3Helpers.VerticalChartHelperProduct.extend({})}((window,window.Personetics=window.Personetics||{}),jQuery),function(T,w){T.utils=T.utils||{},T.utils.TransactionHelper=function(){function s(t){var n=[];return w.each(t.rows,function(e,s){var o={};w.each(t.cols,function(e,t){o[t]=s[e]}),n.push(o)}),n}function o(n){var t=[],r=(e=n.configObject).configOptions,i=p(r,e.dataSourceMap),e=e.visualElementsColumnMap,a=m(r.visualElements,e);return w.each(n.rows,function(e,s){var o={};w.each(n.cols,function(e,t){y(n,e)===l.PText?o[t]=b(s[e]):o[t]=s[e]}),r&&(h(o,a,r.visualElements,r.defaultAssetName),f(o,a,r.visualElements,r.defaultAssetName),k(o,"separator",r.separator),k(o,"iconExtension",r.iconExtension)),Object.prototype.hasOwnProperty.call(n,"amountComment")&&n.amountComment&&(o.amountComment=d(o,n.amountComment)),Object.prototype.hasOwnProperty.call(n,"dateComment")&&n.dateComment&&(o.dateComment=d(o,n.dateComment)),o=v(i,o),t.push(o)}),t}function n(e,t,s){var o=(s=s&&s.configOptions?s.configOptions:null)?g(s):T.story.getTablesFormat()["table-"+t];return(o=o||T.story.getTablesFormat()["table-default"])&&w.each(e,function(e,t){u(t,o)}),e}function r(e,t,s){var o=s,n=T.processor.PUtils.getUtilsInstance("utils",this.model);switch(t.type){case"date":o=n.formatDate(s,t.format,!0);break;case"amount":o=n.formatAmount(s,t.currencySymbol,t.format,!0)}return o}function i(e,t){var s=0;if(e&&1===e.length)return e;if(t&&e.length){for(var o=0;o<e.length;o++)if(e[o].assetName&&e[o].assetName===t){s=o;break}return e.slice(s+1)}}function a(s,o){var n,r="",e=s.match(/{{([^\n\t\v{}]*)}}/g)||[s],i=t();return e.forEach(function(e){var t=x(e);t.length&&(n=-1<Object.keys(i).indexOf(t)?i[t]:C(t)||-1!==Object.keys(o).indexOf(t)?t:"'"+t+"'",-1<Object.keys(o).indexOf(t)&&null===o[t]||(t=new T.processor.PExp(n).eval(o,this.model),n=s.split(e).join(t),0!=r.length?r+=" "+n:r=n))}),r}var l={PText:"PText"},c={logo:"logos",cg:"category_icons",direction:"category_icons",default:"category_icons"},p=function(t,s){return w.each(t,function(e){"boolean"==typeof t[e]&&(s["txShow"+e.charAt(0).toUpperCase()+e.slice(1)]=t[e])}),s},d=function(e,t){var s=t;return-1!==(s=-1===t.indexOf("{{Emoji")?a(t,e):s).indexOf("{{Emoji")&&(s=T.utils.emojisHelper.parseEmoji(s)),T.utils.string.extractContent(s)},u=function(o,e){w.each(e.displayColumns,function(e,t){var s;void 0!==o[e]&&null!==o[e]&&(void 0!==(s=o.txCurrency)&&(t.currencySymbol=s),o[e]=r(0,t,o[e]))})},h=function(e,t,s,o){for(var n=!1,r=0;r<t.length-1;r++){if(Object.prototype.hasOwnProperty.call(e,t[r])&&e[t[r]]){n=!0,"mode"===t[r]?e.visualElementType=e[t[r]].toLowerCase():e.visualElementType=e[t[r]],e.assetType=c[s[r].toLowerCase()];break}if("default"===t[r]){n=!0,e.visualElementType=o,e.assetType=c[s[r].toLowerCase()];break}}n||(e.visualElementType=t[t.length-1],e.assetType=c.default)},f=function(e,t,s,o){for(var n=[],r=0;r<t.length;r++)Object.prototype.hasOwnProperty.call(e,t[r])&&e[t[r]]?"mode"===t[r]?n.push({assetName:e[t[r]].toLowerCase(),assetType:c[s[r].toLowerCase()]}):n.push({assetName:e[t[r]],assetType:c[s[r].toLowerCase()]}):"default"===t[r]?n.push({assetName:o,assetType:c[s[r].toLowerCase()]}):"no-icons"===t[r]&&n.push({assetName:t[r]});e.assetsOrderArray=i(n,e.visualElementType)},g=function(e){var t={displayColumns:{}};return e&&(t.displayColumns.txDate={format:e.dateFormat,type:"date"},t.displayColumns.txAmount={format:e.amountFormat,type:"amount"}),t},m=function(e,t){var s=[];return s=e.length?e.map(function(e){return t[e.toLowerCase()]}):s},y=function(e,t){return Object.prototype.hasOwnProperty.call(e,"attributesTypes")&&void 0!==e.attributesTypes&&null!==e.attributesTypes?e.attributesTypes[t]:""},b=function(e){var t=T.processor.PStoryConfig.getConfig("lang");if(null===e)return e;if(Object.prototype.hasOwnProperty.call(e,t))return e[t];if("object"!==_typeof(e))return e;t=function(e){for(var t in e)return t}(e);return t?e[t]:void 0},v=function(e,s){var o={};return w.each(e,function(e,t){"txMode"!==e||void 0===s[t]||null===s[t]||"in"!==s[t].toLowerCase()&&"out"!==s[t].toLowerCase()?o[e]="boolean"==typeof t?t:s[t]:o[e]=s[t].toLowerCase()}),o},x=function(e){var t=["{{","'"],s=["}}","'"],o=[/{{([^\n\t\v{}]*)}}/g,/'([^\n\t\v{}]*)'/g];return e.match(o[0])&&e.match(o[0]).length&&(e=e.replace(t[0],"").replace(s[0],"")),e=!C(e)&&e.match(o[1])&&e.match(o[1]).length?e.replace(t[1],"").replace(s[1],""):e},C=function(e){return!(!e.match(/Amount\s+([A-Za-z\d\.\[\]\(\)\'\,\_\/\*\+\-]*)(?:\s+format='([#0,\.\+ \-@]*)')?(?:\s+currency='(.*)')?/)&&!e.match(/Date\s+([A-Za-z\.\[\]\(\)\'\,\_0-9]*)(?:\s+format='(.*)')?/))},k=function(e,t,s){s&&(e[t]=s)},t=function(){return PBlockProcessorManager.getInstance().getModel().expressions};return{convertTableToObject:function(e){var t=(e.configObject?o:s)(e);return n(t,e.class,e.configObject)},parseTableToObj:s,setVisualElementType:h,setAssetsOrderArray:f,mapVisualElementsValues:m}}}((window,window.Personetics=window.Personetics||{}),jQuery),function(i,o){i.story=i.story||{},i.story.CollapseHelper=Base.extend({initialize:function(e){this.browserData=i.utils.persoBrowserDetector.getBrowserData(),this.fixedContainer=e.fixedContainer||e.el.find(".pstory-block-container"),this.fixedWrapper=this.fixedContainer.parent(),e.el.parents(".pstory-dialog-frame").removeClass("perso-collapsed-animation"),e.el.addClass("perso-collapsed"),this.fixedContainer.addClass("pstory-fixed pstory-collapse-enabled pstory-collapse-enabled_"+e.type),this.collapsedHeight=this.fixedContainer.outerHeight(),e.el.removeClass("perso-collapsed"),this.fixedContainer.removeClass("pstory-fixed"),this.diffHeight=this.fixedContainer.outerHeight()-this.collapsedHeight,this.heightForElementDisplayed=e.uxCtrl.getCollapseOptions(e).displayedHeight,this.heightForElementDisplayed<=0&&(this.heightForElementDisplayed=this.fixedContainer.outerHeight(),this.diffHeight=0)},scrollEvent:function(e,t,s,o){this.elementDisplayed=t,this.heightPrevFixedElements=this.getHeightPrevFixedElements();var t=this.fixedWrapper.offset().top+this.fixedWrapper.height()-this.heightForElementDisplayed+this.diffHeight,n=this.fixedWrapper.offset().top,r=i.projectConfiguration.getConfig("enableCollapse");void 0!==this.isCollapsed&&1==this.isCollapsed&&n>=this.topFixedContainer||"undefined"!=r&&0==r?(this.isCollapsed=!1,this.doUnCollapse(e)):t<=this.heightPrevFixedElements&&(void 0!==this.isCollapsed&&0!=this.isCollapsed||(this.isCollapsed=!0,"perso-mobile"!=this.browserData.deviceType||void 0===e.story.options||void 0!==e.story.options.enableCollapse&&1!=e.story.options.enableCollapse||this.doCollapse(e,s))),"function"==typeof o&&o(e,this.fixedWrapper,this.heightPrevFixedElements)},getHeightPrevFixedElements:function(){var e,t;return this.prevCollapsed=o(".pstory-fixed").last(),0<this.prevCollapsed.length?(e=this.prevCollapsed.offset().top,(e=(t=o(".pstory-fixed"))&&1==t.length?0:e)+parseFloat(this.prevCollapsed.attr("collapsed-height")||this.prevCollapsed.outerHeight())):0},doCollapse:function(e,t){o.isFunction(e.onBeforeCollapsed)&&e.onBeforeCollapsed(this.fixedContainer),e.frameEl.is(":last-child")&&e.frameEl.parents(".pstory-dialog-frame").next().addClass("pstory-dialog-collapsed"),this.fixedWrapper.height(this.fixedWrapper.outerHeight()),this.fixedContainer.attr("collapsed-height",this.collapsedHeight),this.topFixedContainer=Math.min(0,this.heightForElementDisplayed-this.fixedContainer.outerHeight())+this.heightPrevFixedElements+this.diffHeight,this.fixedContainer.css({top:this.topFixedContainer+"px"});var s=999;0<this.prevCollapsed.length&&(s=this.prevCollapsed.css("z-index")-1),this.fixedContainer.css({"z-index":s}),1==t?e.frameEl.parents(".pstory-dialog-frame").removeClass("perso-collapsed-animation"):e.frameEl.parents(".pstory-dialog-frame").addClass("perso-collapsed-animation"),e.frameEl.removeClass("perso-unCollapsed"),e.frameEl.addClass("perso-collapsed"),this.fixedContainer.addClass("pstory-fixed"),this.bindEvents(e),o.isFunction(e.onCollapsed)&&e.onCollapsed(this.elementDisplayed,this.heightForElementDisplayed,this.fixedContainer,this.collapsedHeight)},doUnCollapse:function(e){this.unBindEvents(),e.frameEl.parents(".pstory-dialog-frame").next().removeClass("pstory-dialog-collapsed"),e.frameEl.removeClass("perso-collapsed"),this.fixedContainer.removeClass("pstory-fixed"),o.isFunction(e.onUnCollapsed)&&e.onUnCollapsed(this.elementDisplayed)},bindEvents:function(e){var t,s,o=!1;jQuery._data(this.fixedContainer.get(0),"events")&&jQuery._data(this.fixedContainer.get(0),"events").mousewheel||(this.fixedContainer.bind("mousewheel",this.scrollOnFixedElemment),this.fixedContainer.bind({touchmove:function(){o&&t(e)},touchstart:function(){o=!0},touchend:function(){s(e),o=!1},mousemove:function(){o&&t(e)},mousedown:function(){o=!0},mouseup:function(){s(e),o=!1}}),t=function(e){e.frameEl.parents(".pstory-frame").css("overflow","hidden")},s=function(e){e.frameEl.parents(".pstory-frame").css("overflow-y","scroll")})},unBindEvents:function(){this.fixedContainer.unbind("mousewheel"),this.fixedContainer.unbind("touchmove"),this.fixedContainer.unbind("touchstart"),this.fixedContainer.unbind("touchend"),this.fixedContainer.unbind("mousemove"),this.fixedContainer.unbind("mousedown"),this.fixedContainer.unbind("mouseup")},scrollOnFixedElemment:function(e){var t=o(".pstory-frame");0<e.originalEvent.wheelDelta/120?t.animate({scrollTop:t.scrollTop()-50},0,"swing"):t.animate({scrollTop:t.scrollTop()+50},0,"swing")}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e,a){e.utils=e.utils||{},e.utils.DotAnimation={},e.utils.DotAnimation.bindDotEventsForAnimation=function(e,r,i){this.elementWrapper=e,this.params=i,this.setSelectedDot=function(){var s=0;if(a.each(r,function(e,t){a(t).hasClass("perso-selected")&&(s=e)}),i.showIndexDots){var e=this.elementWrapper.find(".perso-carousel-index-wrapper .perso-carousel-index-dot");if(i.firstDot)a(e[0]).addClass("pstory-selected-index"),a.each(e,function(e,t){a(t).attr("pstory-id",a(r[e]).attr("pstory-id"))});else{for(var t=r.length,t=Math.ceil(t/2)-1-s,o=(t<0&&0,0),n=0;n<r.length;n++)if(a(r[n]).hasClass("perso-selected")){o=n;break}a(e[o]).addClass("pstory-selected-index"),a.each(e,function(e,t){a(t).attr("pstory-id",a(r[e]).attr("pstory-id"))})}}},this.updateIndex=function(e){var e=e.currentTarget,e=a(e).attr("pstory-id"),t=this.elementWrapper.find(".perso-carousel-index-wrapper"),s=t.find(".perso-carousel-index-dot");this.params&&this.params.updateDotsForAccessibility&&this.params.updateDotsForAccessibility(t,e),s.removeClass("pstory-selected-index"),s.filter('[pstory-id="'+e+'"]').addClass("pstory-selected-index")}}}((window,window.Personetics=window.Personetics||{}),jQuery),function(y,b,v){b.utils=b.utils||{},b.utils.carouselAnimation=b.utils.carouselAnimation||{},b.utils.carouselAnimation.bindCarouselEventsForAnimation=function(r,p){var d,u,h,f,e,t,g={},s={Space:32,Enter:13,LeftArrow:37,RightArrow:39,UpArrow:38,DownArrow:40};function o(e,t){void 0===e&&(e=h.filter(":not(.perso-selected)").outerWidth(!0)),void 0===t&&(t=h.filter(".perso-selected").outerWidth(!0)),g.itemWidth=e,g.selectedItemWidth=t;var s=0,o=-1,n=(v.each(h,function(e,t){v(t).hasClass("perso-selected")&&(o=e)}),-1==o&&(o=0,n=h.first().attr("pstory-id"),u.filter("[pstory-id='"+n+"']").addClass("perso-selected")),h.length),n=(1<n&&(s=s-e*(n-1)-t),(s+=(r.width()-t)/2)-e*o);g.minLeft=s,d.css({"transition-duration":"0s","-webkit-transition-duration":"0s"}),d.css({left:n+"px"})}function n(e){"number"==typeof e&&((g.numItemsDispaly=e)>h.length?u.filter("[clone='true']").addClass("perso-carousel-hide-clone"):u.removeClass("perso-carousel-hide-clone"))}function i(e){var t,s,o,n,r,i,a,l,c;"function"==typeof p.beforeCarouselStart&&p.beforeCarouselStart(e),t=e,s=p.animateDuration,t=t.currentTarget,v(t).hasClass("perso-selected")||1==g.disableInputSelect||(null==(a=g.swipeDirection)&&(a=v(t).hasClass("perso-prev")?1:-1),g.disableInputSelect=!0,u.removeClass("perso-selected"),u.removeClass("perso-prev"),u.removeClass("perso-next"),l=v(t).attr("pstory-id"),u.filter('[pstory-id="'+l+'"]').addClass("perso-selected"),"number"!=typeof s&&(s=300),l=h.length,o=g.minLeft,n=o-(g.itemWidth*(l-1)+g.selectedItemWidth),l=0,l=parseFloat(d.css("left")),r=g.itemWidth*a+l,i=g.selectedItemWidth-g.itemWidth,a=v(t).index(),1<(l=d.find(".perso-carousel-item:lt("+a+")").filter(".perso-selected").length)?r-=i:0==l&&(r+=i),setTimeout(function(){r=Math.floor(r),o=Math.floor(o),d.css({"transition-duration":"0s","-webkit-transition-duration":"0s"}),Math.abs(r)>=Math.abs(n)-i?d.css({left:o+"px"}):Math.abs(r)<Math.abs(o)-i&&(n=n+g.itemWidth+i,d.css({left:n+"px"})),g.disableInputSelect=!1,"function"==typeof p.afterCarouselEnd&&p.afterCarouselEnd(),b.messenger.dispatch(b.messenger.MSG_RENDERED_STORY,{message:"finish story render"})},s),d.css({"transition-duration":s+"ms","-webkit-transition-duration":s+"ms"}),d.css({left:r+"px"}),g.swipeDirection=null,m(),t=s,(c=p&&p.isDesktop?null:v(".pstory-account-button.perso-selected"))&&c.length<1&&u.filter(".perso-selected:not([clone='true'])"),t=10+t,c&&(c.attr("tabindex","0"),c.blur()),y.setTimeout(function(){c&&c.focus({preventScroll:!0}),p&&p.onAnimationEnd&&p.onAnimationEnd()},t)),p.showIndexDots&&f.updateIndex(e)}function a(e){if(v(r).hasClass("perso-carousel-disable")||g.disableInputSelect)p&&p.onAnimationEnd&&p.onAnimationEnd();else if("left"==e||"right"==e){var t=u.length,s=h.filter(".perso-selected").index(),o="left"==e?1:-1;if((s=(s+=o)==t?0:s)<0&&(s=t-1),h.length<g.numItemsDispaly&&"true"==v(u[s]).attr("clone"))return g.swipeDirection=null,void(p&&p.onAnimationEnd&&p.onAnimationEnd());g.swipeDirection=-1*o;t={};t.swipeDirection=e,t.currentTarget=u[s],i(t)}}function m(){var e=u.filter(".perso-selected:not([clone='true'])");e.siblings().attr("aria-hidden",!0),e.attr("aria-hidden",!0),e.prev().addClass("perso-prev"),e.next().addClass("perso-next"),e.prev().addClass("perso-prev"),e.next().addClass("perso-next"),u.removeAttr("aria-label"),void 0!==p.text&&(void 0!==p.text.next&&e.next().attr("aria-label",p.text.next),void 0!==p.text.prev&&e.prev().attr("aria-label",p.text.prev))}d=v(r).find(".perso-carousel-inner-wrapper"),h=d.find(".perso-carousel-item"),d.attr("num-original-cards",h.length),void 0!==(p=void 0===p?{}:p).itemWidth&&(g.itemWidth=p.itemWidth),void 0!==p.selectedItemWidth&&(g.selectedItemWidth=p.selectedItemWidth),void 0===p.numItemsDispaly&&(p.numItemsDispaly=3),1<h.length&&((e=h.clone(!0)).attr("clone","true"),t=e.clone(!0),d.prepend(v(e)),d.append(v(t).slice(0,2))),u=d.find(".perso-carousel-item"),o(g.itemWidth,g.selectedItemWidth),(f=new b.utils.DotAnimation.bindDotEventsForAnimation(r,h,p)).setSelectedDot(),n(p.numItemsDispaly),!1!==p.onClick&&(u.bind("click",function(e){0==v(r).hasClass("perso-carousel-disable")&&i(e)}),v("#personetics-teaser-widget-carousel").bind("keydown",function(e){e.target===document.activeElement&&(-1!==[s.RightArrow].indexOf(e.which)&&a("right"),-1!==[s.LeftArrow].indexOf(e.which)&&a("left"),-1!==[s.Enter].indexOf(e.which)&&v(this).find(".perso-account-button.perso-selected").click())})),!1!==p.onSwipe&&v(r).swipe(function(e){0==v(r).hasClass("perso-carousel-disable")&&a(e)},{preventDefault:!1}),m(),this.startCarousel=i,this.setConfig=o,this.setNumItemsToDispaly=n,this.onSwipe=a}}(window,window.Personetics=window.Personetics||{},jQuery),function(k,c,T){c.utils=c.utils||{},c.utils.carouselAnimation=c.utils.carouselAnimation||{},c.utils.carouselAnimation.bindMultiCarouselEventsForAnimation=function(d,u){var r,h,f,g,m={};function i(e,t){void 0===e&&(e=g.filter(":not(.perso-selected)").outerWidth(!0)),void 0===t&&(t=g.filter(".perso-selected").outerWidth(!0)),m.itemWidth=e,m.selectedItemWidth=t}function s(e,t){i(e,t);var s=0,o=-1,n=(T.each(g,function(e,t){T(t).hasClass("perso-selected")&&(o=e)}),-1==o&&(o=0,n=g.first().attr("pstory-id"),f.filter("[pstory-id='"+n+"']").addClass("perso-selected")),g.length),n=(1<n&&u.infiniteCarousel&&(s=s-e*(n-1)-t),(s+=(r.width()-t)/2*u.transformDirection)-e*o*u.transformDirection);m.minLeft=s,h.css({"transition-duration":"0s","-webkit-transition-duration":"0s"}),h.css({left:n+"px"}),u.infiniteCarousel||(u.hidePrevNextArrow?y:b)(),this.inboxReporter&&(c.utils.persoInboxReporter.notifyReportEvent(null,"carouselWidgetStarted",Object.keys(c.utils.persoInboxReporter.getInboxReporterInsights()).length,!0),c.utils.persoInboxReporter.handleCarouselReporter(g[o]))}function o(e){"number"==typeof e&&((m.numItemsDispaly=e)>g.length||!u.infiniteCarousel?f.filter("[clone='true']").addClass("perso-carousel-hide-clone"):f.removeClass("perso-carousel-hide-clone"))}function n(e,t){if(T(d).hasClass("perso-carousel-disable")||this.disableInputSelect)C();else if("left"==e||"right"==e){var s=f.length,o=g.filter(".perso-selected").index("[id*=perso-teaser-template]"),n="left"==e?1:-1;if(o+=n*=u.transformDirection,!u.infiniteCarousel&&(o==s||o<0))return!1;if((o=o==s?0:o)<0&&(o=s-1),T(d).find(".perso-carousel-number-current").text(o+1),l(o),(g.length<m.numItemsDispaly||!u.infiniteCarousel)&&"true"==T(f[o]).attr("clone"))return m.swipeDirection=null,void C();m.swipeDirection=-1*n*u.transformDirection;s={};s.swipeDirection=e,s.currentTarget=f[o],this.inboxReporter&&(o=(n=T(s.currentTarget)).length?n.attr("data-id"):null,n=c.utils.persoInboxReporter.getInboxReporterInsight(o),c.utils.persoInboxReporter.notifyReportEvent(n,t,1,!0),c.utils.persoInboxReporter.handleCarouselReporter(s.currentTarget)),T(e.currentTarget).hasClass("perso-selected")||1==m.disableInputSelect||a(s)}}function y(){var e=d.find(".pstory-carousel-arrow"),t=e.filter(".pstory-carousel-arrow-next"),e=e.filter(".pstory-carousel-arrow-prev"),s=f.filter(".perso-selected").prev(".perso-teaser-template"),o=f.filter(".perso-selected").next(".perso-teaser-template");0<s.length?(e.removeClass("perso-hidden"),e.attr("aria-hidden",!1)):(e.addClass("perso-hidden"),e.attr("aria-hidden",!0)),0<o.length?(t.removeClass("perso-hidden"),t.attr("aria-hidden",!1)):(t.addClass("perso-hidden"),t.attr("aria-hidden",!0))}function b(){var e=g.filter(".perso-selected").index(),t=d.find(".pstory-carousel-arrow"),s=t.filter(".pstory-carousel-arrow-next"),t=t.filter(".pstory-carousel-arrow-prev");t.removeClass("perso-arrow-disable"),s.removeClass("perso-arrow-disable"),"true"==T(f[e+1]).attr("clone")&&s.addClass("perso-arrow-disable"),"true"==T(f[e-1]).attr("clone")&&t.addClass("perso-arrow-disable")}function a(e){"function"==typeof u.beforeCarouselStart&&u.beforeCarouselStart(e);var t=e,s=u.animateDuration,t=t.currentTarget,o=d.find(".pstory-acc-carousel-selected"),n=(null==(c=m.swipeDirection)&&(c=1),m.disableInputSelect=!0,f.removeClass("perso-selected"),T(t).attr("pstory-id")),n=(f.filter('[pstory-id="'+n+'"]').addClass("perso-selected"),"number"!=typeof s&&(s=300),g.length),r=m.minLeft,i=r-(m.itemWidth*(n-1)+m.selectedItemWidth),n=0,a=(n=parseFloat(h.css("left")),m.itemWidth*c+n),l=m.selectedItemWidth-m.itemWidth,c=T(t).index(),t=(1<(n=h.find(".perso-carousel-item:lt("+c+")").filter(".perso-selected").length)?a-=l:0==n&&(a+=l),setTimeout(function(){var e;a=Math.floor(a),r=Math.floor(r),h.css({"transition-duration":"0s","-webkit-transition-duration":"0s"}),u.infiniteCarousel&&(Math.abs(a)>=Math.abs(i)-l?(e=r+(a-i),h.css({left:e+"px"})):Math.abs(a)<Math.abs(r)-l&&(i+=Math.abs(r)-Math.abs(a),h.css({left:i+"px"}))),m.disableInputSelect=!1,o.length||x(),v(),C()},s),h.css({"transition-duration":s+"ms","-webkit-transition-duration":s+"ms"}),h.css({left:a+"px"}),m.swipeDirection=null,s),p=d.find(".pstory-acc-carousel-selected"),t=(g.filter(".perso-selected"),10+t);p.length&&(p.attr("tabindex","0"),p.blur()),k.setTimeout(function(){p.length&&p.focus()},t),u.infiniteCarousel||(u.hidePrevNextArrow?y:b)(),u.showIndexDots&&this.dotAnimation.updateIndex(e)}function v(){var e=g.filter(".perso-selected"),t=d.find(".pstory-acc-carousel-selected"),s=d.find(".pstory-carousel-arrow"),o=s.filter(".pstory-carousel-arrow-next"),s=s.filter(".pstory-carousel-arrow-prev");u.showArrows||(u.infiniteCarousel?s.attr("aria-hidden","true"):"hidden"===s.css("visibility")?s.attr("aria-hidden",!0):s.attr("aria-hidden",!1),"hidden"===o.css("visibility")?o.attr("aria-hidden",!0):o.attr("aria-hidden",!1)),t.attr("aria-label",e.attr("aria-label"))}function l(e){var t=d.find(".perso-carousel-index-wrapper"),s=g.length||0,e=e||g.filter(".perso-selected").index("[id*=perso-teaser-template]"),o=c.dictionary.getText("accessibilityOutOfTxtCarousel");t&&t.length&&t.attr("aria-label",e+1+" "+o+" "+s)}function x(){var e,t,s=d.find(".perso-multi-teaser-template"),n=g.filter(".perso-selected"),o=g.find(".perso-teaser-header, .perso-feedback-teaser-title"),r=n.find(".perso-teaser-header,.perso-feedback-teaser-title"),i=s.find(".perso-acc-left-arrow"),a=s.find(".perso-acc-right-arrow"),o=(s.find(".perso-teaser-template-inner").removeAttr("tabindex"),c.utils.accessibility.removeFocusAttr(o),r.attr("role","text"),s.find(".perso-accessibility-item").attr("aria-hidden",!0),l(),setTimeout(function(){r.attr({tabindex:"0","aria-hidden":!1}),n.find(".perso-accessibility-item").attr("aria-hidden",!1),n.find("button , a").attr("role","button");var e=i,t=a,s=f.filter(".perso-selected").prev('[id*="perso-teaser-templat"]'),o=f.filter(".perso-selected").next('[id*="perso-teaser-templat"]');0<s.length?e.show():e.hide(),0<o.length?t.show():t.hide()},500),{height:n.innerHeight(),width:s.offset().left*u.transformDirection,top:n.offset().top-s.offset().top,position:"absolute","z-index":100,opacity:0});i.length&&(e=-1*s.offset().left*u.transformDirection+5,t=u.isRtl?T.extend({right:e},o):T.extend({left:e},o),i.css(t)),a.length&&(e=s.offset().left*u.transformDirection+5,t=u.isRtl?T.extend({left:e},o):T.extend({right:e},o),a.css(t))}function C(){"function"==typeof u.afterCarouselEnd&&u.afterCarouselEnd()}!function(){r=T(d).find(".perso-carousel-outer-wrapper"),h=T(d).find(".perso-carousel-inner-wrapper"),g=h.find(".perso-carousel-item"),h.attr("num-original-cards",g.length),void 0===u&&(u={});u.transformDirection=1,u.isRtl&&(u.transformDirection=-1);i(u.itemWidth,u.selectedItemWidth),void 0===u.numItemsDispaly&&(u.numItemsDispaly=3);{var e,t;1<g.length&&u.infiniteCarousel&&((t=g.clone(!0)).attr("clone","true"),e=t.clone(!0),h.prepend(T(t)),t=u.numItemsDispaly-1<2?2:u.numItemsDispaly-1,h.append(T(e).slice(0,t)))}f=h.find(".perso-carousel-item"),this.inboxReporter=u.inboxReporter,s(m.itemWidth,m.selectedItemWidth),this.dotAnimation=new c.utils.DotAnimation.bindDotEventsForAnimation(d,g,u),this.dotAnimation.setSelectedDot(),o(u.numItemsDispaly),function(){var e=f.filter(".perso-selected:not([clone='true'])"),t=d.find(".pstory-carousel-arrow"),s=t.filter(".pstory-carousel-arrow-next"),o=t.filter(".pstory-carousel-arrow-prev"),n=d.find(".pstory-acc-carousel-selected"),r=e.offset(),i=d.offset(),e={height:e.innerHeight(),width:e.innerWidth(),left:r.left-i.left,top:r.top-i.top,position:"absolute",opacity:0};0<n.length?(n.css(e),f.attr("aria-hidden",!0),n.bind("click",function(e){g.filter(".perso-selected").click()})):(r=d.find(".perso-multi-teaser-template"),e=c.dictionary.getText("accessibilityPrevTeaser"),a=c.dictionary.getText("accessibilityNextTeaser"),e='<button class="pstory-acc-carousel-arrow perso-acc-left-arrow"aria-label="'+e+'"></button>',a='<button class="pstory-acc-carousel-arrow perso-acc-right-arrow"aria-label="'+a+'"></button>',r.prepend(e),r.append(a),x());{var a;1==u.showArrows?t.removeClass("pstory-carousel-arrow-hidden"):n.length&&(0<(e=f.filter(".perso-selected:not([clone='true'])").prev()).length?(r=e[0].getBoundingClientRect().width,a=e.offset(),t={height:e[0].getBoundingClientRect().height,width:r-Math.abs(a.left),left:0,top:a.top-i.top,position:"absolute","z-index":100},o.css(t)):o.hide(),0<(n=f.filter(".perso-selected:not([clone='true'])").next()).length?(e=n.offset(),r={height:n[0].getBoundingClientRect().height,width:n.parent().width()-e.left,right:0,top:e.top-i.top,position:"absolute","z-index":100},s.css(r)):o.hide())}v()}(),function(){!1!==u.onClick&&(f.not(".perso-feedback-teaser").bind("click",function(e){var t,s;0==T(d).hasClass("perso-carousel-disable")?(t=(e=e).currentTarget,s=g.filter(".perso-selected").index(),m.swipeDirection=s-T(t).index(),T(e.currentTarget).hasClass("perso-selected")||1==m.disableInputSelect||a(e)):C()}),T(d).find(".pstory-carousel-arrow,.pstory-acc-carousel-arrow").bind("click",function(e){var t;0==T(d).hasClass("perso-carousel-disable")?(e=(e=e).currentTarget,t=T(e).hasClass("pstory-carousel-arrow-next")||T(e).hasClass("perso-acc-right-arrow")?"left":"right",n(t=u.isRtl?T(e).hasClass("pstory-carousel-arrow-next")||T(e).hasClass("perso-acc-right-arrow")?"right":"left":t,"carouselClick")):C()}),h.bind("keydown",function(e){var t={LeftArrow:37,RightArrow:39};e.target===document.activeElement&&(-1!==[t.RightArrow].indexOf(e.which)&&n("right"),-1!==[t.LeftArrow].indexOf(e.which)&&n("left"))}));!1!==u.onSwipe&&T(d).swipe(function(e){0==T(d).hasClass("perso-carousel-disable")&&n(e,"carouselSwipe")},{preventDefault:!1})}()}(),this.startCarousel=a,this.setConfig=s,this.setNumItemsToDispaly=o,this.onSwipe=n}}(window,window.Personetics=window.Personetics||{},jQuery),function(m,y){m.utils=m.utils||{},m.utils.PersoCarousel=m.utils.PersoCarousel||{},m.utils.PersoCarousel.createCarousel=function(e){function s(s){var o=0;return s=null==s?d.call(this):s,this.$items.each(function(e,t){e<s&&(o-=y(t).outerWidth(!0))}),this.displayManyItems&&this.centerSelectedElement&&(o+=this.$carousel.width()/2-this.selectedItemSize/2),o}var o=e.config||{},t=(this.isSingleCard=e.hasOwnProperty("numberOfItems")&&e.numberOfItems&&e.numberOfItems<=1,this.isStackedCardsCarousel=o.isStackedCardsCarousel||!1,this.showItemsEdges=o.showItemsEdges||!1,this.endlessCarousel=o.endlessCarousel||!1,this.isRTLCarousel=o.isRTLCarousel||!1,this.isSwipeable=!this.isSingleCard&&o.isSwipeable||!1,this.hideButtons=!!this.isSingleCard||(o.hideButtons||!1),this.hiddenButtons=o.hiddenButtons||!1,this.showIndicator=!this.isSingleCard&&o.showIndicator||!1,this.defaultItem=o.defaultItem||1,this.isDotsClickAble=o.isDotsClickAble||!1,this.isItemsClickAble=o.isItemsClickAble||!1,this.displayManyItems=o.displayManyItems||!1,this.centerSelectedElement=o.centerSelectedElement||!1,this.parentElm=e.el,this.numberOfItems=e.hasOwnProperty("numberOfItems")&&e.numberOfItems?e.numberOfItems:0,this.template=e.template,this.isAlreadyBinded=!e.firstCreateCarousel&&this.isAlreadyBinded||!1,this.selectors={$carouselContainer:"#carouselContainer",$ulPersoCarousel:"ul.perso-carousel",$persoItem:".perso-item",$first:":first",$last:":last",$leftButton:"button#left",$rightButton:"button#right",$liPersoDotItem:"li .perso-dot-item",$persoInvisible:"perso-invisible",$persoCarouselWrapper:".perso-new-carousel-wrapper",$persoCarouselButtonWrapper:".perso-carousel-button-wrapper",persoTablet:"perso-tablet",persoDesktop:"perso-desktop"},this.initUiSelectors=function(){this.$carousel=this.parentElm.find(this.selectors.$ulPersoCarousel),this.$items=this.$carousel.find(this.selectors.$persoItem),this.$firstItem=this.$items.filter(this.selectors.$first),this.$lastItem=this.$items.filter(this.selectors.$last),this.leftButton=this.parentElm.find(this.selectors.$leftButton),this.rightButton=this.parentElm.find(this.selectors.$rightButton),this.$dots=this.parentElm.find(this.selectors.$liPersoDotItem),this.$animateInClass="perso-animate-in",this.$animateOutClass="perso-animate-out",this.$animatePrevClass="perso-animate-prev",this.$animateNextClass="perso-animate-next"},this.beforeInit=function(){this.buildCarouselHTML()},this.getCarouselHTMLTemplate=function(){return m.UI.Handlebars.templates["tmpl-perso-carousel"]},this.appendItemsLI=function(){var e,t;0<this.numberOfItems&&(e=this.parentElm.find(this.selectors.$carouselContainer),t=y(this.template),e.append(t))},this.buildCarouselHTML=function(){this.parentElm&&(this.parentElm.append(this.getCarouselHTMLTemplate()),this.appendItemsLI(),this.showIndicator&&this.buildIndicatorHTML(this.numberOfItems))},this.buildIndicatorHTML=function(e){this.parentElm.append('<div class ="perso-dots-container"><ul class="perso-dots-list"></ul></div>');for(var t=0;t<e;t++)this.parentElm.find(".perso-dots-list").append('<li class="perso-dot-wrapper"><div class="perso-dot-item"></div></li>')},this.init=function(){var e,t;this.itemsNumber=this.$items.length,this.currentItem=1,this.fontSize=0,this.browserData=m.utils.persoBrowserDetector.getBrowserData(),this.browserData.deviceType===this.selectors.persoDesktop||this.browserData.deviceType===this.selectors.persoTablet?this.fontSize=o.fontSize:o.fontSize?this.fontSize=personetics.skinController.getValueByScreenWidth(o.fontSize):this.fontSize=parseFloat(this.$items.css("fontSize"))||10,o.itemSize?this.itemSize=this.fontSize*parseFloat(o.itemSize):this.itemSize=this.$carousel.find(".perso-item:not('.perso-selected')").outerWidth(!0)||0,o.selectedItemSize?this.selectedItemSize=this.fontSize*parseFloat(o.selectedItemSize):this.selectedItemSize=this.$carousel.find(".perso-item.perso-selected").outerWidth(!0)||this.itemSize,this.startX=s.call(this,0),this.endX=s.call(this,this.itemsNumber-1),this.offset=s.call(this,this.defaultItem-1),this.$carousel.attr("data-perso-item-viewed",this.defaultItem-1),this.showCardsClasses()&&(e=this.defaultItem,t="right",this.isRTLCarousel&&(this.showItemsEdges&&(e=this.defaultItem-2),t="left"),u.call(this,this.$items),y(this.$items[e]).addClass(this.$animateNextClass),this.shouldBindCardClick()&&y(this.$items[e]).on("click",n.bind(this,null,t))),u.call(this,this.$dots),this.endlessCarousel||this.leftButton.addClass(this.selectors.$persoInvisible)},this.shouldBindCardClick=function(){return this.showItemsEdges},this.showCardsClasses=function(){return this.isStackedCardsCarousel||this.showItemsEdges},this.setShowEdges=function(e){e&&this.parentElm.find(this.selectors.$persoCarouselWrapper).addClass("showItemsEdges")},this.setEndlessCarousel=function(e){var t=this.$carousel||this.parentElm.find(this.selectors.$ulPersoCarousel);e&&(this.$firstItem.before(this.$lastItem.clone(!0).addClass("perso-last-clone")),this.$lastItem.after(this.$firstItem.clone(!0).addClass("perso-first-clone")),e=(this.$carousel.css("transform").split(/[()]/)[1]||"").split(",")[4]||0,e-=this.itemSize,this.offset=e,t.css({transform:"translateX("+e+"px)",transition:"none"}))},this.setDefaultItem=function(e){var t=this.$carousel;p.call(this,t,this.itemsNumber),1<e&&(t.css("transition","none"),setTimeout(function(){t.css("transition","")},500)),t.css("transform","translateX("+this.offset+"px)")},this.setSwipeable=function(e){var t=this;e&&(e=t.parentElm,this.isAlreadyBinded||(e.swipe(function(e){"left"==e?n.call(t,null,"right"):"right"==e&&n.call(t,null,"left")}),this.isAlreadyBinded=!0))},this.setHideButtons=function(e){e&&this.parentElm.find(this.selectors.$persoCarouselButtonWrapper).addClass("hideButtons")},this.setHiddenButtons=function(e){e&&this.parentElm.find(this.selectors.$persoCarouselButtonWrapper).addClass("hiddenButtons")},this.bindEvents=function(){this.rightButton.add(this.leftButton).on("click",n.bind(this)),this.isDotsClickAble&&this.$dots.on("click",i.bind(this)),this.isItemsClickAble&&this.$items.on("click",r.bind(this)),this.parentElm.bind("keyup",t.bind(this))},function(e){var t=null,t=(t=m.story.skinController&&jQuery.isFunction(m.story.skinController)?new m.story.skinController:t).getPersoneticsWrapper(),s=".pstory-block-frame",o=t.find(s),n=this.parentElm.parents(".pstory-dialog-container").find(".pstory-block-content"),r=t.find(s).index(n);switch(e.which){case 39:"hidden"!=this.rightButton.css("visibility")&&this.rightButton.is(":visible")?m.utils.accessibility.putFocus(this.rightButton):o[r+1]&&o[r+1].focus();break;case 37:"hidden"!=this.leftButton.css("visibility")&&this.leftButton.is(":visible")?m.utils.accessibility.putFocus(this.leftButton):o[r-1]&&o[r-1].focus()}}),n=function(e,t){var s=this,e=e&&e.target&&e.target.id?e.target.id:t,t="right"===e?1:-1;s.endlessCarousel?(s.offset+=-s.itemSize*t,s.offset=Number(s.offset.toFixed(3)),l.call(s,e,s.offset),c.call(s,s.$carousel,t)):(s.offset=Number(s.offset.toFixed(3)),s.offset!==Number(this.startX.toFixed(3))&&"left"===e?(s.offset=Number((s.offset+s.itemSize).toFixed(3)),a.call(s,e,t)):s.offset>Number(this.endX.toFixed(3))&&d.call(s)<s.numberOfItems-1&&"right"===e&&(s.offset=Number((s.offset-s.itemSize).toFixed(3)),a.call(s,e,t)))},r=function(e){var e=y(e.currentTarget),t=d.call(this),t=e.index()-t,s=0<t?"right":"left";e.hasClass("perso-selected")||(this.offset=this.offset-t*this.itemSize,a.call(this,s,t))},i=function(e){var e=y(e.target),t=d.call(this),t=e.parent().index()-t,s=0<t?"right":"left";e.hasClass("perso-selected")||(this.offset=this.offset-t*this.itemSize,a.call(this,s,t))},a=function(e,t){var s=this;this.isStackedCardsCarousel||(h.call(s,e),s.$carousel.css("transform","translateX("+s.offset+"px)")),this.showCardsClasses()&&f.call(s,e),c.call(s,s.$carousel,t),p.call(s,s.$carousel,s.itemsNumber),u.call(s,s.$items),u.call(s,s.$dots)},l=function(e,t){var e="left"===e?-1:1,s=(this.currentItem+=e,(0===this.currentItem||this.currentItem>this.itemsNumber)&&(this.currentItem=0===this.currentItem?this.itemsNumber:1,this.offset=this.startX-this.itemSize*this.currentItem,e=this.startX-(this.currentItem-e)*this.itemSize,this.$carousel.css({transform:"translateX("+e+"px)",transition:"none"})),this);setTimeout(function(){s.$carousel.css({transform:"translateX("+s.offset+"px)",transition:"all 0.5s ease"})},0)},c=function(e,t){var s=d.call(this);this.endlessCarousel&&(0<t&&s==this.itemsNumber-1?s=-1:t<0&&0==s&&(s=this.itemsNumber)),y(e).attr("data-perso-item-viewed",s+t)},p=function(e,t){e=parseInt(y(e).attr("data-perso-item-viewed"))||0;this.leftButton.add(this.rightButton).removeClass("perso-invisible perso-visible"),0==e?this.leftButton.addClass("perso-invisible"):e==t-1?this.rightButton.addClass("perso-invisible"):(this.leftButton.addClass("perso-visible"),this.rightButton.addClass("perso-visible"))},d=function(){return parseInt(this.$carousel.attr("data-perso-item-viewed"))||0},u=function(e){var t;e&&e.length&&(t=d.call(this),e.removeClass("perso-selected"),y(e[t]).addClass("perso-selected"))},h=function(e){var e="right"===e?1:-1,t=d.call(this),e=1==e?t+1:t-1;this.$items.removeClass(this.$animateInClass+" "+this.$animateOutClass),y(this.$items[e]).addClass(this.$animateInClass),y(this.$items[t]).addClass(this.$animateOutClass)},f=function(e){var t=this,e="right"===e?1:-1,s=d.call(t),o=1==e?s:s-2,n=1==e?s+2:s,r=t.$items[o],i=t.$items[n];this.isRTLCarousel&&(r=t.$items[n],i=t.$items[o]),t.$items.removeClass(t.$animatePrevClass+" "+t.$animateNextClass),y(r).addClass(t.$animatePrevClass),1===s&&-1==e&&(y(t.$items[o]).removeClass(t.$animatePrevClass),n=s),y(i).addClass(t.$animateNextClass),this.shouldBindCardClick()&&g.call(t,r,i)},g=function(e,t){y(this.selectors.$persoItem).off("click"),this.isRTLCarousel?(y(t).on("click",n.bind(this,null,"left")),y(e).on("click",n.bind(this,null,"right"))):(y(t).on("click",n.bind(this,null,"right")),y(e).on("click",n.bind(this,null,"left")))};this.setConfigs=function(){this.setSwipeable(this.isSwipeable),this.setShowEdges(this.showItemsEdges),this.setHiddenButtons(this.hiddenButtons),this.setHideButtons(this.hideButtons)},this.beforeInit(),this.initUiSelectors(),this.setConfigs(),this.init(),this.setDefaultItem(this.defaultItem),this.setEndlessCarousel(this.endlessCarousel),this.bindEvents()}}((window,window.Personetics=window.Personetics||{}),jQuery),function(o,n,r){n.utils=n.utils||{},n.utils.persoModalManager={$selectors:function(){return{$pstoryBlockModal:"pstory-block-modal",$pstoryBlockModalElm:".pstory-block-modal",$pstoryFrame:".pstory-frame",$blockerClass:".perso-modal-wrapper",$persoRatingsWrapper:".perso-ratings-wrapper",$pstoryStoryContainer:".pstory-container",$persoDesktop:"perso-desktop",$persoTablet:"perso-tablet"}},modalConfigurations:function(){return{lang:n.processor.PStoryConfig.getConfig("lang"),closeExisting:!1,escapeClose:!1,clickClose:!1,modalClass:"modal",blockerClass:"perso-modal-wrapper",showClose:!1,fadeDuration:200,fadeDelay:1}},modalBlocksFactory:function(){return{transactionModal:{constructor:n.story.TransactionModalBlock}}},initParams:function(e,t){this.modalBlockFactory&&Object.hasOwnProperty.call(this.modalBlockFactory,e)&&!Object.hasOwnProperty.call(this.modalBlockFactory[e],"params")&&(this.modalBlockFactory[e].params=t)},initModal:function(e){this.closeModal(),this.selectors=this.$selectors(),this.modalSettings=this.modalConfigurations(),this.modalBlockFactory=this.modalBlockFactory||this.modalBlocksFactory(),this.initParams(e.modalId,e.params),this.pBlockManager=o.PBlockProcessorManager.getInstance();var t=this.getModalBlocks(e.modalId),s=this.getModalTexts(e.modalId);t&&s&&(this.modalManagerEl=this.renderModal(this.modalBlockFactory[e.modalId].params.story.frameEl),this.modalBlockConfig={modalManager:this,modalBlock:t,modalTexts:s,modalParams:this.modalBlockFactory[e.modalId].params,storyClickedEl:e.clickedEl,storyDialogEl:e.dialogEl},this.modalBlock=new this.modalBlockFactory[e.modalId].constructor(this.modalBlockConfig))},getModalTexts:function(e){return this.pBlockManager.texts[e][this.modalSettings.lang]||this.pBlockManager.texts[e][this.pBlockManager.defaultLang]},findModalById:function(e,t){return e.filter(function(e){return e.id===t})},getModalBlocks:function(e){var t=(this.pBlockManager||o.PBlockProcessorManager.getInstance()).storyDefinition.modals;if(t&&t.length){t=this.findModalById(t,e);if(t)return t[0]}},updateModalDefinition:function(e,t){var s;e&&t&&personetics.config.persoEBMode&&(s=this.pBlockManager,Object.prototype.hasOwnProperty.call(t,"text")&&s&&s.texts&&(s.texts[e][this.modalSettings.lang]=t.text),Object.prototype.hasOwnProperty.call(t,"expressions")&&s&&s.model&&s.model.expressions&&(s.model.expressions=t.expressions),Object.prototype.hasOwnProperty.call(t,"blocks")&&s&&s.storyDefinition&&s.storyDefinition.modals&&((s=this.findModalById(s.storyDefinition.modals,e))&&s[0].blocks&&(s[0].blocks=t.blocks)))},getModalManagerTemplate:function(e,t){return(new n.story.PCtrlBase).getTemplateHtml(e,t)},renderModal:function(e){var t=this.selectors,s=n.utils.persoBrowserDetector.getBrowserData().deviceType,o=this.getModalManagerTemplate(t.$pstoryBlockModal),o=(e.append(o),r(t.$pstoryBlockModalElm)),s=s===t.$persoTablet||s===t.$persoDesktop?0+e.scrollTop():e.parent().offset().top;return o.modal(this.modalSettings,e),e.find(t.$blockerClass).css({top:s}),o},raiseRefreshInsightsEvent:function(){"undefined"!=typeof personetics&&null!==personetics&&Object.prototype.hasOwnProperty.call(personetics,"sendWidgetEvent")&&personetics.sendWidgetEvent(this,{eventType:"refreshInsights",ctxId:"sampleNew"})},closeModal:function(e,t,s){r.modal.close(),e&&n.utils.accessibility.putFocus(e),s&&t?(this.modalBlock.parent.notifyEvent(null,"autoRefresh",{context:null}),this.raiseRefreshInsightsEvent()):s&&!1===t&&this.raiseRefreshInsightsEvent()}}}(window,window.Personetics=window.Personetics||{},jQuery),function(e){e.story=e.story||{},e.story.GlorifiComparableChartCC3=e.story.ComparableChartCC3.extend({getBarChartConfigs:function(){return{monthPickerHeight:51,addBarsWrapperHeightForNegative:!1,addMonthAmountMarginsCalc:!1,addIndicatorTopPosition:!1,animateTooltipWidth:!0,isBarClickable:!0,staticToolTip:!0,indicatorType:"mtd-3",options:{height:.10564,heightWithStaticToolTip:.10564,marginBetweenBars:4.8,tooltipJMarginBottom:15,amountAnimationDuration:1500,minBarHeight:.00625,defaultBarHeight:568}}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(t,s){t.story=t.story||{},t.story.SOCGENPieChartPC4=t.story.PieChartPC4.extend({updatePieInfoValues:function(e){t.story.PieChartPC4.prototype.updatePieInfoValues.call(this,e);e='<span class="pstory-pie-total-label">'+this.totalText+'</span><span class="pstory-pie-total-amount"> '+this.totalAmount+"</span>";s(".pstory-pie-total-text").html(e)},renderGradient:function(){t.story.PieChartPC4.prototype.renderGradient.call(this);var e=this.options.arcs.gradients;e&&s.each(e,function(e,t){t&&s("#"+t.id).attr("x1","1").attr("y2","0")})},setPieSize:function(e){this.margin={top:0,right:20,bottom:0,left:20},this.width=e,this.height=s(".pstory-block-pie-chart .perso-empty").length?.5*this.width:.6*this.width,this.radius=Math.min(this.width,this.height)/2,this.innerRadius=this.radius-this.options.radii.inner,this.outerRadius=s(".pstory-block-pie-chart .perso-empty").length?this.radius-10:this.radius-this.options.radii.outer,this.innerRadiusOver=this.radius-this.options.radii.innerOver,this.outerRadiusOver=this.radius-this.options.radii.outerOver,-1!==this.el.find(".pstory-block-pie-chart").get(0).className.indexOf("perso-empty")&&(this.innerRadiusOver=this.innerRadius,this.outerRadiusOver=this.outerRadius)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(a,l,c){l.utils=l.utils||{},l.utils.PResizeUIEventManager=new function(){var e=null;this.getInstance=function(){return null==e&&(e=new t).onResize(),e}};var t=function e(){var t=null,s=null,o=null,n=!1,r=a.innerWidth;function i(){if(r!=a.innerWidth){if(!s)return;null!=t&&clearTimeout(t),t=setTimeout(function(){s(o)},500)}r=a.innerWidth}e.prototype.setCallBack=function(e){s=e},e.prototype.setSupportCollapse=function(e){n=e},e.prototype.getSupportCollapse=function(){return n},e.prototype.setParams=function(e){o=c.extend(o,e)},e.prototype.setPayload=function(e){o.payload=e},e.prototype.onResize=function(){c(a).resize(i)},e.prototype.endResize=function(){l.projectConfiguration.setConfig({supportCollapse:n}),s=null}}}(window,window.Personetics=window.Personetics||{},jQuery),function(e){e.utils=e.utils||{},e.utils.breakPoints=[{width:347,cssProperty:"max-width"},{width:395,cssProperty:"max-width"},{width:414,cssProperty:"min-width"},{width:1279,cssProperty:"min-width"}]}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.UI=e.UI||{};var t=Base.extend({widgetsTextsMap:{},defaultLang:"en",getText:function(e,t,s){var s=s||"",o=s;return o=this.widgetsTextsMap.hasOwnProperty(e)?(e=this.widgetsTextsMap[e])[t]||e[this.defaultLang]||s:o},registerText:function(e,t,s){s=s||this.defaultLang;this.widgetsTextsMap.hasOwnProperty(e)||(this.widgetsTextsMap[e]={}),this.widgetsTextsMap[e][s]=t}});e.UI.PWidgetsTextsFactory=new t}((window,window.Personetics=window.Personetics||{}),jQuery),function(d,u,h){u.UI=u.UI||{},u.UI.PAppCtrl=u.UI.PWidgetCtrl.extend({$selectors:function(){return{$persoTheme:"perso-theme",$persoDarkMode:"perso-dark-mode",$persoDark:"perso-dark"}},initialize:function(e){this.super=u.UI.PWidgetCtrl.prototype,this.super.initialize.call(this,e),(this.config.parentCtrl=this).config.widthMode="",this.widgets={};var t=(t=e.uxCtrl)||new u.story.skinController;this.uxCtrl=t,this.uxCtrl.setPersoneticsWrapper(e.el),this.desktopScreenWidth=this.uxCtrl.getDesktopScreenWidth(),this.screenWidth=this.uxCtrl.getPersoneticsWrapper().width(),this.setFirstWidgetType(e.widgetType),this.registerTexts(),(this.config.theme||this.config.darkMode)&&(t=this.config.darkMode?u.colorsConfigObjectMapping.darkMode:null,personetics.config.mappedColors=u.utils.persoHelper.deepObjectExtend(t,personetics.config.theme),this.startTheme())},startTheme:function(){this.config.theme&&u.utils.persoTheming&&!u.utils.persoTheming.styleInitiated&&(personetics.config.theme=personetics.config.mappedColors,u.utils.persoTheming.initTheme(personetics.config.theme))},setFirstWidgetType:function(e){this.firstWidgetType=e||"insights"},getWidgetEl:function(e){var t=this.el.find("#personetics-"+e);return 0==t.length&&((t=h("<div id='personetics-"+e+"'></div>")).addClass("perso-"+e),this.el.append(t)),t},start:function(e){var t,s=this,o=this.$selectors(),n=h("<div class='personetics-widgets-wrapper'></div>"),r=(e.children().not("#perso-responsive-container").remove(),0==h(e).find("#perso-responsive-container").length?(p=h("<div id='perso-responsive-container' role='application'></div>"),e.append(p)):(p=h(e).find("#perso-responsive-container")).children().not(".perso-resize-detector").remove(),p.append(n),e&&e.length&&personetics&&personetics.config&&(personetics.config.darkMode?e.addClass(o.$persoDark):e.removeClass(o.$persoDark)),this.uxCtrl.setPersoneticsWrapper(p),u.utils.persoBrowserDetector.getBrowserData()),i=u.SkinConfigs.getBreakPointsObject(),a=i[r.deviceType],l=["perso-disable-copy","perso-font-small perso-font-medium perso-font-large","perso-side-by-side"];for(t in i)l.concat(Object.getOwnPropertyNames(i[t]),t).forEach(function(e){-1==l.indexOf(e)&&l.push(e)});this.addClassesToMainContainer(p,r,l),this.el=n,u.utils.remoteAssets.setAssetsConfig(personetics.config);var c,e=u.UI.PWidgetFactory.createWidget(this.firstWidgetType,this.config),p=(this.widgets[this.firstWidgetType]=e,this.getWidgetEl(this.firstWidgetType));s.setScreenSize(r.deviceType,a),new d.PersoResizeDetector(this.uxCtrl.getPersoneticsWrapper(),function(){s.setScreenSize(r.deviceType,a)}),r&&"perso-mobile"==r.deviceType&&!document.getElementById("perso-font-detector")&&((n=document.createElement("div")).innerHTML="<span id='perso-font-detector'>Personetics</span>",document.body.appendChild(n),c=u.story.ProductSkinControler.prototype.getAccessibilityFontSizes(),this.setFontClass(n,c)),personetics.config.darkMode?this.el.attr("id",o.$persoDarkMode):u.utils.projectConf.verifyConfig("allowExternalTheme",!1)&&this.el.attr("id",o.$persoTheme),e.start(p)},addClassesToMainContainer:function(e,t,s){Object.prototype.hasOwnProperty.call(t,"deviceType")&&(e&&e.removeClass(s.join(" ")).addClass(personetics.config.persoEBMode?"perso-mobile":t.deviceType),"perso-mobile"===t.deviceType&&e.addClass("perso-disable-copy")),Object.prototype.hasOwnProperty.call(t,"deviceSystem")&&t.deviceSystem&&e.addClass("perso-device-system-"+t.deviceSystem),this.config.lang&&e.addClass("perso-lang-"+this.config.lang)},setScreenSize:function(e,s){var t="perso-small perso-medium perso-large perso-xl perso-xxl",o=this.uxCtrl.getPersoneticsWrapper().get(0);if(personetics.config.persoEBMode)h(o).addClass("perso-small");else{var n=Object.keys(s).reduce(function(e,t){return s[e]>s[t]?e:t}),r=this.getElementSize(o).width;if(s)for(var i in s)if(s.hasOwnProperty(i)){if(r<=s[i]){h(o).removeClass(t),h(o).addClass(i);break}if(r>s[n]){h(o).removeClass(t),h(o).addClass(n);break}}}},setFontClass:function(e,t){var s="perso-font-small perso-font-medium perso-font-large",o=this.uxCtrl.getPersoneticsWrapper().get(0),e=(h(o).hasClass("perso-font-small")||h(o).hasClass("perso-font-medium")||h(o).hasClass("perso-font-large")||h(o).addClass("perso-font-small"),h(e).find("#perso-font-detector").css("font-size").replace("px",""));e>t.base_text_size?e>=t.medium_text_size&&e<t.large_text_size?(h(o).removeClass(s),h(o).addClass("perso-font-medium")):e>=t.large_text_size?(h(o).removeClass(s),h(o).addClass("perso-font-large")):(h(o).removeClass(s),h(o).addClass("perso-font-small")):(h(o).removeClass(s),h(o).addClass("perso-font-small"))},getElementSize:function(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};e=e.getBoundingClientRect();return{width:Math.round(e.width),height:Math.round(e.height)}},sendMessage:function(e){var t=e.targetWidget,s=e.message,e=e.arguments,t=this.widgets[t];if(t&&t.hasOwnProperty(s))return t[s].apply(t,e)},startWidget:function(e,t){t.parentCtrl=t.parentCtrl||this,t.widthMode=this.config.widthMode;var s=u.UI.PWidgetFactory.createWidget(e,t);s.start(t.el),s&&(this.widgets[e]=s)},closeLoading:function(){this.sendMessage({targetWidget:"loading-animation",message:"removeLoading"})},startRatings:function(e){var t=h(".pstory-frame"),e=(this.currentRatingsEl=t,new u.UI.PRatingCtrl(e,this));return e.start(t),e},registerTexts:function(){u.dictionary.setLanguage(this.config.lang)}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e){e.UI=e.UI||{},e.UI.PAppCtrlProduct=e.UI.PAppCtrl.extend({setFirstWidgetType:function(e){this.firstWidgetType=e||"teaser-widget"},registerTexts:function(){e.UI.PAppCtrl.prototype.registerTexts.call(this)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(n,c,p){c.UI=c.UI||{},c.UI.PRatingCtrl=c.UI.PWidgetCtrl.extend({initialize:function(e){this.super=c.UI.PWidgetCtrl.prototype,this.super.initialize.call(this,e),this.selectors=this.$selectors(),this.insight=this.config.insight,this.lang=this.config.lang,this.texts={accessibilityRatingLevelTitle:c.dictionary.getText("accessibilityRatingLevelTitle")},this.ratingTemplate="#tmpl-perso-rating",this.feedbackTemplate="#tmpl-perso-feedback"},$selectors:function(){return{$persoRatingsWrapper:".perso-ratings-wrapper",$persoFeedbackWrapper:".perso-feedback-wrapper",$persoFeedbackReaction:".perso-feedback-reaction",$persoRatingText:".perso-ratings-text",$persoFeedbackText:".perso-feedback-text",$persoFeedbackSubmit:".perso-feedback-submit"}},start:function(e){this.el=e;"perso-desktop"==c.utils.persoBrowserDetector.getBrowserData().deviceType&&n.MSInputMethodContext&&document.documentMode&&e.addClass("perso-ie-11");var t=this.getRatingTemplate();p(e).find(".perso-ratings-wrapper").length<=0&&e.append(t),this.fixRatingElToBottom(),this.bindEvents(),this.sendGetRatings()},getRatingTemplate:function(){var e=c.dictionary.getText("lblstoryRating");return this.getTemplateHtml(this.ratingTemplate,{ratingTitle:e})},fixRatingElToBottom:function(){var e=this.el.find(".perso-ratings-wrapper"),t=e.height()+1,t=(e.height(t),e.outerHeight(!0));this.el.hasClass("perso-result-page-frame")&&this.el.find(".pstory-dialog-container").css("minHeight","calc(100% - "+(t-2)+"px)"),this.el.find(".pstory-container").css("minHeight","calc(100% - "+(t-2)+"px)")},sendGetRatings:function(){var e,t=n.testData?n.testData.ratings:null,s=this;t?setTimeout(function(){s.onGetRatigsResponse(t)},500):(e={id:this.insight.id},personetics.getInsightRating(e,c.bind(this,this.onGetRatigsResponse),c.bind(this,this.onGetRatingsError)))},onGetRatigsResponse:function(e){var t=e?e.rating:0,s=this.el.find(".perso-ratings-icons");this.id=e.id,this.starRating(s,t),this.afterRender()},onGetRatingsError:function(){this.onError();var e={id:this.insight.id,rating:0};this.onGetRatigsResponse(e)},starRating:function(e,n){var r=this,i=this.insight.id+"_"+this.el.index()+"_rating_",a=e,l=a.data("rating-max");if(p(e).find(".perso-rating-input").length<=0)return e.each(function(){for(var e=0;e<l;e++){var t=r.createRatingStarElement(e,n,i+e,l);a.append(t)}var s,o=a.children("input");o.bind("click",{id:r.id,me:r},c.bind(r,r.rateClick)),null!=n&&(a.attr("data-val",s=n),p(o[s-1]).attr("checked",!0))})},createRatingStarElement:function(e,t,s){e=this.texts.accessibilityRatingLevelTitle+" "+(e+1);return p("<input type='radio' class='perso-rating-input' tabindex='-1' id='"+s+"' name='rating' aria-label='"+e+"'/><label for='"+s+"'/>")},afterRender:function(){this.setThemeClasses()},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.backgroundDarkColor&&c.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoRatingsWrapper+","+this.selectors.$persoFeedbackReaction+","+this.selectors.$persoFeedbackWrapper+","+this.selectors.$persoFeedbackText),"perso-theme-backgroundDarkColor-background"),personetics.config.theme.headerColor&&c.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoFeedbackText+","+this.selectors.$persoFeedbackSubmit+","+this.selectors.$persoRatingText+","+this.selectors.$persoFeedbackReaction),"perso-theme-headerColor-color"))},rateClick:function(e){this.onRateClick(e),this.feedbackStart(),this.setThemeClasses()},onRateClick:function(e){var t=e.currentTarget,s=p(t).index(".perso-ratings-icons input[type='radio']")+1,o=(p("li:lt("+s+")",p(t).parent("ul")).addClass("perso-hover"),p("li:gt("+p(t).index()+")",p(t).parent("ul")).removeClass("perso-hover"),p(t).closest("[data-val]").attr("data-val",s),this.eventObj={id:e.data.id,rating:s},n.testData?n.testData.ratingsResponse:null);o?setTimeout(function(){e.data.me.onSuccesRate(o)},500):personetics.updateInsightRating(this.eventObj,e.data.me.onSuccesRate,e.data.me.onError)},feedbackStart:function(){var e,t,s,o;1==c.projectConfiguration.getConfig("showFeedback")&&(this.disableFeedBack?0<this.el.find(".perso-feedback-text").length&&""==this.el.find(".perso-feedback-text").val()&&(e=c.dictionary.getText("lblfeedbackprompt"+this.eventObj.rating),(t=this.el.find(".perso-feedback-text")).attr({placeholder:e}),t.focus(),t=c.utils.persoBrowserDetector.getBrowserData(),s=c.dictionary.getText("lblfeedbackdoubleclick"),o=c.dictionary.getText("lblfeedbackpressclick"),"perso-mobile"!=t.deviceType&&(s=o),this.el.find("#txtFeedbackBoxLabel").text(e+s)):this.showFeedback())},onSuccesRate:function(e){c.log("rating succes")},onError:function(){var e="rating error";c.log(e),personetics.notifyReportEvent({type:"errorOccured",value:e},!0)},showFeedback:function(){var e=this.el,t=(c.projectConfiguration.config.enableCollapse=!1,this.el.find(".perso-feedback-wrapper").remove(),this.disableFeedBack=!0,c.dictionary.getText("lblfeedbackprompt"+this.eventObj.rating)),s=c.utils.persoBrowserDetector.getBrowserData(),o=c.dictionary.getText("lblfeedbackdoubleclick"),n=c.dictionary.getText("lblfeedbackpressclick"),s=("perso-mobile"!=s.deviceType&&(o=n),c.dictionary.getText("lblreactionFeedback")),n=c.dictionary.getText("btnsubmit"),o=this.getTemplateHtml(this.feedbackTemplate,{lblAccessibilityfeedbackprompt:t+o,lblfeedbackprompt:t,lblreactionFeedback:s,btnsubmit:n}),t=(this.el.append(o),this.el.find(".perso-feedback-submit")),s=(t.css("margin-left","calc(100% - "+t.outerWidth()+"px)"),t.bind("click",{id:this.insight.id,widget:this},c.bind(this,this.sendFeedback)),t.bind("keyup",{id:this.insight.id,widget:this},c.bind(this,this.handleButtonKeyUp)),t.hide(),this.el.find(".perso-feedback-reaction").hide(),this.el.find(".perso-feedback-wrapper")),n=(this.scrollToEnd(this.el,s),this.feedbackText=this.el.find(".perso-feedback-text"),this.textareaSize=this.el.find(".perso-textarea-size"),c.bind(this,this.feedbackTextFocus)),o=(p(this.feedbackText).bind("focus",n),this.feedbackText.focus(),c.bind(this,this.feedbackTextBlur)),t=(p(this.feedbackText).bind("blur",o),this.textareaSize.text(this.feedbackText.value+"\n"),c.bind(this,this.feedbackTextInput));p(this.feedbackText).bind("input",t),p(this.feedbackText).bind("click",function(){p("#personetics-story-widget").animate({scrollTop:e.height()+e.scrollTop()+e.offset().top},500)})},feedbackTextBlur:function(e){var t=c.dictionary.getText("lblfeedbackprompt"+this.eventObj.rating);0==this.value&&(this.el.find(".perso-feedback-submit").hide(),this.feedbackText.removeClass("perso-direction-text"),this.feedbackText.addClass("perso-direction-text-center"),this.feedbackText.attr("placeholder",t)),setTimeout(function(){c.projectConfiguration.config.enableCollapse=!0},800)},feedbackTextInput:function(e){""==e.target.value?this.el.find(".perso-feedback-submit").attr("disabled","disabled"):this.el.find(".perso-feedback-submit").removeAttr("disabled");this.el.find(".perso-feedback-wrapper"),this.el.find(".perso-feedback-text");this.textareaSize.text(e.target.value+"\n"),c.projectConfiguration.config.enableCollapse=!1,this.el.scrollTop(this.el[0].scrollHeight)},feedbackTextFocus:function(e){var t=!!document.documentMode,s=(this.el.find(".perso-feedback-wrapper"),this.el.find(".perso-feedback-text"),this.el);this.feedbackText.removeClass("perso-direction-text-center"),this.feedbackText.addClass("perso-direction-text"),t&&this.feedbackText.attr("placeholder")==this.feedbackText.val()&&this.feedbackText.val(""),this.el.find(".perso-feedback-submit").show(),c.projectConfiguration.config.enableCollapse=!1,p("#personetics-story-widget").animate({scrollTop:s.height()+s.scrollTop()+s.offset().top},500)},scrollToEnd:function(e,t){0<t.length&&(this.el.find(".perso-feedback-text").focus(),p(e).animate({scrollTop:t.offset().top-e.offset().top+e.scrollTop()},500))},sendFeedback:function(e){var t=this.el.find(".perso-feedback-text").val();void 0!==t&&0<t.length&&(this.eventObj={id:e.data.id,feedback:t},personetics.updateInsightFeedback(this.eventObj,e.data.widget.onSuccesFeedback,e.data.widget.onErrorFeedback)),this.showFeedbackReaction()},handleButtonKeyUp:function(e){37===e.which&&this.el.find(".perso-feedback-text").focus()},onSuccesFeedback:function(e){c.log("feedback succes")},onErrorFeedback:function(){var e="feedback error";c.log(e),personetics.notifyReportEvent({type:"errorOccured",value:e},!0)},showFeedbackReaction:function(){var e=this,t=this.el.find(".perso-feedback-wrapper").height(),t=(this.el.find(".perso-feedback-wrapper").height(t),this.el.find(".perso-feedback-reaction")),t=(t.show(),t.bind("keydown",c.bind(this,this.keyUpEvent)),p(t).focus(),this.el.find(".perso-feedback-wrapper").css("overflow","auto"),this.el.find(".perso-feedback-reaction").outerHeight());this.el.find(".perso-feedback-wrapper").animate({scrollTop:150,height:t},400,function(){e.disableFeedBack=!1,e.el.find(".perso-textarea-wrapper").hide()})},bindEvents:function(){this.el.find(".perso-ratings-wrapper").bind("keyup",c.bind(this,this.keyUpEvent))},keyUpEvent:function(e){var t=this.parentCtrl.config;switch(e.which){case 39:p(e.target).hasClass("perso-rating-input")?p(e.target).next().focus():p(e.target).hasClass("perso-ratings-text")&&p(".perso-ratings-icons .perso-rating-input").first().focus();break;case 37:(p(e.target).hasClass("perso-rating-input")?p(e.target).prev():this.el.find(".pstory-block-frame .pstory-block-content").last()).focus();break;case 32:case 13:p(e.target).hasClass("perso-rating-input")&&this.el.find(".perso-feedback-text").focus();break;case 9:p(e.target).hasClass("perso-feedback-reaction")&&(t&&"inbox-story-widget"===t.widgetType?this.el.closest("#perso-responsive-container").find(".perso-multi-teaser-template .perso-teaser-selected").next().find(".perso-teaser-template-inner"):this.el.find(".pstory-title-wrapper .pstory-title-close")).focus()}}})}(window,window.Personetics=window.Personetics||{},jQuery),function(t,o){t.UI=t.UI||{},t.UI.PLoadingAnimationCtrl=t.UI.PWidgetCtrl.extend({initialize:function(e){this.super=t.UI.PWidgetCtrl.prototype,this.super.initialize.call(this,e),this.loadingText=this.getLoadingTxt(e)},getLoadingTxt:function(e){return e.loadingText},start:function(e){0===e.length&&(e=o("#personetics-story-widget")),this.el=e,this.el.empty();var t=this.loadingText,t=this.getTemplateHtml("#tmpl-perso-loading-animation",{loadingText:t});e.append(t),this.afterRender()},afterRender:function(){this.setHeightToParentSpace()},setHeightToParentSpace:function(){var e=this.el.parent().height(),s=0,t=this.el.siblings(),t=(o.each(t,function(e,t){"static"==o(t).css("position")&&(s+=o(t).height())}),e-s);this.el.find("#perso-loading-widget").height(t)},removeLoading:function(){this.el.children("#perso-loading-widget").remove()}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(n,i,a){i.UI=i.UI||{};var s=38,o=40;i.UI.PStoryWidgetCtrl=i.UI.PWidgetCtrl.extend({initialize:function(e){this.super=i.UI.PWidgetCtrl.prototype,this.super.initialize.call(this,e),this.tmplInnerErrorName="#tmpl-perso-widget-story-error";var s=this,t="inbox-story-widget"!==this.config.widgetType||this.config.showStoryTitle;this.texts={imgClass:"errorImage",textSmall:i.dictionary.getText("inboxTechnicalIssues"),textLarge:i.dictionary.getText("OhNo"),errorText:i.dictionary.getText("storyErrorText"),backButtonText:i.dictionary.getText("accessibilityStoryBackButtonText"),showBackButton:i.utils.projectConf.verifyConfig("showBackButton",!0),showStoryTitle:t},this.showTitle=i.projectConfiguration.getConfig("showTitle"),this.loadingAnimation=(!personetics.config||!personetics.config.enableNativeLoader&&!personetics.config.loaderEvent)&&i.projectConfiguration.getConfig("showLoadingAnimation"),void 0!==e&&i.utils.PEventReporting.setValue({instanceId:e.insightId,insightId:e.instanceId,userId:e.userId}),i.messenger.listen(i.messenger.MSG_SECURITY_ERROR,function(e,t){t&&s.onError(t.message)}),personetics.config.theme&&(this.texts.useExternalBrandColor=!!personetics.config.theme.brandColor||null,this.texts.useExternalBackgroundColor=!!personetics.config.theme.backgroundColor||null)},start:function(e){this.parentEl=e,this.el=this.parentEl,this.lang=this.config.lang,i.processor.PStoryConfig.setConfig("lang",this.lang),this.el.empty();var t=this;personetics.config.persoEBMode||i.utils.accessibility.trackFocus(this.el),this.el.keydown(function(e){e.currentTarget!==e.target||e.keyCode!==o&&e.keyCode!==s||(e=e.keyCode===o?50:-50,t.el.find(".pstory-frame").animate({scrollTop:t.el.find(".pstory-frame").scrollTop()+e},0,"swing"))}),this.el.addClass("perso-widget-direction-"+(1==i.processor.PStoryConfig.isRtl()?"rtl":"ltr")),this.renderTitle(),this.sendGetStory(),this.setThemeClasses()},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&i.utils.persoTheming.addClassToElement(this.el,"perso-theme-brandColor-story-general"),personetics.config.theme.headerColor&&i.utils.persoTheming.addClassToElement(this.el,"perso-theme-headerColor-story-general"),personetics.config.theme.backgroundColor&&(i.utils.persoTheming.addClassToElement(this.el,"perso-theme-backgroundColor-background"),i.utils.persoTheming.addClassToElement(this.el.find(".perso-story-frame-container"),"perso-theme-backgroundColor-background"),i.utils.persoTheming.addClassToElement(this.el.find(".personetics-btn-text"),"perso-theme-backgroundColor-color"))),"inbox-story-widget"===this.config.widgetType&&i.UI.PWidgetFactory.createWidget("inbox-story-widget",this.config).setThemeClasses()},renderTitle:function(){var e,t,s;this.showTitle&&(e=this.getTemplateHtml("#tmpl-pstory-title",this.texts),e=a(e),this.el.append(e),t=e.find(".pstory-title-close"),personetics.config.persoEBMode?t.hide():(s=this,t.bind("click",function(){this.pEventUI&&this.pEventUI.setCallBack(null),s.closeHandler()})),e.find(".pstory-open-teasers-button").bind("click",function(){s.onShowTeasersButtonClick()}))},sendGetStory:function(){var e=this,t="true"===i.utils.url.getParameterByName("isPredefined")&&n.testData&&n.testData.stories?n.testData.stories[this.config.insightId]:null;if(this.loadingAnimation&&this.parentCtrl.startWidget("loading-animation",{el:this.el.find("#story-frame-container")}),t)setTimeout(function(){e.onGetStoryResponse(t)},500);else if("undefined"!=typeof storyData&&(this.config.payload=storyData),void 0!==this.config.payload&&null!=this.config.payload){var s=this.config.payload;if(void 0!==this.config.isPayloadEncoded&&(1==this.config.isPayloadEncoded||"true"==this.config.isPayloadEncoded))try{s=i.utils.encodeDecode.Base64.decode(s),s=a.parseJSON(s)}catch(s){return void this.onError()}e.onGetStoryResponse(s)}else{var o={widgetId:this.widgetId,insightId:this.config.insightId};personetics.getInsightDetails(o,i.bind(this,this.onGetStoryResponse),i.bind(this,this.onError))}},onGetStoryResponse:function(e){this.loadingAnimation&&this.parentCtrl.closeLoading(),this.context="story",this.pEventUI&&this.pEventUI.setPayload(e),this.openStory(e),this.bindEvents(),this.sendPersoneticsEvent()},openStory:function(e){var t;e&&(0==(t=this.parentEl.find("#story-frame-container")).length&&(t=this.parentEl),this.startStory(e,t),0<(e=this.el.find(".pstory-title-text")).length?(personetics.config.persoEBMode||this.setVoiceOverFocus(e[0]),e.bind("keyup",i.bind(this,this.keyUpEvent))):"undefind"==typeof(t=i.utils.accessibility.firstChildFocusable(a(".pstory-frame")))||personetics.config.persoEBMode||this.setVoiceOverFocus(t))},keyUpEvent:function(e){39===e.which&&this.el.find(".pstory-block-frame .pstory-block-content").first().focus()},startStory:function(e,t){e=new i.story.PStory({parent:this,lang:this.lang,defaultLang:this.defaultLang,texts:e.text,flowDef:e.story,params:this.config.params,userId:this.config.userId,expressions:e.expressions,insight:{id:this.config.insightId},data:e.facts,uxCtrl:this.uxCtrl,showTitle:this.showTitle,widthMode:this.widthMode,iconType:this.iconType,resizeHandler:function(e){},onStartHandleEvent:function(e,t){a(t).css("height",a(t).height())},onEndHandleEvent:function(e){a(e).css("height","auto")},openTeasersHandler:i.bind(this,function(){this.onShowTeasersButtonClick()})}),e.start(t),t={el:t.find(".pstory-frame"),insight:e.insight,lang:this.lang};return e.storyHasTriviaDlg()||personetics.config.persoEBMode||this.parentCtrl.startWidget("ratings",t),e.addTouchScroll(),e},onError:function(e){this.loadingAnimation&&this.parentCtrl.closeLoading();var t,s={textSmall:this.texts.textSmall,textLarge:this.texts.textLarge,imgClass:this.texts.imgClass,btnText:i.dictionary.getText("TryAgain")},o="inbox-story-widget"===this.config.widgetType?this.config.containerINSTHeight:"auto",n=this.parentEl.find("#story-frame-container"),o=(0==n.length?n=this.parentEl:n.css("height",o),this.parentEl.find(".pstory-title-wrapper")),o=(o&&(o.removeClass("pstory-fixed"),(t=o.find(".pstory-title-close"))&&t.addClass("perso-pstory-error"),(t=o.find(".pstory-title-text"))&&("inbox-story-widget"===this.config.widgetType?(o=i.dictionary.getText("storyTitle"),t.text(o)):t.remove())),this.getTemplateHtml(this.tmplInnerErrorName,s)),n=(a(n).empty(),n.append(o),s.textLarge+", "+s.textSmall),r=(personetics.notifyReportEvent({type:"errorOccured",value:n},!0),this),o=this.parentEl.find(".personetics-no-story-btn"),s=(o.length&&o.bind("click",function(){r.start(r.el)}),this.bindEvents(),"inbox-story-widget"===this.config.widgetType&&i.utils.accessibility.putFocus(t),this.el.find(".pstory-title-close")),r=this;s.bind("click",function(){"function"==typeof r.closeHandler&&r.closeHandler()}),this.setThemeClasses(),this.sendPersoneticsEvent()},sendPersoneticsEvent:function(){this.config.enableNativeLoader?i.utils.PSendEvent.prototype.sendPersoneticsEvent("personeticsEvent","closeNativeLoader"):this.config.loaderEvent&&i.utils.PSendEvent.prototype.sendPersoneticsEvent("personeticsEvent","closeLoaderEvent")},bindEvents:function(){},closeHandler:function(){this.pEventUI&&this.pEventUI.endResize(),i.API.personetics.eventBuffer&&i.API.personetics.eventBuffer.sendEvents();var e,t,s=personetics.getJSBridge();s&&a.isFunction(s.sessionEnded)?(i.utils.PEventReporting.setValue(e={type:"ExitInsight",value:"1"}),i.utils.PEventReporting.notifyEvent(),t=a.extend(!0,{},this.parentCtrl.config),i.projectConfiguration.getConfig("reporting")&&(e.type="backButtonClicked",i.utils.PEventReporting.notifyReportingEventֿ(e)),delete t.eventType,s.sessionEnded(t)):i.log("Events Delegate not defined")},onShowTeasersButtonClick:function(){var e=this.parentCtrl.getWidgetEl("teaser-widget"),e=a.extend(!0,this.parentCtrl.config,{el:e});this.parentCtrl.startWidget("teaser-widget",e)},setVoiceOverFocus:function(e){var t,s,o=i.utils.persoBrowserDetector.getBrowserData();e&&(o&&"perso-desktop"==o.deviceType&&e.setAttribute("tabindex","0"),t=0,s=n.setInterval(function(){e.focus(),10<=++t&&n.clearInterval(s)},10))}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e,n){function t(e){this.parent=e}t.prototype.registerHelpers=function(){Handlebars.registerHelper("renderBarChart",function(e){this.renderBarChart(e)}.bind(this))},t.prototype.renderBlock=function(e,t,s){var o,e=e.find("#"+s+"_"+t.blockId);0<e.length&&(t&&t.hasOwnProperty("seriesLabels")&&0<t.seriesLabels.length&&t.seriesLabels[0].length,(o=n.teaser.PBlockFactory.createBlock(this.parent,t)).beforeRender(e,t,s),o.render(e,t),o.afterRender(e,t),o.bindEvents())},t.prototype.transactionUtility=function(e){return(new n.utils.TransactionHelper).convertTableToObject(e)},e.HandlebarsTeaserHelpers=t}(window,window.Personetics=window.Personetics||{},jQuery),function(e){function t(e){this.config=e}t.prototype.start=function(e){this.element=e},t.prototype.stop=function(){},e.Widget=t}((window,window.Personetics=window.Personetics||{}),jQuery),function(c,p,r){function e(e){p.Widget.call(this,e),this.helpers=new HandlebarsTeaserHelpers(this),this.PAction=new p.processor.PAction,this.remoteAssetsMgr=p.utils.remoteAssets,this.useRemoteAssets=p.projectConfiguration.getConfig("useRemoteAssets"),this.localBaseUrl=p.projectConfiguration.getConfig("localBaseUrl"),personetics.config.persoEBMode&&(this.localBaseUrl=p.utils.remoteAssets.getEBLocalBaseUrl("teaser")),!(e=personetics.config.deviceType)||"Angular"!==e&&"RJS"!==e||(this.localBaseUrl=p.utils.remoteAssets.getWrapperLocalBaseUrl(e)),this.remoteBaseUrl=p.projectConfiguration.getConfig("remoteBaseUrl"),this.darkAsset=p.projectConfiguration.getConfig("darkModeAsset"),e=personetics.config.darkMode?this.darkAsset:"",this.localBaseUrl=this.localBaseUrl+e,this.remoteBaseUrl=this.remoteBaseUrl+e,this.baseUrl=this.useRemoteAssets?this.remoteBaseUrl:this.localBaseUrl,this.imageTypes=skinSetup.getTeaserAssetsTypes(),this.teaserTemplateConfig=skinSetup.getTeaserTemplateConfig(),this.defaultAssetConfig={defaultAssetName:p.utils.projectConf.verifyConfig("teasersConfigurations/general/defaultAssetName","category-default"),defaultAssetDirectory:p.utils.projectConf.verifyConfig("teasersConfigurations/general/defaultAssetDirectory","category_icons"),defaultAssetExtension:p.utils.projectConf.verifyConfig("teasersConfigurations/general/defaultIconExtension","svg"),loadingAssetMaxTries:2,loadingAssetTriesAttrName:"data-asset-loading-tries",defaultIcon:"welcome"},this.teaserTemplateMapping={dateInput:"transactionFeedback",numberInput:"transactionFeedback"}}var t=p.UI.Handlebars,i=["horizontalBar","horizontalBarAndBox","columnHorizontalBoxTeaser"];(e.prototype=Object.create(p.Widget.prototype)).getTemplateById=function(e){return Object.prototype.hasOwnProperty.call(this.teaserTemplateMapping,e)&&this.teaserTemplateMapping[e]?t.templates[this.teaserTemplateMapping[e]]:t.templates[e]},e.prototype.start=function(e){p.Widget.prototype.start.call(this,e);var t,a,l=this,s=this.config.insight.id,o=(this.actionsMap=this.config.insight.actions,this.lang=this.config.lang,p.processor.PStoryConfig.setConfig("lang",this.lang),this.teaserId="perso-teaser-template_"+s,!1),n=(this.config.insight.hasOwnProperty("teaserTemplate")&&null!==this.config.insight.teaserTemplate&&0!=this.config.insight.teaserTemplate.length||(o=!0),o=(o=this.config.insight.hasOwnProperty("teaserBlocks")&&null!==this.config.insight.teaserBlocks?o:!0)?(t="simpleText",[{blockId:"date",type:"date-box",date:""},{blockId:"title",type:"text",text:""},{blockId:"teaser-text",type:"text",text:this.config.insight.text}]):(t=this.config.insight.teaserTemplate,this.config.insight.teaserBlocks),this.getTemplateById(t));n?(a={insightId:s,status:this.config.insight.status,highlighted:this.config.insight.highlighted},this.teaserTemplateConfig&&this.teaserTemplateConfig[t]&&(a=p.utils.persoHelper.deepObjectExtend(a,this.teaserTemplateConfig[t],!1)),o.forEach(function(e,t){var s,o,n,r,i;e.hasOwnProperty("date")&&(o=e.date.trim(),s=p.utils.date.monthName(o,l.lang,!0),"function"==typeof c.skinSetup.getDateFormat&&"dd/mm/yy"==c.skinSetup.getDateFormat()&&(s=p.utils.date.monthNumber(o),i=p.utils.date.yearNumber(o,!0),e.year=i),e.month=s,i=p.utils.date.dayNumber(o,"DD"),e.day=i);switch("entity-selector"==e.type&&(e.baseUrl=l.baseUrl,n=l.imageTypes[e.blockId]?l.imageTypes[e.blockId].defaultAssetExtension:"",r=l.setAssetDirectory(e),e.extension=e.fileType,e.assetDirectory=r,3<e.options.length?e.displayedOptions=e.options.slice(0,3):e.displayedOptions=e.options,e.hasOwnProperty("fileType")&&"undefined"!=e.fileType||!n.length||(e.extension=n)),"image"==e.type&&(e.baseUrl=l.baseUrl,n=e.fileType||(l.imageTypes[e.blockId]?l.imageTypes[e.blockId].defaultAssetExtension:""),r=l.setAssetDirectory(e),e.extension=e.fileType,e.assetDirectory=r,e.hasOwnProperty("fileType")&&"undefined"!=e.fileType||!n.length||(e.extension=n),e.url&&0==e.url.indexOf("http")&&(e.isAbsoluteURL=!0),"-"===e.url&&(e.url=null)),"icon"==e.blockId&&(e.absUrl=e.url||l.defaultAssetConfig.defaultIcon),isNaN(new Date(e.text))||(e.isDate=!0),"txt"!=e.type&&"text"!=e.type||-1!=(s=e.txt||e.text).indexOf("{{Emoji")&&(o=p.utils.emojisHelper.parseEmoji(s),e.text=o),"buttons"==e.type&&e.options.forEach(function(e){var t;e.text&&-1!=e.text.indexOf("{{Emoji")&&(t=p.utils.emojisHelper.parseEmoji(e.text),e.text=t)}),"tranList"==e.type&&(e.baseUrl=l.baseUrl,n=l.imageTypes[e.blockId]?l.imageTypes[e.blockId].defaultAssetExtension:"",r=l.setAssetDirectory(e),e.extension=n,e.assetDirectory=r,i=l.helpers.transactionUtility(e),e.transactionData=i[0]),e.type,e.type){case"dateInput":a.isDateInput=!0;break;case"numberInput":a.isNumberInput=!0;break;case"tranList":a.isTransactionFeedback=!0}a[e.blockId]=e}),a.hasOwnProperty("teaser-text")&&(s="<div>"+a["teaser-text"].text+"</div>",a["teaser-text"].ariaLabel=r(s).text()),o=n(a),e.append(o),this.afterRender(e,a),this.bindEvents(e)):((s=new Error("HandlebarsTeaserWidget.start() - Couldn't find template: '"+t+"'")).templateId=t,s.templateNotSupported=!0,p.error(s.message,!1,s))},e.prototype.afterRender=function(e,t){for(var s in this.element.find(".pstory-hbox-column-frame").each(function(){var e=r(this).parent().width(),t=r(this).data("width"),t=Math.floor(t/12*e),e=(r(this).css("width",t),r(this).parent().height());r(this).css("height",e)}),t)!t.hasOwnProperty(s)||(s=t[s])&&("bar-chart"==s.type&&0<=i.indexOf(this.config.insight.teaserTemplate)&&(s.direction="horizontal"),this.helpers.renderBlock(e,s,t.insightId));var o=this,n=e.find("#"+o.teaserId).find(".perso-teaser-template-inner");0<n.find(".pstory-button").length&&0<n.find(".pstory-button").attr("action-id").length?(o.optionClickEventBind=p.bind(this,this.optionClickEvent),n.find(".pstory-button").bind("click",{userId:o.config.userId,insightId:o.config.insight.id,instanceId:o.config.insight.insightId,lang:o.lang,actions:o.config.insight.actions,payload:o.config.payload},o.optionClickEventBind)):(o.teaserClickBind="inbox-story-widget"===o.config.widgetType?p.bind(this,this.teaserInboxClick):p.bind(this,this.teaserClick),n.bind("click",{userId:o.config.userId,insightId:o.config.insight.id,instanceId:o.config.insight.insightId,lang:o.lang,payload:o.config.payload},o.teaserClickBind),n.bind("keydown",{userId:o.config.userId,insightId:o.config.insight.id,instanceId:o.config.insight.insightId,lang:o.lang,payload:o.config.payload},function(e){-1!==[13,32].indexOf(e.which)&&o.teaserClickBind(e)}),e.find("#"+o.teaserId).find(".perso-teaser-template-inner").attr("tabindex",0))},e.prototype.teaserClick=function(e){var t=r(e.target).closest(".perso-teaser-template-inner"),s={userId:e.data.userId,insightId:e.data.insightId,instanceId:e.data.instanceId,eventType:"teaserClick",lang:e.data.lang,clickedTeaser:r(e.currentTarget),teaserId:this.teaserId,payload:e.data.payload,value:"1"};!t.hasClass("perso-non-story-teaser")&&"undefined"!=typeof personetics&&null!==personetics&&personetics.hasOwnProperty("sendWidgetEvent")?(personetics.sendWidgetEvent(this,s),p.projectConfiguration.getConfig("reporting")&&(s.type=s.eventType,s.widgetType=this.config.widgetType,s.insightId=e.data.instanceId,s.instanceId=e.data.insightId,p.utils.PEventReporting.notifyReportingEventֿ(s))):p.log("personetics JS API is not available")},e.prototype.teaserInboxClick=function(e){var t=r(e.target).closest(".perso-teaser-template-inner"),e={userId:e.data.userId,insightId:e.data.insightId,instanceId:e.data.instanceId,lang:e.data.lang,clickedTeaser:r(e.currentTarget),teaserId:this.teaserId,payload:e.data.payload,el:this.config.el},e=r.extend(this.config,e),s=p.UI.PWidgetFactory.createWidget("inbox-story-widget",e);t.hasClass("perso-non-story-teaser")?(s.renderStoryMessage(!0),p.utils.accessibility.putFocus(this.config.el.find(".pstory-title-text"))):this.config.parentCtrl.startWidget("story-widget",e),s.updateSelectedTeaser()},e.prototype.notifyEvent=function(e,t,s){p.log("Block: '"+e.layoutInstructions.type+"':'"+e.layoutInstructions.blockId+"' event:'"+event+"' params: "+s)},e.prototype.optionClickEvent=function(e){var t=r(e.target).attr("action-id"),s=r(e.target).attr("pstory-id")||r(e.target).attr("id"),o=e.data&&e.data.insightId,n=e.data&&e.data.actions,n=n&&n.filter(function(e){return e.actionId==t})[0];void 0!==n&&n&&("openStory"===n.actionType?(e=this.setOpenStoryParams(e,"teaserClick",this.teaserId),n.payload&&(s=this.processActionPayload(n,s,o))&&Object.keys(s).length&&(e.teaserVariablesPayload=s),"inbox-story-widget"===this.config.widgetType?(s=r.extend(!0,this.config,e),p.UI.PWidgetFactory.createWidget("inbox-story-widget",s).updateSelectedTeaser(),this.config.parentCtrl.startWidget("story-widget",s)):personetics.sendWidgetEvent(this,e)):(s=this.handleActionData(n),Object.prototype.hasOwnProperty.call(s.data,"navigateTarget")&&"manageBudget"===s.data.navigateTarget&&(s.lang=p.processor.PStoryConfig.getConfig("lang")),personetics.sendWidgetEvent(this,s),e=p.utils.persoInboxReporter.getInboxReporterInsight(o),p.utils.persoInboxReporter.notifyReportEvent(e,"navigateButton",s.data.navigateTarget,!0)))},e.prototype.handleActionData=function(e){var t,s={requestString:"navigateToPage"};return e.hasOwnProperty("payload")?s.data=e.payload:s.data={},e.hasOwnProperty("actionType")&&(s.requestString="callPersoneticsAPI"==e.actionType?"callPersoneticsAPI":s.requestString,s.data.actionType=e.actionType),s.hasOwnProperty("data")&&s.data.hasOwnProperty("payload")&&(t=s.data.payload,delete s.data.payload,s.data.payload=t),e.hasOwnProperty("failureCallback")&&(s.data.failureCallback=e.failureCallback),e.hasOwnProperty("successCallback")&&(s.data.successCallback=e.successCallback),s},e.prototype.processActionPayload=function(e,t,s){var o,n,r,i,a={},l=null;if(0!=Object.keys(e.payload).length)for(var c in e.payload)!e.payload[c]||(o=e.payload[c].split(".")).length&&(n=o.shift(),r=this.getTeaserBlockById(s),(i=Object.keys(r).filter(function(e){return r[e].blockId===n})[0])&&(a[c]=this.deepObjectSearch(r[i],o,t,0,r.length),void 0!==a[c]&&null!==a[c]||(delete a[c],l=new Error("Invalid teaser variable value: '"+c+"'"),p.error(l.message,!1,l))));else l=new Error("Couldn't find teaser variable value: '"+c+"'"),p.error(l.message,!1,l);return a},e.prototype.getTeaserBlockById=function(t){var e=this.config.insights.filter(function(e){return e.id==t})[0];return e&&e.teaserBlocks},e.prototype.setOpenStoryParams=function(e,t,s){return{userId:e.data.userId,insightId:e.data.insightId,instanceId:e.data.instanceId,eventType:t,teaserId:s,lang:e.data.lang,payload:e.data.payload}},e.prototype.deepObjectSearch=function(e,t,s,o,n){var r,i,a,l=this;return 0===t.length||o===n?e===s?e:void 0:(!0===Array.isArray(e)?e.forEach(function(e){a=a||l.deepObjectSearch(e,t,s,o,n)}):e.hasOwnProperty(t[0])&&(i=(r=p.utils.persoHelper.deepObjectExtend([],t,!1)).shift(),a=this.deepObjectSearch(e[i],r,s,o+1,n)),a)},e.prototype.mapTransList=function(e){var s=e.rows[0],e=e.cols,o={};return e.forEach(function(e,t){o[e]=s[t]}),o},e.prototype.notifyEvent=function(e,t){"actionEvent"===e&&this.actionEvent(t)},e.prototype.actionEvent=function(e){e=e.actionId,e=this.handleActionData(e);this.widgetEvent(e)},e.prototype.widgetEvent=function(e){var t=personetics.getJSBridge();t&&r.isFunction(t.widgetEvent)?t.widgetEvent(null,e):p.log("Events Delegate not defined")},e.prototype.bindEvents=function(e){var s=this,e=e.find("img.perso-image, img.perso-icon-box, img.perso-transaction-icon");e.on("load",function(){s.remoteAssetsMgr.finishedLoading(this)}),e.on("error",function(e){var t=r(this).data(s.defaultAssetConfig.loadingAssetTriesAttrName);t&&t>s.defaultAssetConfig.loadingAssetMaxTries?s.fallbackAsset(this):(t=r(this).data("block-id"),t=s.localBaseUrl+"/"+s.imageTypes[t].defaultAssetDirectory+"/"+s.imageTypes[t].defaultAsset+"."+s.imageTypes[t].defaultAssetExtension,s.remoteAssetsMgr.setDefaultAsset(this,t),s.remoteAssetsMgr.setAssetLoadingTriesAttr(this),e.stopImmediatePropagation())})},e.prototype.fallbackAsset=function(e){var t,s=r(e);s.length&&(t=this.localBaseUrl+"/"+this.defaultAssetConfig.defaultAssetDirectory+"/"+this.defaultAssetConfig.defaultAssetName+"."+this.defaultAssetConfig.defaultAssetExtension,this.remoteAssetsMgr.setDefaultAsset(e,t),this.remoteAssetsMgr.removeAssetLoadingTriesAttr(e),s.off("error"))},e.prototype.setAssetDirectory=function(e){var t="";return e.directory?t=e.directory:this.imageTypes[e.blockId]&&(t=this.imageTypes[e.blockId].defaultAssetDirectory),t},c.HandlebarsTeaserWidget=e}(window,window.Personetics=window.Personetics||{},jQuery),function(e,o,s){function t(e){this.parentEl=e.element,this.widget=e,this.renderer=o.bind(e,e.__proto__.renderTeasers),this.afterRenderer=o.bind(e,e.__proto__.afterRender),this.tabs=this.getTabs(),this.createFilteredMap(this.tabs),this.updateCountTabs(this.tabs),e=(0,n.templates["filter-inbox-template"])({tabs:this.tabs}),this.el=this.parentEl.find(".perso-teaser-filter-wrapper"),this.el.append(e),this.afterRender(),void 0===localStorage.teaserTabSelected&&(localStorage.teaserTabSelected="all"),(e=this.el.find("[data-id='"+localStorage.teaserTabSelected+"']")).addClass("perso-selected"),e.attr("aria-selected","true"),this.el.find(".perso-teaser-filter").addClass("perso-selected-"+localStorage.teaserTabSelected),this.tabChangeAnimtaion(e),this.el.find(".perso-teaser-filter-tab.perso-selected").focus()}var n=o.UI.Handlebars;t.prototype.tabChangeAnimtaion=function(e){var t;null!=e&&0!=e.length&&(t=this.el.find(".perso-filter-selected-tab"),e.offset().left,t.parent().offset().left,e.innerWidth())},t.prototype.bindEvents=function(){var t=this;this.el.find(".perso-teaser-filter-tab").bind("click",function(e){t.onSelectTab(s(e.target))}),this.el.find(".perso-teaser-filter-tab").bind("keyup",function(e){switch(e.which){case 13:case 32:-1==e.target.className.indexOf("perso-selected")&&t.onSelectTab(s(e.target))}})},t.prototype.onSelectTab=function(e){var t=e.data("id"),s=this.widget.config;localStorage.teaserTabSelected!==t&&(localStorage.teaserTabSelected=t,this.el.find(".perso-teaser-filter-tab").removeClass("perso-selected"),this.el.find(".perso-teaser-filter").removeClass("perso-selected-all"),this.el.find(".perso-teaser-filter").removeClass("perso-selected-unread"),e.addClass("perso-selected"),this.el.find(".perso-teaser-filter").addClass("perso-selected-"+t),this.tabChangeAnimtaion(e),"inbox-story-widget"===s.widgetType?(e=o.UI.PWidgetFactory.createWidget("inbox-story-widget",s),s=this.parentEl.closest(".perso-inbox-story-widget"),e.start(s)):(this.filteredInsights=this.getFilteredInsights(t),this.parentEl.find(".perso-multi-teaser-template").empty(),o.utils.persoInboxReporter.initialized&&o.utils.persoInboxReporter.updateInboxFilterTab(t),"function"==typeof this.renderer&&this.renderer(this.filteredInsights),"function"==typeof this.afterRenderer&&this.afterRenderer(this.parentEl,this.filteredInsights,t),this.widget.config.hasOwnProperty("callbackOnSuccess")&&void 0!==this.widget.config.callbackOnSuccess&&this.widget.config.callbackOnSuccess(this.widget.config)))},t.prototype.createFilteredMap=function(e){var t=this,s={};e.forEach(function(e){s[e.id]=t.filterInsights(e.id)}),this.filteredMap=s},t.prototype.getFilteredInsights=function(e){var t=[];return t=this.filteredMap.hasOwnProperty(e)?this.filteredMap[e]:t},t.prototype.updateCountTabs=function(e){var t=this;e.forEach(function(e){e.count=t.getFilteredInsights(e.id).length})},t.prototype.getTabs=function(){var e=o.dictionary.getText("ttlinboxAllInsights"),t=o.dictionary.getText("lblInsight"),s=o.dictionary.getText("ttlinboxUnreadInsights");return[{text:e,accText:e+", "+this.widget.insights.length+" "+t,id:"all"},{text:s,accText:s+", "+this.widget.numberOfUnreadInsights+" "+t,id:"unread"}]},t.prototype.filterInsights=function(e){var t,s=this.widget.insights;if(null==s)return[];switch(e){case"all":t=s;break;case"flagged":t=s.filter(function(e){return e.highlighted});break;case"unread":case"new":t=s.filter(function(e){return"unread"==e.status||"new"==e.status});break;default:t=s}return t},t.prototype.afterRender=function(){this.bindEvents()},t.prototype.onGetInsights=function(e){this.insights=e},e.filterInbox=t}(window,window.Personetics=window.Personetics||{},jQuery),function(o,r,n){function e(e){r.Widget.call(this,e)}var i=r.UI.Handlebars;(e.prototype=Object.create(r.Widget.prototype)).start=function(e){r.Widget.prototype.start.call(this,e),(this.parentEl=e).empty(),this.loadingAnimation=(!personetics.config||!personetics.config.enableNativeLoader&&!personetics.config.loaderEvent)&&r.projectConfiguration.getConfig("showLoadingAnimation"),this.inboxReporter=this.inboxReporter||r.utils.projectConf.verifyConfig("notifyEventFeedPresented",!0)&&personetics&&personetics.config&&!personetics.config.persoEBMode&&!personetics.config.persoISMode,this.teaserView=this.teaserView||this.config.teaserView||"feed",this.render(),this.config.hasOwnProperty("payload")&&void 0!==this.config.payload&&null!==this.config.payload?this.handlePayload():this.sendGetInsights()},e.prototype.render=function(){var e=i.templates["inbox-template"],t=r.dictionary.getText("ttlinbox"),s=r.dictionary.getText("closeInboxBtnlbl"),o=this.config.filter,e=e({filter:o="inbox-story-widget"===this.config.widgetType?!1:o,inboxTitle:t,closeInboxBtnlbl:s});this.parentEl.append(e),this.el=this.parentEl.find(".perso-multi-teaser-wrapper").last()},e.prototype.handlePayload=function(){var e;!this.config.hasOwnProperty("isPayloadEncoded")||void 0===this.config.isPayloadEncoded||1!=this.config.isPayloadEncoded&&"true"!=this.config.isPayloadEncoded?(this.insights=this.config.payload.insights,this.payloadStatus=this.config.payload.status):(e=JSON.parse(r.utils.encodeDecode.Base64.decode(this.config.payload)),this.insights=e.insights,this.payloadStatus=e.status),this.insights||this.payloadStatus&&"200"===this.payloadStatus?this.onGetInsightsResponse({insights:this.insights}):this.onError()},e.prototype.sendGetInsights=function(){var e;"undefined"!=typeof personetics&&null!==personetics&&personetics.hasOwnProperty("getInboxInsights")&&(e=this.config.bankInfo,this.setThemeClasses(),this.loadingAnimation&&this.showLoading(),personetics.getInboxInsights(e,r.bind(this,this.onGetInsightsResponse),r.bind(this,this.onError)))},e.prototype.bindEvents=function(){var e=this.parentEl.find(".pstory-title-close"),t=this;e.bind("click",function(){t.closeHandler()}),this.inboxReporter&&"carousel"!==this.teaserView&&this.element.children(".perso-multi-teaser-wrapper").bind("scroll",function(){r.utils.persoInboxReporter.onScrollInboxReporter(this)})},e.prototype.onGetInsightsResponse=function(e){this.insights=e.insights||e,this.numberOfUnreadInsights=e.numberOfUnreadInsights||0,this.hideLoading();var t,e=r.utils.persoValidator.isXssScriptDetected(JSON.stringify(e)),s=r.UI.PWidgetFactory.createWidget("inbox-story-widget",this.config);this.insights&&!e?(e=this.insights,0<this.insights.length?(1==this.config.filter?(this.filter=new o.filterInbox(this),t=localStorage.teaserTabSelected,e=this.filter.getFilteredInsights(t),this.inboxReporter&&!r.utils.persoInboxReporter.isInboxReporterInitialized()&&r.utils.persoInboxReporter.init(this.filter.filteredMap.all,this.teaserView,this.filter.filteredMap.unread,t)):this.inboxReporter&&!r.utils.persoInboxReporter.isInboxReporterInitialized()&&r.utils.persoInboxReporter.init(e),this.renderTeasers(e),this.afterRender(this.parentEl,e)):(this.onEmptyInsights(null,r.dictionary.getText("teasersWidgetNoInsightsText")),this.setThemeClasses()),"inbox-story-widget"===this.config.widgetType&&(this.parentEl.find(".perso-teaser-title .pstory-title-text").show(),s.startStory()),this.bindEvents()):this.onError(null,r.dictionary.getText("teasersWidgetErrorText")),this.sendPersoneticsEvent()},e.prototype.onEmptyInsights=function(){var e=this.el,t=(this.loadingAnimation&&this.config.parentCtrl.closeLoading(),this.updateHeight(),(e="inbox-story-widget"===this.config.widgetType?this.el.find(".perso-multi-teaser-template"):e).empty(),{textLarge:r.dictionary.getText("noInsigthsTextSecondMsg"),textSmall:r.dictionary.getText("noInsigthsTextFirstMsg"),imgClass:"noInsights"}),s=(n("#personetics-teaser-widget").addClass("personetics-teaser-widget-error"),r.utils.messages.noInsightsMessage(t));e.append(s),this.sendPersoneticsEvent(),personetics.notifyReportEvent({type:"errorOccured",value:t.textLarge+", "+t.textSmall},!0),this.sendPersoneticsEvent()},e.prototype.onError=function(e,t){var s=this,o=(this.loadingAnimation&&this.config.parentCtrl.closeLoading(),this.updateHeight(),this.el.empty(),{textLarge:r.dictionary.getText("OhNo"),textSmall:r.dictionary.getText("inboxTechnicalIssues"),imgClass:"errorImage",btnText:r.dictionary.getText("TryAgain")}),o=(n("#personetics-teaser-widget").addClass("personetics-teaser-widget-error"),r.utils.messages.errorMessage(o)),o=(this.el.append(o),personetics.notifyReportEvent({type:"errorOccured",value:t},!0),this.parentEl.find(".personetics-no-insights-btn"));o.length&&o.bind("click",function(){s.start(s.parentEl)}),this.setThemeClasses(),this.sendPersoneticsEvent()},e.prototype.sendPersoneticsEvent=function(e){this.config.enableNativeLoader?r.utils.PSendEvent.prototype.sendPersoneticsEvent("personeticsEvent","closeNativeLoader"):this.config.loaderEvent&&r.utils.PSendEvent.prototype.sendPersoneticsEvent("personeticsEvent","closeLoaderEvent")},e.prototype.setThemeClasses=function(){this.el.length&&personetics.config.theme&&(personetics.config.theme.brandColor&&r.utils.persoTheming.addClassToElement(this.el,"perso-theme-brandColor-teasers-general"),personetics.config.theme.headerColor&&r.utils.persoTheming.addClassToElement(this.el,"perso-theme-headerColor-teasers-general"),personetics.config.theme.greyLightColor&&r.utils.persoTheming.addClassToElement(this.el,"perso-theme-greyLightColor-teasers-general"),personetics.config.theme.backgroundColor&&(r.utils.persoTheming.addClassToElement(this.el.find(".perso-teaser-template-inner"),"perso-theme-backgroundColor-background"),r.utils.persoTheming.addClassToElement(this.el,"perso-theme-backgroundColor-teasers-general-text-color")),personetics.config.theme.backgroundDarkColor&&(r.utils.persoTheming.addClassToElement(this.parentEl,"perso-theme-backgroundDarkColor-background"),r.utils.persoTheming.addClassToElement(this.parentEl.find(".perso-multi-teaser-wrapper"),"perso-theme-backgroundDarkColor-background")))},e.prototype.renderTeasers=function(e){var s=this.config,o=this.el.find(".perso-multi-teaser-template"),n=(s.insights=e,null);s.hasOwnProperty("insightIdToDisplay")&&(n=s.insightIdToDisplay),null!=e&&(null!==n?e.forEach(function(e,t){e.id==n&&(s.insight=e,r.UI.PWidgetFactory.createWidget("teaser-widget-single",s).start(o))}):e.forEach(function(e,t){s.insight=e,r.UI.PWidgetFactory.createWidget("teaser-widget-single",s).start(o)}))},e.prototype.afterRender=function(e,t,s){this.updateHeight(),this.inboxReporter&&"carousel"!==this.teaserView&&r.utils.persoInboxReporter.initializeInboxReporter(this.element),void 0!==t&&0==t.length&&("all"===s?this.sendGetInsights():"inbox-story-widget"===this.config.widgetType?this.onEmptyInsights():(t={text:r.dictionary.getText("nothingToShowHere")},s=r.utils.messages.noFilteredInsightsMessage(t),this.el.find(".perso-multi-teaser-template").append(s))),this.setThemeClasses()},e.prototype.updateHeight=function(){var s=0,e=this.el.siblings(),t=this.parentEl.height();n.each(e,function(e,t){n(t).is(":visible")&&(s+=n(t).outerHeight(!0))}),"inbox-story-widget"===this.config.widgetType&&(t=this.config.containerINSTHeight),this.el.height(t-s)},e.prototype.showLoading=function(){var e=n('<div class="perso-loading-container"></div>');("teaser-widget-carousel"==this.config.widgetType?this.el:this.parentEl).append(e),this.config.parentCtrl.startWidget("loading-animation",{el:this.el.parent().find(".perso-loading-container")})},e.prototype.hideLoading=function(){this.parentEl.find(".perso-loading-container").remove()},e.prototype.closeHandler=function(){var e,t,s;"undefined"!=typeof personetics&&null!==personetics&&((e=personetics.getJSBridge())&&n.isFunction(e.sessionEnded)?(t={type:"ExitInbox",value:"1"},this.config.ExistInbox=!0,r.utils.PEventReporting.setValue(t),s=n.extend(!0,{},this.config),r.projectConfiguration.getConfig("reporting")&&(t.type="closeButtonClicked",r.utils.PEventReporting.notifyReportingEventֿ(t)),delete s.eventType,e.sessionEnded(s)):r.log("Events Delegate not defined"))},o.HandlebarsMultiTeaserWidget=e}(window,window.Personetics=window.Personetics||{},jQuery),function(t,o,n){function e(e){t.HandlebarsMultiTeaserWidget.call(this,e),this.initialize()}var r=o.UI.Handlebars,s=((e.prototype=Object.create(t.HandlebarsMultiTeaserWidget.prototype)).initialize=function(){o.processor.PStoryConfig.setConfig("lang",this.config.lang),this.direction=o.processor.PStoryConfig.isRtl()?"rtl":"ltr",this.browserDevice=o.utils.persoBrowserDetector.getBrowserData().deviceType,this.teaserConfig="perso-desktop"==this.browserDevice?this.getTeasersConfigDesktop():this.getTeaserConfig(),this.teaserView="carousel",this.inboxReporter=o.utils.projectConf.verifyConfig("notifyEventCarouselPresented",!0)&&personetics&&personetics.config&&!personetics.config.persoEBMode&&!personetics.config.persoISMode,this.updateTeaserConfigsFromProject()},e.prototype.setThemeClasses=function(){this.el.length&&personetics.config.theme&&(personetics.config.theme.brandColor&&o.utils.persoTheming.addClassToElement(this.el,"perso-theme-brandColor-teasers-general"),personetics.config.theme.headerColor&&o.utils.persoTheming.addClassToElement(this.el,"perso-theme-headerColor-teasers-general"),personetics.config.theme.greyLightColor&&o.utils.persoTheming.addClassToElement(this.el,"perso-theme-greyLightColor-teasers-general"),personetics.config.theme.backgroundColor&&(o.utils.persoTheming.addClassToElement(this.el.find(".perso-teaser-template-inner"),"perso-theme-backgroundColor-background"),o.utils.persoTheming.addClassToElement(this.el,"perso-theme-backgroundColor-teasers-general")),personetics.config.theme.backgroundDarkColor&&o.utils.persoTheming.addClassToElement(this.parentEl,"perso-theme-backgroundDarkColor-background"))},e.prototype.getTeasersConfigDesktop=function(){return{showArrows:!0,hidePrevNextArrow:!0,minItemsForDisplayingArrows:2,infiniteCarousel:!1,paginationType:"circle",paginationMidSign:"/",numItemsDispaly:1,showIndexDots:!0,nextArrowDir:"rtl",isRtl:"rtl"===this.direction}},e.prototype.getTeaserConfig=function(){return{showArrows:!1,hidePrevNextArrow:!0,minItemsForDisplayingArrows:2,paginationType:"circle",paginationMidSign:"/",infiniteCarousel:!1,numItemsDispaly:2,showIndexDots:!0,nextArrowDir:"rtl",isRtl:"rtl"===this.direction}},e.prototype.updateTeaserConfigsFromProject=function(){"number"==typeof o.projectConfiguration.getConfig("height")&&(this.teaserConfig.height=o.projectConfiguration.getConfig("height")),"string"==typeof o.projectConfiguration.getConfig("paginationType")&&(this.teaserConfig.paginationType=o.projectConfiguration.getConfig("paginationType"))},e.prototype.render=function(){var e=(0,r.templates["tmpl-perso-teaser-carousel"])({prev:o.dictionary.getText("accessibilityPrevTeaser"),next:o.dictionary.getText("accessibilityNextTeaser"),directionClass:this.direction});this.parentEl.append(e),this.el=this.parentEl.find(".perso-multi-teaser-wrapper").last()},e.prototype.sendGetInsights=function(){var e;"undefined"!=typeof personetics&&null!==personetics&&personetics.hasOwnProperty("getInsights")&&(e=this.config.bankInfo,this.loadingAnimation&&this.showLoading(),personetics.getInsights(e,o.bind(this,this.onGetInsightsResponse),o.bind(this,this.onError)))},e.prototype.afterRender=function(e){s(e),this.updateHeight(),this.bindCarousel(e),this.setThemeClasses()},e.prototype.updateHeight=function(){var e=this.teaserConfig;e&&e.height&&(e=e.height,this.el.height(e))},e.prototype.setSelectedAccButtonLabel=function(){var e=(el=this.parentEl).find('.perso-carousel-item.perso-selected:not([clone="true"])').find(".perso-teaser-template-inner,.perso-feedback-teaser").attr("aria-label");el.find(".pstory-acc-carousel-selected").attr("aria-label",e)},function(e){e.find(".perso-teaser-template, .perso-feedback-teaser").each(function(){n(this).addClass("perso-carousel-item");var e=n(this).attr("id");n(this).attr("pstory-id",e)})}),i=(e.prototype.bindCarousel=function(e){var t,s;this.insights&&1<this.insights.length?((s=i(e)).afterCarouselEnd=o.bind(this,this.setSelectedAccButtonLabel),s.inboxReporter=this.inboxReporter,this.config.widthMode,s=n.extend(s,this.teaserConfig),this.carouselAnimation=new o.utils.carouselAnimation.bindMultiCarouselEventsForAnimation(e,s),s=e.find('.perso-carousel-item.perso-selected:not([clone="true"])').find(".perso-teaser-template-inner"),t=e.find(".pstory-acc-carousel-selected"),s=s.attr("aria-label"),t.attr("aria-label",s),t.bind("click",function(){e.find('.perso-carousel-item.perso-selected:not([clone="true"])').find(".perso-teaser-template-inner").click()})):e.find(".perso-teaser-template2").addClass("perso-single-carousel-item")},function(e){e=e.find(".perso-multi-teaser-template");return{itemWidth:e.find(".perso-carousel-item:not(.perso-selected)").outerWidth(!0),selectedItemWidth:e.find(".perso-carousel-item.perso-selected").outerWidth(!0)}});e.prototype.renderTeasers=function(e){t.HandlebarsMultiTeaserWidget.prototype.renderTeasers.call(this,e),(Object.prototype.hasOwnProperty.call(this.config,"teaserId")?this.el.find("#"+this.config.teaserId):this.el.find(".perso-teaser-template").first()).addClass("perso-selected"),this.renderDots(e)},e.prototype.renderDots=function(e){var t=this.el.find(".perso-carousel-index-container"),s=r.templates["tmpl-perso-teaser-carousel-navigation"],o="numbers"===this.teaserConfig.paginationType,s=s({insights:e,teaserConfig:this.teaserConfig,paginationNumbers:o});t.addClass("perso-"+this.teaserConfig.paginationType),t.append(s)},t.HandlebarsMultiTeaserWidgetCarousel=e}(window,window.Personetics=window.Personetics||{},jQuery),function(e,s,o){function t(e){s.Widget.call(this,e)}t.prototype.initialize=function(){var e=this.inboxStoryConfig();this.selectors=this.$selectors(),this.texts=this.getStaticTexts(),this.config.teaserView=this.selectors.$teaserView,this.config=$.extend(!0,this.config,e),s.processor.PStoryConfig.setConfig("lang",this.config.lang)},t.prototype.inboxStoryConfig=function(){return{containerINSTHeight:s.utils.projectConf.verifyConfig("inboxAndStory/containerINSTHeight",496),inboxWidth:s.utils.projectConf.verifyConfig("inboxAndStory/inboxWidth",325),storyWidth:s.utils.projectConf.verifyConfig("inboxAndStory/storyWidth",465),autoTeaserSelect:s.utils.projectConf.verifyConfig("inboxAndStory/autoTeaserSelect",!0),showStoryTitle:s.utils.projectConf.verifyConfig("inboxAndStory/showStoryTitle",!1)}},t.prototype.getStaticTexts=function(e,t){return{storyTeaserText:s.dictionary.getText(e),img:t,inboxTitle:s.dictionary.getText("inboxTitle"),storyTitle:s.dictionary.getText("storyTitle")}},t.prototype.$selectors=function(){return{$personeticsInboxStoryWidgetElm:"#personetics-inbox-story-widget",$personeticsInboxStoryContainerElm:".perso-inbox-story-container",$persoResponsiveContainer:"#perso-responsive-container",$personeticsTeaserWidgetElm:"#personetics-teaser-widget",$personeticsStoryWidgetElm:"#personetics-story-widget",$persoTeaserFilterWrapperElm:".perso-teaser-filter-wrapper",$persoMultiTeaserWrapper:".perso-multi-teaser-wrapper",$persoFirstTeaserTemplateElm:".perso-teaser-template:first-child .perso-teaser-template-inner",$persoTeaserTemplateElm:".perso-teaser-template",$persoTeaserTitle:".perso-side-by-side-teaser-title",$persoStoryTitle:".perso-side-by-side-story-title",$persoTitleOuterWrapper:".perso-title-outer-wrapper",$persoStoryFrameContainer:".perso-story-frame-container",$pstoryFrame:".pstory-frame",$pstoryTitle:".pstory-title",$inboxContainerTmpl:"inboxContainer",$tmplPstoryTitle:"tmpl-pstory-title",$tmplStoryMessage:"tmpl-story-message",$teaserWidget:"teaser-widget",$storyWidget:"story-widget",$persoSideBySide:"perso-side-by-side",$persoShowTitle:"perso-show-outer-title",$persoNonStoryTeaser:"perso-non-story-teaser",$teaserView:"side-by-side",$persoWidgetDirection:"perso-widget-direction-",$persoTeaserSelected:"perso-teaser-selected",$persoTeaserTemplate_:"#perso-teaser-template_",$persoRead:"perso-read",$persoUnread:"perso-unread",$persoNew:"perso-new"}},t.prototype.start=function(e){this.initialize();var t=(0,o.templates[this.config.templateId||this.selectors.$inboxContainerTmpl])(this.texts);e.empty(),e.append(t),this.updateContainerHeightAndWidth(e),this.addMainClasses(e),this.config.el=e.find(this.selectors.$personeticsTeaserWidgetElm),this.config.el.empty(),this.config.parentCtrl.startWidget(this.selectors.$teaserWidget,this.config)},t.prototype.startStory=function(){var e=this.$selectors(),t=this.config.insights,s=this.config.el.closest(e.$persoResponsiveContainer),o=this.config.autoTeaserSelect||"undefiend"!=typeof this.config.insightId&&null!==this.config.insightId,n=o&&s.find(e.$persoFirstTeaserTemplateElm).hasClass(e.$persoNonStoryTeaser);this.config.el=s.find(e.$personeticsStoryWidgetElm),s.find(e.$persoTitleOuterWrapper).addClass(e.$persoShowTitle),this.config.el.show(),this.updateHeightAndWidth(),t&&t[0]&&(this.config.insightId=this.config.insightId||t[0].id,this.config.instanceId=this.config.instanceId||t[0].instanceId,o&&!n?this.config.parentCtrl.startWidget(e.$storyWidget,this.config):(this.renderStoryMessage(n),this.setThemeClasses()),o&&this.updateSelectedTeaser())},t.prototype.updateSelectedTeaser=function(){var e=this.$selectors(),t=this.config.el.closest(e.$persoResponsiveContainer),s=(t.find(e.$persoTeaserTemplateElm).removeClass(e.$persoTeaserSelected),t.find(e.$persoTeaserTemplate_+this.config.insightId));this.scrollToSelectedTeaser(t,s),s.addClass(e.$persoTeaserSelected),s.removeClass(e.$persoNew+" , "+e.$persoUnread),s.addClass(e.$persoRead)},t.prototype.scrollToSelectedTeaser=function(e,t){var s=this.$selectors(),o=e.find(s.$persoMultiTeaserWrapper),n=o.scrollTop()+o.height(),e=e.find(s.$persoTeaserFilterWrapperElm).height()||0,s=parseInt(t.css("margin-top"))||0,e=t.offset().top-(o.offset().top+e);n<e+t.height()&&o.animate({scrollTop:e-s},500)},t.prototype.renderStoryMessage=function(e){var t=this.$selectors(),s=this.config.insights&&0<this.config.insights.length,e=this.getStaticTexts(e?"nonStoryTeaserText":"notSelectedTeaserText",e?"nonStoryTeaser":"notSelectedTeaser");e.insightsNotEmpty=s,this.config.el.empty(),this.renderTmpl(t.$tmplStoryMessage,e)},t.prototype.renderTmpl=function(e,t){e=(0,o.templates[e])(t);this.config.el.append(e)},t.prototype.updateContainerHeightAndWidth=function(e){var t=this.$selectors(),s=e.find(t.$personeticsInboxStoryContainerElm),t=e.find(t.$persoTitleOuterWrapper),o=this.config.inboxWidth+this.config.storyWidth;t.length&&(this.config.containerINSTHeight=this.config.containerINSTHeight-t.height()),s.height(this.config.containerINSTHeight),e.width(o)},t.prototype.updateHeightAndWidth=function(){var e=this.$selectors(),t=this.config.el.closest(e.$personeticsInboxStoryWidgetElm),s=t.find(e.$personeticsStoryWidgetElm+","+e.$persoStoryTitle),t=t.find(e.$personeticsTeaserWidgetElm+","+e.$persoTeaserTitle);s.width(this.config.storyWidth),t.width(this.config.inboxWidth)},t.prototype.setThemeClasses=function(){var e=this.$selectors(),t=this.config.el.closest(e.$personeticsInboxStoryWidgetElm),e=t.find(e.$personeticsStoryWidgetElm);personetics.config.theme&&(personetics.config.theme.brandColor&&(s.utils.persoTheming.addClassToElement(t,"perso-theme-brandColor-teaser-title-close-color"),s.utils.persoTheming.addClassToElement(t,"perso-theme-brandColor-title-text-color")),personetics.config.theme.headerColor&&s.utils.persoTheming.addClassToElement(e,"perso-theme-headerColor-message-text-color"),personetics.config.theme.backgroundColor&&s.utils.persoTheming.addClassToElement(t,"perso-theme-backgroundColor-story-widget-background"),personetics.config.theme.backgroundDarkColor&&(s.utils.persoTheming.addClassToElement(t,"perso-theme-backgroundDarkColor-teaser-filter-wrapper-background"),s.utils.persoTheming.addClassToElement(t,"perso-theme-backgroundDarkColor-title-wrapper-background")))},t.prototype.addMainClasses=function(e){var t=this.$selectors();e.closest(t.$persoResponsiveContainer).addClass(t.$persoSideBySide),e.addClass(t.$persoWidgetDirection+(1==s.processor.PStoryConfig.isRtl()?"rtl":"ltr"))},e.HandlebarsInboxAndStoryWidget=t}(window,window.Personetics=window.Personetics||{},Personetics.UI.Handlebars),function(e,d,u){function t(e){d.Widget.call(this,e)}var s=d.UI.Handlebars;(t.prototype=Object.create(d.Widget.prototype)).$selectors=function(){return{$budgetAmount:".perso-budget-amount",$categoryData:".perso-category-data",$budgetAmountValidation:".peso-budget-amount-validation",$categoryWrapper:".perso-category-wrapper",$budgetAmountClick:".perso-budget-amount-click",$stopBudgetButton:".perso-stop-budget-button",$stopModal:"#perso-stop-modal",$disclaimerModal:"#perso-disclaimer-modal",$stopTextCategory:".perso-stop-text-category",$stopButtonYes:".perso-stop-button-yes",$persoModal:".perso-modal",$persoCloseModal:".perso-close-modal",$disclaimerButton:".perso-disclaimer-button-text, .perso-disclaimer-button-icon",$persoDisclaimerButtonIcon:".perso-disclaimer-button-icon",$errorButton:".personetics-no-story-btn",$persoPlaceholder:".perso-placeholder",$persoPlaceholderAmount:".perso-placeholder-amount",$manageBudgetsWrapper:".perso-manage-budgets-wrapper",$persoLoadingContainer:".perso-loading-container",$LoadingContainer:"perso-loading-container",$personeticsManageBudgets:"#personetics-manage-budgets",$confirm:".perso-submit-button-confirm",$cancel:".perso-submit-button-cancel",$submitWrapper:".perso-submit-buttons-wrapper",$addBudget:".perso-add-budget-button",$addBudgetWrapper:".perso-add-budget",$disable:"perso-disable",$personeticsManageBudgetsError:"personetics-manage-budgets-error",$dataValue:"data-value",$categoryId:"category-id",$persoImageCategory:"img.perso-image-category",$subscribed:"subscribed",$available:"available",$recommended:"recommended",$increase:"increase",$decrease:"decrease",$major:"major",$persoRecommendedCategories:".perso-recommended-categories",$persoRecommendedCategoriesWrappers:".perso-recommended-categories .perso-category-wrapper",$persoSubscribedCategories:".perso-subscribed-categories",$persoSubscribedCategoriesTitle:".perso-subscribed-categories-title",$persoCategoryName:".perso-category-name",$persoCategoryAvg:".perso-category-avg",$persoCategoryRecommendInformationText:".perso-category-recommend-information-text",$persoCategorySubscribedInformationText:".perso-category-subscribed-information-text",$persoAvailableCategoriesTitle:".perso-available-categories-title",$persoCategoryWrapper:".perso-category-wrapper",$persoDisclaimerButtonText:".perso-disclaimer-button-text",$persoImageCategoryWrapper:".perso-image-category-wrapper",$persoModalElementContent:".perso-modal-element-content",$persoDisclaimerFinishButton:".perso-disclaimer-finish-button",$persoStopButton:".perso-stop-button",$persoDisclaimerTitle:".perso-disclaimer-title",$persoStopTitle:".perso-stop-title",$persoDisclaimerTitleText:".perso-disclaimer-title-text",$persoStopTitleText:".perso-stop-title-text",$persoStopTextWrapper:".perso-stop-text-wrapper",$persoRecommendedCategoriesTitle:".perso-recommended-categories-title",$persoDesktop:"perso-desktop",$persoXBtn:".perso-disclaimer-close,.perso-stop-close",$persoSelected:".perso-selected",$pstoryTitleClose:".pstory-title-close"}},t.prototype.handleAccessibilityelementFocus=function(e){e&&e.length&&d.utils.accessibility.putFocus(e.get(0))},t.prototype.keyUpEvent=function(e){var t=u(e.currentTarget);13===e.which&&t.click()},t.prototype.setBudgetModalAccessibility=function(e){var t,s,o,n,r,i;e&&e.length&&(s=(t=this).getCategoriesText(),o=this.selectors,this.handleAccessibilityelementFocus(e.find(o.$persoDisclaimerButtonIcon)),(r=e.find(o.$persoXBtn))&&r.length&&r.attr("aria-label",s.budgetModalClose),(r=e.find(o.$disclaimerModal))&&r.length&&(i=r.find(o.$persoDisclaimerTitleText))&&i.length&&i.attr("aria-label",i.text()+","+s.budgetModalHeader1),(r=e.find(o.$stopModal))&&r.length&&(i=r.find(o.$persoStopTitleText))&&i.length&&i.attr("aria-label",i.text()+","+s.budgetModalHeader1),(r=e.find(o.$persoSubscribedCategoriesTitle)).length&&r.attr("aria-label",r.text()+","+s.budgetModalHeader2),(r=e.find(o.$persoRecommendedCategoriesTitle)).length&&r.attr("aria-label",r.text()+","+s.budgetModalHeader2),(r=e.find(o.$categoryWrapper)).each(function(e,t){n=d.utils.accessibility.getElementChildNodesText(t),d.utils.accessibility.addAltTextToElement(t,n)}),(r=e.find(o.$stopBudgetButton))&&r.length&&r.attr("aria-label",s.stopCategoryBudget),(r=e.find(o.$budgetAmount))&&r.length&&r.each(function(){this.setAttribute("aria-label",t.utils.formatAmount(this.getAttribute("data-value"),t.configOptions.currency,t.configOptions.amountFormat))}))},t.prototype.start=function(e){d.Widget.prototype.start.call(this,e),(this.parentEl=e).empty(),this.beforeRender(),Object.prototype.hasOwnProperty.call(this.config,"payload")&&void 0!==this.config.payload&&null!==this.config.payload?this.handlePayload():this.sendGetBudgetsCategories()},t.prototype.beforeRender=function(){this.addPartialTemplate(),d.processor.PStoryConfig.setConfig("lang",this.config.lang),this.parentEl.addClass("perso-widget-direction-"+(1==d.processor.PStoryConfig.isRtl()?"rtl":"ltr")),this.selectors=this.$selectors(),this.isDesktop=d.utils.persoBrowserDetector.getBrowserData().deviceType===this.selectors.$persoDesktop,this.configOptions=this.getConfigOptions(),this.loadingAnimation=(!personetics.config||!personetics.config.enableNativeLoader&&!personetics.config.loaderEvent)&&d.projectConfiguration.getConfig("showLoadingAnimation"),this.utils=d.processor.PUtils.getUtilsInstance("utils"),this.remoteAssetsMgr=d.utils.remoteAssets,Object.prototype.hasOwnProperty.call(this.config,"params")&&null!=this.config.params&&this.prepareBudgetParams()},t.prototype.sendGetBudgetsCategories=function(){"undefined"!=typeof personetics&&null!==personetics&&Object.prototype.hasOwnProperty.call(personetics,"getBudgetsCategories")&&(this.loadingAnimation&&this.showLoading(),personetics.getBudgetsCategories(d.bind(this,this.onGetBudgetsCategoriesResponse),d.bind(this,this.onError)))},t.prototype.handlePayload=function(){var e;e=(!Object.prototype.hasOwnProperty.call(this.config,"isPayloadEncoded")||void 0===this.config.isPayloadEncoded||1!=this.config.isPayloadEncoded&&"true"!=this.config.isPayloadEncoded?this.config.payload:JSON.parse(d.utils.encodeDecode.Base64.decode(this.config.payload))).budgets,this.onGetBudgetsCategoriesResponse({budgets:e})},t.prototype.bindEvents=function(){var s=this,e=this.parentEl.find(this.selectors.$budgetAmount),t=this.parentEl.find(this.selectors.$stopBudgetButton),o=this.parentEl.find(this.selectors.$stopButtonYes),n=this.parentEl.find(this.selectors.$stopModal),r=this.parentEl.find(this.selectors.$disclaimerButton),i=this.parentEl.find(this.selectors.$persoCloseModal),a=this.parentEl.find(this.selectors.$cancel),l=this.parentEl.find(this.selectors.$confirm),c=this.parentEl.find(this.selectors.$addBudget),p=this.utils.formatAmount(0,this.configOptions.currency,this.configOptions.amountFormat);this.defaultValue=1==d.processor.PStoryConfig.getConfig("supportHtmlTagInProcessor")?u(p).text():p,e.bind("input",function(e){s.inputAmount(e.target)}).bind("blur",function(e){var t;!s.configOptions.confirmButtons&&this.value?s.submitAmount(e.target):this.classList.contains(s.selectors.$persoSelected)&&(u(this).removeClass(s.selectors.$persoSelected),t=u(this).parents(s.selectors.$categoryWrapper).find(s.selectors.$confirm),setTimeout(function(){t.focus()},100))}).bind("keydown",function(e){switch(e.keyCode){case 13:s.configOptions.confirmButtons&&!this.classList.contains(s.selectors.$persoSelected)?(u(this).addClass(s.selectors.$persoSelected),u(this).click()):u(this).blur();break;case 9:break;default:u(this).click()}}),a.bind("click",function(e){s.cancelClick(e)}),l.bind("click",function(e){e=u(e.target).parents(s.selectors.$categoryWrapper).find(s.selectors.$budgetAmount).get(0);s.submitAmount(e)}),c.bind("click",function(e){e=u(e.target).parents(s.selectors.$categoryWrapper).find(s.selectors.$budgetAmount).get(0);s.addNewBudget(e)}),this.parentEl.find(this.selectors.$budgetAmountClick).bind("click",function(e){s.focusInput(e)}),t.bind("click",function(e){s.showStopBudget(e)}),o.bind("click",function(e){u(this).parents(s.selectors.$persoModal).hide(),s.stopBudget(n.data("categoryId"))}),r.bind("click",function(e){s.showBudgetDisclaimerModal()}).bind("keydown",this.keyUpEvent),i.bind("click",function(){u(this).parents(s.selectors.$persoModal).hide(),s.handleAccessibilityelementFocus(s.callBackElement)})},t.prototype.onGetBudgetsCategoriesResponse=function(e){this.budgets=e.budgets||e,this.hideLoading();var t,e=d.utils.persoValidator.isXssScriptDetected(JSON.stringify(e));this.budgets&&!e&&0<this.budgets.length?(t={type:"budgetWidgetStarted",value:(e=this.budgets).length},this.notifyReportEvent(t,!0),this.formatAmountInCollection(e,"budgetAvgMonthlySpending","budgetAvgMonthlySpendingFormatted"),this.filterOptions=this.getFilterOptions(this.recommended),this.categoriesMap=this.createCategoriesMap(e),this.renderTitle(),this.renderCategories(),this.afterRender(this.parentEl,e),this.configOptions.autoDisclaimerModalDisplay&&this.checkIsBudgetedCategories(e)):this.onError(),this.sendPersoneticsEvent()},t.prototype.renderTitle=function(){var e,t=this;this.configOptions.showStoryTitle&&(e=s.templates["tmpl-pstory-title"],e=u(e(this.configOptions)),this.parentEl.prepend(e),e=e.find(this.selectors.$pstoryTitleClose),personetics.config.persoEBMode?e.hide():e.bind("click",function(){t.closeHandler()}))},t.prototype.closeHandler=function(){d.API.personetics.eventBuffer&&d.API.personetics.eventBuffer.sendEvents();var e,t=personetics.getJSBridge();t&&u.isFunction(t.sessionEnded)?(d.utils.PEventReporting.setValue(e={type:"ExitBudget",value:"1"}),d.utils.PEventReporting.notifyEvent(),d.projectConfiguration.getConfig("reporting")&&(e.type="backButtonClicked",d.utils.PEventReporting.notifyReportingEventֿ(e)),t.sessionEnded({})):d.log("Events Delegate not defined")},t.prototype.onError=function(){var e=this,t=(this.loadingAnimation&&this.config.parentCtrl.closeLoading(),this.parentEl.empty(),{textLarge:d.dictionary.getText("OhNo"),textSmall:d.dictionary.getText("inboxTechnicalIssues"),imgClass:"errorImage",btnText:d.dictionary.getText("TryAgain"),templateId:"tmpl-perso-widget-story-error"}),s=(u(this.selectors.$personeticsManageBudgets).addClass(this.selectors.$personeticsManageBudgetsError),d.utils.messages.errorMessage(t));this.parentEl.append(s);personetics.notifyReportEvent({type:"errorOccured",value:t.textLarge+", "+t.textSmall},!0);s=this.parentEl.find(this.selectors.$errorButton);s.length&&s.bind("click",function(){e.start(e.parentEl)}),this.sendPersoneticsEvent()},t.prototype.getFilterOptions=function(e){var t=[{id:this.selectors.$subscribed},{id:this.selectors.$available}];return e&&t.push({id:this.selectors.$recommended}),t},t.prototype.createCategoriesMap=function(e){var t=this,s={};return this.filterOptions.forEach(function(e){s[e.id]=t.filterAndFormatCategories(e.id)}),s},t.prototype.checkIsBudgetedCategories=function(e){var t=!1;(t=e&&e.length?e.some(function(e){return!0===e.isBudgeted}):t)||this.showBudgetDisclaimerModal()},t.prototype.showBudgetDisclaimerModal=function(){var e=this.parentEl.find(this.selectors.$disclaimerModal);e&&e.length&&(e.show(),(e=e.find(this.selectors.$persoDisclaimerTitleText))&&e.length&&this.handleAccessibilityelementFocus(e),this.callBackElement=this.el.find(this.selectors.$persoDisclaimerButtonIcon))},t.prototype.filterAndFormatCategories=function(e){var t=this.budgets,s=[],o=this.recommended?this.config.params.recommendedBudgetKey:void 0;if(null==t)return[];switch(e){case this.selectors.$recommended:s=t.filter(function(e){return e.budgetKey==o&&(0==e.budgetActivation||0==e.isBudgeted)}),this.formatAmountInCollection(s,"","recommendedBudgetAmountFormatted",this.recommendedPayload.recommendedBudgetAmount);break;case this.selectors.$subscribed:s=t.filter(function(e){return 1==e.budgetActivation&&1==e.isBudgeted}),this.formatAmountInCollection(s,"budgetAmount","budgetAmountFormatted");break;case this.selectors.$available:(s=t.filter(function(e){return(0==e.budgetActivation||0==e.isBudgeted)&&e.budgetKey!=o})).forEach(function(e){e.budgetAmount=0}),this.formatAmountInCollection(s,"budgetAmount","budgetAmountFormatted")}return s},t.prototype.renderCategories=function(){var e={localBaseUrl:this.configOptions.localBaseUrl,baseUrl:this.configOptions.baseUrl,assetDirectory:this.configOptions.assetDirectory,assetExtension:this.configOptions.assetExtension},e={texts:this.getCategoriesText(),categories:this.categoriesMap,assetConfig:e,recommendedPayload:this.recommendedPayload,subscribedPayload:this.subscribedPayload,confirmButtons:this.configOptions.confirmButtons},e=(0,s.templates["manage-budgets-template"])(e);this.parentEl.append(e),this.el=this.parentEl.find(this.selectors.$manageBudgetsWrapper).last()},t.prototype.addPartialTemplate=function(){var e=s.templates["single-budget-category-template"];null!=e&&void 0===s.partials.innerCategory&&s.registerPartial("innerCategory",e)},t.prototype.getConfigOptions=function(){var e=d.projectConfiguration.getConfig("darkModeAsset"),e=personetics.config.darkMode?e:"",t=d.projectConfiguration.getConfig("useRemoteAssets"),s=d.projectConfiguration.getConfig("remoteBaseUrl"),o=d.projectConfiguration.getConfig("localBaseUrl"),t=(t?s:o)+e,s=!(!personetics.config.mappedColors||!personetics.config.mappedColors.brandColor)||null,e=!(!personetics.config.mappedColors||!personetics.config.mappedColors.backgroundColor)||null;return{maxBudgetAmount:d.utils.projectConf.verifyConfig("maxBudgetAmount",1e5),minBudgetAmount:d.utils.projectConf.verifyConfig("minBudgetAmount",0),confirmButtons:d.utils.projectConf.verifyConfig("confirmButtons",!1),currency:d.projectConfiguration.getConfig("currencySymbol"),amountFormat:d.projectConfiguration.getConfig("amountFormat"),defaultAssetName:d.utils.projectConf.verifyConfig("teasersConfigurations/ManageBudget/defaultAssetName","category-default"),defaultAssetDirectory:d.utils.projectConf.verifyConfig("teasersConfigurations/ManageBudget/defaultAssetDirectory","category_icons"),defaultAssetExtension:d.utils.projectConf.verifyConfig("teasersConfigurations/ManageBudget/defaultIconExtension","svg"),loadingAssetMaxTries:2,loadingAssetTriesAttrName:"data-asset-loading-tries",localBaseUrl:o,baseUrl:t,assetDirectory:d.utils.projectConf.verifyConfig("assetDirectory","category_icons"),assetExtension:d.utils.projectConf.verifyConfig("assetExtension","svg"),autoDisclaimerModalDisplay:d.utils.projectConf.verifyConfig("autoDisclaimerModalDisplay",!1),showStoryTitle:d.utils.projectConf.verifyConfig("showBudgetModalTitle",!1),backButtonText:d.dictionary.getText("accessibilityStoryBackButtonText"),showBackButton:d.utils.projectConf.verifyConfig("showBackButton",!0),title:d.dictionary.getText("budgetModalTitleTxt"),useExternalBrandColor:!!s||null,useExternalBackgroundColor:!!e||null}},t.prototype.getCategoriesText=function(){return{recommendedTitle:d.dictionary.getText("recommendedTitle"),yourBudgetsTitle:d.dictionary.getText("yourBudgetsTitle"),moreBudgetsTitle:d.dictionary.getText("moreBudgetsTitle"),monthlyAvg:d.dictionary.getText("monthlyAvg"),recommendedPlaceHolder:d.dictionary.getText("recommendedPlaceHolder"),aboutTxt:d.dictionary.getText("aboutTxt"),disclaimerTitle:d.dictionary.getText("disclaimerTitle"),disclaimerHeader:d.dictionary.getText("disclaimerHeader"),disclaimerText1:d.dictionary.getText("disclaimerText1"),disclaimerText2:d.dictionary.getText("disclaimerText2"),disclaimerButton:d.dictionary.getText("disclaimerButton"),stopBudgetTitle:d.dictionary.getText("stopBudgetTitle"),stopBudgetText1:d.dictionary.getText("stopBudgetText1"),stopBudgetText2:d.dictionary.getText("stopBudgetText2"),stopBudgetbutton1:d.dictionary.getText("stopBudgetbutton1"),stopBudgetbutton2:d.dictionary.getText("stopBudgetbutton2"),validationText:d.dictionary.getText("inputAmountValidator1"),confirmButton:d.dictionary.getText("confirmButton"),cancelButton:d.dictionary.getText("cancelButton"),submitButton:d.dictionary.getText("submitButton"),submittedBudgetRecommended:d.dictionary.getText("submittedBudgetRecommended"),stopCategoryBudget:d.dictionary.getText("stopCategoryBudget"),budgetModalHeader1:d.dictionary.getText("budgetModalHeader1"),budgetModalHeader2:d.dictionary.getText("budgetModalHeader2"),budgetModalClose:d.dictionary.getText("budgetModalClose")}},t.prototype.prepareBudgetParams=function(){if(Object.prototype.hasOwnProperty.call(this.config.params,"recommendedBudgetKey")&&void 0!==this.config.params.recommendedBudgetKey&&(this.recommended=!0,this.recommendedPayload={recommendedBudgetKey:this.config.params.recommendedBudgetKey},Object.prototype.hasOwnProperty.call(this.config.params,"recommendedBudgetAmount")&&null!=this.config.params.recommendedBudgetAmount&&(this.recommendedPayload.recommendedBudgetAmount=parseFloat(this.config.params.recommendedBudgetAmount)),Object.prototype.hasOwnProperty.call(this.config.params,"percentage")&&null!=this.config.params.percentage&&(this.recommendedPayload.percentage=this.config.params.percentage),Object.prototype.hasOwnProperty.call(this.config.params,"trend")&&null!=this.config.params.trend))switch(this.config.params.trend){case this.selectors.$increase:this.recommendedPayload.trend=d.dictionary.getText("recommandedLabelIncrease");break;case this.selectors.$decrease:this.recommendedPayload.trend=d.dictionary.getText("recommandedLabelDecrease");break;case this.selectors.$major:this.recommendedPayload.trend=d.dictionary.getText("recommandedLabelMajor"),this.recommendedPayload.majorTrend=!0}Object.prototype.hasOwnProperty.call(this.config.params,"subscribedBudgetKey")&&void 0!==this.config.params.subscribedBudgetKey&&(this.subscribedPayload={subscribedBudgetKey:this.config.params.subscribedBudgetKey},Object.prototype.hasOwnProperty.call(this.config.params,"subscribedBudgetRecommendedAmount")&&null!=this.config.params.subscribedBudgetRecommendedAmount&&(this.subscribedPayload.subscribedBudgetRecommendedAmount=this.utils.formatAmount(this.config.params.subscribedBudgetRecommendedAmount,this.configOptions.currency,this.configOptions.amountFormat)))},t.prototype.afterRender=function(e,t){this.bindEvents(),this.handleAssets(),this.setBudgetHeight(),this.setThemeClasses(),this.setBudgetModalAccessibility(e)},t.prototype.setBudgetHeight=function(){var e=this.el[0]&&this.el[0].scrollHeight;this.el.height(e)},t.prototype.setThemeClasses=function(){this.parentEl.length&&personetics.config.theme&&(personetics.config.theme.brandColor&&(d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$persoRecommendedCategories),"perso-theme-brandColor-background"),d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$disclaimerModal),"perso-theme-brandColor-disclaimer-finish-btn-background"),d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$stopModal),"perso-theme-brandColor-stop-btn-background"),d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$stopModal),"perso-theme-brandColor-close-btn-color"),d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$persoCategoryName+","+this.selectors.$persoCategoryAvg+","+this.selectors.$persoCategoryRecommendInformationText+","+this.selectors.$persoCategorySubscribedInformationText+","+this.selectors.$persoAvailableCategoriesTitle+","+this.selectors.$persoSubscribedCategoriesTitle+","+this.selectors.$persoModalElementContent),"perso-theme-brandColor-color"),d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$persoCategoryWrapper),"perso-theme-brandColor-budget-amount-color"),d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$persoCategoryWrapper),"perso-theme-brandColor-budget-amount-border-color"),d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$stopModal),"perso-theme-brandColor-close-btn-border"),d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$persoSubscribedCategories),"perso-theme-brandColor-subscribed-placeholder-color")),personetics.config.theme.alertColor&&d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$budgetAmountValidation),"perso-theme-alertColor-color"),personetics.config.theme.greyLightColor&&(d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$persoCategoryWrapper),"perso-theme-greyLightColor-budget-placeholder-color"),d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$persoSubscribedCategories),"perso-theme-greyLightColor-background"),d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$persoCategoryWrapper),"perso-theme-greyLightColor-budget-placeholder-text-color")),personetics.config.theme.headerColor&&d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$persoDisclaimerButtonText),"perso-theme-headerColor-color"),personetics.config.theme.backgroundColor&&(d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$categoryWrapper+","+this.selectors.$persoModalElementContent),"perso-theme-backgroundColor-background"),d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$persoDisclaimerFinishButton+","+this.selectors.$persoStopButton),"perso-theme-backgroundColor-color"),d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$stopModal),"perso-theme-backgroundColor-close-btn-background")),personetics.config.theme.backgroundDarkColor&&d.utils.persoTheming.addClassToElement(this.parentEl.find(this.selectors.$manageBudgetsWrapper+","+this.selectors.$persoImageCategoryWrapper+","+this.selectors.$persoDisclaimerTitle+","+this.selectors.$persoStopTitle),"perso-theme-backgroundDarkColor-background"))},t.prototype.subscribeNewBudget=function(e,t,s){var e=parseFloat(u(e).attr(this.selectors.$dataValue)),o=this.budgets.find(function(e){return e.budgetKey==t}),n=!!this.recommended&&o.budgetKey==this.recommendedPayload.recommendedBudgetKey,e={budgetActivation:!0,budgetLevel:"Party",budgetCycle:"Monthly",budgetType:"categoryGroup",budgetKey:t,budgetNickName:"",budgetAmount:e,budgetRecommendedAmount:n?this.recommendedPayload.recommendedBudgetAmount:o.budgetRecommendedAmount,budgetAvgMonthlySpending:o.budgetAvgMonthlySpending,budgetUserInput:"1",budgetInitiationMode:"budgetsSettings"},o={value:t,type:"newBudget"};n&&(o.type="approve"===s?"recommendedBudgetApproved":"recommendedBudgetChanged"),this.updateBudget(e,o,t)},t.prototype.modifyBudget=function(e,t){e=parseFloat(u(e).attr(this.selectors.$dataValue));this.updateBudget({budgetKey:t,budgetAmount:e},{value:t,type:"updateBudget"},t)},t.prototype.stopBudget=function(e){this.updateBudget({budgetActivation:!1,budgetKey:e},{value:e,type:"deleteBudget"},e)},t.prototype.updateBudget=function(e,t,s){this.notifyReportEvent(t),"undefined"!=typeof personetics&&null!==personetics&&Object.prototype.hasOwnProperty.call(personetics,"setBudgetSettings")&&(this.loadingAnimation&&this.showLoading(),personetics.setBudgetSettings(e,d.bind(this,this.onSuccessSetBudget),d.bind(this,this.onErrorSetBudget)))},t.prototype.focusInput=function(e){var t=u(e.target).parents(this.selectors.$categoryWrapper),s=u(e.target).parent().find(this.selectors.$budgetAmount),e=u(e.target).parent().find(this.selectors.$persoPlaceholder);e.length&&(s.val(e.find(this.selectors.$persoPlaceholderAmount).text()),e.remove()),s.val()==this.defaultValue&&this.showValidation(t),this.configOptions.confirmButtons&&(e=u(t).find(this.selectors.$submitWrapper),t=u(t).find(this.selectors.$addBudgetWrapper),e.show(),t&&u(t).hide()),this.isDesktop&&s.focus()},t.prototype.inputAmount=function(e){var t=e.value.replace(/[^\d]+/gi,"")||0,s=this.utils.formatAmount(t,this.configOptions.currency,this.configOptions.amountFormat),o=u(e),s=(e.value=1==d.processor.PStoryConfig.getConfig("supportHtmlTagInProcessor")?u(s).text():s,o.attr(this.selectors.$dataValue,t),o.text(t),o.removeAttr("aria-label"),u(e).parents(this.selectors.$categoryWrapper));t>this.configOptions.maxBudgetAmount||t<this.configOptions.minBudgetAmount||0==t?this.showValidation(s):this.hideValidation(s)},t.prototype.submitAmount=function(e){var t;e.value!=this.defaultValue&&parseFloat(u(e).attr(this.selectors.$dataValue))<=this.configOptions.maxBudgetAmount&&parseFloat(u(e).attr(this.selectors.$dataValue))>=this.configOptions.minBudgetAmount&&null!=e.value&&null!=e.value&&(t=u(e).parents(this.selectors.$categoryWrapper).data(this.selectors.$categoryId),this.categoriesMap[this.selectors.$subscribed].find(function(e){return e.budgetKey==t})?this.modifyBudget(e,t):this.subscribeNewBudget(e,t,"change"))},t.prototype.addNewBudget=function(e){var t=parseFloat(u(e).attr(this.selectors.$dataValue));0!=t&&t<=this.configOptions.maxBudgetAmount&&t>=this.configOptions.minBudgetAmount&&null!=t&&null!=t&&(t=u(e).parents(this.selectors.$categoryWrapper).data(this.selectors.$categoryId),this.subscribeNewBudget(e,t,"approve"))},t.prototype.cancelClick=function(e){u(e.target).parents(this.selectors.$submitWrapper).hide();var e=u(e.target).parents(this.selectors.$categoryWrapper),t=u(e).find(this.selectors.$addBudgetWrapper),t=(t&&u(t).show(),u(e).find(this.selectors.$budgetAmount));t.val(t.data("src-value")),this.inputAmount(t.get(0)),this.hideValidation(e),t.blur(),this.isDesktop&&t.focus()},t.prototype.showStopBudget=function(e){var t=this.parentEl.find(this.selectors.$stopModal),s=u(e.target).parents(this.selectors.$categoryWrapper).data(this.selectors.$categoryId),o=this.categoriesMap[this.selectors.$subscribed].find(function(e){return e.budgetKey==s}),o=(t.data({categoryId:o.budgetKey}),t.find(this.selectors.$stopTextCategory).text(o.budgetKeyDisplayName),t.find(this.selectors.$persoStopTextWrapper)),n=d.utils.accessibility.getElementChildNodesText(o);o.attr("aria-label",n),u(t).show(),(n=t.find(this.selectors.$persoStopTitleText))&&n.length&&this.handleAccessibilityelementFocus(n),this.callBackElement=u(e.target)},t.prototype.handleAssets=function(){var s=this,e=this.el.find(this.selectors.$persoImageCategory);e.on("load",function(){s.remoteAssetsMgr.finishedLoading(this)}),e.on("error",function(e){var t=u(this).data(s.configOptions.loadingAssetTriesAttrName);t&&t>s.configOptions.loadingAssetMaxTries?s.fallbackAsset(this):(t=s.configOptions.localBaseUrl+"/"+s.configOptions.defaultAssetDirectory+"/"+s.configOptions.defaultAssetName+"."+s.configOptions.defaultAssetExtension,s.remoteAssetsMgr.setDefaultAsset(this,t),s.remoteAssetsMgr.setAssetLoadingTriesAttr(this))})},t.prototype.fallbackAsset=function(e){var t,s=u(e);s.length&&(t=this.configOptions.localBaseUrl+"/"+this.configOptions.defaultAssetDirectory+"/"+this.configOptions.defaultAssetName+"."+this.configOptions.defaultAssetExtension,this.remoteAssetsMgr.setDefaultAsset(e,t),this.remoteAssetsMgr.removeAssetLoadingTriesAttr(e),s.off("error"))},t.prototype.showLoading=function(){this.parentEl.empty();var e=u("<div class="+this.selectors.$LoadingContainer+"></div>");this.parentEl.append(e),this.config.parentCtrl.startWidget("loading-animation",{el:this.parentEl.find(this.selectors.$persoLoadingContainer)})},t.prototype.hideLoading=function(){this.parentEl.find(this.selectors.$persoLoadingContainer).remove()},t.prototype.showValidation=function(e){u(e).find(this.selectors.$budgetAmountValidation).show(),this.configOptions.confirmButtons&&u(e).find(this.selectors.$confirm).addClass(this.selectors.$disable)},t.prototype.hideValidation=function(e){u(e).find(this.selectors.$budgetAmountValidation).hide(),this.configOptions.confirmButtons&&u(e).find(this.selectors.$confirm).removeClass(this.selectors.$disable)},t.prototype.formatAmountInCollection=function(e,s,t,o){var n=this,r=t||s;u.each(e,function(e,t){t[r]=n.utils.formatAmount(o||t[s],n.configOptions.currency,n.configOptions.amountFormat)})},t.prototype.notifyReportEvent=function(e,t){var s=d.projectConfiguration.getConfig("reporting");d.utils.PEventReporting.setValue(e),t||d.utils.PEventReporting.notifyEvent(),s&&d.utils.PEventReporting.notifyReportingEventֿ(e)},t.prototype.onSuccessSetBudget=function(e){this.hideLoading(),"undefined"!=typeof personetics&&null!==personetics&&Object.prototype.hasOwnProperty.call(personetics,"sendWidgetEvent")&&(personetics.sendWidgetEvent(this,{eventType:"refreshInsights"}),Object.prototype.hasOwnProperty.call(this.config,"payload")&&void 0!==this.config.payload&&null!==this.config.payload&&delete this.config.payload,this.start(this.parentEl)),this.sendPersoneticsEvent()},t.prototype.sendPersoneticsEvent=function(){this.config.enableNativeLoader?d.utils.PSendEvent.prototype.sendPersoneticsEvent("personeticsEvent","closeNativeLoader"):this.config.loaderEvent&&d.utils.PSendEvent.prototype.sendPersoneticsEvent("personeticsEvent","closeLoaderEvent")},t.prototype.onErrorSetBudget=function(e){this.onError()},e.HandlebarsManageBudgetWidget=t}(window,window.Personetics=window.Personetics||{},jQuery),function(e,n){e.HandlebarsManageBudgetWidget=e.HandlebarsManageBudgetWidget||{},HandlebarsManageBudgetWidget.prototype.getConfigOptions=function(){var e=n.projectConfiguration.getConfig("darkModeAsset"),e=personetics.config.darkMode?e:"",t=n.projectConfiguration.getConfig("useRemoteAssets"),s=n.projectConfiguration.getConfig("remoteBaseUrl"),o=n.projectConfiguration.getConfig("localBaseUrl"),t=(t?s:o)+e,s=!(!personetics.config.mappedColors||!personetics.config.mappedColors.brandColor)||null,e=!(!personetics.config.mappedColors||!personetics.config.mappedColors.backgroundColor)||null;return{maxBudgetAmount:n.utils.projectConf.verifyConfig("maxBudgetAmount",1e5),minBudgetAmount:n.utils.projectConf.verifyConfig("minBudgetAmount",0),confirmButtons:n.utils.projectConf.verifyConfig("confirmButtons",!1),currency:n.projectConfiguration.getConfig("currencySymbol"),amountFormat:n.projectConfiguration.getConfig("budgetAmountFormat"),defaultAssetName:n.utils.projectConf.verifyConfig("teasersConfigurations/ManageBudget/defaultAssetName","category-default"),defaultAssetDirectory:n.utils.projectConf.verifyConfig("teasersConfigurations/ManageBudget/defaultAssetDirectory","category_icons"),defaultAssetExtension:n.utils.projectConf.verifyConfig("teasersConfigurations/ManageBudget/defaultIconExtension","svg"),loadingAssetMaxTries:2,loadingAssetTriesAttrName:"data-asset-loading-tries",localBaseUrl:o,baseUrl:t,assetDirectory:n.utils.projectConf.verifyConfig("assetDirectory","category_icons"),assetExtension:n.utils.projectConf.verifyConfig("assetExtension","svg"),autoDisclaimerModalDisplay:n.utils.projectConf.verifyConfig("autoDisclaimerModalDisplay",!1),showStoryTitle:n.utils.projectConf.verifyConfig("showBudgetModalTitle",!1),backButtonText:n.dictionary.getText("accessibilityStoryBackButtonText"),showBackButton:n.utils.projectConf.verifyConfig("showBackButton",!0),title:n.dictionary.getText("budgetModalTitleTxt"),useExternalBrandColor:!!s||null,useExternalBackgroundColor:!!e||null}}}(window,window.Personetics=window.Personetics||{},jQuery),function(t){t.story=t.story||{},t.UI.PStoryWidgetCtrlProduct=t.UI.PStoryWidgetCtrl.extend({initialize:function(e){this.super=t.UI.PStoryWidgetCtrl.prototype,this.super.initialize.call(this,e);e=(e=e.parentCtrl.uxCtrl)||new t.story.skinController;this.uxCtrl=e}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e,t){t.story=t.story||{},t.story.ProductSkinControler=t.story.PSkinControler.extend({consts:{ratio_large:1.23,ratio_medium:1.08},initialize:function(){t.story.PSkinControler.prototype.initialize.call(this),"mobile"==this.getMode()?t.projectConfiguration.setConfig({supportCollapse:!personetics.config.persoEBMode,accountSelectorCollapse:!0,monthPickerCollapse:!0,calendarCollapse:!1,pieChartCollapse:!0,entitySelectorCollapse:!0,enableNotifyEvents:!0}):t.projectConfiguration.setConfig({supportCollapse:!1,enableNotifyEvents:!0})},registerWidgets:function(){this.registerDefaultWidgets(),t.UI.PWidgetFactory.registerWidget("app-ctrl",{widgetClass:t.UI.PAppCtrlProduct,widgetName:"Product app ctrl"}),t.UI.PWidgetFactory.registerWidget("master",{widgetClass:t.UI.PAppCtrlProduct,widgetName:"Product master"}),t.UI.PWidgetFactory.registerWidget("story-widget",{widgetClass:t.UI.PStoryWidgetCtrlProduct,widgetName:"Product story widget"}),t.UI.PWidgetFactory.registerWidget("inbox-story-widget",{widgetClass:e.HandlebarsInboxAndStoryWidget,widgetName:"Product inbox and story widget"}),t.UI.PWidgetFactory.registerWidget("teaser-widget-single",{widgetClass:e.HandlebarsTeaserWidget,widgetName:"Product single teaser widget"}),t.UI.PWidgetFactory.registerWidget("teaser-widget",{widgetClass:e.HandlebarsMultiTeaserWidget,widgetName:"Product teaser widget"}),t.UI.PWidgetFactory.registerWidget("teaser-widget-carousel",{widgetClass:e.HandlebarsMultiTeaserWidgetCarousel,widgetName:"Product teaser widget"}),t.UI.PWidgetFactory.registerWidget("manage-budgets",{widgetClass:e.HandlebarsManageBudgetWidget,widgetName:"Product budget category widget"}),t.UI.PWidgetFactory.registerWidget("subscription-dashboard",{widgetClass:e.HandlebarsSubscriptionDashboardWidget,widgetName:"Product subscription dashboard widget"})},registerBlocks:function(){t.story.PSkinControler.prototype.registerBlocks.call(this),this.registerBlock("account-selector",{version:"AS-NT-1"}),this.registerBlock("buttons",{version:"BTN-1",subType:"basic"}),this.registerBlock("buttons",{version:"LNK-1",subType:"detailedLink"}),this.registerBlock("buttons",{version:"QR-1",subType:"feedbackQuestion"}),this.registerBlock("buttons",{version:"FBU-1",subType:"feedbackUndoButton"}),this.registerBlock("buttons",{version:"RB-1",subType:"radio-button"}),this.registerBlock("pie-chart",{version:"PC-1"}),this.registerBlock("bar-chart",{version:"BC-1",subType:"single"}),this.registerBlock("bar-chart",{version:"CC-1",subType:"multi"}),this.registerBlock("bar-chart",{widthMode:"tablet",version:"BC-1",subType:"single"}),this.registerBlock("pin-graph",{version:"PC-H-1"}),this.registerBlock("pin-graph",{widthMode:"tablet",version:"PC-H-1"}),this.registerBlock("line-chart",{version:"LC-1"}),this.registerBlock("tranList",{version:"TL-1",subType:"basic"}),this.registerBlock("tranList",{version:"TL-FB",subType:"feedback"}),this.registerChartHelper("verticalHelper",{helperClass:t.utils.d3Helpers.VerticalChartHelperProduct}),this.registerChartHelper("pinGraphHelper",{helperClass:t.utils.d3Helpers.PinGraphChartHelperProduct}),this.registerChartHelper("collapseHelper",{helperClass:t.story.CollapseHelper}),this.registerChartHelper("lineChartHelper",{helperClass:t.utils.d3Helpers.NewLineChartHelper}),this.registerChartHelper("twoPointsLineChartHelper",{helperClass:t.utils.d3Helpers.twoPointsLineChartHelper}),this.registerBlock("entity-selector",{version:"ES-1",subType:"icons"}),this.registerBlock("entity-selector",{version:"ES-1",subType:"cards"}),this.registerBlock("entity-selector",{version:"ES-1",subType:"goals"}),this.registerBlock("calendar",{version:"CL-1"}),this.registerBlock("textboxes",{version:"BX-1"}),this.registerBlock("tabs",{version:"TB-1"}),this.registerBlock("trivia",{version:"TRV-1"}),this.registerBlock("counter",{version:"SCR-1"}),this.registerBlock("entity-list",{version:"EL-1"}),this.registerBlock("filter",{version:"FL-1"})},getAccessibilityFontSizes:function(){return{base_text_size:17,medium_text_size:19,large_text_size:21}},getScreenOptions:function(){return{ratio_medium:this.consts.ratio_medium,ratio_large:this.consts.ratio_large}},getValueByScreenWidth:function(e){var t=this.getPersoneticsWrapper().width(),s=this.getScreenOptions(),o=e;return 396<=t&&t<790?o=e*s.ratio_large:347<=t&&(o=e*s.ratio_medium),o},getDesktopScreenWidth:function(){return 790},getMobileMaxScreenWidth:function(){return 598},hasLayout:function(e){return e<=375||789<e},getCollapseOptions:function(e){var t,s=e.type;if(e.height)t=e.height;else switch(s){case"account-selector":t=86;break;case"pie-chart":t=59;break;case"calendar":t=0;break;default:t=50}e=this.getPersoneticsWrapper().width(),s=this.getScreenOptions(),e=e<347?t:396<=e?t*s.ratio_large:t*s.ratio_medium;return{displayedHeight:e}},getColumnChartOptions:function(e){var t=this.consts.ratio_large;return{maxBarHeight:99,svgHeight:200,svgWidth:320,labelTop:27,barTop:41,xAxisTop:170,yAxisHeight:128,yAxisTop:20,yAxisLineDisplay:!0,yAxisTextDisplay:!1,negativeYAxisTop:181,negativeBarTop:190,horizontalLineWidth:281,horizontalLineLeft:20,doAnimations:!0,barDelay:0,barDuration:350,labelDelay:400,labelDuration:350,screen:{ratio_medium:this.consts.ratio_medium,ratio_large:t=void 0!==e?e:t},margin:{top:43,bottom:40},height:180,chart:{transX:0,transY:10},labels:{drawLabels:!0,marginBottom:18,marginTop:-10},rectangles:{width:16,space:33,minHeightPercent:.15,borderRadius:{rx:9,ry:9},marginFromBottom:15,marginFromLeft:0,gradients:[{id:"selectedGradient",offset:["0%","100%"],stopColors:["#6888d2","#536fb1"]}],filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}}},selected:{},axis:{translation:{x:0,y:"height"},xAxis:{hide:!1,collapsedPadding:{top:22,bottom:15}},yAxis:{x:0,y:0,hide:!0}}}},getPinGraphChartOptions:function(e){var t=1.3;return{svgHeight:200,svgWidth:281,maxBarHeight:112,labelTop:12,barTop:27,xAxisTop:170,yAxisHeight:128,yAxisTop:20,yAxisLineDisplay:!0,yAxisTextDisplay:!1,doAnimations:!0,barDelay:0,barDuration:350,labelDelay:400,labelDuration:350,screen:{ratio_medium:this.consts.ratio_medium,ratio_large:t=void 0!==e?e:t},margin:{top:43,bottom:40},height:180,chart:{transX:0,transY:10},totalHeight:220,labels:{drawLabels:!0,marginBottom:18,marginTop:4.5},rectangles:{minHeightPercent:.15,width:9,space:40,borderRadius:{rx:4,ry:4},marginFromBottom:15,gradients:{selectedGradient:{id:"selectedGradient",offset:["0%","100%"],stopColors:["#6888d2","#536fb1"]}},filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}},transition:{duration:1e3,delay:500}},selected:{},axis:{translation:{x:0,y:"height"},xAxis:{hide:!1,tickPadding:10,collapsedPadding:{top:22,bottom:15}},yAxis:{x:0,y:0,hide:!0}}}},getHorizontalPinGraphChartOptions:function(){return{maxBarPercent:100,pinChartHeight:.388}},getColumnChartMultiSeriesOptions:function(e){var t=1.3;return{svgHeight:200,svgWidth:313,maxBarHeight:93,labelTop:45,nextLabelTop:14,barTop:56,xAxiaTop:170,verticalLineTop:20,lineHeight:130,drowVerticalLines:!0,yAxisDisplay:!1,doAnimations:!0,barDelay:0,barDuration:350,labelDelay:400,labelDuration:350,screen:{ratio_medium:this.consts.ratio_medium,ratio_large:t=void 0!==e?e:t},margin:{top:34,right:24,bottom:72,left:24},totalHeight:220,labels:{drawLabels:!0,marginTop:-16,marginBottom:4,right:2},rectangles:{width:9,space:41,paddingTop:30,paddingLeft:-19,paddingRight:22,paddingBottom:33,seriesPadding:12.5,transX:4,minHeight:.25,borderRadius:{rx:4,ry:4},marginFromBottom:5,gradients:{selectedInGradient:{id:"selectedInGradient",offset:["0%","100%"],stopColors:["#7193e2","#485f96"]},selectedOutGradient:{id:"selectedOutGradient",offset:["0%","100%"],stopColors:["#ffcc00","#ffb80a"]}},filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}},transition:{duration:1e3,delay:500}},selected:{},axis:{translation:{x:2.5,y:"height"},xAxis:{hide:!1,tickPadding:10,minimizedPadding:{top:22,bottom:15}}}}},getDotsLineChartOptions:function(e){e=e||this.consts.ratio_large;return{screen:{ratio_medium:this.consts.ratio_medium,ratio_large:e},svgHeight:200,svgWidth:290,marginTop:20,line_left:36,line_top:60,line_width:218,line_height:65,area_display:!1,lineStyle_interpolate:"basis",lineStyle_thickness:2,xAxis_line_y:20,xAxis_line_height:120,xAxis_text_y:156,xAxis_display:!0,yAxis_x:0,yAxis_y:0,yAxis_display:!1,dots_radius:4,dots_radius_selected:4,labels_x:0,labels_y:14.3,labels_display:!0,horizonalLine_x:0,horizonalLine_length:308,horizonalLine_y:100,horizonalLine_display:!1,highlightBy:"last",doAnimations:!0,lineDuration:1e3,lineDelay:200,dotsDelay:700,dotsLabelDelay:800,dotsDuration:500,areaDelay:1200,areaDuration:500,dotRect:{height:40,yOffset:55,radiusX:20,radiusY:10,dot_label_radius:10},dotText:{yOffset:41,paddingLeft:6,paddingRight:6,lineHeight:20},dotPolygon:{yOffset:27,points:"10,10 15.5,15.5 21,10"}}},getDotsLineChartOptionsDesktop:function(){return{screen:{ratio_medium:this.consts.ratio_medium,ratio_large:this.consts.ratio_large},svgHeight:404,svgWidth:790,line_left:89,line_top:105,line_width:611,line_height:162,area_display:!1,lineStyle_interpolate:"basis",lineStyle_thickness:4,xAxis_line_y:47,xAxis_line_x:89,xAxis_line_height:257,xAxis_text_y:339,xAxis_text_x:93,xAxis_display:!0,yAxis_x:47,yAxis_y:20,yAxis_display:!1,duration:2e3,dots_radius:5,dots_radius_selected:9,labels_x:91,labels_y:24.31,labels_display:!0,horizonalLine_display:!1,highlightBy:"last",doAnimations:!0,lineDuration:1e3,lineDelay:200,dotsDelay:700,dotsDuration:500,dotsLabelDelay:800,areaDelay:1200,areaDuration:500,dotRect:{height:40,yOffset:55,radiusX:20,radiusY:10,dot_label_radius:10},dotText:{yOffset:41,paddingLeft:7.5,paddingRight:7.5,lineHeight:20},dotPolygon:{yOffset:30,points:"20,10 10,10 15,20"}}},getBarChartOptions:function(e){var t=this.consts.ratio_large;return{screen:{ratio_medium:this.consts.ratio_medium,ratio_large:t=void 0!==e?e:t},margin:{top:22,bottom:0},drawLabels:!0,rectangles:{height:13,width:281,color:"rgba(169, 167, 167, 1)",paddingTop:-28,paddingBottom:10,seriesPadding:3,borderRadius:{rx:6,ry:6},gradients:{selectedGradient:{id:"selectedGradient",offset:["0%","100%"],stopColors:["#6888d2","#536fb1"]}},filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}}},labels:{minWidth:100},selected:{},axis:{xAxis:{hide:!0},yAxis:{hide:!1,transValue:-20}}}},getBarGraphPalette:function(){return["rgba(169, 167, 167, 1)","url(#selectedGradient)"]},getBarGraphLabelsPalette:function(){return["rgba(40, 36, 37, 1)","rgba(84, 113, 180, 1)"]},getMultiVerticalPalette:function(){return["rgba(183, 183, 183, 1)","rgba(215, 215, 215, 1)"]},getMultiVerticalLabelsPalette:function(){return["rgba(147, 145, 149, 1)","rgba(40, 36, 37, 1)"]},getPieGrayColors:function(){return["#ededed","#d5d6d7","#dfe0e2","#ededed","#dfe0e2","#d5d6d7","#dfe0e2"]},getPieGraphPalette:function(e){var t=personetics.config.mappedColors,s=t&&t.outflowColor?[t.outflowColor]:["#ff6c53"],t=t&&t.inflowColor?[t.inflowColor]:["#0275be"];return"out"==e?s:t},getPieGraphPaletteDesktop:function(e){return"Out"==e?["#ffce40","#ffb608","#ff9819","#fe7d3f","#f9652b","#df4c3a","#c72735"]:["#6787d1","#027ac4","#7390c5","#3095bd","#45a5d3","#5acafa","#95dafb"]},getPieOptions:function(){var e=personetics.config.mappedColors,t=e&&e.outflowColor?e.outflowColor:"#ff6c53";return{doAnimations:!0,pieDelay:0,pieDuration:300,pieSelectedDelay:450,pieTextDelay:600,pieTextDuration:300,center_text_total_font_size:10,center_text_total_max_width:70,center_text_amount_font_size:10,center_text_total_font_weight:800,center_text_amount_max_width:70,arcs:{selctedPrimaryColor:t,selectedInflowPrimaryColor:e&&e.inflowColor?e.inflowColor:"#0275be",selectedOutflowPrimaryColor:t,filter:{grayFilter:!0},cornerRadius:{radiusCorner:0},padAngle:0}}},getPieOptionsDesktop:function(){return{doAnimations:!0,pieDelay:0,pieDuration:300,pieSelectedDelay:450,pieTextDelay:600,pieTextDuration:300,center_text_total_font_size:20,center_text_amount_font_size:20,center_text_total_font_weight:300,arcs:{selctedPrimaryColor:null,selectedInflowPrimaryColor:null,selectedOutflowPrimaryColor:null,filter:{grayFilter:!0},cornerRadius:{radiusCorner:9},padAngle:.04}}},getPinGraphChartOptionsDesktop:function(){return{isDesktop:!0,maxBarHeight:177,svgHeight:404,svgWidth:730,labelTop:90,barTop:114,xAxisTop:340,yAxisHeight:255,yAxisTop:47,yAxisLineDisplay:!0,yAxisTextDisplay:!1,doAnimations:!0,barDelay:0,barDuration:350,labelDelay:400,labelDuration:350,screen:{ratio_medium:this.consts.ratio_medium,ratio_large:this.consts.ratio_large},margin:{top:120,bottom:117},chart:{transX:0,transY:10},labels:{drawLabels:!0},rectangles:{width:14,space:89,borderRadius:{rx:6,ry:6},gradients:[{id:"selectedGradient",offset:["0%","100%"],stopColors:["#6888d2","#536fb1"]}],filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}},transition:{duration:1e3,delay:500}},selected:{},axis:{translation:{x:0,y:"height"},xAxis:{hide:!1,collapsedPadding:{top:22,bottom:15}}}}},getColumnChartOptionsDesktop:function(){return{isDesktop:!0,maxBarHeight:150,svgHeight:404,svgWidth:730,labelTop:118,barTop:137,xAxisTop:340,yAxisHeight:253,yAxisTop:49,yAxisLineDisplay:!0,yAxisTextDisplay:!1,doAnimations:!0,barDelay:0,barDuration:350,labelDelay:400,labelDuration:350,benchMarkOuterLabelsY:137,benchMarkOuterLabelsX:0,screen:{ratio_medium:this.consts.ratio_medium,ratio_large:this.consts.ratio_large},chart:{transX:0,transY:10},labels:{drawLabels:!0,drawBenchMarkOuterLabels:!0},rectangles:{width:18,space:87,borderRadius:{rx:9,ry:9},gradients:[{id:"selectedGradient",offset:["0%","100%"],stopColors:["#6888d2","#536fb1"]}],filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}},transition:{duration:1e3,delay:500}},selected:{},axis:{translation:{x:0,y:"height"},xAxis:{hide:!1,collapsedPadding:{top:22,bottom:15}},yAxis:{x:0,y:0,hide:!0}}}},getColumnChartMultiSeriesOptionsDesktop:function(){return{svgHeight:404,svgWidth:730,maxBarHeight:180,labelTop:80,nextLabelTop:21,barTop:107,xAxiaTop:340,yAxisTop:49,yAxisHeight:253,spaceLeft:30,yAxisLineDisplay:!0,yAxisTextDisplay:!1,drowVerticalLines:!1,accessHiddenRectMarginLeft:0,accessHiddenRectMarginTop:43,doAnimations:!0,barDelay:0,barDuration:350,labelDelay:400,labelDuration:350,screen:{ratio_medium:this.consts.ratio_medium,ratio_large:this.consts.ratio_large},chart:{transX:0,transY:0},labels:{drawLabels:!0,right:6},rectangles:{width:18,space:57,seriesPadding:12.5,paddingRight:30,transX:4,borderRadius:{rx:9,ry:9},gradients:{selectedInGradient:{id:"selectedInGradient",offset:["100%"],stopColors:["rgba(84, 113, 180, 1)"]},selectedOutGradient:{id:"selectedOutGradient",offset:["100%"],stopColors:["rgba(255, 185, 10, 1)"]}},filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}},transition:{duration:1e3,delay:500}},selected:{},axis:{translation:{x:8,y:"height"},xAxis:{hide:!1,tickPadding:10,minimizedPadding:{top:22,bottom:15}},yAxis:{hide:!0,x:0,y:30}}}},getBarChartOptionsDesktop:function(){return{screen:{ratio_medium:this.consts.ratio_medium,ratio_large:this.consts.ratio_large},margin:{top:22,bottom:0},drawLabels:!0,rectangles:{height:13,width:730,color:"rgba(169, 167, 167, 1)",paddingTop:-28,paddingBottom:10,seriesPadding:3,borderRadius:{rx:6,ry:6},gradients:{selectedGradient:{id:"selectedGradient",offset:["0%","100%"],stopColors:["#6888d2","#536fb1"]}},filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}}},labels:{minWidth:100},selected:{},axis:{xAxis:{hide:!0},yAxis:{hide:!1,paddingRight:27,transValue:-20}}}},getBarBenchmarkConfig:function(){return{lineInterpolate:"linear",labelWidthPercent:36.508,benchmarkDrawDelay:1500,labelTransitionDuration:500,lineTransitionDuration:500}},getMultiVerticalPaletteDesktop:function(){return["rgba(215, 215, 215, 1)","rgba(183, 183, 183, 1)"]},getMultiVerticalLabelsPaletteDesktop:function(){return["rgba(0, 0, 0, 1)","rgba(115, 114, 114, 1)"]},getDotsLineGraphPalette:function(){return["rgba(46, 115, 255, 1)"]},getAccountSelectorPalette:function(){return["image1","image2","image3"]},getAccountSelectorConfig:function(){return{showArrows:!0,minAccountsForDisplayingArrows:2,enableInfiniteCarousel:!0,showIndexDots:!0,nextArrowDir:"rtl",allAnimation:{type:"fadingSlidingOut"},isRightToLeft:!1}},getAccountSelectorConfigDesktop:function(){return{showArrows:!0,minAccountsForDisplayingArrows:4,enableInfiniteCarousel:!0,showIndexDots:!0,nextArrowDir:"rtl",allAnimation:{type:"heapCards",cardsStackTotalHeight:43,maxSpaceBetweenCards:14,showBoxShadowForLastCardOnly:!1},isRightToLeft:!1}},getCollapseBlockHeight:function(e){switch(e){case"account-selector":return 120;case"bar-chart":case"pin-graph":case"pie-chart":return 70;case"pure-bar-chart":return 40;default:return 70}},getBlockPercentInViewportToStartAnimate:function(e){var t=1,s={"bar-chart":{multiVertical:.7,vertical:.7,horizontal:.8},"pin-graph":{pinGraph:.7,"pin-graph":.7},"line-chart":.5,"pie-chart":.2,"pure-bar-chart":{"pure-bar-chart":.5}};return t="undefined"!=s[e]?s[e]:t},getBlockPercentInViewportToStartAnimateDesktop:function(e){var t=1,s={"bar-chart":{multiVertical:.6,vertical:.6,horizontal:.6},"pin-graph":{pinGraph:.6},"line-chart":.6,"pie-chart":.5};return t="undefined"!=s[e]?s[e]:t},getBarChartNewOptions:function(e){return{vertical:{height:.0792,marginBetweenBars:4.6,amountAnimationDuration:1500,minBarHeight:.00625,defaultBarHeight:568},multiVertical:{height:.0968,heightWithStaticToolTip:.075,marginBetweenBars:4.8,tooltipJMarginBottom:15,amountAnimationDuration:1500,minBarHeight:.00625,defaultBarHeight:568}}[e]}}),t.story.skinController=t.story.ProductSkinControler,t.story.getTablesFormat=function(){return{"table-perso-txlist1":{columns:["accountNumber","transaction","date","amount"],displayColumns:{date:{format:"MM/DD/YY",type:"date"},amount:{format:"###,###.00",type:"amount"}}},"table-perso-txlist1-new":{columns:["accountNumber","transaction","date","amount"],displayColumns:{date:{format:"MM/DD/YY",type:"date"},amount:{format:"###,###.00",type:"amount"}}},"table-perso-txlist2":{columns:["transaction","date","amount"],displayColumns:{date:{format:"MM/DD/YY",type:"date"},amount:{format:"###,###.00",type:"amount"}}},"table-perso-txlist3":{columns:["accountNumber","transaction","date","amount","date","balance"],displayColumns:{date:{format:"MM/DD/YY",type:"date"},amount:{format:"###,###.00",type:"amount"},balance:{format:"###,###.00",type:"amount"}}},"table-perso-txlist4":{columns:["date","transaction","amount"],displayColumns:{date:{format:"MM/DD/YY",type:"date"},amount:{format:"###,###.00",type:"amount"}}},"table-perso-txlist5":{columns:["date","transaction","amount","balance"],displayColumns:{date:{format:"MM/DD/YY",type:"date"},amount:{format:"###,###.00",type:"amount"},balance:{format:"###,###.00",type:"amount"}}},"table-perso-txlist6":{columns:["date","transaction","amount"],displayColumns:{date:{format:"MM/DD/YY",type:"date"},amount:{format:"###,###.00",type:"amount"}}},"table-default":{displayColumns:{date:{format:"MM/DD/YY",type:"date"},amount:{format:"###,###.00",type:"amount"}}},"table-perso-subscriptions":{columns:["icon","date","amount","cycle"],displayColumns:{date:{format:"MM/DD/YY",type:"date"},amount:{format:"###,###.00",type:"amount"}}}}}}(window,window.Personetics=window.Personetics||{},jQuery),function(e){e.story=e.story||{},e.story.glorifiSkinControler=e.story.ProductSkinControler.extend({initialize:function(){e.story.ProductSkinControler.prototype.initialize.call(this),e.projectConfiguration.setConfig({showTitle:!1})},registerBlocks:function(){e.story.ProductSkinControler.prototype.registerBlocks.call(this),this.registerBlock("account-selector",{version:"AS-NT-1"}),this.registerBlock("buttons",{version:"BTN-3",subType:"basic"}),this.registerBlock("buttons",{version:"LNK-2",subType:"detailedLink"}),this.registerBlock("buttons",{version:"QR-1",subType:"feedbackQuestion"}),this.registerBlock("buttons",{version:"FBU-1",subType:"feedbackUndoButton"}),this.registerBlock("buttons",{version:"RB-4",subType:"radio-button"}),this.registerBlock("pie-chart",{version:"PC-4"}),this.registerBlock("bar-chart",{version:"BC-2",subType:"single"}),this.registerBlock("bar-chart",{version:"CC-3",subType:"multi"}),this.registerBlock("bar-chart",{widthMode:"tablet",version:"BC-1",subType:"single"}),this.registerBlock("pin-graph",{version:"PC-V-2"}),this.registerBlock("pin-graph",{widthMode:"tablet",version:"PC-V-2"}),this.registerBlock("line-chart",{version:"LC-3"}),this.registerBlock("tranList",{version:"TL-1",subType:"basic"}),this.registerBlock("tranList",{version:"TL-FB",subType:"feedback"}),this.registerChartHelper("verticalHelper",{helperClass:e.utils.d3Helpers.VerticalChartHelperProduct}),this.registerChartHelper("pinGraphHelper",{helperClass:e.utils.d3Helpers.PinGraphChartHelperProduct}),this.registerChartHelper("collapseHelper",{helperClass:e.story.CollapseHelper}),this.registerChartHelper("lineChartHelper",{helperClass:e.utils.d3Helpers.NewLineChartHelper}),this.registerBlock("entity-selector",{version:"ES-1",subType:"icons"}),this.registerBlock("entity-selector",{version:"ES-1",subType:"cards"}),this.registerBlock("calendar",{version:"CL-6"}),this.registerBlock("textboxes",{version:"BX-1"}),this.registerBlock("tabs",{version:"TB-1"}),this.registerBlock("trivia",{version:"TRV-4"}),this.registerBlock("counter",{version:"SCR-1"}),this.registerBlock("entity-list",{version:"EL-3"})}}),e.story.skinController=e.story.glorifiSkinControler}((window,window.Personetics=window.Personetics||{}),jQuery),function(o,n){var r=o.UI.Handlebars;o.teaser=o.teaser||{},o.teaser.Block=Base.extend({$selectors:function(){return{$persoTeaserHeader:".perso-teaser-header",$persoBarChart:".pstory-bar-chart"}},initialize:function(e,t,s){this.parent=e,this.layoutInstructions=t,this.selectors=this.$selectors();e=this.getHtmlTemplateId(t.class,t),e&&(this.template=r.templates["block-"+e]),null!=s&&(this.defaultConfig=s),t=personetics.config.deviceType,this.remoteAssetsMgr=o.utils.remoteAssets,this.useRemoteAssets=o.projectConfiguration.getConfig("useRemoteAssets"),this.localBaseUrl=o.projectConfiguration.getConfig("localBaseUrl"),personetics.config.persoEBMode&&(this.localBaseUrl=o.utils.remoteAssets.getEBLocalBaseUrl("teaser")),!t||"Angular"!==t&&"RJS"!==t||(this.localBaseUrl=o.utils.remoteAssets.getWrapperLocalBaseUrl(t)),this.remoteBaseUrl=o.projectConfiguration.getConfig("remoteBaseUrl"),this.darkAsset=o.projectConfiguration.getConfig("darkModeAsset"),e=personetics.config.darkMode?this.darkAsset:"";this.localBaseUrl=this.localBaseUrl+e,this.remoteBaseUrl=this.remoteBaseUrl+e,this.layoutInstructions.baseUrl=this.useRemoteAssets?this.remoteBaseUrl:this.localBaseUrl,this.layoutInstructions.localBaseUrl=this.localBaseUrl,this.defaultAssetConfig=this.getDefaultAssetConfig(),this.enableChartsRTL=o.utils.projectConf.verifyConfig("enableChartsRTL",!0)},getDefaultAssetConfig:function(){return{defaultAssetName:o.utils.projectConf.verifyConfig("teasersConfigurations/base/defaultAssetName","category-default"),defaultAssetDirectory:o.utils.projectConf.verifyConfig("teasersConfigurations/base/defaultAssetDirectory","category_icons"),defaultAssetExtension:o.utils.projectConf.verifyConfig("teasersConfigurations/base/defaultIconExtension","svg"),loadingAssetMaxTries:2,loadingAssetTriesAttrName:"data-asset-loading-tries"}},getHtmlTemplateId:function(){throw"No template id defined for block"},initBlock:function(){},handleQueryData:function(e){this.renderData(e),this.bindEvents()},setVisible:function(){},beforeRender:function(e,t){this.el=e,this.layoutInstructions=t},render:function(e,t){this.layoutInstructions=this.layoutInstructions||t,this.el=e;t=this.template(t);e.append(t),this.frameEl=e.find(".pstory-block-frame").last()},renderAgain:function(e){e=this.template(e);n(this.frameEl).replaceWith(e)},fallbackAsset:function(e){var t,s=n(e);s.length&&(t=this.localBaseUrl+"/"+this.defaultAssetConfig.defaultAssetDirectory+"/"+this.defaultAssetConfig.defaultAssetName+"."+this.defaultAssetConfig.defaultAssetExtension,this.remoteAssetsMgr.setDefaultAsset(e,t),this.remoteAssetsMgr.removeAssetLoadingTriesAttr(e),s.off("error"))},isBlockPositionInViewport:function(e){var t=o.story.ProductSkinControler.prototype.getPersoneticsWrapper(e),s=t.scrollTop()+t.height();return n(e).offset().top-t.offset().top+n(e).height()<=s},renderData:function(){},afterRender:function(){},bindEvents:function(){},doScrollEvent:function(){},notifyReportEvent:function(t){var e=this.parent.config.insights.filter(function(e){return e.id===t.instanceId})[0],e=(t=o.utils.persoHelper.deepObjectExtend(t,{insightId:e.insightId,instanceId:e.id,userId:this.parent.config.userId}),o.projectConfiguration.getConfig("reporting"));o.utils.PEventReporting.setValue(t),o.utils.PEventReporting.notifyEvent(),e&&o.utils.PEventReporting.notifyReportingEventֿ(t)},handleEvent:function(e){"scroll"===e[0]&&this.el&&this.doScrollEvent(e)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.teaser=e.teaser||{},e.teaser.TextBlock=e.teaser.Block.extend({getHtmlTemplateId:function(e){switch(e){case"note":case"perso-note":return"txt-note";default:return"txt"}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e){e.teaser=e.teaser||{},e.teaser.DateBoxBlock=e.teaser.Block.extend({getHtmlTemplateId:function(){return"date-box"}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(i,a){i.teaser=i.teaser||{},i.teaser.D3BarChartBlock=i.teaser.Block.extend({CHART_TYPES:{MultiVertical:"multiVertical",MultiHorizontal:"multiHorizontal",SingleVertical:"vertical",SingleHorizontal:"horizontal"},getHtmlTemplateId:function(){return"bar-chart"},setThemeClasses:function(e){personetics.config.theme&&((personetics.config.theme.outflowColor||personetics.config.theme.inflowColor)&&i.utils.persoTheming.addClassToElement(e,"perso-theme-teaser-horizontal-bars"),personetics.config.theme.pickerColor&&i.utils.persoTheming.addClassToElement(e,"perso-theme-pickerColor-horizontal-months-color"))},beforeRender:function(e,t,s){i.teaser.Block.prototype.beforeRender.call(this,e,t),this.layoutInstructions.series=this.rebuildSeriesData(this.layoutInstructions.series),this.layoutInstructions.direction==this.CHART_TYPES.SingleHorizontal&&(this.layoutInstructions.series=[this.rebuildHorizontalSeriesData(this.layoutInstructions.series[0])]),this.setSelected(),this.barsDirection(),this.setThemeClasses(e),this.beforeRenderChart(e,s)},setSelected:function(){var s=this;this.hasSelected=!1,a.each(this.layoutInstructions.series,function(e,t){a.each(t,function(e,t){if(1==t.selected)return!(s.hasSelected=!0)})}),0==this.hasSelected&&a.each(this.layoutInstructions.series,function(e,t){0<t.length&&(t[t.length-1].selected=!0)})},render:function(e,t){this.renderSelectedBar(t),this.renderBlock(e,t)},renderBlock:function(e,t){i.teaser.Block.prototype.render.call(this,e,t);e=this.frameEl.find(".pstory-bar-chart");0<e.length&&this.renderBarChart(e,t)},renderSelectedBar:function(){},afterRender:function(){a(this.chartEl).addClass(this.layoutInstructions.direction),this.chartType==this.CHART_TYPES.MultiHorizontal&&this.reverseData()},barsDirection:function(){"vertical"==this.layoutInstructions.direction&&i.processor.PStoryConfig.isRtl()&&this.barsDirectionRTL()},barsDirectionRTL:function(){a.isArray(this.layoutInstructions.categories)&&this.layoutInstructions.categories.reverse(),a.isArray(this.layoutInstructions.series)&&a.each(this.layoutInstructions.series,function(e,t){a.isArray(t)&&t.reverse()})},beforeRenderChart:function(e,t){var s=this.layoutInstructions.direction||"vertical";1==this.layoutInstructions.series.length&&a.isArray(this.layoutInstructions.series[0])&&(this.layoutInstructions.series=this.layoutInstructions.series[0]),this.isSeries=Object.prototype.hasOwnProperty.call(this.layoutInstructions,"seriesLabels")&&0<this.layoutInstructions.seriesLabels.length&&0<this.layoutInstructions.seriesLabels[0].length,this.chartType=this.getChartType(s,this.isSeries),this.chartTypeHelper=this.chartType+"Helper",this.initChartHelper(this.chartTypeHelper),this.chartType==this.CHART_TYPES.MultiVertical?this.options=this.defaultConfig.columnChartMultiSeriesOptions:this.chartType==this.CHART_TYPES.MultiHorizontal?this.options=this.defaultConfig.barChartOptions:this.chartType==this.CHART_TYPES.SingleHorizontal?this.options=this.defaultConfig.singleHorizontalChartOptions:this.options="verticalBarAndBoxTeaser"==t?this.defaultConfig.columnChartAndBoxOptions:this.defaultConfig.columnChartOptions,Object.prototype.hasOwnProperty.call(this.defaultConfig,"desktopScreenWidth")&&"undefined"!==this.defaultConfig.desktopScreenWidth&&null!==this.defaultConfig.desktopScreenWidth&&(this.options.desktopScreenWidth=this.defaultConfig.desktopScreenWidth)},renderBarChart:function(e){var t=i.bind(this,this.handleClick);"multiHorizontal"==this.chartType?(this.options.palette=this.defaultConfig.barGraphPalette,this.options.paletteLabels=this.defaultConfig.barGraphLabelsPalette,this.chartHelper.prepareMultiHorizontalChart(this,e),this.chartHelper.renderMultiHorizontalChart(this,e,this.layoutInstructions)):("function"==typeof this.chartHelper.prepareChartData&&(this.layoutInstructions=this.chartHelper.prepareChartData(this.layoutInstructions,this.options)),this.chartHelper.prepareChart(this.layoutInstructions,this.options,t),this.chartHelper.renderChart(e))},reverseData:function(){this.layoutInstructions.series.reverse(),a.each(this.layoutInstructions.series,function(e,t){t.reverse()})},rebuildSeriesData:function(t){var n=[];return this.isSeries&&t.length?a.each(this.layoutInstructions.seriesLabels,function(e,s){var o=[];a.each(t,function(e,t){a.each(t,function(e,t){s==t.mode&&o.push(t)})}),n.push(o)}):n=[t],n},rebuildHorizontalSeriesData:function(e){for(var t=[],s=[],o=[],n=0,r=0,n=0;n<e.length;n++)for(r=0;r<e[n].length;r++)("In"==e[n][r].mode?s:o).unshift(e[n][r]);return t.push(s,o),t},handleClick:function(e,t){var s,o,n,r;0!=this.hasSelected&&0!=e.amount&&-1==this.frameEl.find("svg .perso-bar, svg .perso-chart-rect")[t].className.animVal.indexOf("selected")&&(o=this.frameEl.find("svg .perso-bar.selected, svg .perso-chart-rect.selected"),a.each(o,function(e,t){t.className.baseVal=i.utils.string.removeClass(t.className,"perso-selected")}),o=this.frameEl.find("svg .perso-label"),a.each(o,function(e,t){t.className.baseVal=i.utils.string.removeClass(t.className,"perso-selected")}),o=this.frameEl.find("svg .perso-xAxis-label"),a.each(o,function(e,t){t.className.baseVal=i.utils.string.removeClass(t.className,"perso-selected")}),Object.prototype.hasOwnProperty.call(e,"mode")?(o=this.frameEl.find("svg .perso-bar, svg .perso-chart-rect.In")[t],n=this.frameEl.find("svg .perso-bar, svg .perso-chart-rect.Out")[t],r=this.frameEl.find("svg .perso-label.In")[t],s=this.frameEl.find("svg .perso-label.Out")[t],o.className.baseVal=i.utils.string.addClass(o.className,"perso-selected"),n.className.baseVal=i.utils.string.addClass(n.className,"perso-selected"),r.className.baseVal=i.utils.string.addClass(r.className,"perso-selected"),s.className.baseVal=i.utils.string.addClass(s.className,"perso-selected")):(o=this.frameEl.find("svg .perso-bar, svg .perso-chart-rect")[t],n=this.frameEl.find("svg .perso-label")[t],r=this.frameEl.find("svg .perso-xAxis-label")[t],o.className.baseVal=i.utils.string.addClass(o.className,"perso-selected"),n.className.baseVal=i.utils.string.addClass(n.className,"perso-selected"),r&&(r.className.baseVal=i.utils.string.addClass(r.className,"perso-selected"))),this.parent.notifyEvent(this,"setSelectedValue",e.category),this.notifyReportEvent(e.category))},getChartType:function(e,t){var s=null;return"vertical"==e&&t?s="multiVertical":"horizontal"==e&&t?s="multiHorizontal":"vertical"==e?s="vertical":"horizontal"==e&&(s="horizontal"),s},initChartHelper:function(e){this.chartHelper=i.story.BlockChartFactory.generateHelperClazz(e,{})}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,d){s.teaser=s.teaser||{},s.teaser.BarChartBlock=s.teaser.Block.extend({getHtmlTemplateId:function(){return"pure-bar-chart"},$selectors:function(){return{$persoOutflowsBar:".pstory-bar-chart.perso-negative .perso-bar-chart-wrapper .perso-bar-wrapper.perso-simple-bar .perso-bar.perso-selected",$persoInflowsBar:".pstory-bar-chart:not(.perso-negative) .perso-bar-chart-wrapper .perso-bar-chart-container .perso-bars-wrapper .perso-bar-wrapper.perso-simple-bar .perso-bar.perso-selected",$persoMonthAmount:".perso-bar-chart-wrapper .perso-month-amount",$persoBarNotSelected:".perso-simple-bar .perso-bar:not(.perso-selected):not(.perso-indicator)"}},getBarChartConfigs:function(){return{indicatorType:"mtd-5"}},beforeRender:function(e,t){s.teaser.Block.prototype.beforeRender.call(this,e,t),this.series=t.series,t.isSeries=this.isSeries=Object.prototype.hasOwnProperty.call(this.layoutInstructions,"seriesLabels")&&0<this.layoutInstructions.seriesLabels.length&&0<this.layoutInstructions.seriesLabels[0].length,this.chartType=this.isSeries?"multiVertical":"vertical",this.setSelected(),this.texts=this.getTexts(),this.layoutInstructions.config=this.getBarChartConfigs(),this.prepereData(),this.options=this.defaultConfig[this.chartType],void 0===this.layoutInstructions.reversed&&(this.layoutInstructions.reversed=!1),this.mode=Object.prototype.hasOwnProperty.call(t,"mode")&&0<t.mode.length?t.mode.toLowerCase():"out",s.processor.PStoryConfig.isRtl()&&this.enableChartsRTL&&!this.layoutInstructions.reversed&&(this.layoutInstructions.series.reverse(),this.layoutInstructions.reversed=!0)},prepereData:function(){var s=this;this.prepereAccessibilityCategories(),this.setSeriesNamesForDisplay(),this.isSeries&&d.each(this.layoutInstructions.series,function(e,t){s.layoutInstructions.series[e].category=t[0].category})},getTexts:function(){return{accessibilityBarChartTitle:s.dictionary.getText("accessibilityBarChartPureTitle"),series:s.dictionary.getText("accessibilitySeries"),selected:s.dictionary.getText("accessibilitySelected"),notSelected:s.dictionary.getText("accessibilityNotSelected"),in:s.dictionary.getText("lblIn"),out:s.dictionary.getText("lblOut")}},prepereAccessibilityCategories:function(){var o=this,n=s.processor.PUtils.getUtilsInstance("dateUtils"),r=s.processor.PStoryConfig.getConfig("lang");d.each(this.layoutInstructions.categories,function(e,t){var s=n.getMonthNumber(r+"-short",t),s=n.getMonthName(r)[s]||t;o.layoutInstructions.series[e].displayLabel=t,o.layoutInstructions.series[e].accLabel=s})},setSeriesNamesForDisplay:function(){var e,t;this.isSeries&&(e=this.layoutInstructions.seriesNamesForDisplay,t=this.texts,null==e&&(e=this.layoutInstructions.seriesLabels.map(function(e){return t[e.toLowerCase()]})),this.seriesNamesForDisplay=e)},setSelected:function(){var t=this,o=!1,e=t.layoutInstructions.series;d.each(e,function(e,s){if(t.isSeries)d.each(s,function(e,t){if(1==t.selected)return s.selected||(s.selected=!0),!(o=!0)});else if(1==s.selected)return!(o=!0)}),0==o&&(e.length&&t.isSeries?d.each(e[e.length-1],function(e,t){null!=t&&(t.selected=!0)}):e[e.length-1].selected=!0)},render:function(e,t){s.teaser.Block.prototype.render.call(this,e,t);e=this.frameEl.find(".pstory-bar-chart");this.mode.length&&"out"==this.mode&&e.addClass("perso-negative"),0<e.length&&this.renderBars(e)},renderBars:function(e){var t;this.isSeries?(t=d(e).find(".perso-series-wrapper"),this.setBarsWidth(t),this.setBarsSeriesHeight(t)):(t=d(e).find(".perso-bar-wrapper"),this.setBarsWidth(t),this.setBarHeight(t))},setBarsWidth:function(e){parseFloat(d(e).css("width"))||d(e).css("width",100/this.layoutInstructions.categories.length+"%")},setBarHeight:function(e){var t=this.getMaxValue(),s=this.getMinValue();this.calculateBarsHeight(e,s,t)},setBarsSeriesHeight:function(e){var t=this.getSeiresMaxValue();this.calculateSeriesBarsHeight(e,t)},calculateBarsHeight:function(e,t,s){var a=this,l=!1,o=s,c=(t<0&&(0<=s?s+=Math.abs(t):l=!0),this.prepareCalculateBarHeightOptions(s)),p=a.calculateBarHeightByValue(o,c);d.each(e,function(e,t){var s=a.series[e].value,e=a.series[e].indicator,o=!1,n=(s<=e&&(e=s,o=!0),a.calculateBarHeightByValue(s,c)),r=a.calculateBarHeightByValue(e,c),i=n.normalValue,r=r.normalValue,s=(d(t).css("height",i+"px"),e===s||0===e?d(t).find(".perso-indicator").addClass("top-bar"):d(t).find(".perso-indicator").addClass("bottom-bar"),d(t).find(".perso-indicator").css("height",r+"px"),o&&d(t).find(".perso-indicator").addClass("perso-indicator-full"),0);n.y<0?(d(t).addClass("perso-negative-bar"),0==l&&(s=p.normalValue)):s=p.normalValue-i,d(t).css("top",s+"px"),d(t).find(".perso-indicator").css("top",-1*r+"px")})},calculateSeriesBarsHeight:function(e,t){var n=this,r=this.prepareCalculateBarHeightOptions(t);e.length&&d.each(e,function(o,e){e=d(e).find(".perso-bar-wrapper");e.length&&d.each(e,function(e,t){var s=Math.abs(n.series[o][e].value),e=n.series[o][e].mode||"",e=(d(t).addClass("perso-"+e.toLowerCase()),n.calculateBarHeightByValue(s,r).normalValue);d(t).css("height",e+"px"),d(t).css("top","calc(100% - "+e+"px)")})})},prepareCalculateBarHeightOptions:function(e){var t=this.el.find(".teaser-body").length?this.el.find(".teaser-body").height():72,s=this.options.minBarHeight*t,t=this.options.height*t;return{m:t/Math.abs(e),minHeight:s,containerHeight:t}},calculateBarHeightByValue:function(e,t){e=t.m*e;return{normalValue:Math.abs(e+t.minHeight),y:e}},getMaxValue:function(){return Math.max.apply(Math,this.series.map(function(e){return e.value||0}))},getMinValue:function(){return Math.min.apply(Math,this.series.map(function(e){return e.value||0}))},getSeiresMaxValue:function(){var s=0;return this.isSeries&&d.each(this.series,function(e,t){t=Math.max.apply(Math,t.map(function(e){return e.value||0}));s<t&&(s=t)}),s},convertPercentToSimpleValue:function(e,t){return t/100*e},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.outflowColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoOutflowsBar),"perso-theme-outflowColor-background"),personetics.config.theme.inflowColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoInflowsBar),"perso-theme-inflowColor-background"),personetics.config.theme.headerColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoMonthAmount),"perso-theme-headerColor-color"),personetics.config.theme.greyLightColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBarNotSelected),"perso-theme-greyLightColor-background"))},afterRender:function(){this.frameEl&&(this.frameEl.closest(".pstory-dialog-frame").addClass("perso-pure-bar-chart-dialog"),this.setBarsWrapperHeight(),this.setDefaultBar(),this.setMonthAmount(this.series[this.getDefaultIndex()].label||this.series[this.getDefaultIndex()].value),this.setThemeClasses()),this.renderAccessibility()},renderAccessibility:function(){s.utils.accessibility.addAltTextToElement(this.frameEl,this.texts.accessibilityBarChartTitle)},setBarsWrapperHeight:function(){var e=this.el.find(".teaser-body").length?this.el.find(".teaser-body").height():72,t=this.frameEl.find(".perso-bars-wrapper"),e=this.options.height*e;t.length&&d(t).height(e)},setDefaultBar:function(){var e=this.frameEl.find(".perso-bar.perso-selected");this.isSeries&&this.setTooltipPosition(e.attr("pstory-category")),this.createDefaultBarTransElem(e)},getDefaultIndex:function(){var s=0;return d.each(this.layoutInstructions.series,function(e,t){if(t.selected)return s=e,!1}),s},getSelectedBarIndex:function(){return this.selectedBarIndex||0},createDefaultBarTransElem:function(e){d(e).each(function(e,t){d(t).append(d("<div class='perso-animated-bar'></div>"))})},bindEvents:function(){},changeSelectedElm:function(e){var t=this.frameEl.find(".perso-bar");t.removeClass("perso-selected perso-selected-animated"),t.find(".perso-filler-bar").remove(),t.filter("[pstory-category='"+e+"']").addClass("perso-selected").attr("aria-selected","true"),this.updateSelectedAccText()},setMonthAmount:function(e){var t=this.frameEl.find(".perso-month-amount");t&&0<t.length&&t.html(e)},setTooltipPosition:function(e){var t=this.frameEl.find(".perso-series .perso-bar.perso-selected").parents(".perso-series"),s=this.frameEl.find(".perso-tooltip"),e=(this.setTooltipLabels(s,e),this.getSeriesHigherBar(t));t.length&&s.length&&(e=e+this.options.tooltipJMarginBottom,t=d(t).offset().left+d(t).width()/2-d(s).outerWidth()/2,s.css({bottom:e,left:t}))},setTooltipLabels:function(s,t){var o,n=this.seriesNamesForDisplay;s.length&&(d(s).empty(),o=this.series.filter(function(e){return e.category==t})[0],d.each(this.layoutInstructions.seriesLabels,function(e,t){t.toLowerCase()==o[e].mode.toLowerCase()&&(d('<span class="perso-tooltip-label"></span>').appendTo(s),d(".perso-tooltip-label").last().html(n[e]+" "+o[e].label))}))},getSeriesHigherBar:function(e){var t;return e&&(e=d(e).find(".perso-bar").map(function(){return d(this).height()}).get(),t=Math.max.apply(null,e)),t||0},doAnimations:function(){var e,t,s,o=this;o.isDraw||(e=!o.isSeries&&o.series[o.getDefaultIndex()].value<0?"perso-negative":"",(t=this.frameEl.find(".perso-animated-bar")).length&&(t.addClass("perso-filler-bar").addClass(e),o.amountAnimation(d(o.frameEl.find(".perso-month-amount"))),o.isDraw=!0),0<this.benchmarkLines.length&&(s=this.beforeRenderBenchmark(),setTimeout(function(){o.renderBenchmark(s)},this.benchmarkConfig.benchmarkDrawDelay)))},amountAnimation:function(e){var s=this,o=e.find(".perso-int-num"),n=e.find(".perso-currency");d(o).each(function(){var e=d(this).text(),t=e.match(/[^0-9]/g)||[];d(n).addClass("perso-fade-in"),d(o).addClass("perso-fade-in"),d(this).attr("Counter",0).animate({Counter:parseFloat(e.replace(/[^0-9]/g,""))},{duration:s.options.amountAnimationDuration,easing:"swing",step:function(e){e=Math.ceil(e);d(this).text(s.formatNumbers(e,t))}})})},formatNumbers:function(e,t){t=t[0]||",",e=e.toString().split();return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),e.join()}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(s,n){s.teaser=s.teaser||{},s.teaser.PinGraphChartBlock=s.teaser.Block.extend({getHtmlTemplateId:function(){return"pure-pinGraph-chart"},$selectors:function(){return{$persoSelectedBarIn:".pstory-pure-pinGraph-chart.In .perso-pinGraph-container .perso-pinGraph-raw:first-child .perso-raw-wrapper .perso-bar-wrapper .perso-pinGraph-bar",$persoSelectedBarOut:".pstory-pure-pinGraph-chart.Out .perso-pinGraph-container .perso-pinGraph-raw:first-child .perso-raw-wrapper .perso-bar-wrapper .perso-pinGraph-bar",$persoDateText:".perso-pinGraph-container .perso-pinGraph-raw .perso-raw-wrapper .perso-date-txt",$persoBars:".pstory-pure-pinGraph-chart .perso-pinGraph-container .perso-pinGraph-raw:not(:first-child) .perso-raw-wrapper .perso-bar-wrapper .perso-pinGraph-bar"}},beforeRender:function(e,t){t&&(s.teaser.Block.prototype.beforeRender.call(this,e,t),this.series=this.limitPinChartData(3,t.series),this.categories=this.limitPinChartData(3,t.categories),this.chartType=t.type,this.maxValue=this.getMaxValue(),this.options=this.defaultConfig.pinGraphChartOptions,this.mode=Object.prototype.hasOwnProperty.call(t,"mode")&&0<t.mode.length?t.mode.toLowerCase():"")},render:function(e,t){s.teaser.Block.prototype.render.call(this,e,t);e=this.frameEl.find(".pstory-pure-pinGraph-chart");this.mode.length&&"out"==this.mode&&e.addClass("perso-negative"),0<e.length&&this.renderPinChart(e)},renderPinChart:function(e){var s=this,e=n(e).find(".perso-pinGraph-raw"),o=Math.abs(s.maxValue);e.length&&n.each(e,function(e,t){e<s.series.length&&(n(t).css("height","calc( 100% / "+s.series.length+")"),s.setCategoryText(t,e),s.setBarWidthByValue(t,e,o))})},setCategoryText:function(e,t){e=n(e).find(".perso-date-txt");e.length&&n(e).text(this.categories[t])},setBarWidthByValue:function(e,t,s){e=n(e).find(".perso-pinGraph-bar");e.length&&(t=Math.abs(this.series[t].value)/s*this.options.maxWidthBarPercent,n(e).css("width","calc( "+t+"%)"),n(e).css("max-width","calc( "+t+"%)"))},setAmount:function(e,t){e=n(e).find(".perso-pinGraph-amount");e.length&&n(e).html(this.series[t].label)},getMaxValue:function(){return Math.max.apply(Math,this.series.map(function(e){return e.value}))},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.inflowColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoSelectedBarIn),"perso-theme-inflowColor-background"),personetics.config.theme.outflowColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoSelectedBarOut),"perso-theme-outflowColor-background"),personetics.config.theme.pickerColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoDateText),"perso-theme-pickerColor-color"),personetics.config.theme.greyLightColor&&s.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoBars),"perso-theme-greyLightColor-background"))},afterRender:function(){var e=s.dictionary.getText("accessibilityPinGraph"),t=s.dictionary.getText("accessibilityHighlighted");s.utils.accessibility.addAltTextToElement(this.frameEl,e),this.frameEl.find(".perso-pinGraph-raw:last-child").append('<div class="perso-accessibility-read">. '+t+"</div>"),this.setThemeClasses()},limitPinChartData:function(e,t){var s=t||[];return(s=t&&t.length>e?t.slice(Math.max(t.length-e)):s).reverse()}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e,n,r){var c=e.d3;n.teaser=n.teaser||{},n.teaser.PieChartBlock=n.teaser.Block.extend({getHtmlTemplateId:function(){return"pie-chart"},beforeRender:function(e,t){n.teaser.Block.prototype.beforeRender.call(this,e,t),this.options=this.defaultConfig.pieOptions,this.cornerRadiusPie=void 0!==this.options.arcs.cornerRadius&&void 0!==this.options.arcs.cornerRadius.radiusCorner?this.options.arcs.cornerRadius.radiusCorner:9,this.setTotal(t),this.colors=c.scale.ordinal().range(this.defaultConfig.pieGraphPalette()),this.grayscaleId="grayscale_"+ +new Date},pie:function(){var t=.05*(this.totalAmountInt||0);return c.layout.pie().padAngle(-.015).value(function(e){return e.value+t})},setTotal:function(e){var t=e.centerText;this.totalText=t,Object.prototype.hasOwnProperty.call(e,"slices")&&0<e.slices.length?(t=e.slices.reduce(function(e,t){return{value:e.value+t.value}}),this.totalAmountInt=t.value):this.totalAmountInt=0},getGraphPalette:function(){return this.defaultConfig.pieGraphPalette},render:function(e,t){n.teaser.Block.prototype.render.call(this,e,t),this.frameEl=e.find(".pstory-block-frame").last();e=this.frameEl.find(".pstory-pie-chart");0<e.length&&this.renderPieChart(e,t)},renderPieChart:function(e,t){this.setPieSize(),c.selection.prototype.moveToFront=function(){return this.each(function(){var e=this.parentNode;e.parentNode.appendChild(e)})},this.arc=c.svg.arc().innerRadius(this.innerRadius).outerRadius(this.outerRadius),this.arcOver=c.svg.arc().innerRadius(this.innerRadiusOver).outerRadius(this.outerRadiusOver),this.renderPieBase(e),this.renderShadowFilter(this),this.renderPie(e,t)},setPieSize:function(e){e=e||{heightPercent:.7,innerRadiusPercent:.17,outerRadiusPercent:.2,innerRadiusOverPercent:.165,outerRadiusOverPercent:.22},this.margin={top:0,right:19,bottom:0,left:19},this.width=this.frameEl.find(".pstory-pie-chart").width(),this.height=this.width*e.heightPercent,this.radius=this.width/2.3;var t=e.innerRadiusPercent*this.width,s=e.outerRadiusPercent*this.width,o=e.innerRadiusOverPercent*this.width,e=e.outerRadiusOverPercent*this.width;this.innerRadius=this.radius-t,this.outerRadius=this.radius-s,this.innerRadiusOver=this.radius-o,this.outerRadiusOver=this.radius-e},renderPieBase:function(e){this.svg=this.renderPieSvgBase(e)},renderPieSvgBase:function(e){if(e)return c.select(e.get(0)).append("svg").attr("focusable",!1).attr("width",this.width).attr("height",this.height).append("g").attr("transform","translate("+this.width/2+","+this.height/2+")")},renderPie:function(e,t){this.renderArcs(t),this.renderPieTitle(this.totalText)},renderArcs:function(e){var s=this;s.svg.selectAll(".arc").data(s.pie()(e.slices)).enter().append("g").attr("class","perso-arc").append("path").attr("d",s.arc).attr("class",function(e){var t="";return e.data.highlight&&(t+="perso-selected"),t}).style("fill",function(e,t){return s.colors(t)}).on("click",function(e,t){Object.prototype.hasOwnProperty.call(e.data,"highlight")||s.onPieItemClick(e,t,this)})},renderTicks:function(e,t){e&&e.svg.append("g").attr("class","perso-ticks").selectAll("line").data(e.pie()(t)).enter().append("line").attr("class","tick").attr("x1",0).attr("x2",0).attr("y1",.8*-e.radius).attr("y2",.9*-e.radius).attr("stroke","gray").attr("transform",function(e){return"rotate("+(e.startAngle+e.endAngle)/2*(180/Math.PI)+")"})},renderPieLabels:function(s,e){s&&s.svg.append("g").attr("class","perso-pie-labels").attr("transform","translate(8,0)").selectAll("text").data(s.pie()(e)).enter().append("text").attr("class","perso-pie-label").attr("transform",function(e){var t=s.radius+20,e=(e.startAngle+e.endAngle)/2;return"translate("+t*Math.sin(e)+","+-t*Math.cos(e)+")"}).attr("dy","-0.5em").attr("text-anchor","middle").text(function(e){return e.data.category}).call(s.wrapLabelText,.28*screen.width)},renderPieTitle:function(e){this.svg.append("text").attr("class","perso-total-txt").attr("text-anchor","middle").attr("dy",".25em").style("font-size",this.options.centerText.fontSize).style("font-weight",this.options.centerText.fontWeight).text(e)},renderPieAmount:function(e){this.svg.append("text").attr("class","perso-total-amount").attr("dy",".9em").text(e)},onPieItemClick:function(e,t,s){var o=r(".perso-arc path.perso-selected"),o=(o.length&&(o[0].className.baseVal=n.utils.string.removeClass(o[0].className,"perso-selected")),this.frameEl.find(".pstory-pie-chart svg .perso-pie-label.selected")),o=(o.length&&(o[0].className.baseVal=n.utils.string.removeClass(o[0].className,"perso-selected")),c.select(s).attr("class","perso-selected"),this.frameEl.find(".pstory-pie-chart svg .perso-pie-label"));void 0!==o&&o.length>t&&((s=o[t]).className.baseVal=n.utils.string.addClass(s.className,"perso-selected")),this.handleClick(e,t)},renderShadowFilter:function(e){var t=e.options.arcs.filter,o=e.svg;t&&r.each(t,function(e,t){var s;t&&((s=o.append("filter").attr("id",t.id)).append("feGaussianBlur").attr("in",t.in).attr("stdDeviation",t.stdDeviation),s.append("feOffset").attr("dx",t.dxOffset).attr("dy",t.dyOffset),(s=s.append("feMerge")).append("feMergeNode"),s.append("feMergeNode").attr("in",t.in))})},handleClick:function(e){e.data&&(e=e.data),this.parent.notifyEvent(this,"setSelectedValue",e.category)},getSelectedPathIndex:function(e){var s=0;return e.length&&r.each(e,function(e,t){if("perso-selected"==t.className.baseVal)return s=e,!1}),s},wrapLabelText:function(e,l){e.each(function(){for(var e,t=c.select(this),s=t.text().split(/\s+/).reverse(),o=[],n=0,r=t.attr("y"),i=parseFloat(t.attr("dy")),a=t.text(null).append("tspan").attr("x",0).attr("y",r).attr("dy",i+"em");e=s.pop();)o.push(e),a.text(o.join(" ")),a.node().getComputedTextLength()>l&&(o.pop(),a.text(o.join(" ")),o=[e],a=t.append("tspan").attr("x",0).attr("y",r).attr("dy",.95*++n*1.5+i+"em").text(e))})}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e,r,n){var c=e.d3;r.teaser=r.teaser||{},r.teaser.NewPieChartBlock=r.teaser.Block.extend({getHtmlTemplateId:function(){return"pie-chart"},beforeRender:function(e,t){r.teaser.Block.prototype.beforeRender.call(this,e,t),this.options=this.defaultConfig.pieOptions,this.cornerRadiusPie=void 0!==this.options.arcs.cornerRadius&&void 0!==this.options.arcs.cornerRadius.radiusCorner?this.options.arcs.cornerRadius.radiusCorner:9,this.setTotal(t),this.colors=c.scale.ordinal().range(this.defaultConfig.pieGraphPalette()),this.grayscaleId="grayscale_"+ +new Date},pie:function(){var t=.05*(this.totalAmountInt||0);return c.layout.pie().padAngle(-.015).value(function(e){return e.value+t})},setTotal:function(e){var t=e.centerText;this.totalText=t,this.totalFromSrcToArr=[],t?this.totalFromSrcToArr=t.split(/<br>|<\/br>/):r.log("Center text is empty");for(var s=0;s<this.totalFromSrcToArr.length-1;s++){var o,n=new RegExp(/^(\<[^>]+\>)+/g).exec(this.totalFromSrcToArr[s]);n&&(o=n[0].replace(/</g,"</"),this.totalFromSrcToArr[s].endsWith(o)||(this.totalFromSrcToArr[s]+=o,this.totalFromSrcToArr[s+1]=n[0]+this.totalFromSrcToArr[s+1]))}Object.prototype.hasOwnProperty.call(e,"slices")&&0<e.slices.length?(t=e.slices.reduce(function(e,t){return{value:e.value+t.value}}),this.totalAmountInt=t.value):this.totalAmountInt=0},getGraphPalette:function(){return this.defaultConfig.pieGraphPalette},render:function(e,t){r.teaser.Block.prototype.render.call(this,e,t),this.frameEl=e.find(".pstory-block-frame").last();e=this.frameEl.find(".pstory-pie-chart");0<e.length&&this.renderPieChart(e,t)},renderPieChart:function(e,t){this.setPieSize(),c.selection.prototype.moveToFront=function(){return this.each(function(){var e=this.parentNode;e.parentNode.appendChild(e)})},this.arc=c.svg.arc().innerRadius(this.innerRadius).outerRadius(this.outerRadius),this.arcOver=c.svg.arc().innerRadius(this.innerRadiusOver).outerRadius(this.outerRadiusOver),this.renderPieBase(e),this.renderShadowFilter(this),this.renderPie(e,t)},setPieSize:function(e){e=e||{heightPercent:.7,innerRadiusPercent:.17,outerRadiusPercent:.23,innerRadiusOverPercent:.145,outerRadiusOverPercent:.24},this.margin={top:0,right:19,bottom:0,left:19},this.width=this.frameEl.find(".pstory-pie-chart").width(),this.height=this.width*e.heightPercent,this.radius=this.width/2.3;var t=e.innerRadiusPercent*this.width,s=e.outerRadiusPercent*this.width,o=e.innerRadiusOverPercent*this.width,e=e.outerRadiusOverPercent*this.width;this.innerRadius=this.radius-t,this.outerRadius=this.radius-s,this.innerRadiusOver=this.radius-o,this.outerRadiusOver=this.radius-e},renderPieBase:function(e){this.svg=this.renderPieSvgBase(e)},renderPieSvgBase:function(e){if(e)return c.select(e.get(0)).append("svg").attr("focusable",!1).attr("width",this.width).attr("height",this.height).append("g").attr("transform","translate("+this.width/2+","+this.height/2+")")},renderPie:function(e,t){this.renderArcs(t);for(var s=this.totalFromSrcToArr.length,o=0;o<s;o++)this.totalFromSrcToArr[o]=this.totalFromSrcToArr[o]||"",this.renderPieTitle(this.totalFromSrcToArr[o],o,1==s)},renderArcs:function(e){var s=this;s.svg.selectAll(".arc").data(s.pie()(e.slices)).enter().append("g").attr("class","perso-arc").append("path").attr("d",s.arc).attr("class",function(e){var t="";return e.data.highlight&&(t+="perso-selected"),t}).style("fill",function(e,t){return s.colors(t)}).on("click",function(e,t){Object.prototype.hasOwnProperty.call(e.data,"highlight")||s.onPieItemClick(e,t,this)})},renderTicks:function(e,t){e&&e.svg.append("g").attr("class","perso-ticks").selectAll("line").data(e.pie()(t)).enter().append("line").attr("class","tick").attr("x1",0).attr("x2",0).attr("y1",.8*-e.radius).attr("y2",.9*-e.radius).attr("stroke","gray").attr("transform",function(e){return"rotate("+(e.startAngle+e.endAngle)/2*(180/Math.PI)+")"})},renderPieLabels:function(s,e){s&&s.svg.append("g").attr("class","perso-pie-labels").attr("transform","translate(8,0)").selectAll("text").data(s.pie()(e)).enter().append("text").attr("class","perso-pie-label").attr("transform",function(e){var t=s.radius+20,e=(e.startAngle+e.endAngle)/2;return"translate("+t*Math.sin(e)+","+-t*Math.cos(e)+")"}).attr("dy","-0.5em").attr("text-anchor","middle").text(function(e){return e.data.category}).call(s.wrapLabelText,.28*screen.width)},renderPieTitle:function(e,t,s){s=s?.25:.9*t-.3;this.svg.append("text").attr("class","perso-total-txt").attr("text-anchor","middle").attr("dy",s+"em").style("font-size",this.options.centerText.fontSize).style("font-weight",this.options.centerText.fontWeight).html(e)},onPieItemClick:function(e,t,s){var o=n(".perso-arc path.perso-selected"),o=(o.length&&(o[0].className.baseVal=r.utils.string.removeClass(o[0].className,"perso-selected")),this.frameEl.find(".pstory-pie-chart svg .perso-pie-label.selected")),o=(o.length&&(o[0].className.baseVal=r.utils.string.removeClass(o[0].className,"perso-selected")),c.select(s).attr("class","perso-selected"),this.frameEl.find(".pstory-pie-chart svg .perso-pie-label"));void 0!==o&&o.length>t&&((s=o[t]).className.baseVal=r.utils.string.addClass(s.className,"perso-selected")),this.handleClick(e,t)},renderShadowFilter:function(e){var t=e.options.arcs.filter,o=e.svg;t&&n.each(t,function(e,t){var s;t&&((s=o.append("filter").attr("id",t.id)).append("feGaussianBlur").attr("in",t.in).attr("stdDeviation",t.stdDeviation),s.append("feOffset").attr("dx",t.dxOffset).attr("dy",t.dyOffset),(s=s.append("feMerge")).append("feMergeNode"),s.append("feMergeNode").attr("in",t.in))})},handleClick:function(e){e.data&&(e=e.data),this.parent.notifyEvent(this,"setSelectedValue",e.category)},getSelectedPathIndex:function(e){var s=0;return e.length&&n.each(e,function(e,t){if("perso-selected"==t.className.baseVal)return s=e,!1}),s},wrapLabelText:function(e,l){e.each(function(){for(var e,t=c.select(this),s=t.text().split(/\s+/).reverse(),o=[],n=0,r=t.attr("y"),i=parseFloat(t.attr("dy")),a=t.text(null).append("tspan").attr("x",0).attr("y",r).attr("dy",i+"em");e=s.pop();)o.push(e),a.text(o.join(" ")),a.node().getComputedTextLength()>l&&(o.pop(),a.text(o.join(" ")),o=[e],a=t.append("tspan").attr("x",0).attr("y",r).attr("dy",.95*++n*1.5+i+"em").text(e))})}})}(window,window.Personetics=window.Personetics||{},jQuery),function(s,e){s.teaser=s.teaser||{},s.teaser.D3PinGraphChartBlock=s.teaser.D3BarChartBlock.extend({getHtmlTemplateId:function(){return"pinGraph-chart"},render:function(e,t){s.teaser.D3BarChartBlock.prototype.renderSelectedBar.call(this,t),this.renderBlock(e,t)},renderBlock:function(e,t){s.teaser.Block.prototype.render.call(this,e,t);e=this.frameEl.find(".pstory-pinGraph-chart");0<e.length&&this.renderBarChart(e,t)},renderBarChart:function(e){"function"==typeof this.chartHelper.prepareChartData&&(this.layoutInstructions=this.chartHelper.prepareChartData(this.layoutInstructions,this.options)),this.chartHelper.prepareChart(this.layoutInstructions,this.options),this.chartHelper.renderChart(e)},beforeRenderChart:function(){1==this.layoutInstructions.series.length&&e.isArray(this.layoutInstructions.series[0])&&(this.layoutInstructions.series=this.layoutInstructions.series[0]),this.chartType=this.getChartType(),this.chartTypeHelper=this.chartType+"Helper",this.initChartHelper(this.chartTypeHelper),this.options=this.defaultConfig.pinGraphChartOptions,Object.prototype.hasOwnProperty.call(this.defaultConfig,"desktopScreenWidth")&&"undefined"!==this.defaultConfig.desktopScreenWidth&&null!==this.defaultConfig.desktopScreenWidth&&(this.options.desktopScreenWidth=this.defaultConfig.desktopScreenWidth)},getChartType:function(){return"pinGraph"}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(o,e){o.teaser=o.teaser||{},o.teaser.lineChartBlock=o.teaser.Block.extend({getHtmlTemplateId:function(){return"line-chart"},beforeRender:function(e,t){o.teaser.Block.prototype.beforeRender.call(this,e,t),this.texts={},this.beforeRenderChart()},getGraphPalette:function(){return this.defaultConfig.lineChartPalette},beforeRenderChart:function(){this.chartType="lineChart",1==this.layoutInstructions.series.length&&e.isArray(this.layoutInstructions.series[0])&&(this.layoutInstructions.series=this.layoutInstructions.series[0]),this.chartTypeHelper=this.chartType+"Helper",this.initChartHelper(this.chartTypeHelper),this.options=this.defaultConfig.lineChartOptions},render:function(e,t){o.teaser.Block.prototype.render.call(this,e,t);var s=this.frameEl.find(".pstory-line-chart");0<s.length&&(e=s,s=this.options,this.chartHelper.prepareChart(t,s),this.chartHelper.renderChart(e))},initChartHelper:function(e){this.chartHelper=o.story.BlockChartFactory.generateHelperClazz(e,{})}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e,o,t){var s=e.d3;o.teaser=o.teaser||{},o.teaser.NewlineChartBlock=o.teaser.Block.extend({getHtmlTemplateId:function(){return"line-chart"},$selectors:function(){return{$pstoryLineChart:".pstory-line-chart"}},beforeRender:function(e,t){o.teaser.Block.prototype.beforeRender.call(this,e,t),this.texts={},this.beforeRenderChart()},getGraphPalette:function(){return this.defaultConfig.lineChartPalette},beforeRenderChart:function(){this.chartType="lineChart",1==this.layoutInstructions.series.length&&t.isArray(this.layoutInstructions.series[0])&&(this.layoutInstructions.series=this.layoutInstructions.series[0]),this.chartTypeHelper=this.chartType+"Helper",this.initChartHelper(this.chartTypeHelper),this.options=this.defaultConfig.lineChartOptions},render:function(e,t){o.teaser.Block.prototype.render.call(this,e,t);var s=this.frameEl.find(".pstory-line-chart");0<s.length&&(e=s,s=this.options,this.chartHelper.prepareChart(t=t,s),this.chartHelper.renderChart(e,t))},setThemeClasses:function(e){personetics.config.theme&&(personetics.config.theme.brandColor&&o.utils.persoTheming.addClassToElement(e.find(this.selectors.$pstoryLineChart),"perso-theme-brandColor-teaser-line-chart"),personetics.config.theme.backgroundColor&&o.utils.persoTheming.addClassToElement(e.find(this.selectors.$pstoryLineChart),"perso-theme-backgroundColor-teaser-line-chart"))},afterRender:function(e){this.setThemeClasses(e)},initChartHelper:function(e){this.chartHelper=o.story.BlockChartFactory.generateHelperClazz(e,{})},cloneD3Elm:function(e){if(e.length)return e=s.select(e).node(),s.select(e.parentNode.insertBefore(e.cloneNode(!0),e.nextSibling))}})}(window,window.Personetics=window.Personetics||{},jQuery),function(n,l){n.teaser=n.teaser||{},n.teaser.CalendarBlock=n.teaser.Block.extend({$selectors:function(){return{$persoCalendarDayDot:".perso-calendar-day .perso-dot",$persoCalendarDayNumber:".perso-calendar-body-main .perso-calendar-container .perso-calendar-inner-container .perso-calendar-day span",$persoOutgoingLabel:".outgoing-label",$persoOutgoingAmount:".outgoing-amount",$persoIngoingLabel:".ingoing-label",$persoIngoingAmount:".ingoing-amount",$persoCalendarInnerContainer:".perso-calendar-inner-container"}},initialize:function(e,s){this.parent=e,this.layoutInstructions=s,this.selectors=this.$selectors();var e=this.getHtmlTemplateId(s.class),o=(e&&(this.template=n.UI.Handlebars.templates[e]),[]);Object.prototype.hasOwnProperty.call(s,"highlightedSrc")&&0<s.highlightedSrc.length&&s.highlightedSrc.forEach(function(e,t){Object.prototype.hasOwnProperty.call(s,"markedRange")&&s.markedRange.length>t&&o.push({startRangeDate:moment(e).add(-1*s.markedRange[t],"day"),endRangeDate:moment(e).add(s.markedRange[t],"day")})}),s.rangeEventsDates=o},getHtmlTemplateId:function(){return"Calendar"},setThemeClasses:function(e){personetics.config.theme&&(personetics.config.theme.outflowColor&&n.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoOutgoingAmount),"perso-theme-outflowColor-color"),personetics.config.theme.inflowColor&&n.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoIngoingAmount),"perso-theme-inflowColor-color"),personetics.config.theme.datesColor&&(n.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoCalendarDayDot),"perso-theme-datesColor-background"),n.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoCalendarDayNumber),"perso-theme-datesColor-color")),personetics.config.theme.brandColor&&(n.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoOutgoingLabel),"perso-theme-brandColor-color"),n.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoIngoingLabel),"perso-theme-brandColor-color")),personetics.config.theme.backgroundDarkColor&&n.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoCalendarInnerContainer),"perso-theme-backgroundDarkColor-background"))},render:function(e,t){this.layoutInstructions=this.layoutInstructions||t,this.el=e,this.frameEl=e.find(".pstory-block-frame").last()},afterRender:function(e,t){for(var s=l(e),e=l(e).closest(".perso-teaser-template"),o=s.find(".perso-calendar-days"),n=(e&&0<e.length&&(e.hasClass("perso-teaser-template-calendar")||e.addClass("perso-teaser-template-calendar")),""),r=this.dateDiffIndays(moment(t.startDate),moment(t.endDate)),i=moment(t.startDate),n=this.shiftingDaysFromRange(i,n,r,t),a=0;a<=r;a++)n+=this.renderDay(i,a,a==r,t),i.add(1,"day");o.html(n),this.setNumberOfRowsClass(o),this.setThemeClasses(s)},setNumberOfRowsClass:function(e){35<e.find(".perso-calendar-day").length&&e.addClass("perso-six-rows")},dateDiffIndays:function(e,t){e=new Date(e),t=new Date(t);return Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())-Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))/864e5)},shiftingDaysFromRange:function(e,t){for(var s=n.projectConfiguration.getConfig("calendarSunFirst")?e.day():e.isoWeekday()-1,o=0;o<s;o++)t+='<div class="perso-calendar-day perso-disabled"></div>';return t},renderDay:function(t,e,s,o){t=moment(t);var n={time:moment(t).valueOf(),className:["perso-calendar-day","perso-available"]},e=(0!==t.day()&&0!==e||n.className.push("perso-left-edge"),6!==t.day()&&!s||n.className.push("perso-right-edge"),o.actionableSrc.filter(function(e){return t.isSame(e.date,"day")})),s="",e=(e&&0<e.length?(s=e[0],n.className.push("perso-bold")):n.className.push("perso-disabled"),o.rangeEventsDates.forEach(function(e){moment(t).isBetween(e.startRangeDate,e.endRangeDate)&&n.className.push("perso-range"),t.isSame(moment(e.startRangeDate),"day")&&n.className.push("first-perso-calendar-range"),t.clone().add(-1,"d").isSame(moment(e.startRangeDate),"day")&&n.className.push("after-first-perso-calendar-range"),t.isSame(moment(e.endRangeDate),"day")&&n.className.push("perso-range last-perso-calendar-range"),t.clone().add(1,"d").isSame(moment(e.endRangeDate),"day")&&n.className.push("perso-range before-last-perso-calendar-range")}),n.className.push("perso-"+n.time),document.createElement("div")),o=(e.className=n.className.join(" "),t.get("date")<10?"0"+t.get("date"):t.get("date"));return e.innerHTML="<div id="+n.time+"><div class='perso-calendar-item-day'></div><div class='perso-dot'></div><span data-id="+n.time+" data-time="+s+" class='circleText'>"+o+"</span></div>",e.setAttribute("data-time",n.time),e.outerHTML}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(a){a.teaser=a.teaser||{},a.teaser.PBlockFactory=new function(){this.types={TYPE_CONTAINER:"layout"},this.blockFactoryMap={},this.index="0",this.registerBlock=function(e,t){var s=this.blockFactoryMap[e];t.blockClass&&(s||(this.blockFactoryMap[e]=s={type:e,class:{},widthModes:{}}),t.class?s.class[t.class]=t.blockClass:t.widthMode?s.widthModes[t.widthMode]=t.blockClass:s.blockClass=t.blockClass),Object.prototype.hasOwnProperty.call(t,"defaultConfig")&&(s.defaultConfig=t.defaultConfig)},this.createBlock=function(e,t,s){var o,n,r,s=s?s.cfg:null,i=t.type;return(i="horizontal"==t.direction&&Object.prototype.hasOwnProperty.call(t,"seriesLabels")?"multiVertical-bar-chart":i)==this.types.TYPE_CONTAINER?(o=a.teaser.LayoutBlock,t.layoutId="layout-"+this.index,this.index++):(n=s?t.class||s.chartsLibClass:null,s=s?s.widthMode:null,(r=this.blockFactoryMap[i])&&(s&&(o=r.widthModes[s]),o=(o=n?r.class[n]:o)||r.blockClass),o||(o=a.teaser.Block,a.log("Invalid block type '"+i+"'"))),new o(e,t,r.defaultConfig)}}}((window,window.Personetics=window.Personetics||{}),jQuery),function(i,a){i.teaser=i.teaser||{},i.teaser.Buttons=i.teaser.Block.extend({getHtmlTemplateId:function(e,t){return t&&Object.prototype.hasOwnProperty.call(t,"buttonType")&&"quickReply"===t.buttonType?"quickReply":"buttons"},$selectors:function(){return{$persoQuickReplyButton:".perso-quick-reply-button",$persoFeedbackBubblesContainer:".perso-feedback-bubbles-container",$persoFeedbackAnswersContainer:".perso-feedback-answers-container",$persoFeedbackAnswersWrapper:".perso-feedback-answers-wrapper",$persoFeedbackChosenAnswer:".perso-feedback-chosen-answer",$persoQuickReplyButtonsContainer:".perso-quick-reply-buttons-container",$persoFeedbackThanksText:".perso-feedback-thanks-text",$persoFeedbackChosenAnswerContainer:".perso-feedback-chosen-answer-container",$persoFeedbackChosenAnswerBubble:".perso-feedback-chosen-answer-bubble",$persoFeedbackCancelChosenAnswer:".perso-feedback-cancel-chosen-answer",$persoFeedbackTeaser:".perso-teaser-transaction-feedback.perso-feedback-teaser",$persoFeedbackQuestion:".perso-feedback-question",$persoFeedbackQuestionText:".perso-feedback-question-text",$persoFeedbackScrollButtonLeft:".perso-feedback-scroll-button-left",$persoFeedbackScrollButtonRight:".perso-feedback-scroll-button-right",$personeticsTeaserWidgetCarousel:"#personetics-teaser-widget-carousel",$persoReplied:"perso-replied",$persoOut:"perso-out",$persoIn:"perso-in",$persoShow:"perso-show",$persoHide:"perso-hide",$persoEllipsis:"perso-ellipsis",$teaserWidgetCarousel:"teaser-widget-carousel",$persoCarouselDisable:"perso-carousel-disable",$persoFeedbackCancelButtonFocus:"perso-feedback-cancel-button-focus",$persoFeedbackTeaserTitle:".perso-feedback-teaser-title",$persoTransactionInfo:".perso-transaction-info",$persoFeedbackTransaction:".perso-feedback-transaction",$persoFeedbackTeaserContainer:".perso-feedback-teaser-container"}},quickReplyConfig:function(){return{timeOuts:{showChosenAnswer:200,showThanksText:400,hideThanksText:350,hideChosenAnswer:250},replyButtonsSlide:{replyButtonsSlideAmount:30}}},beforeRender:function(e,t){i.teaser.Block.prototype.beforeRender.call(this,e,t),this.layoutInstructions=t,this.layoutInstructions.cancelAction="UserUndo",this.options=this.layoutInstructions.options,this.selectors=this.$selectors(),this.browserData=i.utils.persoBrowserDetector.getBrowserData(),this.texts=this.getTexts(),this.widgetType=this.parent.config.widgetType},render:function(e,t){i.teaser.Block.prototype.render.call(this,e,t)},afterRender:function(e){e=a(e);this.initUiSelectors(e),this.quickReplyConfig=this.quickReplyConfig(),this.browserData.isMSIE?i.utils.persoMultiLineEllipsis.generateEllipsisString(a(this.uiSelectors.$persoFeedbackQuestionText).get(0),!1):this.uiSelectors.$persoFeedbackQuestionText.addClass(this.selectors.$persoEllipsis),this.setAriaLabelOnAnswers(),this.setThemeClasses()},setThemeClasses:function(){var e=a(this.selectors.$persoFeedbackTeaserContainer);personetics.config.theme&&(personetics.config.theme.brandColor&&(i.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoFeedbackTeaserTitle+", "+this.selectors.$persoFeedbackQuestion+", "+this.selectors.$persoTransactionInfo+", "+this.selectors.$persoFeedbackThanksText),"perso-theme-brandColor-color"),i.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoQuickReplyButton+", "+this.selectors.$persoFeedbackChosenAnswerBubble+", "+this.selectors.$persoFeedbackCancelChosenAnswer),"perso-theme-brandColor-background")),personetics.config.theme.backgroundColor&&(i.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoQuickReplyButton+", "+this.selectors.$persoFeedbackChosenAnswerBubble),"perso-theme-backgroundColor-color"),i.utils.persoTheming.addClassToElement(e,"perso-theme-backgroundColor-background")),personetics.config.theme.headerColor&&i.utils.persoTheming.addClassToElement(e.find(this.selectors.$persoFeedbackQuestion+", "+this.selectors.$persoFeedbackTransaction+", "+this.selectors.$persoFeedbackThanksText),"perso-theme-backgroundDarkColor-background"))},initUiSelectors:function(e){var t={},e=e.parents().find(this.selectors.$persoFeedbackTeaser);t.$feedbackBubblesContainer=e.find(this.selectors.$persoFeedbackBubblesContainer),t.$persoFeedbackAnswersWrapper=e.find(this.selectors.$persoFeedbackAnswersWrapper),t.$persoFeedbackChosenAnswerContainer=e.find(this.selectors.$persoFeedbackChosenAnswerContainer),t.$persoFeedbackChosenAnswer=e.find(this.selectors.$persoFeedbackChosenAnswer),t.$persoQuickReplyButtonsContainer=e.find(this.selectors.$persoQuickReplyButtonsContainer),t.$persoFeedbackThanksText=e.find(this.selectors.$persoFeedbackThanksText),t.$persoFeedbackCancelChosenAnswer=e.find(this.selectors.$persoFeedbackCancelChosenAnswer),t.$persoFeedbackChosenAnswerBubble=e.find(this.selectors.$persoFeedbackChosenAnswerBubble),t.$persoFeedbackQuestionText=e.find(this.selectors.$persoFeedbackQuestionText),t.$persoFeedbackScrollButtonLeft=e.find(this.selectors.$persoFeedbackScrollButtonLeft),t.$persoFeedbackScrollButtonRight=e.find(this.selectors.$persoFeedbackScrollButtonRight),t.$persoFeedbackQuestion=e.find(this.selectors.$persoFeedbackQuestion),t.$persoFeedbackCancelChosenAnswer.attr("data-action-id",this.layoutInstructions.cancelAction),this.uiSelectors=t},getTexts:function(){return{accessibilityTexts:{of:i.dictionary.getText("accessibilityOfLbl"),selected:i.dictionary.getText("accessibilitySelected"),submittedAnswer:i.dictionary.getText("accessibilitySubmittedAnswer"),undo:i.dictionary.getText("accessibilityUndo")}}},bindEvents:function(){var e,n=this,t=a(this.el).find(n.selectors.$persoQuickReplyButton),r=n.uiSelectors;r.$persoFeedbackCancelChosenAnswer.on("click",function(e){a(n.uiSelectors.$persoFeedbackCancelChosenAnswer).addClass(n.selectors.$persoFeedbackCancelButtonFocus),a(n.uiSelectors.$persoFeedbackChosenAnswerBubble).addClass(n.selectors.$persoFeedbackCancelButtonFocus);e=a(e.target).data("action-id")||null;r.$persoFeedbackThanksText.removeClass(n.selectors.$persoIn).addClass(n.selectors.$persoOut),n.sendActionEvent(e),setTimeout(n.hideThanksText,n.quickReplyConfig.timeOuts.hideThanksText,n)}),t.on("click",function(e){var t=a(e.target).data("action-id")||null,s=a(e.target).index(),o=r.$feedbackBubblesContainer.height();r.$feedbackBubblesContainer.css("min-height",o),r.$feedbackBubblesContainer.addClass(n.selectors.$persoReplied),r.$persoFeedbackAnswersWrapper.addClass(n.selectors.$persoReplied),r.$persoFeedbackChosenAnswer.text(e.target.innerText),r.$persoFeedbackChosenAnswerBubble.removeClass(n.selectors.$persoHide).addClass(n.selectors.$persoShow),n.sendActionEvent(t,s),setTimeout(n.showChosenAnswer,n.quickReplyConfig.timeOuts.showChosenAnswer,n)}),r.$persoFeedbackScrollButtonLeft.on("click",function(){r.$persoQuickReplyButtonsContainer.scrollLeft(r.$persoQuickReplyButtonsContainer.scrollLeft()-n.quickReplyConfig.replyButtonsSlide.replyButtonsSlideAmount)}),r.$persoFeedbackScrollButtonRight.on("click",function(){r.$persoQuickReplyButtonsContainer.scrollLeft(r.$persoQuickReplyButtonsContainer.scrollLeft()+n.quickReplyConfig.replyButtonsSlide.replyButtonsSlideAmount)}),n.widgetType===n.selectors.$teaserWidgetCarousel&&(e=a(n.selectors.$personeticsTeaserWidgetCarousel),r.$persoQuickReplyButtonsContainer.on("touchstart",function(){e.addClass(n.selectors.$persoCarouselDisable)}),r.$persoQuickReplyButtonsContainer.on("touchend",function(){e.removeClass(n.selectors.$persoCarouselDisable)}))},showChosenAnswer:function(e){e.uiSelectors.$persoFeedbackQuestionText.addClass(e.selectors.$persoHide),e.uiSelectors.$persoQuickReplyButtonsContainer.removeClass(e.selectors.$persoShow).addClass(e.selectors.$persoHide),e.uiSelectors.$persoFeedbackThanksText.removeClass(e.selectors.$persoHide).addClass(e.selectors.$persoShow),e.uiSelectors.$persoFeedbackChosenAnswerBubble.removeClass(e.selectors.$persoOut).addClass(e.selectors.$persoIn),e.setSubmittedAnswerText(e.uiSelectors.$persoFeedbackCancelChosenAnswer),e.setSelectedAnswer(e.uiSelectors.$persoFeedbackThanksText),setTimeout(e.showThanksText,e.quickReplyConfig.timeOuts.showThanksText,e)},showThanksText:function(e){e.uiSelectors.$persoFeedbackThanksText.removeClass(e.selectors.$persoOut).addClass(e.selectors.$persoIn),e.focusOnBubble(e.uiSelectors.$persoFeedbackThanksText)},hideThanksText:function(e){e.uiSelectors.$persoFeedbackQuestionText.removeClass(e.selectors.$persoHide),a(e.uiSelectors.$persoFeedbackCancelChosenAnswer).removeClass(e.selectors.$persoFeedbackCancelButtonFocus),e.uiSelectors.$persoFeedbackChosenAnswerBubble.removeClass([e.selectors.$persoIn,e.selectors.$persoFeedbackCancelButtonFocus]).addClass(e.selectors.$persoOut),e.uiSelectors.$persoQuickReplyButtonsContainer.removeClass(e.selectors.$persoHide).addClass(e.selectors.$persoShow),e.uiSelectors.$persoFeedbackThanksText.removeClass(e.selectors.$persoShow).addClass(e.selectors.$persoHide),setTimeout(e.hideChosenAnswer,e.quickReplyConfig.timeOuts.hideChosenAnswer,e)},hideChosenAnswer:function(e){e.uiSelectors.$persoFeedbackChosenAnswerBubble.removeClass(e.selectors.$persoShow).addClass(e.selectors.$persoHide),e.uiSelectors.$feedbackBubblesContainer.removeClass(e.selectors.$persoReplied),e.uiSelectors.$persoFeedbackAnswersWrapper.removeClass(e.selectors.$persoReplied),e.removeSubmittedAnswerText(e.uiSelectors.$persoFeedbackCancelChosenAnswer),e.removeSelectedAnswer(e.uiSelectors.$persoFeedbackThanksText),e.focusOnBubble(e.uiSelectors.$persoFeedbackQuestion)},sendActionEvent:function(e,t){var s,o;e&&(s=void 0!==t?this.options[t]:{},o=this.getActionById(e),e!==this.layoutInstructions.cancelAction&&(o=this.setActionValue(o,t,s)),this.parent.notifyEvent("actionEvent",{actionId:o,context:s}))},getActionById:function(t){return this.parent.actionsMap.find(function(e){return e.actionId==t})},setActionValue:function(e,t,s){var o;return o=e?this.setKeyValueInAction(e,"value",s):o},setKeyValueInAction:function(e,t,s){var o,n=Array.isArray(e)?[]:{},r=i.utils.persoHelper.deepObjectExtend(n,e,!0);for(o in r)"object"==_typeof(r[o])&&null!==r[o]?r[o]=this.setKeyValueInAction(r[o],t,s):o===t&&Object.prototype.hasOwnProperty.call(s,r[t])&&(r[t]=s[r[t]]);return r},setAriaLabelOnAnswers:function(){var s=this,e=a(s.el).find(s.selectors.$persoQuickReplyButton);e&&e.length&&e.toArray().forEach(function(e,t){a(e).attr("aria-label",s.options[t].text+", "+(t+1)+" "+s.texts.accessibilityTexts.of+" "+s.options.length)})},setSubmittedAnswerText:function(e){var t=a(e),t=this.texts.accessibilityTexts.submittedAnswer+" "+t.parent().text()+", "+this.texts.accessibilityTexts.undo;this.setAriaLabelOnElement(e,t)},removeSubmittedAnswerText:function(e){var t=a(e),t=this.texts.accessibilityTexts.submittedAnswer+" "+t.parent().text()+", "+this.texts.accessibilityTexts.undo;this.removeAriaLabelTextFromElement(e,t)},setSelectedAnswer:function(e){var t=a(e),t=this.texts.accessibilityTexts.selected+", "+t.text();this.setAriaLabelOnElement(e,t)},removeSelectedAnswer:function(e){var t=this.texts.accessibilityTexts.selected+", ";this.removeAriaLabelTextFromElement(e,t)},setAriaLabelOnElement:function(e,t){e=a(e);e&&e.length&&e.attr("aria-label",t)},removeAriaLabelTextFromElement:function(e,t){var s,e=a(e);e&&e.length&&(s=(s=e.attr("aria-label")).replace(t,""),e.attr("aria-label",s))},focusOnBubble:function(e){e&&i.utils.accessibility.putFocus(e)}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(r,i){r.teaser=r.teaser||{},r.teaser.Transactions=r.teaser.Block.extend({getHtmlTemplateId:function(e){return this.strClass=e,"tranList"},$selectors:function(){return{$pstoryTable:".pstory-table",$persoUpperRow:".perso-table-row .perso-upper-row",$persoLowerRow:".perso-table-row .perso-lower-row",$persoAmountContainer:".perso-table-row .perso-amount-container"}},beforeRender:function(e,t){t.rows&&(Array.isArray(this.layoutInstructions.rows[0])?(r.story.Block.prototype.beforeRender.call(this,e,t),this.parseTableToObj(),this.formatTable()):r.log("TableBlock.beforeRender() Error: invalid rows property - not rendering"))},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoUpperRow),"perso-theme-brandColor-color"),personetics.config.theme.headerColor&&(r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoLowerRow),"perso-theme-headerColor-color"),r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$persoAmountContainer),"perso-theme-headerColor-color")),personetics.config.theme.greyLightColor&&r.utils.persoTheming.addClassToElement(this.frameEl.find(this.selectors.$pstoryTable),"perso-theme-greyLightColor-before-border-color"))},afterRender:function(e){this.setThemeClasses(e)},parseTableToObj:function(){var t=this,n=[];i.each(this.layoutInstructions.rows,function(e,s){var o={};i.each(t.layoutInstructions.cols,function(e,t){o[t]=s[e]}),n.push(o)}),this.layoutInstructions.rows=n},formatTable:function(){var s=this,o=r.story.getTablesFormat()["table-"+this.strClass];(o=o||r.story.getTablesFormat()["table-default"])&&i.each(this.layoutInstructions.rows,function(e,t){s.formatRow(t,o)})},formatRow:function(o,e){var n=this;i.each(e.displayColumns,function(e,t){var s;void 0!==o[e]&&null!==o[e]&&(void 0!==(s=o.currencyCd)&&(t.currencySymbol=s),o[e]=n.formatTableHelper(e,t,o[e]))})},formatTableHelper:function(e,t,s){var o=s,n=r.processor.PUtils.getUtilsInstance("utils",this.model);switch(t.type){case"date":o=n.formatDate(s,t.format,!0);break;case"amount":o=n.formatAmount(s,t.currencySymbol,t.format,!0)}return o}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(i,r){i.teaser=i.teaser||{},i.teaser.UserInput=i.teaser.Block.extend({getHtmlTemplateId:function(e,t){return t.type},$selectors:function(){return{elements:{$persoFeedbackQuestion:".perso-feedback-question",$persoUserInputContainer:".perso-user-input-container",$persoFeedbackChosenAnswer:".perso-feedback-chosen-answer",$persoFeedbackChosenAnswerBubble:".perso-feedback-chosen-answer-bubble",$persoFeedbackCancelChosenAnswer:".perso-feedback-cancel-chosen-answer",$persoFeedbackThanksText:".perso-feedback-thanks-text",$persoInputWarningMessage:".perso-input-warning-message",$persoClearInput:".perso-clear-input",$persoInputWrapper:".perso-input-wrapper",$persoSubmitButton:".perso-submit-button",$persoFeedbackTeaserTitle:".perso-feedback-teaser-title",$persoFeedbackQuestionText:".perso-feedback-question-text",$persoInputTitle:".perso-input-title",$persoUserInput:".perso-user-input",$persoTeaserDateInput:".perso-teaser-date-input",$persoDateInput:".perso-date-input",$persoTeaserNumberInput:".perso-teaser-number-input",$persoNumberinput:".perso-number-input",$persoFeedbackTeaserContainer:".perso-feedback-teaser-container",$persoInputTitleWrapper:".perso-input-title-wrapper"},classes:{persoReplied:"perso-replied",persoShow:"perso-show",persoHide:"perso-hide",persoOut:"perso-out",persoIn:"perso-in",persoDisabled:"perso-disabled",persoLoading:"perso-asset-loading",persoRefresh:"perso-refresh",persoValidationError:"perso-validation-error",persoNetworkError:"perso-network-error",persoPlaceHolder:"perso-placeholder"}}},userInputConfig:function(){return{userInputTypes:{dateInput:"DateInput",numberInput:"NumberInput"},dateFormatConfig:{isDefaultDateFormat:!this.layoutInstructions.txt||"DD/MM/YYYY"===this.layoutInstructions.txt.toUpperCase(),delimiter:"/",defaultDateFormat:"DD/MM/YYYY",serverDateFormat:"MM/DD/YYYY"},timeOuts:{showChosenAnswer:200,showThanksText:400,hideThanksText:350,hideChosenAnswer:250,hideUserInput:200}}},initUiSelectors:function(){var e={},t=this.userInputTeaser;e.$persoUserInputContainer=t.find(this.selectors.elements.$persoUserInputContainer),e.$persoFeedbackChosenAnswer=t.find(this.selectors.elements.$persoFeedbackChosenAnswer),e.$persoFeedbackChosenAnswerBubble=t.find(this.selectors.elements.$persoFeedbackChosenAnswerBubble),e.$persoFeedbackCancelChosenAnswer=t.find(this.selectors.elements.$persoFeedbackCancelChosenAnswer),e.$persoFeedbackThanksText=t.find(this.selectors.elements.$persoFeedbackThanksText),e.$persoSubmitButton=t.find(this.selectors.elements.$persoSubmitButton),e.$persoInputWarningMessage=t.find(this.selectors.elements.$persoInputWarningMessage),e.$persoInputWrapper=t.find(this.selectors.elements.$persoInputWrapper),e.$persoClearInput=t.find(this.selectors.elements.$persoClearInput),e.$persoFeedbackQuestion=t.find(this.selectors.elements.$persoFeedbackQuestion),e.$persoFeedbackTeaserTitle=t.find(this.selectors.elements.$persoFeedbackTeaserTitle),e.$persoFeedbackQuestionText=t.find(this.selectors.elements.$persoFeedbackQuestionText),e.$persoInputTitle=t.find(this.selectors.elements.$persoInputTitle),e.$persoUserInput=t.find(this.selectors.elements.$persoUserInput),e.$persoFeedbackTeaserContainer=t.find(this.selectors.elements.$persoFeedbackTeaserContainer),e.$persoInputTitleWrapper=t.find(this.selectors.elements.$persoInputTitleWrapper),e.$persoDateInput=t.find(this.selectors.elements.$persoDateInput),e.$persoNumberinput=t.find(this.selectors.elements.$persoNumberinput),this.uiSelectors=e},beforeRender:function(e,t){i.teaser.Block.prototype.beforeRender.call(this,e,t);var s=r(e);if(this.layoutInstructions=t,this.layoutInstructions.insightId=s.attr("data-id"),this.selectors=this.$selectors(),this.userInputConfig=this.userInputConfig(),this.layoutInstructions.isDesktop="perso-desktop"===i.utils.persoBrowserDetector.getBrowserData().deviceType,this.texts=this.getTexts(),s.length)switch(t.type){case"dateInput":this.userInputTeaser=s.parents().find(this.selectors.elements.$persoTeaserDateInput),this.userInputTeaserType=this.userInputConfig.userInputTypes.dateInput,this.isDate=!0;break;case"numberInput":this.userInputTeaser=s.parents().find(this.selectors.elements.$persoTeaserNumberInput),this.userInputTeaserType=this.userInputConfig.userInputTypes.numberInput,this.isNumber=!0}},render:function(e,t){i.teaser.Block.prototype.render.call(this,e,t)},afterRender:function(){this.initUiSelectors(),this.handleAccessibility(),this.uiSelectors.$persoFeedbackCancelChosenAnswer.attr("data-action-id",this.layoutInstructions.undoAction),this.uiSelectors.$persoSubmitButton.addClass(this.selectors.classes.persoDisabled),this.isMobile=personetics.getDeviceType(),this.handleDatePlaceHolder(!0),this.setThemeClasses()},setThemeClasses:function(){var e=this.$selectors().elements;personetics.config.theme&&(personetics.config.theme.brandColor&&(i.utils.persoTheming.addClassToElement(this.userInputTeaser.find(e.$persoFeedbackTeaserTitle+", "+e.$persoFeedbackQuestion+", "+e.$persoInputTitleWrapper+", "+e.$persoUserInput+", "+e.$persoFeedbackThanksText),"perso-theme-brandColor-color"),i.utils.persoTheming.addClassToElement(this.uiSelectors.$persoFeedbackCancelChosenAnswer,"perso-theme-brandColor-background"),i.utils.persoTheming.addClassToElement(this.uiSelectors.$persoFeedbackChosenAnswerBubble,"perso-theme-brandColor-background"),i.utils.persoTheming.addClassToElement(this.uiSelectors.$persoInputWrapper,"perso-theme-brandColor-border-color"),i.utils.persoTheming.addClassToElement(this.uiSelectors.$persoFeedbackChosenAnswerBubble,"perso-theme-brandColor-border-color")),personetics.config.theme.backgroundColor&&(i.utils.persoTheming.addClassToElement(this.uiSelectors.$persoFeedbackTeaserContainer,"perso-theme-backgroundColor-background"),i.utils.persoTheming.addClassToElement(this.uiSelectors.$persoFeedbackChosenAnswer,"perso-theme-backgroundColor-color")),personetics.config.theme.headerColor&&i.utils.persoTheming.addClassToElement(this.uiSelectors.$persoFeedbackQuestion,"perso-theme-backgroundDarkColor-background"),personetics.config.theme.backgroundDarkColor&&(i.utils.persoTheming.addClassToElement(this.uiSelectors.$persoFeedbackQuestion,"perso-theme-backgroundDarkColor-background"),i.utils.persoTheming.addClassToElement(this.uiSelectors.$persoFeedbackThanksText,"perso-theme-backgroundDarkColor-background")),personetics.config.theme.alertColor&&i.utils.persoTheming.addClassToElement(this.uiSelectors.$persoInputWarningMessage,"perso-theme-alertColor-color"))},handleAccessibility:function(){var e=this.uiSelectors,t=this.texts;e.$persoFeedbackChosenAnswer.attr("aria-hidden","true"),this.isNumber?(e.$persoNumberinput.attr("aria-label",t.numberInput),e.$persoSubmitButton.attr("aria-label",t.numberSubmit),e.$persoClearInput.attr("aria-label",t.clearInput)):this.isDate&&(e.$persoDateInput.attr("aria-label",t.dateInput),e.$persoSubmitButton.attr("aria-label",t.dateSubmit)),this.layoutInstructions.isDesktop&&(e.$persoFeedbackQuestionText.attr("tabindex","0"),e.$persoFeedbackTeaserTitle.attr("tabindex","0"),e.$persoInputTitle.attr("tabindex","0"))},bindEvents:function(){var e=this.uiSelectors;e.$persoSubmitButton.on("click",this.submitInput.bind(this)),e.$persoFeedbackCancelChosenAnswer.on("click",this.cancelChosenAnswer.bind(this)),e.$persoClearInput.on("click",this.clearNumberInput.bind(this)),this.isDate&&(this.layoutInstructions.isDesktop?e.$persoDateInput.on("keydown",this.handleDateTemplateDeletion.bind(this)).on("input",this.handleDateTemplate.bind(this)):e.$persoDateInput.on("input",this.validateDate.bind(this)).on("blur",this.validateDate.bind(this))),this.isNumber&&e.$persoNumberinput.on("keyup",this.validateNumber.bind(this)),this.userInputTeaser&&this.layoutInstructions.isDesktop&&this.userInputTeaser.bind("keyup",i.bind(this,this.keyUpEvent))},clearNumberInput:function(){var e=this.uiSelectors.$persoNumberinput;e&&e.length&&(e.val(""),this.uiSelectors.$persoSubmitButton.removeClass(this.selectors.classes.persoRefresh),this.displayClearButton(!1),this.displayWarningMessage(!1),this.activateSubmitButton(!1),i.utils.accessibility.putFocus(e))},activateSubmitButton:function(e){var t=this.uiSelectors;e?(t.$persoSubmitButton.removeClass(this.selectors.classes.persoDisabled).attr("aria-hidden","false"),this.layoutInstructions.isDesktop&&t.$persoSubmitButton.attr("tabindex","0")):(t.$persoSubmitButton.addClass(this.selectors.classes.persoDisabled).attr("aria-hidden","true"),this.layoutInstructions.isDesktop&&t.$persoSubmitButton.removeAttr("tabindex"))},displayWarningMessage:function(e,t,s){var o=this.uiSelectors,n=this.selectors.classes,r=t?n.persoValidationError:n.persoNetworkError;e?(t?(o.$persoInputWrapper.removeClass(n.persoNetworkError).addClass(n.persoValidationError),o.$persoInputWarningMessage.removeClass(n.persoNetworkError).addClass(n.persoValidationError),this.activateSubmitButton(!1)):(o.$persoInputWrapper.removeClass(n.persoValidationError).addClass(n.persoNetworkError),o.$persoInputWarningMessage.removeClass(n.persoValidationError).addClass(n.persoNetworkError),this.activateSubmitButton(!0)),o.$persoInputWarningMessage.text(s).attr("aria-hidden","false").addClass(r).parent().removeClass(n.persoHide).addClass(n.persoShow)):(o.$persoInputWrapper.removeClass(n.persoValidationError).removeClass(n.persoNetworkError),o.$persoInputWarningMessage.text("").attr("aria-hidden","true").removeClass(r).parent().addClass(n.persoHide).removeClass(n.persoShow),this.activateSubmitButton(!0))},displayClearButton:function(e){var t=this.uiSelectors;e?(t.$persoClearInput.attr("aria-hidden","false").addClass(this.selectors.classes.persoShow).removeClass(this.selectors.classes.persoHide),this.layoutInstructions.isDesktop&&t.$persoClearInput.attr("tabindex","0")):(t.$persoClearInput.attr("aria-hidden","true").addClass(this.selectors.classes.persoHide).removeClass(this.selectors.classes.persoShow),this.layoutInstructions.isDesktop&&t.$persoClearInput.removeAttr("tabindex"))},validateNumber:function(e){var t=r(e.currentTarget).val(),s=this.layoutInstructions,o=(this.displayClearButton(!0),parseInt(t)||null);""===t&&8===e.keyCode||/^(0|[1-9]\d*)$/.test(t)?o<s.minNumber||o>s.maxNumber?(e=this.texts.numberOutOfRange+" "+s.minNumber+" "+this.texts.to+" "+s.maxNumber,this.displayWarningMessage(!0,!0,e)):this.displayWarningMessage(!1):this.displayWarningMessage(!0,!0,this.texts.nonDigit)},getDateFormat:function(){return this.userInputConfig.dateFormatConfig.isDefaultDateFormat?this.userInputConfig.dateFormatConfig.defaultDateFormat:this.userInputConfig.dateFormatConfig.serverDateFormat},checkInRange:function(e,t){var s;return"0"===e.charAt(0)&&"00"!=e||(s=parseInt(e),e=(s=isNaN(s)||s<=0||t<s?parseInt(t.toString().charAt(0)):s)>parseInt(t.toString().charAt(0))&&1==s.toString().length?"0"+s:s.toString()),e},handleDateTemplateDeletion:function(e){if(8===e.keyCode){var t=this.userInputConfig.dateFormatConfig,s=e.currentTarget.value;if(s&&s[s.length-1]===t.delimiter&&1<s.length)return e.currentTarget.value=s.slice(0,s.length-2),e.preventDefault(),!1}},handleDateTemplate:function(e){var t=e.currentTarget.value,s=this.userInputConfig.dateFormatConfig,o=(t=/\D\/$/.test(t)?t.substr(0,t.length-3):t).split(s.delimiter).map(function(e){return e.replace(/\D/g,"")});s.isDefaultDateFormat?(o[0]&&(o[0]=this.checkInRange(o[0],31)),o[1]&&(o[1]=this.checkInRange(o[1],12))):(o[0]&&(o[0]=this.checkInRange(o[0],12)),o[1]&&(o[1]=this.checkInRange(o[1],31)));t=o.map(function(e,t){return 2==e.length&&t<2?e+s.delimiter:e}).join("").substr(0,this.getDateFormat().length);e.currentTarget.value=t,this.validateDate(e)},validateDate:function(e){var t,s,e=e.currentTarget.value,o=this.layoutInstructions,n=this.getDateFormat();e.length===n.length?(this.handleDatePlaceHolder(!1),o.isDesktop?t=moment(e,n):(t=moment(e),e=moment(t).format(n)),s=moment(o.minDate,n),n=moment(o.maxDate,n),t.isBetween(s,n)?(this.setChosenAnswerBubbleText(e),this.displayWarningMessage(!1,!0),this.activateSubmitButton(!0)):(this.displayWarningMessage(!0,!0,this.texts.dateOutOfRange+" "+o.minDate+" "+this.texts.toText+" "+o.maxDate),this.activateSubmitButton(!1))):(0===e.length&&(this.handleDatePlaceHolder(!0),this.displayWarningMessage(!1)),this.activateSubmitButton(!1))},handleDatePlaceHolder:function(e){"web"!==this.isMobile&&(e?this.uiSelectors.$persoInputWrapper.addClass(this.selectors.classes.persoPlaceHolder):this.uiSelectors.$persoInputWrapper.removeClass(this.selectors.classes.persoPlaceHolder))},getActionById:function(t){return this.parent.actionsMap.find(function(e){return e.actionId==t})},successCallback:function(e){i.log("CallPersoneticsAPI success: "+e),this.startAnimation(),this.displayWarningMessage(!1,!1)},failureCallback:function(e){i.log("CallPersoneticsAPI failed: "+e.message);e=this.uiSelectors.$persoSubmitButton;e&&e.length&&e.removeClass(this.selectors.classes.persoLoading).addClass(this.selectors.classes.persoRefresh),this.uiSelectors.$persoUserInput.removeClass(this.selectors.classes.persoDisabled),this.displayWarningMessage(!0,!1,this.texts.tryAgain)},sendActionEvent:function(e,t,s){e&&(e=this.getActionById(e),e=this.setActionValue(e,t),(e=i.utils.persoHelper.deepObjectExtend(e,s,!1))&&this.parent.notifyEvent("actionEvent",{actionId:e,context:{}}))},setActionValue:function(e,t){var s;return s=e?this.setKeyValueInAction(e,"value",t):s},setKeyValueInAction:function(e,t,s){var o,n=Array.isArray(e)?[]:{},r=i.utils.persoHelper.deepObjectExtend(n,e,!0);for(o in r)"object"==_typeof(r[o])&&null!==r[o]?r[o]=this.setKeyValueInAction(r[o],t,s):o===t&&(r[t]=s[r[t]]);return r},setChosenAnswerBubbleText:function(e){var t=this.uiSelectors.$persoFeedbackChosenAnswer;t&&t.length&&t.text(e)},submitInput:function(e){var t,s=this.uiSelectors,e=r(e.target).data("action-id")||null,o=this.getDateFormat(),n=(this.isDate&&(t=s.$persoDateInput.val(),n=this.layoutInstructions.isDesktop?moment(t,o):moment(t),t=moment(n,o).format(this.userInputConfig.dateFormatConfig.serverDateFormat)),this.isNumber&&(t=s.$persoNumberinput.val(),this.setChosenAnswerBubbleText(t)),this.uiSelectors.$persoSubmitButton),o=(n&&n.length&&n.addClass(this.selectors.classes.persoLoading).removeClass(this.selectors.classes.persoRefresh),s.$persoUserInput.addClass(this.selectors.classes.persoDisabled),{});o[this.layoutInstructions.var]=t,!0===personetics.config.persoEBMode?(this.startAnimation(),this.displayWarningMessage(!1,!1)):this.sendActionEvent(e,o,{successCallback:this.successCallback.bind(this),failureCallback:this.failureCallback.bind(this)}),this.sendEvent(this.userInputTeaserType,t)},sendEvent:function(e,t){e={type:e,value:t,instanceId:this.layoutInstructions.insightId};this.notifyReportEvent(e)},cancelChosenAnswer:function(e){var t=this.uiSelectors,e=r(e.target).data("action-id")||null,s={};t.$persoUserInput.removeClass(this.selectors.classes.persoDisabled),s[this.layoutInstructions.var]=null,t.$persoFeedbackThanksText.removeClass(this.selectors.classes.persoIn).addClass(this.selectors.classes.persoOut),this.sendActionEvent(e,s),this.sendEvent(this.userInputTeaserType,{}),setTimeout(this.hideThanksText,this.userInputConfig.timeOuts.hideThanksText,this)},startAnimation:function(){this.uiSelectors.$persoUserInputContainer.addClass(this.selectors.classes.persoReplied),setTimeout(this.hideUserInput,this.userInputConfig.timeOuts.hideUserInput,this)},hideUserInput:function(e){var t=e.uiSelectors,s=t.$persoSubmitButton;s&&s.length&&s.removeClass(e.selectors.classes.persoLoading).removeClass(e.selectors.classes.persoRefresh),t.$persoUserInputContainer.addClass(e.selectors.classes.persoHide),t.$persoFeedbackChosenAnswerBubble.removeClass(e.selectors.classes.persoHide).addClass(e.selectors.classes.persoShow),setTimeout(e.showChosenAnswer,e.userInputConfig.timeOuts.showChosenAnswer,e)},showChosenAnswer:function(e){var t=e.uiSelectors;t.$persoFeedbackChosenAnswerBubble.removeClass(e.selectors.classes.persoOut).addClass(e.selectors.classes.persoIn),e.setSubmittedAnswerText(e.uiSelectors.$persoFeedbackCancelChosenAnswer),t.$persoFeedbackThanksText.removeClass(e.selectors.classes.persoHide).addClass(e.selectors.classes.persoShow),setTimeout(e.showThanksText,e.userInputConfig.timeOuts.showThanksText,e)},showThanksText:function(e){e.uiSelectors.$persoFeedbackThanksText.removeClass(e.selectors.classes.persoOut).addClass(e.selectors.classes.persoIn).attr("aria-hidden","false"),e.focusOn(e.uiSelectors.$persoFeedbackThanksText)},hideThanksText:function(e){var t=e.uiSelectors;t.$persoFeedbackChosenAnswerBubble.removeClass([e.selectors.classes.persoIn]).addClass(e.selectors.classes.persoOut),t.$persoFeedbackThanksText.removeClass(e.selectors.classes.persoShow).addClass(e.selectors.classes.persoHide).attr("aria-hidden","true"),t.$persoUserInputContainer.removeClass(e.selectors.classes.persoHide).addClass(e.selectors.classes.persoShow),setTimeout(e.hideChosenAnswer,e.userInputConfig.timeOuts.hideChosenAnswer,e)},hideChosenAnswer:function(e){e.uiSelectors.$persoFeedbackChosenAnswerBubble.removeClass(e.selectors.classes.persoShow).addClass(e.selectors.classes.persoHide),e.uiSelectors.$persoUserInputContainer.removeClass(e.selectors.classes.persoReplied),e.focusOn(e.uiSelectors.$persoFeedbackQuestion)},setSubmittedAnswerText:function(e){var t,e=r(e);e&&(t=this.texts.submittedAnswer+" "+e.parent().text()+", "+this.texts.undo,e.attr("aria-label",t))},focusOn:function(e){i.utils.accessibility.putFocus(e)},keyUpEvent:function(e){var t=this.uiSelectors,s=r(e.target);switch(e.which){case 9:break;case 13:s.is(t.$persoClearInput)&&this.clearNumberInput(),s.is(t.$persoSubmitButton)&&this.submitInput(e)}},getTexts:function(){return{dateOutOfRange:i.dictionary.getText("dateOutOfRange"),numberOutOfRange:i.dictionary.getText("numberOutOfRange"),toText:i.dictionary.getText("to"),dateInput:i.dictionary.getText("dateInput"),dateSubmit:i.dictionary.getText("dateSubmit"),numberInput:i.dictionary.getText("numberInput"),numberSubmit:i.dictionary.getText("numberSubmit"),clearInput:i.dictionary.getText("clearInput"),submittedAnswer:i.dictionary.getText("accessibilitySubmittedAnswer"),undo:i.dictionary.getText("accessibilityUndo"),tryAgain:i.dictionary.getText("tryAgain"),to:i.dictionary.getText("to"),nonDigit:i.dictionary.getText("nonDigit")}}})}((window,window.Personetics=window.Personetics||{}),jQuery),function(e,s){function t(){}var o=s.UI.Handlebars;t.consts={ratio_medium:1.08,ratio_large:1.23},t.prototype.init=function(){this.registerDefaultBlocks(),this.registerDefaultChartHeplers(),this.registerPartialTemplates(),this.mappedColors=personetics.config.mappedColors},t.prototype.registerBlock=function(e,t){s.teaser.PBlockFactory.registerBlock(e,t)},t.prototype.registerChartHelper=function(e,t){s.story.BlockChartFactory.registerChartHelper(e,t)},t.prototype.blockConfigs={barChartD3:{blockClass:s.teaser.D3BarChartBlock,defaultConfig:{desktopScreenWidth:790,columnChartOptions:{maxBarHeight:35,svgHeight:70,svgWidth:280,barTop:10,xAxisTop:54,yAxisLineDisplay:!1,yAxisTextDisplay:!1,yAxisTop:10,screen:{ratio_medium:t.consts.ratio_medium,ratio_large:t.consts.ratio_large},margin:{top:43,bottom:40},height:180,chart:{transX:0,transY:10},labels:{drawLabels:!1,marginBottom:18,marginTop:-10},rectangles:{width:10,space:34,borderRadius:{rx:0,ry:0},marginFromBottom:15,marginFromLeft:0,gradients:[{id:"selectedGradient",offset:["0%","100%"],stopColors:["#6888d2","#536fb1"]}],filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}},transition:{duration:1e3,delay:500}},selected:{},axis:{xAxis:{hide:!1}}},columnChartAndBoxOptions:{maxBarHeight:60,svgHeight:95,svgWidth:187,barTop:18.8,xAxisTop:0,yAxisHeight:128,yAxisLineDisplay:!1,yAxisTextDisplay:!1,yAxisTop:0,screen:{ratio_medium:t.consts.ratio_medium,ratio_large:t.consts.ratio_large},margin:{top:43,bottom:40},height:180,chart:{transX:0,transY:10},labels:{drawLabels:!1,marginBottom:18,marginTop:-10},rectangles:{width:7,space:20,borderRadius:{rx:3,ry:3},marginFromBottom:15,marginFromLeft:0,gradients:[{id:"selectedGradient",offset:["0%","100%"],stopColors:["#6888d2","#536fb1"]}],filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}},transition:{duration:1e3,delay:500}},selected:{},axis:{xAxis:{hide:!1}}},columnChartMultiSeriesOptions:{screen:{ratio_medium:t.consts.ratio_medium,ratio_large:t.consts.ratio_large},margin:{top:34,right:24,bottom:72,left:24},totalHeight:220,labels:{drawLabels:!0,marginTop:-16,marginBottom:4,right:3},rectangles:{width:9,paddingTop:30,paddingLeft:-19,paddingRight:22,paddingBottom:33,seriesPadding:12.5,transX:4,minHeight:.25,borderRadius:{rx:4,ry:4},marginFromBottom:5,gradients:{selectedInGradient:{id:"selectedInGradient",offset:["0%","100%"],stopColors:["#7193e2","#485f96"]},selectedOutGradient:{id:"selectedOutGradient",offset:["0%","100%"],stopColors:["#ffcc00","#ffb80a"]}},filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}},transition:{duration:1e3,delay:500}},selected:{},axis:{translation:{x:2.5,y:"height"},xAxis:{hide:!1,tickPadding:10,minimizedPadding:{top:22,bottom:15}},yAxis:{hide:!0}}},barChartOptions:{chartHeight:70,screen:{ratio_medium:t.consts.ratio_medium,ratio_large:t.consts.ratio_large},margin:{top:19,right:10,bottom:0,left:10},drawLine:!1,drawLabels:!1,rectangles:{height:4.8,color:"rgba(169, 167, 167, 1)",paddingTop:-22,paddingLeft:35,paddingBottom:5,seriesPadding:5,borderRadius:{rx:0,ry:0},gradients:{selectedInGradient:{id:"selectedInGradient",offset1:"0%",offset2:"100%",stopColor1:this.mappedColors&&this.mappedColors.outflowColor?this.mappedColors.outflowColor:"#0275be",stopColor2:this.mappedColors&&this.mappedColors.inflowsColor?this.mappedColors.inflowsColor:"#0275be"},selectedOutGradient:{id:"selectedOutGradient",offset1:"0%",offset2:"100%",stopColor1:this.mappedColors&&this.mappedColors.outflowColor?this.mappedColors.outflowColor:"#ff6c53",stopColor2:this.mappedColors&&this.mappedColors.inflowsColor?this.mappedColors.inflowsColor:"#ff6c53"}},filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}}},labels:{paddingLeft:40,minWidth:100},selected:{},axis:{xAxis:{hide:!0},yAxis:{hide:!1,paddingRight:10,transValue:-20}}},singleHorizontalChartOptions:{chartHeight:100,screen:{ratio_medium:t.consts.ratio_medium,ratio_large:t.consts.ratio_large},margin:{top:10,right:12,bottom:12,left:5},drawLabels:!1,rectangles:{height:7,color:"rgba(169, 167, 167, 1)",borderRadius:{rx:4,ry:4},groupMargins:{top:-3.5,left:35},gradients:{selectedGradient:{id:"selectedGradient",offset1:"0%",offset2:"100%",stopColor1:"#6888d2",stopColor2:"#536fb1"}},filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}}},labels:{paddingLeft:40,minWidth:100},selected:{},axis:{xAxis:{hide:!0},yAxis:{hide:!1}}},barGraphPalette:["url(#selectedOutGradient)","url(#selectedInGradient)"],barGraphLabelsPalette:["rgba(40, 36, 37, 1)","rgba(84, 113, 180, 1)"],multiVerticalPalette:["url(#selectedGradient)","rgba(215, 215, 215, 1)"],multiVerticalLabelsPalette:["rgba(147, 145, 149, 1)","rgba(40, 36, 37, 1)"],columnGraphPalette:["#5D68C2","#3B49B6","#1729AF","#111F88","#08176C"],barChartMultiSeriesLabels:function(t){return function(){var e;return t&&0<t.length?(e=t[this.series.index],"<span class='"+this.series.name+"'>"+e+"</span>"):""}}}},barChartPure:{blockClass:s.teaser.BarChartBlock,defaultConfig:{vertical:{height:.38,marginBetweenBars:4.6,amountAnimationDuration:1500,minBarHeight:.1},multiVertical:{height:.0968,marginBetweenBars:4.8,tooltipJMarginBottom:15,amountAnimationDuration:1500,minBarHeight:.0125}}}},t.prototype.registerPartialTemplates=function(){this.getPartialTemplates().forEach(function(e){var t=o.templates[e.id];null!=t&&o.registerPartial(e.name,t)})},t.prototype.getPartialTemplates=function(){return[{name:"teaserWrapperPartial",id:"teaserWrapperPartial"},{name:"teaserWrapperPartial2",id:"teaserWrapperPartial2"},{name:"teaserHeader",id:"teaserHeader"},{name:"teaserHeader2",id:"teaserHeader2"},{name:"feedbackTransaction",id:"feedbackTransaction"},{name:"feedbackChosenAnswer",id:"feedbackChosenAnswer"},{name:"quickReplyButtons",id:"block-quickReply"},{name:"date-input-feedback",id:"block-date-input-feedback"},{name:"number-input-feedback",id:"block-number-input-feedback"},{name:"teaserWrapperPartialNoButtons",id:"teaserWrapperPartialNoButtons"},{name:"disclaimerModal",id:"disclaimerModal"},{name:"disclaimerButton",id:"disclaimerButton"},{name:"subscriptionSummary",id:"subscription-summary"},{name:"subscriptionList",id:"subscription-dashboard-list"},{name:"noSubscriptionError",id:"no-subscription-error"},{name:"subscriptionTemplate",id:"subscription-template"}]},t.prototype.registerDefaultBlocks=function(){this.registerBlock("txt",{blockClass:s.teaser.TextBlock}),this.registerBlock("text",{blockClass:s.teaser.TextBlock}),this.registerBlock("date-box",{blockClass:s.teaser.DateBoxBlock}),this.registerBlock("image",{blockClass:s.teaser.ImageBlock}),this.registerBlock("bar-chart",this.blockConfigs.barChartPure),this.registerBlock("multiVertical-bar-chart",this.blockConfigs.barChartD3),this.registerBlock("pie-chart",{blockClass:s.teaser.NewPieChartBlockProduct,defaultConfig:{pieGraphPalette:function(e){var t=this.mappedColors&&this.mappedColors.outflowColor?[this.mappedColors.outflowColor]:["#ff6c53"],s=this.mappedColors&&this.mappedColors.inflowColor?[this.mappedColors.inflowColor]:["#0275be"];return"out"==e?t:s},pieGrayColors:function(){return["#ededed","#d5d6d7","#dfe0e2","#ededed","#dfe0e2","#d5d6d7","#dfe0e2"]},pieOptions:{arcs:{filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}},cornerRadius:{radiusCorner:0}},centerText:{fontSize:10,fontWeight:300,color:"#2C375F"},showInfoContainer:!1}}}),this.registerBlock("arc-chart",{blockClass:s.teaser.PieChartBlockProduct,defaultConfig:{pieGraphPalette:function(e){return"Out"==e?["#ffce40","#ffb608","#ff9819","#fe7d3f","#f9652b","#df4c3a","#c72735"]:["#6787d1","#027ac4","#7390c5","#3095bd","#45a5d3","#5acafa","#95dafb"]},pieOptions:{arcs:{filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}},cornerRadius:{radiusCorner:9}},centerText:{fontSize:15,fontWeight:300},showInfoContainer:!1}}}),this.registerBlock("pin-chart",{blockClass:s.teaser.PinGraphChartBlock,defaultConfig:{desktopScreenWidth:790,pinGraphChartOptions:{maxWidthBarPercent:95,pinChartHeight:.1232,svgHeight:70,svgWidth:280,maxBarHeight:35,labelTop:0,barTop:10,xAxisTop:55,yAxisHeight:0,yAxisTop:0,screen:{ratio_medium:t.consts.ratio_medium,ratio_large:t.consts.ratio_large},margin:{top:43,bottom:40},height:180,chart:{transX:0,transY:10},totalHeight:220,labels:{drawLabels:!1,marginBottom:18,marginTop:4.5},rectangles:{width:9,space:40,borderRadius:{rx:0,ry:0},gradients:{selectedGradient:{id:"selectedGradient",offset:["0%","100%"],stopColors:["#6888d2","#536fb1"]}},filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}},transition:{duration:1e3,delay:500}},selected:{},axis:{translation:{x:0,y:"height"},xAxis:{hide:!1,tickPadding:10,collapsedPadding:{top:22,bottom:15}},yAxis:{x:0,y:0,hide:!0}}}}}),this.registerBlock("pin-graph",{blockClass:s.teaser.PinGraphChartBlock,defaultConfig:{desktopScreenWidth:790,pinGraphChartOptions:{maxWidthBarPercent:91,pinChartHeight:.1232,screen:{ratio_medium:t.consts.ratio_medium,ratio_large:t.consts.ratio_large},margin:{top:35,right:20,bottom:40,left:15},height:102,chart:{transX:0,transY:0},totalHeight:102,labels:{drawLabels:!1,marginBottom:18,marginTop:4.5,marginRight:5},rectangles:{minHeightPercent:.15,width:8,borderRadius:{rx:3,ry:3},marginFromBottom:10,marginFromLeft:0,gradients:{selectedGradient:{id:"selectedGradient",offset1:"0%",offset2:"100%",stopColor1:"#6888d2",stopColor2:"#536fb1"}},filter:{dropShadow:{id:"dropShadow",in:"SourceGraphic",stdDeviation:3,dxOffset:1,dyOffset:2}},transition:{duration:1e3,delay:500}},selected:{},axis:{translation:{x:0,y:"height"},xAxis:{hide:!1,tickPadding:8,minimizedPadding:{top:22,bottom:15,fontSize:12,fontWeight:300,color:"#A94F48"},fontSize:12,fontWeight:300,color:"#000"},yAxis:{hide:!0,x:0,y:0,fontSize:0,fontWeight:0,color:"#000"}}}}}),this.registerBlock("new-pin-chart",{blockClass:s.teaser.PinGraphChartBlock,defaultConfig:{desktopScreenWidth:790,pinGraphChartOptions:{maxWidthBarPercent:95,pinChartHeight:.1232}}}),this.registerBlock("new-pin-graph",{blockClass:s.teaser.PinGraphChartBlock,defaultConfig:{desktopScreenWidth:790,pinGraphChartOptions:{maxWidthBarPercent:91,pinChartHeight:.1232}}}),this.registerBlock("line-chart",{blockClass:s.teaser.NewlineChartBlock,defaultConfig:{lineChartOptions:{screen:{ratio_medium:t.consts.ratio_medium,ratio_large:t.consts.ratio_large},svgHeight:70,svgWidth:280,line_left:21,line_top:14,line_width:238,line_height:28,marginTop:6,area_display:!1,lineStyle_interpolate:"cardinal",lineStyle_thickness:3,xAxis_display:!1,yAxis_display:!1,duration:2e3,dots_radius:4,dots_radius_selected:4.5,labels_display:!1,horizonalLine_display:!1,highlightBy:"last",dotRect:{height:19,yOffset:35,radiusX:20,radiusY:10},dotText:{yOffset:21,paddingLeft:7.5,paddingRight:7.5},dotPolygon:{yOffset:30,points:"20,10 10,10 15,20"}},lineChartPalette:["rgba(169, 167, 167, 1)"]}}),this.registerBlock("h-box",{blockClass:s.teaser.HBoxBlock}),this.registerBlock("tranList",{blockClass:s.teaser.Transactions}),this.registerBlock("entity-selector",{blockClass:s.teaser.EntitySelectorBlock}),this.registerBlock("calendar",{blockClass:s.teaser.CalendarBlock}),this.registerBlock("buttons",{blockClass:s.teaser.Buttons}),this.registerBlock("dateInput",{blockClass:s.teaser.UserInput}),this.registerBlock("numberInput",{blockClass:s.teaser.UserInput})},t.prototype.registerDefaultChartHeplers=function(){this.registerChartHelper("verticalHelper",{helperClass:s.utils.d3Helpers.VerticalChartHelper}),this.registerChartHelper("horizontalHelper",{helperClass:s.utils.d3Helpers.HorizontalChartHelper}),this.registerChartHelper("multiVerticalHelper",{helperClass:s.utils.d3Helpers.MultiVerticalChartHelper}),this.registerChartHelper("multiHorizontalHelper",{helperClass:s.utils.d3Helpers.MultiHorizontalChartHelper}),this.registerChartHelper("pinGraphHelper",{helperClass:s.utils.d3Helpers.PinGraphChartHelper}),this.registerChartHelper("twoPointsLineChartHelper",{helperClass:s.utils.d3Helpers.twoPointsLineChartHelper}),s.story.BlockChartFactory.registerChartHelper("lineChartHelper",{helperClass:s.utils.d3Helpers.NewLineChartHelper})},t.prototype.getTeasersConfig=function(){return{showArrows:!1,height:256,minItemsForDisplayingArrows:2,infiniteCarousel:!1,numItemsDispaly:3,showIndexDots:!0,nextArrowDir:"rtl"}},t.prototype.getTeasersConfigDesktop=function(){return{showArrows:!0,minItemsForDisplayingArrows:2,infiniteCarousel:!0,numItemsDispaly:1,showIndexDots:!0,nextArrowDir:"rtl"}},t.prototype.getTeaserTemplateConfig=function(){return{imageAndText:{teaserDirection:"ltr"}}},t.prototype.getTeaserAssetsTypes=function(){return{"main-image":{defaultAsset:"teaser-image-default",defaultAssetDirectory:"teaser_images",defaultAssetExtension:"svg"},"box-icon1":{defaultAsset:"category-default",defaultAssetDirectory:"category_icons",defaultAssetExtension:"svg"},"box-icon2":{defaultAsset:"category-default",defaultAssetDirectory:"category_icons",defaultAssetExtension:"svg"},transactionDisplay:{defaultAsset:"category-default",defaultAssetDirectory:"category_icons",defaultAssetExtension:"svg"},"main-icon":{defaultAsset:"text-and-image-default",defaultAssetDirectory:"category_icons",defaultAssetExtension:"svg"},"entity-selector1":{defaultAsset:"category-default",defaultAssetDirectory:"category_icons",defaultAssetExtension:"svg"},"feedback-icon":{defaultAsset:"category-default",defaultAssetDirectory:"category_icons",defaultAssetExtension:"svg"}}},e.SkinSetup=t}(window,window.Personetics=window.Personetics||{},jQuery),function(e,i,a){var l=e.d3;i.teaser=i.teaser||{},i.teaser.NewPieChartBlockProduct=i.teaser.NewPieChartBlock.extend({beforeRender:function(e,t){i.teaser.PieChartBlock.prototype.beforeRender.call(this,e,t);t=e.parents(".pstory-dialog-frame").prev(".pstory-dialog-frame").find(".pstory-block-tabs").find(".pstory-button.perso-selected").attr("pstory-id");this.colors=l.scale.ordinal().range(this.getGraphPalette(t)),this.grayColors=l.scale.ordinal().range(this.getGreyColors())},getGraphPalette:function(e){return this.defaultConfig.pieGraphPalette(e)},getGreyColors:function(){return this.defaultConfig.pieGrayColors()},renderPieBase:function(e){i.teaser.PieChartBlock.prototype.renderPieBase.call(this,e),this.renderGrayFilter()},renderGrayFilter:function(){this.svg.append("filter").attr("id",this.grayscaleId).append("feColorMatrix").attr("type","matrix").attr("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0")},renderArcs:function(e){var s=this,e=(i.teaser.PieChartBlock.prototype.renderArcs.call(this,e),this.frameEl.find(".pstory-pie-chart svg .perso-arc path"));a.each(e,function(e,t){l.select(t).style("fill",function(e){return s.grayColors(e.data.category)})})},afterRender:function(){var e=this,t=(e.arcPaths=e.frameEl.find(".pstory-pie-chart svg .perso-arc path"),this.frameEl.find(".pstory-pie-chart svg .perso-arc path.perso-selected")[0]),s=this.getSelectedPathIndex(e.arcPaths),t=(l.select(t).attr("d",e.arcOver.cornerRadius(e.cornerRadiusPie)).style("filter","").style("fill",function(){return e.colors(s)}),l.select(t).moveToFront(),this.layoutInstructions.slices[this.getSelectedPathIndex(e.arcPaths)]),t=(e.updatePieInfoValues(t),1<this.layoutInstructions.slices.length?this.frameEl.find(".pstory-pie-data .pstory-arrow").show():this.frameEl.find(".pstory-pie-data .pstory-arrow").hide(),e.defaultConfig.pieOptions.centerText.color);personetics.config.mappedColors&&personetics.config.mappedColors.brandColor&&(t=personetics.config.mappedColors.brandColor),e.highlightCenterText(t)},bindEvents:function(){var t=this,e=this.frameEl.find(".pstory-next-arrow"),s=this.frameEl.find(".pstory-previous-arrow"),o=t.arcPaths;e.bind("click",function(){var e;t.frameEl.hasClass("perso-minimized")||((e=t.getSelectedPathIndex(o))==o.length-1?(t.moveArcs(0),t.handleClick(t.layoutInstructions.slices[0],0)):(t.moveArcs(++e),t.handleClick(t.layoutInstructions.slices[e],e)))}),s.bind("click",function(){var e;t.frameEl.hasClass("perso-minimized")||(0==(e=t.getSelectedPathIndex(o))?(t.moveArcs(o.length-1),t.handleClick(t.layoutInstructions.slices[o.length-1],o.length-1)):(t.moveArcs(--e),t.handleClick(t.layoutInstructions.slices[e],e)))})},onPieItemClick:function(e,t,s){var o=this,n=a(".perso-arc path.perso-selected"),r=this.grayscaleId;n.length&&(n[0].className.baseVal=i.utils.string.removeClass(n[0].className,"perso-selected"),l.select(n[0]).attr("d",o.arc).style("filter","url(#"+r+")")),l.select(s).attr("d",o.arcOver.cornerRadius(o.cornerRadiusPie)).attr("class","perso-selected").style("filter","").style("fill",function(e,t){return o.colors(t)}),l.select(s).moveToFront(),this.handleClick(e,t),this.updatePieInfoValues(e.data)},updatePieInfoValues:function(e){var t,s,o;!this.options.showInfoContainer||e&&(t='<div class="pstory-pie-amount"><span>'+e.label+"</span></div>",s='<div class="pstory-pie-category"><span>'+e.category+"</span></div>",(o=this.frameEl.find(".pstory-pie-info")).empty(),o.append(t),o.append(s),a(".pstory-pie-amount").css("color",this.colors(e.category)))},moveArcs:function(e){var s=this,t=s.arcPaths[e],o=this.getSelectedIndex();t&&(e!==o&&(o=s.arcPaths[o],l.select(o).attr("d",s.arc).attr("class","")),l.select(t).attr("d",s.arcOver.cornerRadius(s.cornerRadiusPie)).attr("class","perso-selected").style("filter","").style("fill",function(e,t){return s.colors(t)}),l.select(t).moveToFront(),s.updatePieInfoValues(s.layoutInstructions.slices[e]),this.setSelectedIndex(e))},highlightCenterText:function(e){var t=this.frameEl.find(".perso-total-txt")[0];l.select(t).style("fill",e)},doScrollEvent:function(){this.minimized=void 0!==this.minimized?this.minimized:{};var e=0,t=a(".perso-minimized:not(.pstory-block-pie-chart)").last().find(".pstory-block-container"),e=(0<t.length&&(e=t.offset().top+parseFloat(t.outerHeight(!0))),this.minimized.heightPrevFixedElements=e,this.minimized.prevMinimized=t,this.minimized.elementDisplayed=this.frameEl.find(".pstory-pie-data"),this.minimized.elementDisplayed.offset());void 0!==this.minimized.isMinimized&&1==this.minimized.isMinimized&&this.frameEl.offset().top+15>=this.minimized.topFixedContainer?(this.minimized.isMinimized=!1,this.unMinimized()):e.top<=this.minimized.heightPrevFixedElements&&(void 0!==this.minimized.isMinimized&&0!=this.minimized.isMinimized||(this.minimized.isMinimized=!0,this.doMinimized()))},doMinimized:function(){var e=this.frameEl.find(".pstory-block-container"),t=this.frameEl.css("margin-right"),s=this.frameEl.css("margin-left");e.css({"padding-right":t,"padding-left":s}),this.frameEl.height(this.frameEl.outerHeight());t=this.minimized.elementDisplayed.outerHeight()-e.outerHeight()+this.minimized.heightPrevFixedElements,this.minimized.topFixedContainer=t,e.css({top:t+"px"}),s=999,t=this.minimized.prevMinimized;0<t.length&&(s=t.css("z-index")-1),e.css({"z-index":s}),this.frameEl.removeClass("perso-unMinimized"),this.frameEl.addClass("perso-minimized")},unMinimized:function(){this.frameEl.removeClass("perso-minimized"),this.frameEl.addClass("perso-unMinimized")}})}(window,window.Personetics=window.Personetics||{},jQuery),function(e,i,a){var l=e.d3;i.teaser=i.teaser||{},i.teaser.PieChartBlockProduct=i.teaser.PieChartBlock.extend({beforeRender:function(e,t){i.teaser.PieChartBlock.prototype.beforeRender.call(this,e,t);t=e.parents(".pstory-dialog-frame").prev(".pstory-dialog-frame").find(".pstory-block-tabs").find(".pstory-button.perso-selected").attr("pstory-id");this.colors=l.scale.ordinal().range(this.getGraphPalette(t))},getGraphPalette:function(e){return this.defaultConfig.pieGraphPalette(e)},renderPieBase:function(e){i.teaser.PieChartBlock.prototype.renderPieBase.call(this,e),this.renderGrayFilter()},renderGrayFilter:function(){this.svg.append("filter").attr("id",this.grayscaleId).append("feColorMatrix").attr("type","matrix").attr("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0")},renderArcs:function(e){i.teaser.PieChartBlock.prototype.renderArcs.call(this,e);var e=this.frameEl.find(".pstory-pie-chart svg .perso-arc path"),s=this.grayscaleId;a.each(e,function(e,t){l.select(t).style("filter","url(#"+s+")")})},afterRender:function(){var e=this,t=(e.arcPaths=e.frameEl.find(".pstory-pie-chart svg .perso-arc path"),this.frameEl.find(".pstory-pie-chart svg .perso-arc path.perso-selected")[0]),s=this.getSelectedPathIndex(e.arcPaths),t=(l.select(t).attr("d",e.arcOver.cornerRadius(e.cornerRadiusPie)).style("filter","").style("fill",function(){return e.colors(s)}),l.select(t).moveToFront(),this.layoutInstructions.slices[this.getSelectedPathIndex(e.arcPaths)]);e.updatePieInfoValues(t),1<this.layoutInstructions.slices.length?this.frameEl.find(".pstory-pie-data .pstory-arrow").show():this.frameEl.find(".pstory-pie-data .pstory-arrow").hide(),e.highlightCenterText(e.colors(s))},bindEvents:function(){var t=this,e=this.frameEl.find(".pstory-next-arrow"),s=this.frameEl.find(".pstory-previous-arrow"),o=t.arcPaths;e.bind("click",function(){var e;t.frameEl.hasClass("perso-minimized")||((e=t.getSelectedPathIndex(o))==o.length-1?(t.moveArcs(0),t.handleClick(t.layoutInstructions.slices[0],0)):(t.moveArcs(++e),t.handleClick(t.layoutInstructions.slices[e],e)))}),s.bind("click",function(){var e;t.frameEl.hasClass("perso-minimized")||(0==(e=t.getSelectedPathIndex(o))?(t.moveArcs(o.length-1),t.handleClick(t.layoutInstructions.slices[o.length-1],o.length-1)):(t.moveArcs(--e),t.handleClick(t.layoutInstructions.slices[e],e)))})},onPieItemClick:function(e,t,s){var o=this,n=a(".perso-arc path.perso-selected"),r=this.grayscaleId;n.length&&(n[0].className.baseVal=i.utils.string.removeClass(n[0].className,"perso-selected"),l.select(n[0]).attr("d",o.arc).style("filter","url(#"+r+")")),l.select(s).attr("d",o.arcOver.cornerRadius(o.cornerRadiusPie)).attr("class","perso-selected").style("filter","").style("fill",function(e,t){return o.colors(t)}),l.select(s).moveToFront(),this.handleClick(e,t),this.updatePieInfoValues(e.data)},updatePieInfoValues:function(e){var t,s,o;!this.options.showInfoContainer||e&&(t='<div class="pstory-pie-amount"><span>'+e.label+"</span></div>",s='<div class="pstory-pie-category"><span>'+e.category+"</span></div>",(o=this.frameEl.find(".pstory-pie-info")).empty(),o.append(t),o.append(s),a(".pstory-pie-amount").css("color",this.colors(e.category)))},moveArcs:function(e){var s=this,t=s.arcPaths[e],o=this.getSelectedIndex();t&&(e!==o&&(o=s.arcPaths[o],l.select(o).attr("d",s.arc).attr("class","")),l.select(t).attr("d",s.arcOver.cornerRadius(s.cornerRadiusPie)).attr("class","perso-selected").style("filter","").style("fill",function(e,t){return s.colors(t)}),l.select(t).moveToFront(),s.updatePieInfoValues(s.layoutInstructions.slices[e]),this.setSelectedIndex(e))},highlightCenterText:function(e){var t=this.frameEl.find(".perso-total-txt")[0];l.select(t).style("fill",e)},doScrollEvent:function(){this.minimized=void 0!==this.minimized?this.minimized:{};var e=0,t=a(".perso-minimized:not(.pstory-block-pie-chart)").last().find(".pstory-block-container"),e=(0<t.length&&(e=t.offset().top+parseFloat(t.outerHeight(!0))),this.minimized.heightPrevFixedElements=e,this.minimized.prevMinimized=t,this.minimized.elementDisplayed=this.frameEl.find(".pstory-pie-data"),this.minimized.elementDisplayed.offset());void 0!==this.minimized.isMinimized&&1==this.minimized.isMinimized&&this.frameEl.offset().top+15>=this.minimized.topFixedContainer?(this.minimized.isMinimized=!1,this.unMinimized()):e.top<=this.minimized.heightPrevFixedElements&&(void 0!==this.minimized.isMinimized&&0!=this.minimized.isMinimized||(this.minimized.isMinimized=!0,this.doMinimized()))},doMinimized:function(){var e=this.frameEl.find(".pstory-block-container"),t=this.frameEl.css("margin-right"),s=this.frameEl.css("margin-left");e.css({"padding-right":t,"padding-left":s}),this.frameEl.height(this.frameEl.outerHeight());t=this.minimized.elementDisplayed.outerHeight()-e.outerHeight()+this.minimized.heightPrevFixedElements,this.minimized.topFixedContainer=t,e.css({top:t+"px"}),s=999,t=this.minimized.prevMinimized;0<t.length&&(s=t.css("z-index")-1),e.css({"z-index":s}),this.frameEl.removeClass("perso-unMinimized"),this.frameEl.addClass("perso-minimized")},unMinimized:function(){this.frameEl.removeClass("perso-minimized"),this.frameEl.addClass("perso-unMinimized")}})}(window,window.Personetics=window.Personetics||{},jQuery),function(o,a){o.teaser=o.teaser||{},o.teaser.EntitySelectorBlock=o.teaser.Block.extend({initialize:function(e,t,s){o.teaser.Block.prototype.initialize.call(this,e,t,s),this.parent=e,this.layoutInstructions=t;e=this.getHtmlTemplateId(t.class);e&&(this.template=o.UI.Handlebars.templates[e]),null!=s&&(this.defaultConfig=s)},getHtmlTemplateId:function(){return"entitySelector"},$selectors:function(){return{$persoEntityImg:".entity-img",$persoEntitySelectorItemIcon:".perso-entity-selector-item .perso-entity",persoDesktop:"perso-desktop",persoTablet:"perso-tablet",persoEntityIconIndicator:"perso-entity-indicator",persoAboveThreshold:"perso-above-threshold",persoMainCircle:"perso-main-circle",persoPartialCircle:"perso-partial-circle",$persoPartialCircle:".perso-partial-circle",persoAntiClockwise:"perso-anti-clockwise",pstoryBlockButtons:".pstory-block-buttons .pstory-block-content",persoEmptyEntitySelector:"perso-empty-entity-selector",$persoSelectorItem:".perso-entity-selector-item",persoRtl:"perso-rtl",persoHide:"perso-hide",persoConfigButton:".perso-teaser-config-buttons",full:"full",$persoEntityDetails:".perso-entity-details"}},getEntitySelectorConfigs:function(){return{defaultAssetName:"category-default",defaultAssetDirectory:"category_icons",defaultAssetExtension:"svg",useAnimationsInPrecentage:!0,indicatorFillDirectionAntiClockWise:!1,entityDirectionRtl:!1,entitiesToDisplay:3,selectedIndicatorSize:20,selectedIndicatorRadius:18.5,alertThreshold:.5,ViewportToStartAnimate:.5}},beforeRender:function(e,t){o.teaser.Block.prototype.beforeRender.call(this,e,t),this.entitySelectorConfig=this.getEntitySelectorConfigs(),this.texts=this.getTexts(),this.layoutInstructions.assetExtension=this.layoutInstructions.fileType||this.entitySelectorConfig.defaultAssetExtension,this.layoutInstructions.assetDirectory=this.layoutInstructions.directory||this.entitySelectorConfig.defaultAssetDirectory,this.layoutInstructions.baseUrl=this.parent.useRemoteAssets?this.parent.remoteBaseUrl:this.parent.localBaseUrl,this.selectors=this.$selectors(),this.browserData=o.utils.persoBrowserDetector.getBrowserData(),3<this.layoutInstructions.options.length?this.displayedOptions=this.layoutInstructions.options.slice(3):this.displayedOptions=this.layoutInstructions.options},getTexts:function(){return{accessibilityESSettingsButton:o.dictionary.getText("accessibilityESSettingsButton"),accessibilityESOutOfTxt:o.dictionary.getText("accessibilityESOutOfTxt"),accessibilityESButtonTxt:o.dictionary.getText("accessibilityESButtonTxt")}},afterRender:function(e){o.teaser.Block.prototype.afterRender.call(this,e),this.entityIcons=e.find(this.selectors.$persoEntitySelectorItemIcon),!0===this.entitySelectorConfig.entityDirectionRtl&&this.el.addClass(this.selectors.persoRtl),this.prepareIconIndicator(),this.handleButtonsBlock(),this.updateAccessibility(),this.setThemeClasses()},setThemeClasses:function(){personetics.config.theme&&(personetics.config.theme.brandColor&&(o.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoEntityDetails),"perso-theme-brandColor-color"),o.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoSelectorItem),"perso-theme-brandColor-teaser-progress-bar-background")),personetics.config.theme.backgroundColor&&o.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoSelectorItem),"perso-theme-backgroundColor-background"),personetics.config.theme.greyLightColor&&o.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoSelectorItem),"perso-theme-greyLightColor-teaser-indicator-stroke-color"),personetics.config.theme.alertColor&&o.utils.persoTheming.addClassToElement(this.el.find(this.selectors.$persoSelectorItem),"perso-theme-alertColor-teaser-progress-bar-background"))},render:function(){},bindEvents:function(){o.teaser.Block.prototype.bindEvents.call(this),this.handleESAssets()},handleESAssets:function(){var t=this,e=t.el.find(this.selectors.$persoEntityImg);e.on("load",function(){t.remoteAssetsMgr.finishedLoading(this)}),e.on("error",function(){var e=a(this).data(t.defaultAssetConfig.loadingAssetTriesAttrName);e&&e>t.defaultAssetConfig.loadingAssetMaxTries?t.fallbackAsset(this):(e=t.localBaseUrl+"/"+t.entitySelectorConfig.defaultAssetDirectory+"/"+t.entitySelectorConfig.defaultAssetName+"."+t.entitySelectorConfig.defaultAssetExtension,t.remoteAssetsMgr.setDefaultAsset(this,e),t.remoteAssetsMgr.setAssetLoadingTriesAttr(this))})},prepareIconIndicator:function(){for(var e=this.entityIcons,t=this.layoutInstructions.options,s=this.browserData.deviceType===this.selectors.persoDesktop||this.browserData.deviceType===this.selectors.persoTablet,o=this.entitySelectorConfig,n=this.getValueByScreenWidth(o.selectedIndicatorSize,s),r=this.getValueByScreenWidth(o.selectedIndicatorRadius,s),i=0;i<e.length&&i<o.entitiesToDisplay;i++)this.renderIconIndicator(i,{icons:e,config:o,size:n,radius:r,entityOptions:t})},handleButtonsBlock:function(){var e=this.el;e&&(e=e.parent().find(this.selectors.pstoryBlockButtons))&&e.get(0)&&!e.get(0).firstElementChild&&e.parent().addClass(this.selectors.persoHide)},renderIndicatorMain:function(e,t,s,o){d3.select(e).append("svg").attr("class",t.persoEntityIconIndicator).append("circle").attr("class",t.persoMainCircle).attr("cx",s).attr("cy",s).attr("r",o)},renderIndicatorPartial:function(e,t,s,o,n,r){d3.select(e).select("svg").append("circle").attr("class",t.persoPartialCircle).attr("cx",s).attr("cy",s).attr("r",o).attr("stroke-dashoffset",n).attr("stroke-dasharray",n),this.entitySelectorConfig.useAnimationsInPrecentage?setTimeout(function(){a(e).find(t.$persoPartialCircle).css({"stroke-dashoffset":n-n*r,transition:"stroke-dashoffset 1s linear"})},0):a(e).find(t.$persoPartialCircle).css("stroke-dashoffset",n-n*r)},renderIconIndicator:function(e,t){var s=t.icons.get(e),o=0,n=2*Math.PI*t.radius,r=a(s),i=this.selectors;e<t.entityOptions.length&&t.entityOptions[e].spendingPercentage&&(o=(o=t.entityOptions[e].spendingPercentage)<0?0:1<o?1:o)>t.config.alertThreshold&&r.addClass(i.persoAboveThreshold),this.renderIndicatorMain(s,i,t.size,t.radius),this.renderIndicatorPartial(s,i,t.size,t.radius,n,o),!0===t.config.indicatorFillDirectionAntiClockWise&&r.parent().addClass(i.persoAntiClockwise)},getValueByScreenWidth:function(e,t){return t?e:o.story.ProductSkinControler.prototype.getValueByScreenWidth(e)},updateEntitiesAccText:function(e,t,s,o,n){var r=o+1;a(this.el.find(this.selectors.$persoSelectorItem)[o]).attr("aria-label",e+", "+t+", "+s+","+this.texts.accessibilityESButtonTxt+" "+r+" "+this.texts.accessibilityESOutOfTxt+" "+n)},updateAccessibility:function(){for(var e=this.layoutInstructions.options,t=e.length,s=0;s<t;s++){var o,n,r=s+1,i=e[s];i&&(o=i.budgetCategoryName||"",n=i.text||"",i=i.text2||"",a(this.el.find(this.selectors.$persoSelectorItem)[s]).attr("aria-label",o+", "+n+", "+i+", "+this.texts.accessibilityESButtonTxt+" "+r+" "+this.texts.accessibilityESOutOfTxt+" "+t))}a(this.selectors.persoConfigButton).attr("aria-label",this.texts.accessibilityESSettingsButton)}})}((window,window.Personetics=window.Personetics||{}),jQuery);
//# sourceMappingURL=personetics-widget.min.js.map